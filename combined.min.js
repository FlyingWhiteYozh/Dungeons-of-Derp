/*! @license Firebase v2.2.1
    License: https://www.firebase.com/terms/terms-of-service.html */(function(){function n(e){return void 0!==e}function ba(){}function ca(e){e.Ob=function(){return e.kf?e.kf:e.kf=new e}}function da(e){var t=typeof e;if("object"==t){if(!e)return"null";if(e instanceof Array)return"array";if(e instanceof Object)return t;var n=Object.prototype.toString.call(e);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof e.length&&"undefined"!=typeof e.splice&&"undefined"!=typeof e.propertyIsEnumerable&&!e.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||"undefined"!=typeof e.call&&"undefined"!=typeof e.propertyIsEnumerable&&!e.propertyIsEnumerable("call"))return"function"}else if("function"==t&&"undefined"==typeof e.call)return"object";return t}function ea(e){return"array"==da(e)}function fa(e){var t=da(e);return"array"==t||"object"==t&&"number"==typeof e.length}function p(e){return"string"==typeof e}function ga(e){return"number"==typeof e}function ha(e){return"function"==da(e)}function ia(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function ja(e,t,n){return e.call.apply(e.bind,arguments)}function ka(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function q(e,t,n){return q=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ja:ka,q.apply(null,arguments)}function ma(e,t){function n(){}n.prototype=t.prototype,e.Kg=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Gg=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function r(e,t){for(var n in e)t.call(void 0,e[n],n,e)}function na(e,t){var n={},r;for(r in e)n[r]=t.call(void 0,e[r],r,e);return n}function oa(e,t){for(var n in e)if(!t.call(void 0,e[n],n,e))return!1;return!0}function pa(e){var t=0,n;for(n in e)t++;return t}function qa(e){for(var t in e)return t}function ra(e){var t=[],n=0,r;for(r in e)t[n++]=e[r];return t}function sa(e){var t=[],n=0,r;for(r in e)t[n++]=r;return t}function ta(e,t){for(var n in e)if(e[n]==t)return!0;return!1}function ua(e,t,n){for(var r in e)if(t.call(n,e[r],r,e))return r}function va(e,t){var n=ua(e,t,void 0);return n&&e[n]}function wa(e){for(var t in e)return!1;return!0}function xa(e){var t={},n;for(n in e)t[n]=e[n];return t}function za(e,t){for(var n,r,i=1;i<arguments.length;i++){r=arguments[i];for(n in r)e[n]=r[n];for(var s=0;s<ya.length;s++)n=ya[s],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Aa(a){a=String(a);if(/^\s*$/.test(a)?0:/^[\],:{}\s\u2028\u2029]*$/.test(a.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r\u2028\u2029\x00-\x08\x0a-\x1f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,"")))try{return eval("("+a+")")}catch(b){}throw Error("Invalid JSON string: "+a)}function Ba(){this.Ld=void 0}function Ca(e,t,n){switch(typeof t){case"string":Da(t,n);break;case"number":n.push(isFinite(t)&&!isNaN(t)?t:"null");break;case"boolean":n.push(t);break;case"undefined":n.push("null");break;case"object":if(null==t){n.push("null");break}if(ea(t)){var r=t.length;n.push("[");for(var i="",s=0;s<r;s++)n.push(i),i=t[s],Ca(e,e.Ld?e.Ld.call(t,String(s),i):i,n),i=",";n.push("]");break}n.push("{"),r="";for(s in t)Object.prototype.hasOwnProperty.call(t,s)&&(i=t[s],"function"!=typeof i&&(n.push(r),Da(s,n),n.push(":"),Ca(e,e.Ld?e.Ld.call(t,s,i):i,n),r=","));n.push("}");break;case"function":break;default:throw Error("Unknown type: "+typeof t)}}function Da(e,t){t.push('"',e.replace(Fa,function(e){if(e in Ea)return Ea[e];var t=e.charCodeAt(0),n="\\u";return 16>t?n+="000":256>t?n+="00":4096>t&&(n+="0"),Ea[e]=n+t.toString(16)}),'"')}function Ga(){return Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^la()).toString(36)}function Ka(){this.Sa=-1}function La(){this.Sa=-1,this.Sa=64,this.R=[],this.fe=[],this.Ef=[],this.Ed=[],this.Ed[0]=128;for(var e=1;e<this.Sa;++e)this.Ed[e]=0;this.Xd=this.Tb=0,this.reset()}function Ma(e,t,n){n||(n=0);var r=e.Ef;if(p(t))for(var i=0;16>i;i++)r[i]=t.charCodeAt(n)<<24|t.charCodeAt(n+1)<<16|t.charCodeAt(n+2)<<8|t.charCodeAt(n+3),n+=4;else for(i=0;16>i;i++)r[i]=t[n]<<24|t[n+1]<<16|t[n+2]<<8|t[n+3],n+=4;for(i=16;80>i;i++){var s=r[i-3]^r[i-8]^r[i-14]^r[i-16];r[i]=(s<<1|s>>>31)&4294967295}t=e.R[0],n=e.R[1];for(var o=e.R[2],u=e.R[3],a=e.R[4],f,i=0;80>i;i++)40>i?20>i?(s=u^n&(o^u),f=1518500249):(s=n^o^u,f=1859775393):60>i?(s=n&o|u&(n|o),f=2400959708):(s=n^o^u,f=3395469782),s=(t<<5|t>>>27)+s+a+f+r[i]&4294967295,a=u,u=o,o=(n<<30|n>>>2)&4294967295,n=t,t=s;e.R[0]=e.R[0]+t&4294967295,e.R[1]=e.R[1]+n&4294967295,e.R[2]=e.R[2]+o&4294967295,e.R[3]=e.R[3]+u&4294967295,e.R[4]=e.R[4]+a&4294967295}function Ta(e,t){var n=Ua(e,t,void 0);return 0>n?null:p(e)?e.charAt(n):e[n]}function Ua(e,t,n){for(var r=e.length,i=p(e)?e.split(""):e,s=0;s<r;s++)if(s in i&&t.call(n,i[s],s,e))return s;return-1}function Va(e,n){var r=Na(e,n);0<=r&&t.splice.call(e,r,1)}function Wa(e,n,r){return 2>=arguments.length?t.slice.call(e,n):t.slice.call(e,n,r)}function Xa(e,t){e.sort(t||Ya)}function Ya(e,t){return e>t?1:e<t?-1:0}function fb(e,t){if(!fa(e))throw Error("encodeByteArray takes an array as a parameter");gb();for(var n=t?db:cb,r=[],i=0;i<e.length;i+=3){var s=e[i],o=i+1<e.length,u=o?e[i+1]:0,a=i+2<e.length,f=a?e[i+2]:0,l=s>>2,s=(s&3)<<4|u>>4,u=(u&15)<<2|f>>6,f=f&63;a||(f=64,o||(u=64)),r.push(n[l],n[s],n[u],n[f])}return r.join("")}function gb(){if(!cb){cb={},db={},eb={};for(var e=0;65>e;e++)cb[e]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(e),db[e]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_.".charAt(e),eb[db[e]]=e,62<=e&&(eb["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(e)]=e)}}function u(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function v(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]}function hb(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function ib(e){var t={};return hb(e,function(e,n){t[e]=n}),t}function x(e,t,n,r){var i;r<t?i="at least "+t:r>n&&(i=0===n?"none":"no more than "+n);if(i)throw Error(e+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")}function z(e,t,n){var r="";switch(t){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}return e=e+" failed: "+(r+" argument ")}function A(e,t,r,i){if((!i||n(r))&&!ha(r))throw Error(z(e,t,i)+"must be a valid function.")}function jb(e,t,r){if(n(r)&&(!ia(r)||null===r))throw Error(z(e,t,!0)+"must be a valid context object.")}function kb(e){return"undefined"!=typeof JSON&&n(JSON.parse)?JSON.parse(e):Aa(e)}function B(e){if("undefined"!=typeof JSON&&n(JSON.stringify))e=JSON.stringify(e);else{var t=[];Ca(new Ba,e,t),e=t.join("")}return e}function lb(){this.Nd=C}function mb(){}function ob(e,t,n){this.Bf=e,this.Ia=t,this.Dd=n}function sb(){this.ob=[]}function tb(e,t){for(var n=null,r=0;r<t.length;r++){var i=t[r],s=i.Rb();null===n||s.aa(n.Rb())||(e.ob.push(n),n=null),null===n&&(n=new ub(s)),n.add(i)}n&&e.ob.push(n)}function vb(e,t,n){tb(e,n),wb(e,function(e){return e.aa(t)})}function xb(e,t,n){tb(e,n),wb(e,function(e){return e.contains(t)||t.contains(e)})}function wb(e,t){for(var n=!0,r=0;r<e.ob.length;r++){var i=e.ob[r];if(i)if(i=i.Rb(),t(i)){for(var i=e.ob[r],s=0;s<i.kd.length;s++){var o=i.kd[s];if(null!==o){i.kd[s]=null;var u=o.Mb();yb&&zb("event: "+o.toString()),Ab(u)}}e.ob[r]=null}else n=!1}n&&(e.ob=[])}function ub(e){this.Ea=e,this.kd=[]}function D(e,t,n,r){this.type=e,this.Ha=t,this.Ua=n,this.De=r,this.Jd=void 0}function Bb(e){return new D(Cb,e)}function Db(e,t,n,r){this.oe=t,this.Rd=n,this.Jd=r,this.jd=e}function Eb(e,t,n){this.oe=e,this.error=t,this.path=n}function qb(e,t,n){this.A=e,this.Z=t,this.Lb=n}function Fb(e){return e.Z}function pb(e,t){return e.Z&&!e.Lb||e.A.Da(t)}function Gb(e,t){this.C=e,this.Pd=t}function Hb(e,t,n,r){return new Gb(new qb(t,n,r),e.Pd)}function Ib(e){return e.C.Z?e.C.j():null}function rb(e){return e.Pd.Z?e.Pd.j():null}function Jb(e){this.Pf=e,this.sd=null}function Kb(e,t){this.zf={},this.Td=new Jb(e),this.S=t;var n=1e4+2e4*Math.random();setTimeout(q(this.tf,this),Math.floor(n))}function Lb(){this.uc={}}function Mb(e,t,r){n(r)||(r=1),u(e.uc,t)||(e.uc[t]=0),e.uc[t]+=r}function Pb(e){return e=e.toString(),Nb[e]||(Nb[e]=new Lb),Nb[e]}function Qb(e,t){var n=e.toString();return Ob[n]||(Ob[n]=t()),Ob[n]}function E(e,t){this.name=e,this.V=t}function Rb(e,t){return new E(e,t)}function Sb(e,t){return Tb(e.name,t.name)}function Ub(e,t){return Tb(e,t)}function Vb(e,t,n){this.type=Wb,this.source=e,this.path=t,this.Ga=n}function Xb(e,t){this.type=Yb,this.source=Zb,this.path=e,this.Ne=t}function $b(e,t){this.type=ac,this.source=e,this.path=t}function bc(e,t){this.Ja=e,this.va=t?t:cc}function dc(e,t){for(var n,r=e.va,i=null;!r.e();){n=e.Ja(t,r.key);if(0===n){if(r.left.e())return i?i.key:null;for(r=r.left;!r.right.e();)r=r.right;return r.key}0>n?r=r.left:0<n&&(i=r,r=r.right)}throw Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}function ec(e,t,n,r,i){this.Md=i||null,this.ye=r,this.Na=[];for(i=1;!e.e();)if(i=t?n(e.key,t):1,r&&(i*=-1),0>i)e=this.ye?e.left:e.right;else{if(0===i){this.Na.push(e);break}this.Na.push(e),e=this.ye?e.right:e.left}}function I(e){if(0===e.Na.length)return null;var t=e.Na.pop(),n;n=e.Md?e.Md(t.key,t.value):{key:t.key,value:t.value};if(e.ye)for(t=t.left;!t.e();)e.Na.push(t),t=t.right;else for(t=t.right;!t.e();)e.Na.push(t),t=t.left;return n}function fc(e){if(0===e.Na.length)return null;var t;return t=e.Na,t=t[t.length-1],e.Md?e.Md(t.key,t.value):{key:t.key,value:t.value}}function gc(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:!0,this.left=null!=r?r:cc,this.right=null!=i?i:cc}function hc(e){return e.left.e()?e:hc(e.left)}function jc(e){return e.left.e()?cc:(e.left.ca()||e.left.left.ca()||(e=kc(e)),e=e.Y(null,null,null,jc(e.left),null),ic(e))}function ic(e){return e.right.ca()&&!e.left.ca()&&(e=nc(e)),e.left.ca()&&e.left.left.ca()&&(e=lc(e)),e.left.ca()&&e.right.ca()&&(e=mc(e)),e}function kc(e){return e=mc(e),e.right.left.ca()&&(e=e.Y(null,null,null,null,lc(e.right)),e=nc(e),e=mc(e)),e}function nc(e){return e.right.Y(null,null,e.color,e.Y(null,null,!0,null,e.right.left),null)}function lc(e){return e.left.Y(null,null,e.color,null,e.Y(null,null,!0,e.left.right,null))}function mc(e){return e.Y(null,null,!e.color,e.left.Y(null,null,!e.left.color,null,null),e.right.Y(null,null,!e.right.color,null,null))}function oc(){}function pc(e,t){return e&&"object"==typeof e?(J(".sv"in e,"Unexpected leaf node or priority contents"),t[e[".sv"]]):e}function qc(e,t){var n=new rc;return sc(e,new K(""),function(e,r){n.ec(e,tc(r,t))}),n}function tc(e,t){var n=e.L().I(),n=pc(n,t),r;if(e.M()){var i=pc(e.za(),t);return i!==e.za()||n!==e.L().I()?new uc(i,L(n)):e}return r=e,n!==e.L().I()&&(r=r.$(new uc(n))),e.U(M,function(e,n){var i=tc(n,t);i!==n&&(r=r.P(e,i))}),r}function K(e,t){if(1==arguments.length){this.w=e.split("/");for(var n=0,r=0;r<this.w.length;r++)0<this.w[r].length&&(this.w[n]=this.w[r],n++);this.w.length=n,this.da=0}else this.w=e,this.da=t}function N(e,t){var n=O(e);if(null===n)return t;if(n===O(t))return N(H(e),H(t));throw Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function O(e){return e.da>=e.w.length?null:e.w[e.da]}function vc(e){return e.w.length-e.da}function H(e){var t=e.da;return t<e.w.length&&t++,new K(e.w,t)}function wc(e){return e.da<e.w.length?e.w[e.w.length-1]:null}function xc(){this.children={},this.ad=0,this.value=null}function yc(e,t,n){this.yd=e?e:"",this.Oc=t?t:null,this.A=n?n:new xc}function zc(e,t){for(var n=t instanceof K?t:new K(t),r=e,i;null!==(i=O(n));)r=new yc(i,r,v(r.A.children,i)||new xc),n=H(n);return r}function Ac(e,t){J("undefined"!=typeof t,"Cannot set value to undefined"),e.A.value=t,Bc(e)}function Cc(e,t,n,r){n&&!r&&t(e),e.U(function(e){Cc(e,t,!0,r)}),n&&r&&t(e)}function Dc(e,t){for(var n=e.parent();null!==n&&!t(n);)n=n.parent()}function Bc(e){if(null!==e.Oc){var t=e.Oc,n=e.yd,r=e.e(),i=u(t.A.children,n);r&&i?(delete t.A.children[n],t.A.ad--,Bc(t)):r||i||(t.A.children[n]=e.A,t.A.ad++,Bc(t))}}function Ec(){this.pc={}}function Fc(e){this.vc=e,this.Id="firebase:"}function Gc(e){try{if("undefined"!=typeof window&&"undefined"!=typeof window[e]){var t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new Fc(t)}}catch(n){}return new Ec}function Ic(e,t,n,r,i){this.host=e.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.Bb=t,this.ub=n,this.Eg=r,this.Hd=i||"",this.Ma=Hc.get("host:"+e)||this.host}function Jc(e,t){t!==e.Ma&&(e.Ma=t,"s-"===e.Ma.substr(0,2)&&Hc.set("host:"+e.host,e.Ma))}function J(e,t){if(!e)throw Lc(t)}function Lc(e){return Error("Firebase INTERNAL ASSERT FAILED:"+e)}function Mc(e){try{var t;if("undefined"!=typeof atob)t=atob(e);else{gb();for(var n=eb,r=[],i=0;i<e.length;){var s=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0;++i;var u=i<e.length?n[e.charAt(i)]:64;++i;var a=i<e.length?n[e.charAt(i)]:64;++i;if(null==s||null==o||null==u||null==a)throw Error();r.push(s<<2|o>>4),64!=u&&(r.push(o<<4&240|u>>2),64!=a&&r.push(u<<6&192|a))}if(8192>r.length)t=String.fromCharCode.apply(null,r);else{e="";for(n=0;n<r.length;n+=8192)e+=String.fromCharCode.apply(null,Wa(r,n,n+8192));t=e}}return t}catch(f){zb("base64Decode failed: ",f)}return null}function Nc(e){var t=Oc(e);e=new La,e.update(t);var t=[],n=8*e.Xd;56>e.Tb?e.update(e.Ed,56-e.Tb):e.update(e.Ed,e.Sa-(e.Tb-56));for(var r=e.Sa-1;56<=r;r--)e.fe[r]=n&255,n/=256;Ma(e,e.fe);for(r=n=0;5>r;r++)for(var i=24;0<=i;i-=8)t[n]=e.R[r]>>i&255,++n;return fb(t)}function Pc(e){for(var t="",n=0;n<arguments.length;n++)t=fa(arguments[n])?t+Pc.apply(null,arguments[n]):"object"==typeof arguments[n]?t+B(arguments[n]):t+arguments[n],t+=" ";return t}function zb(e){!0===Qc&&(Qc=!1,null===yb&&!0===P.get("logging_enabled")&&Rc(!0));if(yb){var t=Pc.apply(null,arguments);yb(t)}}function Sc(e){return function(){zb(e,arguments)}}function Tc(e){if("undefined"!=typeof console){var t="FIREBASE INTERNAL ERROR: "+Pc.apply(null,arguments);"undefined"!=typeof console.error?console.error(t):console.log(t)}}function Uc(e){var t=Pc.apply(null,arguments);throw Error("FIREBASE FATAL ERROR: "+t)}function Q(e){if("undefined"!=typeof console){var t="FIREBASE WARNING: "+Pc.apply(null,arguments);"undefined"!=typeof console.warn?console.warn(t):console.log(t)}}function Vc(e){var t="",n="",r="",i="",s=!0,o="https",u=443;if(p(e)){var a=e.indexOf("//");0<=a&&(o=e.substring(0,a-1),e=e.substring(a+2)),a=e.indexOf("/"),-1===a&&(a=e.length),t=e.substring(0,a),i="",e=e.substring(a).split("/");for(a=0;a<e.length;a++)if(0<e[a].length){var f=e[a];try{f=decodeURIComponent(f.replace(/\+/g," "))}catch(l){}i+="/"+f}e=t.split("."),3===e.length?(n=e[1],r=e[0].toLowerCase()):2===e.length&&(n=e[0]),a=t.indexOf(":"),0<=a&&(s="https"===o||"wss"===o,u=t.substring(a+1),isFinite(u)&&(u=String(u)),u=p(u)?/^\s*-?0x/i.test(u)?parseInt(u,16):parseInt(u,10):NaN)}return{host:t,port:u,domain:n,Bg:r,Bb:s,scheme:o,Pc:i}}function Wc(e){return ga(e)&&(e!=e||e==Number.POSITIVE_INFINITY||e==Number.NEGATIVE_INFINITY)}function Xc(e){if("complete"===document.readyState)e();else{var t=!1,n=function(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}}function Tb(e,t){if(e===t)return 0;if("[MIN_NAME]"===e||"[MAX_NAME]"===t)return-1;if("[MIN_NAME]"===t||"[MAX_NAME]"===e)return 1;var n=Yc(e),r=Yc(t);return null!==n?null!==r?0==n-r?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1}function Zc(e,t){if(t&&e in t)return t[e];throw Error("Missing required key ("+e+") in object: "+B(t))}function $c(e){if("object"!=typeof e||null===e)return B(e);var t=[],n;for(n in e)t.push(n);t.sort(),n="{";for(var r=0;r<t.length;r++)0!==r&&(n+=","),n+=B(t[r]),n+=":",n+=$c(e[t[r]]);return n+"}"}function ad(e,t){if(e.length<=t)return[e];for(var n=[],r=0;r<e.length;r+=t)r+t>e?n.push(e.substring(r,e.length)):n.push(e.substring(r,r+t));return n}function bd(e,t){if(ea(e))for(var n=0;n<e.length;++n)t(n,e[n]);else r(e,t)}function cd(e){J(!Wc(e),"Invalid JSON number");var t,n,r,i;0===e?(r=n=0,t=-Infinity===1/e?1:0):(t=0>e,e=Math.abs(e),e>=Math.pow(2,-1022)?(r=Math.min(Math.floor(Math.log(e)/Math.LN2),1023),n=r+1023,r=Math.round(e*Math.pow(2,52-r)-Math.pow(2,52))):(n=0,r=Math.round(e/Math.pow(2,-1074)))),i=[];for(e=52;e;--e)i.push(r%2?1:0),r=Math.floor(r/2);for(e=11;e;--e)i.push(n%2?1:0),n=Math.floor(n/2);i.push(t?1:0),i.reverse(),t=i.join(""),n="";for(e=0;64>e;e+=8)r=parseInt(t.substr(e,8),2).toString(16),1===r.length&&(r="0"+r),n+=r;return n.toLowerCase()}function Yc(e){return dd.test(e)&&(e=Number(e),-2147483648<=e&&2147483647>=e)?e:null}function Ab(e){try{e()}catch(t){setTimeout(function(){throw Q("Exception was thrown by user callback.",t.stack||""),t},Math.floor(0))}}function R(e,t){if(ha(e)){var n=Array.prototype.slice.call(arguments,1).slice();Ab(function(){e.apply(null,n)})}}function Oc(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);55296<=i&&56319>=i&&(i-=55296,r++,J(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(i<<10)+(e.charCodeAt(r)-56320)),128>i?t[n++]=i:(2048>i?t[n++]=i>>6|192:(65536>i?t[n++]=i>>12|224:(t[n++]=i>>18|240,t[n++]=i>>12&63|128),t[n++]=i>>6&63|128),t[n++]=i&63|128)}return t}function ed(e){var t={},n={},r={},i="";try{var s=e.split("."),t=kb(Mc(s[0])||""),n=kb(Mc(s[1])||""),i=s[2],r=n.d||{};delete n.d}catch(o){}return{Hg:t,je:n,data:r,yg:i}}function fd(e){return e=ed(e).je,"object"==typeof e&&e.hasOwnProperty("iat")?v(e,"iat"):null}function gd(e){e=ed(e);var t=e.je;return!!e.yg&&!!t&&"object"==typeof t&&t.hasOwnProperty("iat")}function hd(e){this.W=e,this.g=e.n.g}function id(e,t,n,r){var i=[],s=[];return Oa(t,function(t){"child_changed"===t.type&&e.g.ve(t.De,t.Ha)&&s.push(new D("child_moved",t.Ha,t.Ua))}),jd(e,i,"child_removed",t,r,n),jd(e,i,"child_added",t,r,n),jd(e,i,"child_moved",s,r,n),jd(e,i,"child_changed",t,r,n),jd(e,i,Cb,t,r,n),i}function jd(e,t,n,r,i,s){r=Pa(r,function(e){return e.type===n}),Xa(r,q(e.Qf,e)),Oa(r,function(n){var r=kd(e,n,s);Oa(i,function(i){i.wf(n.type)&&t.push(i.createEvent(r,e.W))})})}function kd(e,t,n){return"value"!==t.type&&"child_removed"!==t.type&&(t.Jd=n.gf(t.Ua,t.Ha,e.g)),t}function ld(){this.Za={}}function md(e,t){var n=t.type,r=t.Ua;J("child_added"==n||"child_changed"==n||"child_removed"==n,"Only child changes supported for tracking"),J(".priority"!==r,"Only non-priority child changes can be tracked.");var i=v(e.Za,r);if(i){var s=i.type;if("child_added"==n&&"child_removed"==s)e.Za[r]=new D("child_changed",t.Ha,r,i.Ha);else if("child_removed"==n&&"child_added"==s)delete e.Za[r];else if("child_removed"==n&&"child_changed"==s)e.Za[r]=new D("child_removed",i.De,r);else if("child_changed"==n&&"child_added"==s)e.Za[r]=new D("child_added",t.Ha,r);else{if("child_changed"!=n||"child_changed"!=s)throw Lc("Illegal combination of changes: "+t+" occurred after "+i);e.Za[r]=new D("child_changed",t.Ha,r,i.De)}}else e.Za[r]=t}function nd(e,t,n){this.Hb=e,this.lb=t,this.nb=n||null}function od(e,t,n){this.ea=e,this.lb=t,this.nb=n}function pd(e){this.g=e}function qd(e){this.ue=new pd(e.g),this.g=e.g;var t;e.ia?(t=rd(e),t=e.g.td(sd(e),t)):t=e.g.xd(),this.Vc=t,e.ra?(t=td(e),e=e.g.td(vd(e),t)):e=e.g.vd(),this.xc=e}function wd(e){this.na=new qd(e),this.g=e.g,J(e.la,"Only valid if limit has been set"),this.sa=e.sa,this.Ab=""===e.Fb?!e.ia:"l"!==e.Fb}function xd(e,t,n,r,i,s){var o;if(e.Ab){var u=yd(e.g);o=function(e,t){return u(t,e)}}else o=yd(e.g);J(t.vb()==e.sa,"");var a=new E(n,r),f=e.Ab?zd(t,e.g):Ad(t,e.g),l=e.na.matches(a);if(t.Da(n)){var c=t.K(n),f=i.re(e.g,f,e.Ab);return null!=f&&f.name==n&&(f=i.re(e.g,f,e.Ab)),i=null==f?1:o(f,a),l&&!r.e()&&0<=i?(null!=s&&md(s,new D("child_changed",r,n,c)),t.P(n,r)):(null!=s&&md(s,new D("child_removed",c,n)),t=t.P(n,C),null!=f&&e.na.matches(f)?(null!=s&&md(s,new D("child_added",f.V,f.name)),t.P(f.name,f.V)):t)}return r.e()?t:l&&0<=o(f,a)?(null!=s&&(md(s,new D("child_removed",f.V,f.name)),md(s,new D("child_added",r,n))),t.P(n,r).P(f.name,C)):t}function Bd(e,t){this.be=e,this.Of=t}function Cd(e){this.G=e}function Jd(e,t,n,r,i,s){var o=t.C;if(null!=r.kc(n))return t;var u;if(n.e())J(Fb(t.o()),"If change path is empty, we must have complete server data"),t.o().Lb?(i=rb(t),r=r.qc(i instanceof T?i:C)):r=r.qa(rb(t)),s=e.G.pa(t.C.j(),r,s);else{var a=O(n);if(".priority"==a)J(1==vc(n),"Can't have a priority with additional path components"),s=o.j(),u=t.o().j(),r=r.Zc(n,s,u),s=null!=r?e.G.$(s,r):o.j();else{var f=H(n);pb(o,a)?(u=t.o().j(),r=r.Zc(n,o.j(),u),r=null!=r?o.j().K(a).F(f,r):o.j().K(a)):r=r.Ta(a,t.o()),s=null!=r?e.G.F(o.j(),a,r,i,s):o.j()}}return Hb(t,s,o.Z||n.e(),e.G.Ca())}function Ed(e,t,n,r,i,s,o,u){var a=t.o();o=o?e.G:e.G.Nb();if(n.e())r=o.pa(a.j(),r,null);else if(o.Ca()&&!a.Lb)r=a.j().F(n,r),r=o.pa(a.j(),r,null);else{var f=O(n);if((n.e()?!a.Z||a.Lb:!pb(a,O(n)))&&1<vc(n))return t;r=a.j().K(f).F(H(n),r),r=".priority"==f?o.$(a.j(),r):o.F(a.j(),f,r,nb,null)}return a=a.Z||n.e(),t=new Gb(t.C,new qb(r,a,o.Ca())),Jd(e,t,n,i,new ob(i,t,s),u)}function Dd(e,t,n,r,i,s,o){var u=t.C;i=new ob(i,t,s);if(n.e())o=e.G.pa(t.C.j(),r,o),e=Hb(t,o,!0,e.G.Ca());else if(s=O(n),".priority"===s)o=e.G.$(t.C.j(),r),e=Hb(t,o,u.Z,u.Lb);else{var a=H(n);n=u.j().K(s);if(!a.e()){var f=i.ff(s);r=null!=f?".priority"===wc(a)&&f.ka(a.parent()).e()?f:f.F(a,r):C}n.aa(r)?e=t:(o=e.G.F(u.j(),s,r,i,o),e=Hb(t,o,u.Z,e.G.Ca()))}return e}function Gd(e,t,n,r,i,s,o){var u=t;return Kd(r,function(r,l){var h=n.u(r);pb(t.C,O(h))&&(u=Dd(e,u,h,l,i,s,o))}),Kd(r,function(r,l){var h=n.u(r);pb(t.C,O(h))||(u=Dd(e,u,h,l,i,s,o))}),u}function Ld(e,t){return Kd(t,function(t,n){e=e.F(t,n)}),e}function Hd(e,t,n,r,i,s,o,u){if(t.o().j().e()&&!Fb(t.o()))return t;var a=t;n=n.e()?r:Md(Nd,n,r);var f=t.o().j();return n.children.fa(function(n,r){if(f.Da(n)){var c=t.o().j().K(n),c=Ld(c,r);a=Ed(e,a,new K(n),c,i,s,o,u)}}),n.children.fa(function(n,r){var c=!Fb(t.o())&&null==r.value;f.Da(n)||c||(c=t.o().j().K(n),c=Ld(c,r),a=Ed(e,a,new K(n),c,i,s,o,u))}),a}function Id(e,t,n,r,i,s){if(null!=r.kc(n))return t;var o=new ob(r,t,i),u=i=t.C.j();if(Fb(t.o())){if(n.e())i=r.qa(rb(t)),u=e.G.pa(t.C.j(),i,s);else if(".priority"===O(n)){var a=r.Ta(O(n),t.o());null==a||i.e()||i.L().aa(a)||(u=e.G.$(i,a))}else a=O(n),i=r.Ta(a,t.o()),null!=i&&(u=e.G.F(t.C.j(),a,i,o,s));i=!0}else if(t.C.Z||n.e())u=i,i=t.C.j(),i.M()||i.U(M,function(n){var i=r.Ta(n,t.o());null!=i&&(u=e.G.F(u,n,i,o,s))}),i=t.C.Z;else{a=O(n);if(1==vc(n)||pb(t.C,a))n=r.Ta(a,t.o()),null!=n&&(u=e.G.F(i,a,n,o,s));i=!1}return Hb(t,u,i,e.G.Ca())}function Od(e,t){this.W=e;var n=e.n,r=new pd(n.g),n=Pd(n)?new pd(n.g):n.la?new wd(n):new qd(n);this.sf=new Cd(n);var i=t.o(),s=t.C,o=r.pa(C,i.j(),null),u=n.pa(C,s.j(),null);this.Ia=new Gb(new qb(u,s.Z,n.Ca()),new qb(o,i.Z,r.Ca())),this.Va=[],this.Uf=new hd(e)}function Qd(e){return e.W}function Sd(e,t){var n=e.Ia.C,r=[];return n.j().M()||n.j().U(M,function(e,t){r.push(new D("child_added",t,e))}),n.Z&&r.push(Bb(n.j())),Rd(e,r,n.j(),t)}function Rd(e,t,n,r){return id(e.Uf,t,n,r?[r]:e.Va)}function Td(){}function yd(e){return q(e.compare,e)}function Wd(e){this.Vb=e}function Yd(){}function $d(){}function ce(){this.wc=this.ra=this.lc=this.ia=this.la=!1,this.sa=0,this.Fb="",this.Ac=null,this.Xb="",this.zc=null,this.Ub="",this.g=M}function sd(e){return J(e.ia,"Only valid if start has been set"),e.Ac}function rd(e){return J(e.ia,"Only valid if start has been set"),e.lc?e.Xb:"[MIN_NAME]"}function vd(e){return J(e.ra,"Only valid if end has been set"),e.zc}function td(e){return J(e.ra,"Only valid if end has been set"),e.wc?e.Ub:"[MAX_NAME]"}function ee(e){var t=new ce;return t.la=e.la,t.sa=e.sa,t.ia=e.ia,t.Ac=e.Ac,t.lc=e.lc,t.Xb=e.Xb,t.ra=e.ra,t.zc=e.zc,t.wc=e.wc,t.Ub=e.Ub,t.g=e.g,t}function fe(e,t){var n=ee(e);return n.g=t,n}function ge(e){var t={};e.ia&&(t.sp=e.Ac,e.lc&&(t.sn=e.Xb)),e.ra&&(t.ep=e.zc,e.wc&&(t.en=e.Ub));if(e.la){t.l=e.sa;var n=e.Fb;""===n&&(n=e.ia?"l":"r"),t.vf=n}return e.g!==M&&(t.i=e.g.toString()),t}function Pd(e){return!(e.ia||e.ra||e.la)}function he(e,t){this.pd=e,this.Wb=t}function ie(e,t,n){var r=na(e.pd,function(r,i){var s=v(e.Wb,i);J(s,"Missing index implementation for "+i);if(r===Ud){if(s.rd(t.V)){for(var o=[],u=n.Pb(Rb),f=I(u);f;)f.name!=t.name&&o.push(f),f=I(u);return o.push(t),je(o,yd(s))}return Ud}return s=n.get(t.name),o=r,s&&(o=o.remove(new E(t.name,s))),o.La(t,t.V)});return new he(r,e.Wb)}function ke(e,t,n){var r=na(e.pd,function(e){if(e===Ud)return e;var r=n.get(t.name);return r?e.remove(new E(t.name,r)):e});return new he(r,e.Wb)}function uc(e,t){this.B=e,J(n(this.B)&&null!==this.B,"LeafNode shouldn't be created with null/undefined value."),this.ha=t||C,me(this.ha),this.tb=null}function T(e,t,n){this.m=e,(this.ha=t)&&me(this.ha),this.pb=n,this.tb=null}function zd(e,t){var n;return n=(n=qe(e,t))?(n=n.Ic())&&n.name:e.m.Ic(),n?new E(n,e.m.get(n)):null}function Ad(e,t){var n;return n=(n=qe(e,t))?(n=n.Yb())&&n.name:e.m.Yb(),n?new E(n,e.m.get(n)):null}function qe(e,t){return t===Zd?null:e.pb.get(t.toString())}function L(e,t){if(null===e)return C;var n=null;"object"==typeof e&&".priority"in e?n=e[".priority"]:"undefined"!=typeof t&&(n=t),J(null===n||"string"==typeof n||"number"==typeof n||"object"==typeof n&&".sv"in n,"Invalid priority type found: "+typeof n),"object"==typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]);if("object"!=typeof e||".sv"in e)return new uc(e,L(n));if(e instanceof Array){var i=C,s=e;return r(s,function(e,t){if(u(s,t)&&"."!==t.substring(0,1)){var n=L(e);if(n.M()||!n.e())i=i.P(t,n)}}),i.$(L(n))}var o=[],a=!1,f=e;hb(f,function(e){if("string"!=typeof e||"."!==e.substring(0,1)){var t=L(f[e]);t.e()||(a=a||!t.L().e(),o.push(new E(e,t)))}});var l=je(o,Sb,function(e){return e.name},Ub);if(a){var c=je(o,yd(M));return new T(l,L(n),new he({".priority":c},{".priority":M}))}return new T(l,L(n),le)}function se(e){this.count=parseInt(Math.log(e+1)/re,10),this.af=this.count-1,this.Nf=e+1&parseInt(Array(this.count+1).join("1"),2)}function te(e){var t=!(e.Nf&1<<e.af);return e.af--,t}function je(e,t,n,r){function i(t,r){var s=r-t;if(0==s)return null;if(1==s){var o=e[t],u=n?n(o):o;return new gc(u,o.V,!1,null,null)}var o=parseInt(s/2,10)+t,s=i(t,o),f=i(o+1,r),o=e[o],u=n?n(o):o;return new gc(u,o.V,!1,s,f)}e.sort(t);var s=function(t){function r(t,r){var f=u-t,l=u;u-=t;var l=i(f+1,l),f=e[f],h=n?n(f):f,l=new gc(h,f.V,r,null,l);s?s.left=l:o=l,s=l}for(var s=null,o=null,u=e.length,f=0;f<t.count;++f){var l=te(t),h=Math.pow(2,t.count-(f+1));l?r(h,!1):(r(h,!1),r(h,!0))}return o}(new se(e.length));return null!==s?new bc(r||t,s):new bc(r||t)}function ne(e){return"number"==typeof e?"number:"+cd(e):"string:"+e}function me(e){if(e.M()){var t=e.I();J("string"==typeof t||"number"==typeof t||"object"==typeof t&&u(t,".sv"),"Priority must be a string or number.")}else J(e===Xd||e.e(),"priority of unexpected type.");J(e===Xd||e.L().e(),"Priority nodes can't have a priority of their own.")}function ue(){T.call(this,new bc(Ub),C,le)}function ve(e,t,n){this.type=Fd,this.source=e,this.path=t,this.children=n}function we(e,t,n,r){this.pe=e,this.ef=t,this.zb=n,this.Te=r,J(!r||t,"Tagged queries must be from server.")}function ye(e,t){this.value=e,this.children=t||ze}function Ae(e){var t=Nd;return r(e,function(e,n){t=t.set(new K(n),e)}),t}function Be(e,t,n){if(null!=e.value&&n(e.value))return{path:F,value:e.value};if(t.e())return null;var r=O(t);return e=e.children.get(r),null!==e?(t=Be(e,H(t),n),null!=t?{path:(new K(r)).u(t.path),value:t.value}:null):null}function Ce(e,t){return Be(e,t,function(){return!0})}function Md(e,t,n){if(t.e())return n;var r=O(t);return t=Md(e.children.get(r)||Nd,H(t),n),r=t.e()?e.children.remove(r):e.children.La(r,t),new ye(e.value,r)}function De(e,t){return Ee(e,F,t)}function Ee(e,t,n){var r={};return e.children.fa(function(e,i){r[e]=Ee(i,t.u(e),n)}),n(t,e.value,r)}function Fe(e,t,n){return Ge(e,t,F,n)}function Ge(e,t,n,r){var i=e.value?r(n,e.value):!1;return i?i:t.e()?null:(i=O(t),(e=e.children.get(i))?Ge(e,H(t),n.u(i),r):null)}function He(e,t,n){var r=F;if(!t.e()){var i=!0;e.value&&(i=n(r,e.value)),!0===i&&(i=O(t),(e=e.children.get(i))&&Ie(e,H(t),r.u(i),n))}}function Ie(e,t,n,r){if(t.e())return e;e.value&&r(n,e.value);var i=O(t);return(e=e.children.get(i))?Ie(e,H(t),n.u(i),r):Nd}function Kd(e,t){Je(e,F,t)}function Je(e,t,n){e.children.fa(function(e,r){Je(r,t.u(e),n)}),e.value&&n(t,e.value)}function Ke(e,t){e.children.fa(function(e,n){n.value&&t(e,n.value)})}function Le(e){this.X=e}function Ne(e,t,n){if(t.e())return new Le(new ye(n));var r=Ce(e.X,t);if(null!=r){var i=r.path,r=r.value;return t=N(i,t),r=r.F(t,n),new Le(e.X.set(i,r))}return e=Md(e.X,t,new ye(n)),new Le(e)}function Oe(e,t,n){var r=e;return hb(n,function(e,n){r=Ne(r,t.u(e),n)}),r}function Pe(e,t){var n=Ce(e.X,t);return null!=n?e.X.get(n.path).ka(N(n.path,t)):null}function Qe(e){var t=[],n=e.X.value;return null!=n?n.M()||n.U(M,function(e,n){t.push(new E(e,n))}):e.X.children.fa(function(e,n){null!=n.value&&t.push(new E(e,n.value))}),t}function Re(e,t){if(t.e())return e;var n=Pe(e,t);return null!=n?new Le(new ye(n)):new Le(e.X.subtree(t))}function Se(e,t,n){if(null!=t.value)return n.F(e,t.value);var r=null;return t.children.fa(function(t,i){".priority"===t?(J(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=Se(e.u(t),i,n)}),n.ka(e).e()||null===r||(n=n.F(e.u(".priority"),r)),n}function Te(){this.T=Me,this.xa=[],this.Ec=-1}function Ue(e,t){return e.Ga?e.path.contains(t):!!ua(e.children,function(n,r){return e.path.u(r).contains(t)})}function We(e){return e.visible}function Ve(e,t,n){for(var r=Me,i=0;i<e.length;++i){var s=e[i];if(t(s)){var o=s.path;if(s.Ga)n.contains(o)?(o=N(n,o),r=Ne(r,o,s.Ga)):o.contains(n)&&(o=N(o,n),r=Ne(r,F,s.Ga.ka(o)));else{if(!s.children)throw Lc("WriteRecord should have .snap or .children");if(n.contains(o))o=N(n,o),r=Oe(r,o,s.children);else if(o.contains(n))if(o=N(o,n),o.e())r=Oe(r,F,s.children);else if(s=v(s.children,O(o)))s=s.ka(H(o)),r=Ne(r,F,s)}}}return r}function Xe(e,t){this.Eb=e,this.X=t}function Ye(){this.wa={}}function $e(e){return Pa(ra(e.wa),function(e){return!Pd(e.W.n)})}function af(e,t){if(Pd(t.n))return Ze(e);var n=t.Fa();return v(e.wa,n)}function Ze(e){return va(e.wa,function(e){return Pd(e.W.n)})||null}function bf(e){this.oa=Nd,this.yb=new Te,this.Se={},this.cc={},this.Fc=e}function cf(e,t,r,i,s){var o=e.yb,u=s;return J(i>o.Ec,"Stacking an older write on top of newer ones"),n(u)||(u=!0),o.xa.push({path:t,Ga:r,ce:i,visible:u}),u&&(o.T=Ne(o.T,t,r)),o.Ec=i,s?df(e,new Vb(Zb,t,r)):[]}function ef(e,t,n,r){var i=e.yb;return J(r>i.Ec,"Stacking an older merge on top of newer ones"),i.xa.push({path:t,children:n,ce:r,visible:!0}),i.T=Oe(i.T,t,n),i.Ec=r,n=Ae(n),df(e,new ve(Zb,t,n))}function ff(e,t,n){return n=n||!1,t=e.yb.Kd(t),null==t?[]:df(e,new Xb(t,n))}function gf(e,t,n){return n=Ae(n),df(e,new ve(xe,t,n))}function hf(e,t,n,r){r=jf(e,r);if(null!=r){var i=kf(r);return r=i.path,i=i.zb,t=N(r,t),n=new Vb(new we(!1,!0,i,!0),t,n),lf(e,r,n)}return[]}function mf(e,t,n,r){if(r=jf(e,r)){var i=kf(r);return r=i.path,i=i.zb,t=N(r,t),n=Ae(n),n=new ve(new we(!1,!0,i,!0),t,n),lf(e,r,n)}return[]}function qf(e){return De(e,function(e,t,n){if(t&&null!=Ze(t))return[Ze(t)];var i=[];return t&&(i=$e(t)),r(n,function(e){i=i.concat(e)}),i})}function tf(e,t){for(var n=0;n<t.length;++n){var r=t[n];if(!Pd(r.n)){var r=nf(r),i=e.cc[r];delete e.cc[r],delete e.Se["_"+i]}}}function pf(e,t,n){var i=t.path,s=sf(e,t);n=rf(e,n),t=e.Fc.Pe(t,s,n.md,n.H),i=e.oa.subtree(i);if(s)J(null==Ze(i.value),"If we're adding a query, it shouldn't be shadowed");else for(s=De(i,function(e,t,n){if(!e.e()&&t&&null!=Ze(t))return[Qd(Ze(t))];var i=[];return t&&(i=i.concat(Qa($e(t),function(e){return e.W}))),r(n,function(e){i=i.concat(e)}),i}),i=0;i<s.length;++i)n=s[i],e.Fc.Ud(n,sf(e,n));return t}function rf(e,t){var n=t.W,r=sf(e,n);return{md:function(){return(t.o()||C).hash()},H:function(t,i){if("ok"===t){if(i&&"object"==typeof i&&u(i,"w")){var s=v(i,"w");ea(s)&&0<=Na(s,"no_index")&&Q("Using an unspecified index. Consider adding "+
('".indexOn": "'+n.n.g.toString()+'"')+" at "+n.path.toString()+" to your security rules for better performance")}if(r){var o=n.path;if(s=jf(e,r))var f=kf(s),s=f.path,f=f.zb,o=N(s,o),o=new $b(new we(!1,!0,f,!0),o),s=lf(e,s,o);else s=[]}else s=df(e,new $b(xe,n.path));return s}return s="Unknown Error","too_big"===t?s="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"==t?s="Client doesn't have permission to access the desired data.":"unavailable"==t&&(s="The service is unavailable"),s=Error(t+": "+s),s.code=t.toUpperCase(),e.gb(n,null,s)}}}function nf(e){return e.path.toString()+"$"+e.Fa()}function kf(e){var t=e.indexOf("$");return J(-1!==t&&t<e.length-1,"Bad queryKey."),{zb:e.substr(t+1),path:new K(e.substr(0,t))}}function jf(e,t){var n=e.Se,r="_"+t;return r in n?n[r]:void 0}function sf(e,t){var n=nf(t);return v(e.cc,n)}function lf(e,t,n){var r=e.oa.get(t);return J(r,"Missing sync point for query tag that we're tracking"),r.Ya(n,new Xe(t,e.yb),null)}function df(e,t){return uf(e,t,e.oa,null,new Xe(F,e.yb))}function uf(e,t,n,r,i){if(t.path.e())return vf(e,t,n,r,i);var s=n.get(F);null==r&&null!=s&&(r=s.bb(F));var o=[],u=O(t.path),a=t.Mc(u);if((n=n.children.get(u))&&a)var f=r?r.K(u):null,u=i.u(u),o=o.concat(uf(e,a,n,f,u));return s&&(o=o.concat(s.Ya(t,i,r))),o}function vf(e,t,n,r,i){var s=n.get(F);null==r&&null!=s&&(r=s.bb(F));var o=[];return n.children.fa(function(n,s){var u=r?r.K(n):null,f=i.u(n),l=t.Mc(n);l&&(o=o.concat(vf(e,l,s,u,f)))}),s&&(o=o.concat(s.Ya(t,i,r))),o}function wf(e){J(ea(e)&&0<e.length,"Requires a non-empty array"),this.Ff=e,this.Gc={}}function xf(e,t){J(Ta(e.Ff,function(e){return e===t}),"Unknown event: "+t)}function zf(){wf.call(this,["online"]),this.Lc=!0;if("undefined"!=typeof window&&"undefined"!=typeof window.addEventListener){var e=this;window.addEventListener("online",function(){e.Lc||e.Zd("online",!0),e.Lc=!0},!1),window.addEventListener("offline",function(){e.Lc&&e.Zd("online",!1),e.Lc=!1},!1)}}function Af(){wf.call(this,["visible"]);var e,t;"undefined"!=typeof document&&"undefined"!=typeof document.addEventListener&&("undefined"!=typeof document.hidden?(t="visibilitychange",e="hidden"):"undefined"!=typeof document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):"undefined"!=typeof document.msHidden?(t="msvisibilitychange",e="msHidden"):"undefined"!=typeof document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.nc=!0;if(t){var n=this;document.addEventListener(t,function(){var t=!document[e];t!==n.nc&&(n.nc=t,n.Zd("visible",t))},!1)}}function Df(e){return p(e)&&0!==e.length&&!Bf.test(e)}function Ef(e){return null===e||p(e)||ga(e)&&!Wc(e)||ia(e)&&u(e,".sv")}function Ff(e,t,r){r&&!n(t)||Gf(z(e,1,r),t)}function Gf(e,t,r,i){r||(r=0);var s=i||[];if(!n(t))throw Error(e+"contains undefined"+Hf(s));if(ha(t))throw Error(e+"contains a function"+Hf(s)+" with contents: "+t.toString());if(Wc(t))throw Error(e+"contains "+t.toString()+Hf(s));if(1e3<r)throw new TypeError(e+"contains a cyclic object value ("+s.slice(0,100).join(".")+"...)");if(p(t)&&t.length>10485760/3&&10485760<Oc(t).length)throw Error(e+"contains a string greater than 10485760 utf8 bytes"+Hf(s)+" ('"+t.substring(0,50)+"...')");if(ia(t)){var o=!1,u=!1;hb(t,function(t,n){if(".value"===t)o=!0;else if(".priority"!==t&&".sv"!==t&&(u=!0,!Df(t)))throw Error(e+" contains an invalid key ("+t+")"+Hf(s)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');s.push(t),Gf(e,n,r+1,s),s.pop()});if(o&&u)throw Error(e+' contains ".value" child'+Hf(s)+" in addition to actual children.")}}function Hf(e){return 0==e.length?"":" in property '"+e.join(".")+"'"}function If(e,t){if(!ia(t)||ea(t))throw Error(z(e,1,!1)+" must be an Object containing the children to replace.");if(u(t,".value"))throw Error(z(e,1,!1)+' must not contain ".value".  To overwrite with a leaf value, just use .set() instead.');Ff(e,t,!1)}function Jf(e,t,n){if(Wc(n))throw Error(z(e,t,!1)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Ef(n))throw Error(z(e,t,!1)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}function Kf(e,t,r){if(!r||n(t))switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw Error(z(e,1,r)+'must be a valid event type: "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}function Lf(e,t,r,i){if((!i||n(r))&&!Df(r))throw Error(z(e,t,i)+'was an invalid key: "'+r+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')}function Mf(e,t){if(!p(t)||0===t.length||Cf.test(t))throw Error(z(e,1,!1)+'was an invalid path: "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')}function Nf(e,t){if(".info"===O(t))throw Error(e+" failed: Can't modify data under /.info/")}function Of(e,t){if(!p(t))throw Error(z(e,1,!1)+"must be a valid credential (a string).")}function Pf(e,t,n){if(!p(n))throw Error(z(e,t,!1)+"must be a valid string.")}function V(e,t,r,i){if(!i||n(r))if(!ia(r)||null===r)throw Error(z(e,t,i)+"must be a valid object.")}function Qf(e,t,n){if(!ia(t)||null===t||!u(t,n))throw Error(z(e,1,!1)+'must contain the key "'+n+'"');if(!p(v(t,n)))throw Error(z(e,1,!1)+'must contain the key "'+n+'" with type "string"')}function Rf(){this.set={}}function Sf(e,t){r(e.set,function(e,n){t(n,e)})}function rc(){this.m=this.B=null}function Tf(e,t){if(t.e())return e.B=null,e.m=null,!0;if(null!==e.B){if(e.B.M())return!1;var n=e.B;return e.B=null,n.U(M,function(t,n){e.ec(new K(t),n)}),Tf(e,t)}return null!==e.m?(n=O(t),t=H(t),e.m.contains(n)&&Tf(e.m.get(n),t)&&e.m.remove(n),e.m.e()?(e.m=null,!0):!1):!0}function sc(e,t,n){null!==e.B?n(t,e.B):e.U(function(e,r){var i=new K(t.toString()+"/"+e);sc(r,i,n)})}function Vf(e,t,n){this.bd=e||{},this.Yd=t||{},this.Xa=n||{},this.bd.remember||(this.bd.remember="default")}function Xf(e){var t={},n={};return hb(e||{},function(e,r){0<=Na(Wf,e)?t[e]=r:n[e]=r}),new Vf(t,{},n)}function Yf(e,t){this.Je=["session",e.Hd,e.ub].join(":"),this.Vd=t}function Zf(){return!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(navigator.userAgent)}function $f(){var e=navigator.userAgent;if("Microsoft Internet Explorer"===navigator.appName){if((e=e.match(/MSIE ([0-9]{1,}[\.0-9]{0,})/))&&1<e.length)return 8<=parseFloat(e[1])}else if(-1<e.indexOf("Trident")&&(e=e.match(/rv:([0-9]{2,2}[\.0-9]{0,})/))&&1<e.length)return 8<=parseFloat(e[1]);return!1}function ag(){var e=window.opener.frames,t;for(t=e.length-1;0<=t;t--)try{if(e[t].location.protocol===window.location.protocol&&e[t].location.host===window.location.host&&"__winchan_relay_frame"===e[t].name)return e[t]}catch(n){}return null}function bg(e,t,n){e.attachEvent?e.attachEvent("on"+t,n):e.addEventListener&&e.addEventListener(t,n,!1)}function cg(e,t,n){e.detachEvent?e.detachEvent("on"+t,n):e.removeEventListener&&e.removeEventListener(t,n,!1)}function dg(e){/^https?:\/\//.test(e)||(e=window.location.href);var t=/^(https?:\/\/[\-_a-zA-Z\.0-9:]+)/.exec(e);return t?t[1]:e}function eg(e){var t="";try{e=e.replace("#","");var n={},r=e.replace(/^\?/,"").split("&");for(e=0;e<r.length;e++)if(r[e]){var i=r[e].split("=");n[i[0]]=i[1]}n&&u(n,"__firebase_request_key")&&(t=v(n,"__firebase_request_key"))}catch(s){}return t}function fg(e){var t=[],n;for(n in e)if(u(e,n)){var r=v(e,n);if(ea(r))for(var i=0;i<r.length;i++)t.push(encodeURIComponent(n)+"="+encodeURIComponent(r[i]));else t.push(encodeURIComponent(n)+"="+encodeURIComponent(v(e,n)))}return t?"&"+t.join("&"):""}function gg(){var e=Vc(Uf);return e.scheme+"://"+e.host+"/v2"}function hg(e){return gg()+"/"+e+"/auth/channel"}function ig(e){var t=this;this.sc=e,this.Wd="*",$f()?this.Hc=this.od=ag():(this.Hc=window.opener,this.od=window);if(!t.Hc)throw"Unable to find relay frame";bg(this.od,"message",q(this.ac,this)),bg(this.od,"message",q(this.nf,this));try{jg(this,{a:"ready"})}catch(n){bg(this.Hc,"load",function(){jg(t,{a:"ready"})})}bg(window,"unload",q(this.jg,this))}function jg(e,t){t=B(t),$f()?e.Hc.doPost(t,e.Wd):e.Hc.postMessage(t,e.Wd)}function kg(e){this.gc=Ga()+Ga()+Ga(),this.pf=e}function mg(e){var t=Error(v(lg,e),e);return t.code=e,t}function ng(e){if(!e.window_features||-1!==navigator.userAgent.indexOf("Fennec/")||-1!==navigator.userAgent.indexOf("Firefox/")&&-1!==navigator.userAgent.indexOf("Android"))e.window_features=void 0;e.window_name||(e.window_name="_blank"),this.options=e}function og(e){e.method||(e.method="GET"),e.headers||(e.headers={}),e.headers.content_type||(e.headers.content_type="application/json"),e.headers.content_type=e.headers.content_type.toLowerCase(),this.options=e}function pg(e){this.gc=Ga()+Ga()+Ga(),this.pf=e}function qg(e){e.callback_parameter||(e.callback_parameter="callback"),this.options=e,window.__firebase_auth_jsonp=window.__firebase_auth_jsonp||{}}function rg(e,t,n){setTimeout(function(){try{var r=document.createElement("script");r.type="text/javascript",r.id=e,r.async=!0,r.src=t,r.onerror=function(){var t=document.getElementById(e);null!==t&&t.parentNode.removeChild(t),n&&n(mg("NETWORK_ERROR"))};var i=document.getElementsByTagName("head");(i&&0!=i.length?i[0]:document.documentElement).appendChild(r)}catch(s){n&&n(mg("NETWORK_ERROR"))}},0)}function sg(e,t,n,r){wf.call(this,["auth_status"]),this.O=e,this.Xe=t,this.Dg=n,this.Ee=r,this.jc=new Yf(e,[Hc,P]),this.ib=null,tg(this)}function tg(e){P.get("redirect_request_id")&&ug(e);var t=e.jc.get();t&&t.token?(vg(e,t),e.Xe(t.token,function(n,r){wg(e,n,r,!1,t.token,t)},function(t,n){xg(e,"resumeSession()",t,n)})):vg(e,null)}function yg(e,t,n,r,i,s){"firebaseio-demo.com"===e.O.domain&&Q("Firebase authentication is not supported on demo Firebases (*.firebaseio-demo.com). To secure your Firebase, create a production Firebase at https://www.firebase.com."),e.Xe(t,function(s,o){wg(e,s,o,!0,t,n,r||{},i)},function(t,n){xg(e,"auth()",t,n,s)})}function zg(e,t){e.jc.clear(),vg(e,null),e.Dg(function(e,n){if("ok"===e)R(t,null);else{var r=(e||"error").toUpperCase(),i=r;n&&(i+=": "+n),i=Error(i),i.code=r,R(t,i)}})}function wg(e,t,n,r,i,s,o,a){"ok"===t?(r&&(t=n.auth,s.auth=t,s.expires=n.expires,s.token=gd(i)?i:"",n=null,t&&u(t,"uid")?n=v(t,"uid"):u(s,"uid")&&(n=v(s,"uid")),s.uid=n,n="custom",t&&u(t,"provider")?n=v(t,"provider"):u(s,"provider")&&(n=v(s,"provider")),s.provider=n,e.jc.clear(),gd(i)&&(o=o||{},n=Hc,"sessionOnly"===o.remember&&(n=P),"none"!==o.remember&&e.jc.set(s,n)),vg(e,s)),R(a,null,s)):(e.jc.clear(),vg(e,null),s=e=(t||"error").toUpperCase(),n&&(s+=": "+n),s=Error(s),s.code=e,R(a,s))}function xg(e,t,n,r,i){Q(t+" was canceled: "+r),e.jc.clear(),vg(e,null),e=Error(r),e.code=n.toUpperCase(),R(i,e)}function Ag(e,t,n,r,i){Bg(e),n=new Vf(r||{},{},n||{}),Cg(e,[og,qg],"/auth/"+t,n,i)}function Dg(e,t,n,r){Bg(e);var i=[ng,pg];n=Xf(n),"anonymous"===t||"password"===t?setTimeout(function(){R(r,mg("TRANSPORT_UNAVAILABLE"))},0):(n.Yd.window_features="menubar=yes,modal=yes,alwaysRaised=yeslocation=yes,resizable=yes,scrollbars=yes,status=yes,height=625,width=625,top="+("object"==typeof screen?.5*(screen.height-625):0)+",left="+("object"==typeof screen?.5*(screen.width-625):0),n.Yd.relay_url=hg(e.O.ub),n.Yd.requestWithCredential=q(e.hc,e),Cg(e,i,"/auth/"+t,n,r))}function ug(e){var t=P.get("redirect_request_id");if(t){var n=P.get("redirect_client_options");P.remove("redirect_request_id"),P.remove("redirect_client_options");var r=[og,qg],t={requestId:t,requestKey:eg(document.location.hash)},n=new Vf(n,{},t);try{document.location.hash=document.location.hash.replace(/&__firebase_request_key=([a-zA-z0-9]*)/,"")}catch(i){}Cg(e,r,"/auth/session",n)}}function Cg(e,t,n,r,i){Eg(e,t,n,r,function(t,n){!t&&n&&n.token&&n.uid?yg(e,n.token,n,r.bd,function(e,t){e?R(i,e):R(i,null,t)}):R(i,t||mg("UNKNOWN_ERROR"))})}function Eg(e,t,n,r,i){t=Pa(t,function(e){return"function"==typeof e.isAvailable&&e.isAvailable()}),0===t.length?setTimeout(function(){R(i,mg("TRANSPORT_UNAVAILABLE"))},0):(t=new(t.shift())(r.Yd),r=ib(r.Xa),r.v="js-2.2.1",r.transport=t.tc(),r.suppress_status_codes=!0,e=gg()+"/"+e.O.ub+n,t.open(e,r,function(e,t){if(e)R(i,e);else if(t&&t.error){var n=Error(t.error.message);n.code=t.error.code,n.details=t.error.details,R(i,n)}else R(i,null,t)}))}function vg(e,t){var n=null!==e.ib||null!==t;e.ib=t,n&&e.Zd("auth_status",t),e.Ee(null!==t)}function Bg(e){var t=e.O;if("firebaseio.com"!==t.domain&&"firebaseio-demo.com"!==t.domain&&"auth.firebase.com"===Uf)throw Error("This custom Firebase server ('"+e.O.domain+"') does not support delegated login.")}function Fg(e){this.ac=e,this.Gd=[],this.Jb=0,this.ke=-1,this.xb=null}function Gg(e,t,n){e.ke=t,e.xb=n,e.ke<e.Jb&&(e.xb(),e.xb=null)}function Hg(e,t,n){for(e.Gd[t]=n;e.Gd[e.Jb];){var r=e.Gd[e.Jb];delete e.Gd[e.Jb];for(var i=0;i<r.length;++i)if(r[i]){var s=e;Ab(function(){s.ac(r[i])})}if(e.Jb===e.ke){e.xb&&(clearTimeout(e.xb),e.xb(),e.xb=null);break}e.Jb++}}function Ig(e,t,n){this.le=e,this.f=Sc(e),this.jb=this.kb=0,this.Ra=Pb(t),this.Qd=n,this.yc=!1,this.Yc=function(e){t.host!==t.Ma&&(e.ns=t.ub);var n=[],r;for(r in e)e.hasOwnProperty(r)&&n.push(r+"="+e[r]);return(t.Bb?"https://":"http://")+t.Ma+"/.lp?"+n.join("&")}}function Mg(e,t){var n=B(t).length;e.jb+=n,Mb(e.Ra,"bytes_received",n)}function Lg(e,t,n,r){this.Yc=r,this.fb=n,this.Ie=new Rf,this.Qc=[],this.ne=Math.floor(1e8*Math.random()),this.Od=!0,this.$d=Kc(),window["pLPCommand"+this.$d]=e,window["pRTLPCB"+this.$d]=t,e=document.createElement("iframe"),e.style.display="none";if(!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||zb("No IE domain setting required")}catch(i){e.src="javascript:void((function(){document.open();document.domain='"+document.domain+"';document.close();})())"}e.contentDocument?e.ab=e.contentDocument:e.contentWindow?e.ab=e.contentWindow.document:e.document&&(e.ab=e.document),this.Aa=e,e="",this.Aa.src&&"javascript:"===this.Aa.src.substr(0,11)&&(e='<script>document.domain="'+document.domain+'";</script>'),e="<html><body>"+e+"</body></html>";try{this.Aa.ab.open(),this.Aa.ab.write(e),this.Aa.ab.close()}catch(s){zb("frame writing exception"),s.stack&&zb(s.stack),zb(s)}}function Og(e){if(e.ee&&e.Od&&e.Ie.count()<(0<e.Qc.length?2:1)){e.ne++;var t={};t.id=e.cg,t.pw=e.dg,t.ser=e.ne;for(var t=e.Yc(t),n="",r=0;0<e.Qc.length;){if(!(1870>=e.Qc[0].bf.length+30+n.length))break;var i=e.Qc.shift(),n=n+"&seg"+r+"="+i.ug+"&ts"+r+"="+i.Cg+"&d"+r+"="+i.bf;r++}return Pg(e,t+n,e.ne),!0}return!1}function Pg(e,t,n){function r(){e.Ie.remove(n),Og(e)}e.Ie.add(n,1);var i=setTimeout(r,Math.floor(25e3));Ng(e,t,function(){clearTimeout(i),r()})}function Ng(e,t,n){setTimeout(function(){try{if(e.Od){var r=e.Aa.ab.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){var e=r.readyState;e&&"loaded"!==e&&"complete"!==e||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=function(){zb("Long-poll script failed to load: "+t),e.Od=!1,e.close()},e.Aa.ab.body.appendChild(r)}}catch(i){}},Math.floor(1))}function Rg(e,t,n){this.le=e,this.f=Sc(this.le),this.frames=this.Cc=null,this.jb=this.kb=this.Ue=0,this.Ra=Pb(t),this.$a=(t.Bb?"wss://":"ws://")+t.Ma+"/.ws?v=5","undefined"!=typeof location&&location.href&&-1!==location.href.indexOf("firebaseio.com")&&(this.$a+="&r=f"),t.host!==t.Ma&&(this.$a=this.$a+"&ns="+t.ub),n&&(this.$a=this.$a+"&s="+n)}function Ug(e,t){e.frames.push(t);if(e.frames.length==e.Ue){var n=e.frames.join("");e.frames=null,n=kb(n),e.hg(n)}}function Tg(e){clearInterval(e.Cc),e.Cc=setInterval(function(){e.ua&&e.ua.send("0"),Tg(e)},Math.floor(45e3))}function Vg(e){Wg(this,e)}function Wg(e,t){var n=Rg&&Rg.isAvailable(),r=n&&!Hc.lf&&!0!==Hc.get("previous_websocket_failure");t.Eg&&(n||Q("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0);if(r)e.Wc=[Rg];else{var i=e.Wc=[];bd(Xg,function(e,t){t&&t.isAvailable()&&i.push(t)})}}function Yg(e){if(0<e.Wc.length)return e.Wc[0];throw Error("No transports available")}function Zg(e,t,n,r,i,s){this.id=e,this.f=Sc("c:"+this.id+":"),this.ac=n,this.Kc=r,this.ga=i,this.Ge=s,this.O=t,this.Fd=[],this.Ye=0,this.Af=new Vg(t),this.Qa=0,this.f("Connection created"),$g(this)}function $g(e){var t=Yg(e.Af);e.J=new t("c:"+e.id+":"+e.Ye++,e.O),e.Ke=t.responsesRequiredToBeHealthy||0;var n=ah(e,e.J),r=bh(e,e.J);e.Xc=e.J,e.Tc=e.J,e.D=null,e.sb=!1,setTimeout(function(){e.J&&e.J.open(n,r)},Math.floor(0)),t=t.healthyTimeout||0,0<t&&(e.nd=setTimeout(function(){e.nd=null,e.sb||(e.J&&102400<e.J.jb?(e.f("Connection exceeded healthy timeout but has received "+e.J.jb+" bytes.  Marking connection healthy."),e.sb=!0,e.J.ud()):e.J&&10240<e.J.kb?e.f("Connection exceeded healthy timeout but has sent "+e.J.kb+" bytes.  Leaving connection alive."):(e.f("Closing unhealthy connection after timeout."),e.close()))},Math.floor(t)))}function bh(e,t){return function(n){t===e.J?(e.J=null,n||0!==e.Qa?1===e.Qa&&e.f("Realtime connection lost."):(e.f("Realtime connection failed."),"s-"===e.O.Ma.substr(0,2)&&(Hc.remove("host:"+e.O.host),e.O.Ma=e.O.host)),e.close()):t===e.D?(e.f("Secondary connection lost."),n=e.D,e.D=null,e.Xc!==n&&e.Tc!==n||e.close()):e.f("closing an old connection")}}function ah(e,t){return function(n){if(2!=e.Qa)if(t===e.Tc){var r=Zc("t",n);n=Zc("d",n);if("c"==r){if(r=Zc("t",n),"d"in n)if(n=n.d,"h"===r){var r=n.ts,i=n.v,s=n.h;e.Qd=n.s,Jc(e.O,s),0==e.Qa&&(e.J.start(),ch(e,e.J,r),"5"!==i&&Q("Protocol version mismatch detected"),n=e.Af,(n=1<n.Wc.length?n.Wc[1]:null)&&dh(e,n))}else if("n"===r){e.f("recvd end transmission on primary"),e.Tc=e.D;for(n=0;n<e.Fd.length;++n)e.Bd(e.Fd[n]);e.Fd=[],eh(e)}else"s"===r?(e.f("Connection shutdown command received. Shutting down..."),e.Ge&&(e.Ge(n),e.Ge=null),e.ga=null,e.close()):"r"===r?(e.f("Reset packet received.  New host: "+n),Jc(e.O,n),1===e.Qa?e.close():(fh(e),$g(e))):"e"===r?Tc("Server Error: "+n):"o"===r?(e.f("got pong on primary."),gh(e),hh(e)):Tc("Unknown control packet command: "+r)}else"d"==r&&e.Bd(n)}else if(t===e.D)if(r=Zc("t",n),n=Zc("d",n),"c"==r)"t"in n&&(n=n.t,"a"===n?ih(e):"r"===n?(e.f("Got a reset on secondary, closing it"),e.D.close(),e.Xc!==e.D&&e.Tc!==e.D||e.close()):"o"===n&&(e.f("got pong on secondary."),e.yf--,ih(e)));else{if("d"!=r)throw Error("Unknown protocol layer: "+r);e.Fd.push(n)}else e.f("message on old connection")}}function eh(e){e.Xc===e.D&&e.Tc===e.D&&(e.f("cleaning up and promoting a connection: "+e.D.le),e.J=e.D,e.D=null)}function ih(e){0>=e.yf?(e.f("Secondary connection is healthy."),e.sb=!0,e.D.ud(),e.D.start(),e.f("sending client ack on secondary"),e.D.send({t:"c",d:{t:"a",d:{}}}),e.f("Ending transmission on primary"),e.J.send({t:"c",d:{t:"n",d:{}}}),e.Xc=e.D,eh(e)):(e.f("sending ping on secondary."),e.D.send({t:"c",d:{t:"p",d:{}}}))}function gh(e){e.sb||(e.Ke--,0>=e.Ke&&(e.f("Primary connection is healthy."),e.sb=!0,e.J.ud()))}function dh(e,t){e.D=new t("c:"+e.id+":"+e.Ye++,e.O,e.Qd),e.yf=t.responsesRequiredToBeHealthy||0,e.D.open(ah(e,e.D),bh(e,e.D)),setTimeout(function(){e.D&&(e.f("Timed out trying to upgrade."),e.D.close())},Math.floor(6e4))}function ch(e,t,n){e.f("Realtime connection established."),e.J=t,e.Qa=1,e.Kc&&(e.Kc(n),e.Kc=null),0===e.Ke?(e.f("Primary connection is healthy."),e.sb=!0):setTimeout(function(){hh(e)},Math.floor(5e3))}function hh(e){e.sb||1!==e.Qa||(e.f("sending ping on primary."),jh(e,{t:"c",d:{t:"p",d:{}}}))}function jh(e,t){if(1!==e.Qa)throw"Connection is not connected";e.Xc.send(t)}function fh(e){e.f("Shutting down all connections"),e.J&&(e.J.close(),e.J=null),e.D&&(e.D.close(),e.D=null),e.nd&&(clearTimeout(e.nd),e.nd=null)}function kh(e,t,n,r){this.id=lh++,this.f=Sc("p:"+this.id+":"),this.Db=!0,this.ta={},this.ma=[],this.Nc=0,this.Jc=[],this.ja=!1,this.Wa=1e3,this.wd=3e5,this.Cd=t,this.Ad=n,this.He=r,this.O=e,this.Oe=null,this.Sc={},this.tg=0,this.Dc=this.ze=null,mh(this,0),Af.Ob().wb("visible",this.kg,this),-1===e.host.indexOf("fblocal")&&zf.Ob().wb("online",this.ig,this)}function oh(e,t,n,r,i){var s=t.Fa(),o=t.path.toString();e.f("Listen called for "+o+" "+s),e.ta[o]=e.ta[o]||{},J(!e.ta[o][s],"listen() called twice for same path/queryId."),t={H:i,md:n,qg:ge(t.n),tag:r},e.ta[o][s]=t,e.ja&&ph(e,o,s,t)}function ph(e,t,n,r){e.f("Listen on "+t+" for "+n);var i={p:t};r.tag&&(i.q=r.qg,i.t=r.tag),i.h=r.md(),e.Ba("q",i,function(i){if((e.ta[t]&&e.ta[t][n])===r){e.f("listen response",i);var s=i.s;"ok"!==s&&qh(e,t,n),i=i.d,r.H&&r.H(s,i)}})}function rh(e){var t=e.Ib;e.ja&&t&&e.Ba("auth",{cred:t.Rf},function(n){var r=n.s;n=n.d||"error","ok"!==r&&e.Ib===t&&delete e.Ib,t.df?"ok"!==r&&t.$c&&t.$c(r,n):(t.df=!0,t.rc&&t.rc(r,n))})}function sh(e,t,n,r){e.ja?th(e,"o",t,n,r):e.Jc.push({Pc:t,action:"o",data:n,H:r})}function uh(e,t,n,r){e.ja?th(e,"om",t,n,r):e.Jc.push({Pc:t,action:"om",data:n,H:r})}function th(e,t,n,r,i){n={p:n,d:r},e.f("onDisconnect "+t,n),e.Ba(t,n,function(e){i&&setTimeout(function(){i(e.s,e.d)},Math.floor(0))})}function wh(e,t,n,r){vh(e,"m",t,n,r,void 0)}function vh(e,t,r,i,s,o){i={p:r,d:i},n(o)&&(i.h=o),e.ma.push({action:t,uf:i,H:s}),e.Nc++,t=e.ma.length-1,e.ja?xh(e,t):e.f("Buffering put: "+r)}function xh(e,t){var n=e.ma[t].action,r=e.ma[t].uf,i=e.ma[t].H;e.ma[t].rg=e.ja,e.Ba(n,r,function(r){e.f(n+" response",r),delete e.ma[t],e.Nc--,0===e.Nc&&(e.ma=[]),i&&i(r.s,r.d)})}function mh(e,t){J(!e.Oa,"Scheduling a connect when we're already connected/ing?"),e.Kb&&clearTimeout(e.Kb),e.Kb=setTimeout(function(){e.Kb=null,Ah(e)},Math.floor(t))}function Ah(e){if(e.Db){e.f("Making a connection attempt"),e.ze=(new Date).getTime(),e.Dc=null;var t=q(e.Bd,e),n=q(e.Kc,e),r=q(e.of,e),i=e.id+":"+nh++;e.Oa=new Zg(i,e.O,t,n,r,function(t){Q(t+" ("+e.O.toString()+")"),e.Db=!1})}}function yh(e,t,n){n=n?Qa(n,function(e){return $c(e)}).join("$"):"default",(e=qh(e,t,n))&&e.H&&e.H("permission_denied")}function qh(e,t,r){t=(new K(t)).toString();var i;return n(e.ta[t])?(i=e.ta[t][r],delete e.ta[t][r],0===pa(e.ta[t])&&delete e.ta[t]):i=void 0,i}function zh(e){rh(e),r(e.ta,function(t,n){r(t,function(t,r){ph(e,n,r,t)})});for(var t=0;t<e.ma.length;t++)e.ma[t]&&xh(e,t);for(;e.Jc.length;)t=e.Jc.shift(),th(e,t.action,t.Pc,t.data,t.H)}function S(e,t,n){this.A=e,this.W=t,this.g=n}function Bh(e){this.O=e,this.Ra=Pb(e),this.ba=new sb,this.zd=1,this.S=new kh(this.O,q(this.Cd,this),q(this.Ad,this),q(this.He,this)),this.Ag=Qb(e,q(function(){return new Kb(this.Ra,this.S)},this)),this.mc=new yc,this.we=new lb;var t=this;this.qd=new bf({Pe:function(e,n,r,i){return n=[],r=t.we.j(e.path),r.e()||(n=df(t.qd,new Vb(xe,e.path,r)),setTimeout(function(){i("ok")},0)),n},Ud:ba}),Ch(this,"connected",!1),this.ga=new rc,this.Q=new sg(e,q(this.S.Q,this.S),q(this.S.Ve,this.S),q(this.Ee,this)),this.gd=0,this.xe=null,this.N=new bf({Pe:function(e,n,r,i){return oh(t.S,e,r,n,function(n,r){var s=i(n,r);xb(t.ba,e.path,s)}),[]},Ud:function(e,n){var r=t.S,i=e.path.toString(),s=e.Fa();r.f("Unlisten called for "+i+" "+s);if(qh(r,i,s)&&r.ja){var o=ge(e.n);r.f("Unlisten on "+i+" for "+s),i={p:i},n&&(i.q=o,i.t=n),r.Ba("n",i)}}})}function Dh(e){return e=e.we.j(new K(".info/serverTimeOffset")).I()||0,(new Date).getTime()+e}function Eh(e){return e=e={timestamp:Dh(e)},e.timestamp=e.timestamp||(new Date).getTime(),e}function Ch(e,t,n){t=new K("/.info/"+t),n=L(n);var r=e.we;r.Nd=r.Nd.F(t,n),n=df(e.qd,new Vb(xe,t,n)),xb(e.ba,t,n)}function Gh(e){e.f("onDisconnectEvents");var t=Eh(e),n=[];sc(qc(e.ga,t),F,function(t,r){n=n.concat(df(e.N,new Vb(xe,t,r)));var i=Ih(e,t);Fh(e,i)}),e.ga=new rc,xb(e.ba,F,n)}function Jh(e,t,n,r){var i=L(n);sh(e.S,t.toString(),i.I(!0),function(n,s){"ok"===n&&e.ga.ec(t,i),Hh(r,n,s)})}function Kh(e,t,n,r,i){var s=L(n,r);sh(e.S,t.toString(),s.I(!0),function(n,r){"ok"===n&&e.ga.ec(t,s),Hh(i,n,r)})}function Lh(e,t,n,r){var i=!0,s;for(s in n)i=!1;i?(zb("onDisconnect().update() called with empty data.  Don't do anything."),Hh(r,"ok")):uh(e.S,t.toString(),n,function(i,s){if("ok"===i)for(var o in n){var u=L(n[o]);e.ga.ec(t.u(o),u)}Hh(r,i,s)})}function Mh(e,t,n){n=".info"===O(t.path)?e.qd.Gb(t,n):e.N.Gb(t,n),vb(e.ba,t.path,n)}function Hh(e,t,n){e&&Ab(function(){if("ok"==t)e(null);else{var r=(t||"error").toUpperCase(),i=r;n&&(i+=": "+n),i=Error(i),i.code=r,e(i)}})}function Nh(e,t,r,i,s){function o(){}e.f("transaction on "+t);var a=new U(e,t);a.wb("value",o),r={path:t,update:r,H:i,status:null,qf:Kc(),We:s,xf:0,ae:function(){a.$b("value",o)},de:null,ya:null,dd:null,ed:null,fd:null},i=e.N.qa(t,void 0)||C,r.dd=i,i=r.update(i.I());if(n(i)){Gf("transaction failed: Data returned ",i),r.status=1,s=zc(e.mc,t);var f=s.za()||[];f.push(r),Ac(s,f),"object"==typeof i&&null!==i&&u(i,".priority")?(f=v(i,".priority"),J(Ef(f),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):f=(e.N.qa(t)||C).L().I(),s=Eh(e),i=L(i,f),s=tc(i,s),r.ed=i,r.fd=s,r.ya=e.zd++,r=cf(e.N,t,s,r.ya,r.We),xb(e.ba,t,r),Oh(e)}else r.ae(),r.ed=null,r.fd=null,r.H&&(e=new S(r.dd,new U(e,r.path),M),r.H(null,!1,e))}function Oh(e,t){var n=t||e.mc;t||Ph(e,n);if(null!==n.za()){var r=Qh(e,n);J(0<r.length,"Sending zero length transaction queue"),Sa(r,function(e){return 1===e.status})&&Rh(e,n.path(),r)}else n.ld()&&n.U(function(t){Oh(e,t)})}function Rh(e,t,n){for(var r=Qa(n,function(e){return e.ya}),i=e.N.qa(t,r)||C,r=i,i=i.hash(),s=0;s<n.length;s++){var o=n[s];J(1===o.status,"tryToSendTransactionQueue_: items in queue should all be run."),o.status=2,o.xf++;var u=N(t,o.path),r=r.F(u,o.ed)}r=r.I(!0),e.S.put(t.toString(),r,function(r){e.f("transaction put response",{path:t.toString(),status:r});var i=[];if("ok"===r){r=[];for(s=0;s<n.length;s++){n[s].status=3,i=i.concat(ff(e.N,n[s].ya));if(n[s].H){var o=n[s].fd,u=new U(e,n[s].path);r.push(q(n[s].H,null,null,!0,new S(o,u,M)))}n[s].ae()}Ph(e,zc(e.mc,t)),Oh(e),xb(e.ba,t,i);for(s=0;s<r.length;s++)Ab(r[s])}else{if("datastale"===r)for(s=0;s<n.length;s++)n[s].status=4===n[s].status?5:1;else for(Q("transaction at "+t.toString()+" failed: "+r),s=0;s<n.length;s++)n[s].status=5,n[s].de=r;Fh(e,t)}},i)}function Fh(e,t){var n=Sh(e,t),r=n.path(),n=Qh(e,n);return Th(e,n,r),r}function Th(e,t,r){if(0!==t.length){for(var i=[],s=[],o=Qa(t,function(e){return e.ya}),a=0;a<t.length;a++){var f=t[a],l=N(r,f.path),c=!1,h;J(null!==l,"rerunTransactionsUnderNode_: relativePath should not be null.");if(5===f.status)c=!0,h=f.de,s=s.concat(ff(e.N,f.ya,!0));else if(1===f.status)if(25<=f.xf)c=!0,h="maxretry",s=s.concat(ff(e.N,f.ya,!0));else{var p=e.N.qa(f.path,o)||C;f.dd=p;var d=t[a].update(p.I());n(d)?(Gf("transaction failed: Data returned ",d),l=L(d),"object"==typeof d&&null!=d&&u(d,".priority")||(l=l.$(p.L())),p=f.ya,d=Eh(e),d=tc(l,d),f.ed=l,f.fd=d,f.ya=e.zd++,Va(o,p),s=s.concat(cf(e.N,f.path,d,f.ya,f.We)),s=s.concat(ff(e.N,p,!0))):(c=!0,h="nodata",s=s.concat(ff(e.N,f.ya,!0)))}xb(e.ba,r,s),s=[],c&&(t[a].status=3,setTimeout(t[a].ae,Math.floor(0)),t[a].H&&("nodata"===h?(f=new U(e,t[a].path),i.push(q(t[a].H,null,null,!1,new S(t[a].dd,f,M)))):i.push(q(t[a].H,null,Error(h),!1,null))))}Ph(e,e.mc);for(a=0;a<i.length;a++)Ab(i[a]);Oh(e)}}function Sh(e,t){for(var n,r=e.mc;null!==(n=O(t))&&null===r.za();)r=zc(r,n),t=H(t);return r}function Qh(e,t){var n=[];return Uh(e,t,n),n.sort(function(e,t){return e.qf-t.qf}),n}function Uh(e,t,n){var r=t.za();if(null!==r)for(var i=0;i<r.length;i++)n.push(r[i]);t.U(function(t){Uh(e,t,n)})}function Ph(e,t){var n=t.za();if(n){for(var r=0,i=0;i<n.length;i++)3!==n[i].status&&(n[r]=n[i],r++);n.length=r,Ac(t,0<n.length?n:null)}t.U(function(t){Ph(e,t)})}function Ih(e,t){var n=Sh(e,t).path(),r=zc(e.mc,t);return Dc(r,function(t){Vh(e,t)}),Vh(e,r),Cc(r,function(t){Vh(e,t)}),n}function Vh(e,t){var n=t.za();if(null!==n){for(var r=[],i=[],s=-1,o=0;o<n.length;o++)4!==n[o].status&&(2===n[o].status?(J(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=4,n[o].de="set"):(J(1===n[o].status,"Unexpected transaction status in abort"),n[o].ae(),i=i.concat(ff(e.N,n[o].ya,!0)),n[o].H&&r.push(q(n[o].H,null,Error("set"),!1,null))));-1===s?Ac(t,null):n.length=s+1,xb(e.ba,t.path(),i);for(o=0;o<r.length;o++)Ab(r[o])}}function Wh(){this.fc={}}function X(e,t){this.Rc=e,this.Ea=t}function Y(e,t,n,r){this.k=e,this.path=t,this.n=n,this.bc=r}function Xh(e){var t=null,n=null;e.ia&&(t=sd(e)),e.ra&&(n=vd(e));if(e.g===Zd){if(e.ia){if("[MIN_NAME]"!=rd(e))throw Error("Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().");if("string"!=typeof t)throw Error("Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.")}if(e.ra){if("[MAX_NAME]"!=td(e))throw Error("Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().");if("string"!=typeof n)throw Error("Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.")}}else if(e.g===M){if(null!=t&&!Ef(t)||null!=n&&!Ef(n))throw Error("Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(J(e.g instanceof Wd||e.g===be,"unknown index type."),null!=t&&"object"==typeof t||null!=n&&"object"==typeof n)throw Error("Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.")}function Yh(e){if(e.ia&&e.ra&&e.la&&(!e.la||""===e.Fb))throw Error("Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.")}function Zh(e,t){if(!0===e.bc)throw Error(t+": You can't combine multiple orderBy calls.")}function $h(e,t,n){var r={cancel:null,Ka:null};if(t&&n)r.cancel=t,A(e,3,r.cancel,!0),r.Ka=n,jb(e,4,r.Ka);else if(t)if("object"==typeof t&&null!==t)r.Ka=t;else{if("function"!=typeof t)throw Error(z(e,3,!0)+" must either be a cancel callback or a context object.");r.cancel=t}return r}function U(e,t){var n,r,i;if(e instanceof Bh)n=e,r=t;else{x("new Firebase",1,2,arguments.length),r=Vc(arguments[0]),n=r.Bg,"firebase"===r.domain&&Uc(r.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),n||Uc("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),r.Bb||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Q("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),n=new Ic(r.host,r.Bb,n,"ws"===r.scheme||"wss"===r.scheme),r=new K(r.Pc),i=r.toString();var s;!(s=!p(n.host)||0===n.host.length||!Df(n.ub))&&(s=0!==i.length)&&(i&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),s=!p(i)||0===i.length||!!Cf.test(i));if(s)throw Error(z("new Firebase",1,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".');if(t)if(t instanceof Wh)i=t;else{if(!p(t))throw Error("Expected a valid Firebase.Context for second argument to new Firebase()");i=Wh.Ob(),n.Hd=t}else i=Wh.Ob();s=n.toString();var o=v(i.fc,s);o||(o=new Bh(n),i.fc[s]=o),n=o}Y.call(this,n,r,de,!1)}function Rc(e,t){J(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?("undefined"!=typeof console&&("function"==typeof console.log?yb=q(console.log,console):"object"==typeof console.log&&(yb=function(e){console.log(e)})),t&&P.set("logging_enabled",!0)):e?yb=e:(yb=null,P.remove("logging_enabled"))}var h,aa=this,la=Date.now||function(){return+(new Date)},ya="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),Ea={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","":"\\u000b"},Fa=/\uffff/.test("")?/[\\\"\x00-\x1f\x7f-\uffff]/g:/[\\\"\x00-\x1f\x7f-\xff]/g,Ha;e:{var Ia=aa.navigator;if(Ia){var Ja=Ia.userAgent;if(Ja){Ha=Ja;break e}}Ha=""}ma(La,Ka),La.prototype.reset=function(){this.R[0]=1732584193,this.R[1]=4023233417,this.R[2]=2562383102,this.R[3]=271733878,this.R[4]=3285377520,this.Xd=this.Tb=0},La.prototype.update=function(e,t){if(null!=e){n(t)||(t=e.length);for(var r=t-this.Sa,i=0,s=this.fe,o=this.Tb;i<t;){if(0==o)for(;i<=r;)Ma(this,e,i),i+=this.Sa;if(p(e)){for(;i<t;)if(s[o]=e.charCodeAt(i),++o,++i,o==this.Sa){Ma(this,s),o=0;break}}else for(;i<t;)if(s[o]=e[i],++o,++i,o==this.Sa){Ma(this,s),o=0;break}}this.Tb=o,this.Xd+=t}};var t=Array.prototype,Na=t.indexOf?function(e,n,r){return t.indexOf.call(e,n,r)}:function(e,t,n){n=null==n?0:0>n?Math.max(0,e.length+n):n;if(p(e))return p(t)&&1==t.length?e.indexOf(t,n):-1;for(;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},Oa=t.forEach?function(e,n,r){t.forEach.call(e,n,r)}:function(e,t,n){for(var r=
e.length,i=p(e)?e.split(""):e,s=0;s<r;s++)s in i&&t.call(n,i[s],s,e)},Pa=t.filter?function(e,n,r){return t.filter.call(e,n,r)}:function(e,t,n){for(var r=e.length,i=[],s=0,o=p(e)?e.split(""):e,u=0;u<r;u++)if(u in o){var a=o[u];t.call(n,a,u,e)&&(i[s++]=a)}return i},Qa=t.map?function(e,n,r){return t.map.call(e,n,r)}:function(e,t,n){for(var r=e.length,i=Array(r),s=p(e)?e.split(""):e,o=0;o<r;o++)o in s&&(i[o]=t.call(n,s[o],o,e));return i},Ra=t.reduce?function(e,n,r,i){for(var s=[],o=1,u=arguments.length;o<u;o++)s.push(arguments[o]);return i&&(s[0]=q(n,i)),t.reduce.apply(e,s)}:function(e,t,n,r){var i=n;return Oa(e,function(n,s){i=t.call(r,i,n,s,e)}),i},Sa=t.every?function(e,n,r){return t.every.call(e,n,r)}:function(e,t,n){for(var r=e.length,i=p(e)?e.split(""):e,s=0;s<r;s++)if(s in i&&!t.call(n,i[s],s,e))return!1;return!0},Za=-1!=Ha.indexOf("Opera")||-1!=Ha.indexOf("OPR"),$a=-1!=Ha.indexOf("Trident")||-1!=Ha.indexOf("MSIE"),ab=-1!=Ha.indexOf("Gecko")&&-1==Ha.toLowerCase().indexOf("webkit")&&-1==Ha.indexOf("Trident")&&-1==Ha.indexOf("MSIE"),bb=-1!=Ha.toLowerCase().indexOf("webkit");(function(){var e="",t;return Za&&aa.opera?(e=aa.opera.version,ha(e)?e():e):(ab?t=/rv\:([^\);]+)(\)|;)/:$a?t=/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/:bb&&(t=/WebKit\/(\S+)/),t&&(e=(e=t.exec(Ha))?e[1]:""),$a&&(t=(t=aa.document)?t.documentMode:void 0,t>parseFloat(e))?String(t):e)})();var cb=null,db=null,eb=null;lb.prototype.j=function(e){return this.Nd.ka(e)},lb.prototype.toString=function(){return this.Nd.toString()},mb.prototype.ff=function(){return null},mb.prototype.re=function(){return null};var nb=new mb;ob.prototype.ff=function(e){var t=this.Ia.C;return pb(t,e)?t.j().K(e):(t=null!=this.Dd?new qb(this.Dd,!0,!1):this.Ia.o(),this.Bf.Ta(e,t))},ob.prototype.re=function(e,t,n){var r=null!=this.Dd?this.Dd:rb(this.Ia);return e=this.Bf.ge(r,t,1,n,e),0===e.length?null:e[0]},ub.prototype.add=function(e){this.kd.push(e)},ub.prototype.Rb=function(){return this.Ea};var Cb="value";Db.prototype.Rb=function(){var e=this.Rd.dc();return"value"===this.jd?e.path:e.parent().path},Db.prototype.se=function(){return this.jd},Db.prototype.Mb=function(){return this.oe.Mb(this)},Db.prototype.toString=function(){return this.Rb().toString()+":"+this.jd+":"+B(this.Rd.cf())},Eb.prototype.Rb=function(){return this.path},Eb.prototype.se=function(){return"cancel"},Eb.prototype.Mb=function(){return this.oe.Mb(this)},Eb.prototype.toString=function(){return this.path.toString()+":cancel"},qb.prototype.j=function(){return this.A},Gb.prototype.o=function(){return this.Pd},Jb.prototype.get=function(){var e=this.Pf.get(),t=xa(e);if(this.sd)for(var n in this.sd)t[n]-=this.sd[n];return this.sd=e,t},Kb.prototype.tf=function(){var e=this.Td.get(),t={},n=!1,r;for(r in e)0<e[r]&&u(this.zf,r)&&(t[r]=e[r],n=!0);n&&(e=this.S,e.ja&&(t={c:t},e.f("reportStats",t),e.Ba("s",t))),setTimeout(q(this.tf,this),Math.floor(6e5*Math.random()))},Lb.prototype.get=function(){return xa(this.uc)};var Nb={},Ob={};Vb.prototype.Mc=function(e){return this.path.e()?new Vb(this.source,F,this.Ga.K(e)):new Vb(this.source,H(this.path),this.Ga)},Vb.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" overwrite: "+this.Ga.toString()+")"},Xb.prototype.Mc=function(){return this.path.e()?this:new Xb(H(this.path),this.Ne)},Xb.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" ack write revert="+this.Ne+")"},$b.prototype.Mc=function(){return this.path.e()?new $b(this.source,F):new $b(this.source,H(this.path))},$b.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" listen_complete)"},h=bc.prototype,h.La=function(e,t){return new bc(this.Ja,this.va.La(e,t,this.Ja).Y(null,null,!1,null,null))},h.remove=function(e){return new bc(this.Ja,this.va.remove(e,this.Ja).Y(null,null,!1,null,null))},h.get=function(e){for(var t,n=this.va;!n.e();){t=this.Ja(e,n.key);if(0===t)return n.value;0>t?n=n.left:0<t&&(n=n.right)}return null},h.e=function(){return this.va.e()},h.count=function(){return this.va.count()},h.Ic=function(){return this.va.Ic()},h.Yb=function(){return this.va.Yb()},h.fa=function(e){return this.va.fa(e)},h.Pb=function(e){return new ec(this.va,null,this.Ja,!1,e)},h.Qb=function(e,t){return new ec(this.va,e,this.Ja,!1,t)},h.Sb=function(e,t){return new ec(this.va,e,this.Ja,!0,t)},h.hf=function(e){return new ec(this.va,null,this.Ja,!0,e)},h=gc.prototype,h.Y=function(e,t,n,r,i){return new gc(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)},h.count=function(){return this.left.count()+1+this.right.count()},h.e=function(){return!1},h.fa=function(e){return this.left.fa(e)||e(this.key,this.value)||this.right.fa(e)},h.Ic=function(){return hc(this).key},h.Yb=function(){return this.right.e()?this.key:this.right.Yb()},h.La=function(e,t,n){var r,i;return i=this,r=n(e,i.key),i=0>r?i.Y(null,null,null,i.left.La(e,t,n),null):0===r?i.Y(null,t,null,null,null):i.Y(null,null,null,null,i.right.La(e,t,n)),ic(i)},h.remove=function(e,t){var n,r;n=this;if(0>t(e,n.key))n.left.e()||n.left.ca()||n.left.left.ca()||(n=kc(n)),n=n.Y(null,null,null,n.left.remove(e,t),null);else{n.left.ca()&&(n=lc(n)),n.right.e()||n.right.ca()||n.right.left.ca()||(n=mc(n),n.left.left.ca()&&(n=lc(n),n=mc(n)));if(0===t(e,n.key)){if(n.right.e())return cc;r=hc(n.right),n=n.Y(r.key,r.value,null,null,jc(n.right))}n=n.Y(null,null,null,null,n.right.remove(e,t))}return ic(n)},h.ca=function(){return this.color},h=oc.prototype,h.Y=function(){return this},h.La=function(e,t){return new gc(e,t,null)},h.remove=function(){return this},h.count=function(){return 0},h.e=function(){return!0},h.fa=function(){return!1},h.Ic=function(){return null},h.Yb=function(){return null},h.ca=function(){return!1};var cc=new oc;h=K.prototype,h.toString=function(){for(var e="",t=this.da;t<this.w.length;t++)""!==this.w[t]&&(e+="/"+this.w[t]);return e||"/"},h.parent=function(){if(this.da>=this.w.length)return null;for(var e=[],t=this.da;t<this.w.length-1;t++)e.push(this.w[t]);return new K(e,0)},h.u=function(e){for(var t=[],n=this.da;n<this.w.length;n++)t.push(this.w[n]);if(e instanceof K)for(n=e.da;n<e.w.length;n++)t.push(e.w[n]);else for(e=e.split("/"),n=0;n<e.length;n++)0<e[n].length&&t.push(e[n]);return new K(t,0)},h.e=function(){return this.da>=this.w.length},h.aa=function(e){if(vc(this)!==vc(e))return!1;for(var t=this.da,n=e.da;t<=this.w.length;t++,n++)if(this.w[t]!==e.w[n])return!1;return!0},h.contains=function(e){var t=this.da,n=e.da;if(vc(this)>vc(e))return!1;for(;t<this.w.length;){if(this.w[t]!==e.w[n])return!1;++t,++n}return!0};var F=new K("");h=yc.prototype,h.za=function(){return this.A.value},h.clear=function(){this.A.value=null,this.A.children={},this.A.ad=0,Bc(this)},h.ld=function(){return 0<this.A.ad},h.e=function(){return null===this.za()&&!this.ld()},h.U=function(e){var t=this;r(this.A.children,function(n,r){e(new yc(r,t,n))})},h.path=function(){return new K(null===this.Oc?this.yd:this.Oc.path()+"/"+this.yd)},h.name=function(){return this.yd},h.parent=function(){return this.Oc},Ec.prototype.set=function(e,t){null==t?delete this.pc[e]:this.pc[e]=t},Ec.prototype.get=function(e){return u(this.pc,e)?this.pc[e]:null},Ec.prototype.remove=function(e){delete this.pc[e]},Ec.prototype.lf=!0,h=Fc.prototype,h.set=function(e,t){null==t?this.vc.removeItem(this.Id+e):this.vc.setItem(this.Id+e,B(t))},h.get=function(e){return e=this.vc.getItem(this.Id+e),null==e?null:kb(e)},h.remove=function(e){this.vc.removeItem(this.Id+e)},h.lf=!1,h.toString=function(){return this.vc.toString()};var Hc=Gc("localStorage"),P=Gc("sessionStorage");Ic.prototype.toString=function(){var e=(this.Bb?"https://":"http://")+this.host;return this.Hd&&(e+="<"+this.Hd+">"),e};var Kc=function(){var e=1;return function(){return e++}}(),yb=null,Qc=!0,dd=/^-?\d{1,10}$/;hd.prototype.Qf=function(e,t){if(null==e.Ua||null==t.Ua)throw Lc("Should only compare child_ events.");return this.g.compare(new E(e.Ua,e.Ha),new E(t.Ua,t.Ha))},h=nd.prototype,h.wf=function(e){return"value"===e},h.createEvent=function(e,t){var n=t.n.g;return new Db("value",this,new S(e.Ha,t.dc(),n))},h.Mb=function(e){var t=this.nb;if("cancel"===e.se()){J(this.lb,"Raising a cancel event on a listener with no cancel callback");var n=this.lb;return function(){n.call(t,e.error)}}var r=this.Hb;return function(){r.call(t,e.Rd)}},h.Ze=function(e,t){return this.lb?new Eb(this,e,t):null},h.matches=function(e){return e instanceof nd?e.Hb&&this.Hb?e.Hb===this.Hb&&e.nb===this.nb:!0:!1},h.jf=function(){return null!==this.Hb},h=od.prototype,h.wf=function(e){return e="children_added"===e?"child_added":e,("children_removed"===e?"child_removed":e)in this.ea},h.Ze=function(e,t){return this.lb?new Eb(this,e,t):null},h.createEvent=function(e,t){J(null!=e.Ua,"Child events should have a childName.");var n=t.dc().u(e.Ua);return new Db(e.type,this,new S(e.Ha,n,t.n.g),e.Jd)},h.Mb=function(e){var t=this.nb;if("cancel"===e.se()){J(this.lb,"Raising a cancel event on a listener with no cancel callback");var n=this.lb;return function(){n.call(t,e.error)}}var r=this.ea[e.jd];return function(){r.call(t,e.Rd,e.Jd)}},h.matches=function(e){if(e instanceof od){if(!this.ea||!e.ea)return!0;if(this.nb===e.nb){var t=pa(e.ea);if(t===pa(this.ea)){if(1===t){var t=qa(e.ea),n=qa(this.ea);return n===t&&(!e.ea[t]||!this.ea[n]||e.ea[t]===this.ea[n])}return oa(this.ea,function(t,n){return e.ea[n]===t})}}}return!1},h.jf=function(){return null!==this.ea},h=pd.prototype,h.F=function(e,t,n,r,i){return J(e.Bc(this.g),"A node must be indexed if only a child is updated"),r=e.K(t),r.aa(n)?e:(null!=i&&(n.e()?e.Da(t)?md(i,new D("child_removed",r,t)):J(e.M(),"A child remove without an old child only makes sense on a leaf node"):r.e()?md(i,new D("child_added",n,t)):md(i,new D("child_changed",n,t,r))),e.M()&&n.e()?e:e.P(t,n).hb(this.g))},h.pa=function(e,t,n){return null!=n&&(e.M()||e.U(M,function(e,r){t.Da(e)||md(n,new D("child_removed",r,e))}),t.M()||t.U(M,function(t,r){if(e.Da(t)){var i=e.K(t);i.aa(r)||md(n,new D("child_changed",r,t,i))}else md(n,new D("child_added",r,t))})),t.hb(this.g)},h.$=function(e,t){return e.e()?C:e.$(t)},h.Ca=function(){return!1},h.Nb=function(){return this},h=qd.prototype,h.matches=function(e){return 0>=this.g.compare(this.Vc,e)&&0>=this.g.compare(e,this.xc)},h.F=function(e,t,n,r,i){return this.matches(new E(t,n))||(n=C),this.ue.F(e,t,n,r,i)},h.pa=function(e,t,n){t.M()&&(t=C);var r=t.hb(this.g),r=r.$(C),i=this;return t.U(M,function(e,t){i.matches(new E(e,t))||(r=r.P(e,C))}),this.ue.pa(e,r,n)},h.$=function(e){return e},h.Ca=function(){return!0},h.Nb=function(){return this.ue},h=wd.prototype,h.F=function(e,t,n,r,i){return this.na.matches(new E(t,n))||(n=C),e.K(t).aa(n)?e:e.vb()<this.sa?this.na.Nb().F(e,t,n,r,i):xd(this,e,t,n,r,i)},h.pa=function(e,t,n){var r;if(t.M()||t.e())r=C.hb(this.g);else if(2*this.sa<t.vb()&&t.Bc(this.g)){r=C.hb(this.g),t=this.Ab?t.Sb(this.na.xc,this.g):t.Qb(this.na.Vc,this.g);for(var i=0;0<t.Na.length&&i<this.sa;){var s=I(t),o;if(!(o=this.Ab?0>=this.g.compare(this.na.Vc,s):0>=this.g.compare(s,this.na.xc)))break;r=r.P(s.name,s.V),i++}}else{r=t.hb(this.g),r=r.$(C);var u,a,f;if(this.Ab){t=r.hf(this.g),u=this.na.xc,a=this.na.Vc;var l=yd(this.g);f=function(e,t){return l(t,e)}}else t=r.Pb(this.g),u=this.na.Vc,a=this.na.xc,f=yd(this.g);for(var i=0,c=!1;0<t.Na.length;)s=I(t),!c&&0>=f(u,s)&&(c=!0),(o=c&&i<this.sa&&0>=f(s,a))?i++:r=r.P(s.name,C)}return this.na.Nb().pa(e,r,n)},h.$=function(e){return e},h.Ca=function(){return!0},h.Nb=function(){return this.na.Nb()},Cd.prototype.Ya=function(e,t,n,r){var i=new ld,s;if(t.type===Wb)t.source.pe?n=Dd(this,e,t.path,t.Ga,n,r,i):(J(t.source.ef,"Unknown source."),s=t.source.Te,n=Ed(this,e,t.path,t.Ga,n,r,s,i));else if(t.type===Fd)t.source.pe?n=Gd(this,e,t.path,t.children,n,r,i):(J(t.source.ef,"Unknown source."),s=t.source.Te,n=Hd(this,e,t.path,t.children,n,r,s,i));else if(t.type===Yb)if(t.Ne)if(s=t.path,null!=n.kc(s))n=e;else{t=new ob(n,e,r),r=e.C.j();if(s.e()||".priority"===O(s))Fb(e.o())?t=n.qa(rb(e)):(t=e.o().j(),J(t instanceof T,"serverChildren would be complete if leaf node"),t=n.qc(t)),t=this.G.pa(r,t,i);else{s=O(s);var o=n.Ta(s,e.o());null==o&&pb(e.o(),s)&&(o=r.K(s)),t=null!=o?this.G.F(r,s,o,t,i):e.C.j().Da(s)?this.G.F(r,s,C,t,i):r,t.e()&&Fb(e.o())&&(r=n.qa(rb(e)),r.M()&&(t=this.G.pa(t,r,i)))}r=Fb(e.o())||null!=n.kc(F),n=Hb(e,t,r,this.G.Ca())}else n=Id(this,e,t.path,n,r,i);else{if(t.type!==ac)throw Lc("Unknown operation type: "+t.type);r=t.path,t=e.o(),s=t.j(),o=t.Z||r.e(),n=Jd(this,new Gb(e.C,new qb(s,o,t.Lb)),r,n,nb,i)}return i=ra(i.Za),r=n,t=r.C,t.Z&&(s=t.j().M()||t.j().e(),o=Ib(e),(0<i.length||!e.C.Z||s&&!t.j().aa(o)||!t.j().L().aa(o.L()))&&i.push(Bb(Ib(r)))),new Bd(n,i)},h=Od.prototype,h.o=function(){return this.Ia.o().j()},h.bb=function(e){var t=rb(this.Ia);return t&&(Pd(this.W.n)||!e.e()&&!t.K(O(e)).e())?t.ka(e):null},h.e=function(){return 0===this.Va.length},h.Gb=function(e){this.Va.push(e)},h.gb=function(e,t){var n=[];if(t){J(null==e,"A cancel should cancel all event registrations.");var r=this.W.path;Oa(this.Va,function(e){(e=e.Ze(t,r))&&n.push(e)})}if(e){for(var i=[],s=0;s<this.Va.length;++s){var o=this.Va[s];if(!o.matches(e))i.push(o);else if(e.jf()){i=i.concat(this.Va.slice(s+1));break}}this.Va=i}else this.Va=[];return n},h.Ya=function(e,t,n){e.type===Fd&&null!==e.source.zb&&(J(rb(this.Ia),"We should always have a full cache before handling merges"),J(Ib(this.Ia),"Missing event cache, even though we have a server cache"));var r=this.Ia;return e=this.sf.Ya(r,e,t,n),t=this.sf,n=e.be,J(n.C.j().Bc(t.G.g),"Event snap not indexed"),J(n.o().j().Bc(t.G.g),"Server snap not indexed"),J(Fb(e.be.o())||!Fb(r.o()),"Once a server snap is complete, it should never go back"),this.Ia=e.be,Rd(this,e.Of,e.be.C.j(),null)};var Ud={};Td.prototype.ve=function(e,t){return 0!==this.compare(new E("[MIN_NAME]",e),new E("[MIN_NAME]",t))},Td.prototype.xd=function(){return Vd},ma(Wd,Td),h=Wd.prototype,h.rd=function(e){return!e.K(this.Vb).e()},h.compare=function(e,t){var n=e.V.K(this.Vb),r=t.V.K(this.Vb),n=n.cd(r);return 0===n?Tb(e.name,t.name):n},h.td=function(e,t){var n=L(e),n=C.P(this.Vb,n);return new E(t,n)},h.vd=function(){var e=C.P(this.Vb,Xd);return new E("[MAX_NAME]",e)},h.toString=function(){return this.Vb};var M=new Wd(".priority");ma(Yd,Td),h=Yd.prototype,h.compare=function(e,t){return Tb(e.name,t.name)},h.rd=function(){throw Lc("KeyIndex.isDefinedOn not expected to be called.")},h.ve=function(){return!1},h.xd=function(){return Vd},h.vd=function(){return new E("[MAX_NAME]",C)},h.td=function(e){return J(p(e),"KeyIndex indexValue must always be a string."),new E(e,C)},h.toString=function(){return".key"};var Zd=new Yd;ma($d,Td),h=$d.prototype,h.compare=function(e,t){var n=e.V.cd(t.V);return 0===n?Tb(e.name,t.name):n},h.rd=function(){return!0},h.ve=function(e,t){return!e.aa(t)},h.xd=function(){return Vd},h.vd=function(){return ae},h.td=function(e,t){var n=L(e);return new E(t,n)},h.toString=function(){return".value"};var be=new $d,de=new ce;h=ce.prototype,h.Ae=function(e){var t=ee(this);return t.la=!0,t.sa=e,t.Fb="",t},h.Be=function(e){var t=ee(this);return t.la=!0,t.sa=e,t.Fb="l",t},h.Ce=function(e){var t=ee(this);return t.la=!0,t.sa=e,t.Fb="r",t},h.Sd=function(e,t){var r=ee(this);return r.ia=!0,n(e)||(e=null),r.Ac=e,null!=t?(r.lc=!0,r.Xb=t):(r.lc=!1,r.Xb=""),r},h.hd=function(e,t){var r=ee(this);return r.ra=!0,n(e)||(e=null),r.zc=e,n(t)?(r.wc=!0,r.Ub=t):(r.Jg=!1,r.Ub=""),r},h.toString=function(){return B(ge(this))},he.prototype.get=function(e){var t=v(this.pd,e);if(!t)throw Error("No index defined for "+e);return t===Ud?null:t};var le=new he({".priority":Ud},{".priority":M});h=uc.prototype,h.M=function(){return!0},h.L=function(){return this.ha},h.$=function(e){return new uc(this.B,e)},h.K=function(e){return".priority"===e?this.ha:C},h.ka=function(e){return e.e()?this:".priority"===O(e)?this.ha:C},h.Da=function(){return!1},h.gf=function(){return null},h.P=function(e,t){return".priority"===e?this.$(t):t.e()&&".priority"!==e?this:C.P(e,t).$(this.ha)},h.F=function(e,t){var n=O(e);return null===n?t:t.e()&&".priority"!==n?this:(J(".priority"!==n||1===vc(e),".priority must be the last token in a path"),this.P(n,C.F(H(e),t)))},h.e=function(){return!1},h.vb=function(){return 0},h.I=function(e){return e&&!this.L().e()?{".value":this.za(),".priority":this.L().I()}:this.za()},h.hash=function(){if(null===this.tb){var e="";this.ha.e()||(e+="priority:"+ne(this.ha.I())+":");var t=typeof this.B,e=e+(t+":"),e="number"===t?e+cd(this.B):e+this.B;this.tb=Nc(e)}return this.tb},h.za=function(){return this.B},h.cd=function(e){if(e===C)return 1;if(e instanceof T)return-1;J(e.M(),"Unknown node type");var t=typeof e.B,n=typeof this.B,r=Na(oe,t),i=Na(oe,n);return J(0<=r,"Unknown leaf type: "+t),J(0<=i,"Unknown leaf type: "+n),r===i?"object"===n?0:this.B<e.B?-1:this.B===e.B?0:1:i-r};var oe=["object","boolean","number","string"];uc.prototype.hb=function(){return this},uc.prototype.Bc=function(){return!0},uc.prototype.aa=function(e){return e===this?!0:e.M()?this.B===e.B&&this.ha.aa(e.ha):!1},uc.prototype.toString=function(){return B(this.I(!0))},h=T.prototype,h.M=function(){return!1},h.L=function(){return this.ha||C},h.$=function(e){return new T(this.m,e,this.pb)},h.K=function(e){return".priority"===e?this.L():(e=this.m.get(e),null===e?C:e)},h.ka=function(e){var t=O(e);return null===t?this:this.K(t).ka(H(e))},h.Da=function(e){return null!==this.m.get(e)},h.P=function(e,t){J(t,"We should always be passing snapshot nodes");if(".priority"===e)return this.$(t);var n=new E(e,t),r,i;return t.e()?(r=this.m.remove(e),n=ke(this.pb,n,this.m)):(r=this.m.La(e,t),n=ie(this.pb,n,this.m)),i=r.e()?C:this.ha,new T(r,i,n)},h.F=function(e,t){var n=O(e);if(null===n)return t;J(".priority"!==O(e)||1===vc(e),".priority must be the last token in a path");var r=this.K(n).F(H(e),t);return this.P(n,r)},h.e=function(){return this.m.e()},h.vb=function(){return this.m.count()};var pe=/^(0|[1-9]\d*)$/;h=T.prototype,h.I=function(e){if(this.e())return null;var t={},n=0,r=0,i=!0;this.U(M,function(s,o){t[s]=o.I(e),n++,i&&pe.test(s)?r=Math.max(r,Number(s)):i=!1});if(!e&&i&&r<2*n){var s=[],o;for(o in t)s[o]=t[o];return s}return e&&!this.L().e()&&(t[".priority"]=this.L().I()),t},h.hash=function(){if(null===this.tb){var e="";this.L().e()||(e+="priority:"+ne(this.L().I())+":"),this.U(M,function(t,n){var r=n.hash();""!==r&&(e+=":"+t+":"+r)}),this.tb=""===e?"":Nc(e)}return this.tb},h.gf=function(e,t,n){return(n=qe(this,n))?(e=dc(n,new E(e,t)))?e.name:null:dc(this.m,e)},h.U=function(e,t){var n=qe(this,e);return n?n.fa(function(e){return t(e.name,e.V)}):this.m.fa(t)},h.Pb=function(e){return this.Qb(e.xd(),e)},h.Qb=function(e,t){var n=qe(this,t);if(n)return n.Qb(e,function(e){return e});for(var n=this.m.Qb(e.name,Rb),r=fc(n);null!=r&&0>t.compare(r,e);)I(n),r=fc(n);return n},h.hf=function(e){return this.Sb(e.vd(),e)},h.Sb=function(e,t){var n=qe(this,t);if(n)return n.Sb(e,function(e){return e});for(var n=this.m.Sb(e.name,Rb),r=fc(n);null!=r&&0<t.compare(r,e);)I(n),r=fc(n);return n},h.cd=function(e){return this.e()?e.e()?0:-1:e.M()||e.e()?1:e===Xd?-1:0},h.hb=function(e){if(e===Zd||ta(this.pb.Wb,e.toString()))return this;var t=this.pb,n=this.m;J(e!==Zd,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r=[],i=!1,n=n.Pb(Rb),s=I(n);s;)i=i||e.rd(s.V),r.push(s),s=I(n);return r=i?je(r,yd(e)):Ud,i=e.toString(),n=xa(t.Wb),n[i]=e,e=xa(t.pd),e[i]=r,new T(this.m,this.ha,new he(e,n))},h.Bc=function(e){return e===Zd||ta(this.pb.Wb,e.toString())},h.aa=function(e){if(e===this)return!0;if(e.M())return!1;if(this.L().aa(e.L())&&this.m.count()===e.m.count()){var t=this.Pb(M);e=e.Pb(M);for(var n=I(t),r=I(e);n&&r;){if(n.name!==r.name||!n.V.aa(r.V))return!1;n=I(t),r=I(e)}return null===n&&null===r}return!1},h.toString=function(){return B(this.I(!0))};var re=Math.log(2),C=new T(new bc(Ub),null,le);ma(ue,T),h=ue.prototype,h.cd=function(e){return e===this?0:1},h.aa=function(e){return e===this},h.L=function(){throw Lc("Why is this called?")},h.K=function(){return C},h.e=function(){return!1};var Xd=new ue,Vd=new E("[MIN_NAME]",C),ae=new E("[MAX_NAME]",Xd);ve.prototype.Mc=function(e){return this.path.e()?(e=this.children.subtree(new K(e)),e.e()?null:e.value?new Vb(this.source,F,e.value):new ve(this.source,F,e)):(J(O(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new ve(this.source,H(this.path),this.children))},ve.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"};var Wb=0,Fd=1,Yb=2,ac=3,Zb=new we(!0,!1,null,!1),xe=new we(!1,!0,null,!1);we.prototype.toString=function(){return this.pe?"user":this.Te?"server(queryID="+this.zb+")":"server"};var ze=new bc(function(e,t){return e===t?0:e<t?-1:1});h=ye.prototype,h.e=function(){return null===this.value&&this.children.e()},h.subtree=function(e){if(e.e())return this;var t=this.children.get(O(e));return null!==t?t.subtree(H(e)):Nd},h.set=function(e,t){if(e.e())return new ye(t,this.children);var n=O(e),r=(this.children.get(n)||Nd).set(H(e),t),n=this.children.La(n,r);return new ye(this.value,n)},h.remove=function(e){if(e.e())return this.children.e()?Nd:new ye(null,this.children);var t=O(e),n=this.children.get(t);return n?(e=n.remove(H(e)),t=e.e()?this.children.remove(t):this.children.La(t,e),null===this.value&&t.e()?Nd:new ye(this.value,t)):this},h.get=function(e){if(e.e())return this.value;var t=this.children.get(O(e));return t?t.get(H(e)):null};var Nd=new ye(null);ye.prototype.toString=function(){var e={};return Kd(this,function(t,n){e[t.toString()]=n.toString()}),B(e)};var Me=new Le(new ye(null));Le.prototype.Kd=function(e){return e.e()?Me:(e=Md(this.X,e,Nd),new Le(e))},Le.prototype.e=function(){return this.X.e()},Le.prototype.apply=function(e){return Se(F,this.X,e)},h=Te.prototype,h.Kd=function(e){var t=Ua(this.xa,function(t){return t.ce===e});J(0<=t,"removeWrite called with nonexistent writeId.");var n=this.xa[t];this.xa.splice(t,1);for(var i=n.visible,s=!1,o=this.xa.length-1;i&&0<=o;){var u=this.xa[o];u.visible&&(o>=t&&Ue(u,n.path)?i=!1:n.path.contains(u.path)&&(s=!0)),o--}if(i){if(s)this.T=Ve(this.xa,We,F),this.Ec=0<this.xa.length?this.xa[this.xa.length-1].ce:-1;else if(n.Ga)this.T=this.T.Kd(n.path);else{var a=this;r(n.children,function(e,t){a.T=a.T.Kd(n.path.u(t))})}return n.path}return null},h.qa=function(e,t,n,r){if(n||r){var i=Re(this.T,e);return!r&&i.e()?t:r||null!=t||null!=Pe(i,F)?(i=Ve(this.xa,function(t){return(t.visible||r)&&(!n||!(0<=Na(n,t.ce)))&&(t.path.contains(e)||e.contains(t.path))},e),t=t||C,i.apply(t)):null}return i=Pe(this.T,e),null!=i?i:(i=Re(this.T,e),i.e()?t:null!=t||null!=Pe(i,F)?(t=t||C,i.apply(t)):null)},h.qc=function(e,t){var n=C,r=Pe(this.T,e);if(r)r.M()||r.U(M,function(e,t){n=n.P(e,t)});else if(t){var i=Re(this.T,e);t.U(M,function(e,t){var r=Re(i,new K(e)).apply(t);n=n.P(e,r)}),Oa(Qe(i),function(e){n=n.P(e.name,e.V)})}else i=Re(this.T,e),Oa(Qe(i),function(e){n=n.P(e.name,e.V)});return n},h.Zc=function(e,t,n,r){return J(n||r,"Either existingEventSnap or existingServerSnap must exist"),e=e.u(t),null!=Pe(this.T,e)?null:(e=Re(this.T,e),e.e()?r.ka(t):e.apply(r.ka(t)))},h.Ta=function(e,t,n){e=e.u(t);var r=Pe(this.T,e);return null!=r?r:pb(n,t)?Re(this.T,e).apply(n.j().K(t)):null},h.kc=function(e){return Pe(this.T,e)},h.ge=function(e,t,n,r,i,s){var o;e=Re(this.T,e),o=Pe(e,F);if(null==o){if(null==t)return[];o=e.apply(t)}o=o.hb(s);if(o.e()||o.M())return[];t=[],e=yd(s),i=i?o.Sb(n,s):o.Qb(n,s);for(s=I(i);s&&t.length<r;)0!==e(s,n)&&t.push(s),s=I(i);return t},h=Xe.prototype,h.qa=function(e,t,n){return this.X.qa(this.Eb,e,t,n)},h.qc=function(e){return this.X.qc(this.Eb,e)},h.Zc=function(e,t,n){return this.X.Zc(this.Eb,e,t,n)},h.kc=function(e){return this.X.kc(this.Eb.u(e))},h.ge=function(e,t,n,r,i){return this.X.ge(this.Eb,e,t,n,r,i)},h.Ta=function(e,t){return this.X.Ta(this.Eb,e,t)},h.u=function(e){return new Xe(this.Eb.u(e),this.X)},h=Ye.prototype,h.e=function(){return wa(this.wa)},h.Ya=function(e,t,n){var i=e.source.zb;if(null!==i)return i=v(this.wa,i),J(null!=i,"SyncTree gave us an op for an invalid query."),i.Ya(e,t,n);var s=[];return r(this.wa,function(r){s=s.concat(r.Ya(e,t,n))}),s},h.Gb=function(e,t,n,r,i){var s=e.Fa(),o=v(this.wa,s);if(!o){var o=n.qa(i?r:null),u=!1;o?u=!0:(o=r instanceof T?n.qc(r):C,u=!1),o=new Od(e,new Gb(new qb(o,u,!1),new qb(r,i,!1))),this.wa[s]=o}return o.Gb(t),Sd(o,t)},h.gb=function(e,t,n){var i=e.Fa(),s=[],o=[],u=null!=Ze(this);if("default"===i){var a=this;r(this.wa,function(e,r){o=o.concat(e.gb(t,n)),e.e()&&(delete a.wa[r],Pd(e.W.n)||s.push(e.W))})}else{var f=v(this.wa,i);f&&(o=o.concat(f.gb(t,n)),f.e()&&(delete this.wa[i],Pd(f.W.n)||s.push(f.W)))}return u&&null==Ze(this)&&s.push(new U(e.k,e.path)),{sg:s,Vf:o}},h.bb=function(e){var t=null;return r(this.wa,function(n){t=t||n.bb(e)}),t},bf.prototype.Gb=function(e,t){var n=e.path,r=null,i=!1;He(this.oa,n,function(e,t){var s=N(e,n);return r=t.bb(s),i=i||null!=Ze(t),!r});var s=this.oa.get(n);s?(i=i||null!=Ze(s),r=r||s.bb(F)):(s=new Ye,this.oa=this.oa.set(n,s));var o;null!=r?o=!0:(o=!1,r=C,Ke(this.oa.subtree(n),function(e,t){var n=t.bb(F);n&&(r=r.P(e,n))}));var u=null!=af(s,e);if(!u&&!Pd(e.n)){var a=nf(e);J(!(a in this.cc),"View does not exist, but we have a tag");var f=of++;this.cc[a]=f,this.Se["_"+f]=a}return o=s.Gb(e,t,new Xe(n,this.yb),r,o),u||i||(s=af(s,e),o=o.concat(pf(this,e,s))),o},bf.prototype.gb=function(e,t,n){var r=e.path,i=this.oa.get(r),s=[];if(i&&("default"===e.Fa()||null!=af(i,e))){s=i.gb(e,t,n),i.e()&&(this.oa=this.oa.remove(r)),i=s.sg,s=s.Vf,t=-1!==Ua(i,function(e){return Pd(e.n)});var o=Fe(this.oa,r,function(e,t){return null!=Ze(t)});if(t&&!o&&(r=this.oa.subtree(r),!r.e()))for(var r=qf(r),u=0;u<r.length;++u){var a=r[u],f=a.W,a=rf(this,a);this.Fc.Pe(f,sf(this,f),a.md,a.H)}if(!o&&0<i.length&&!n)if(t)this.Fc.Ud(e,null);else{var l=this;Oa(i,function(e){e.Fa();var t=l.cc[nf(e)];l.Fc.Ud(e,t)})}tf(this,i)}return s},bf.prototype.qa=function(e,t){var n=this.yb,r=Fe(this.oa,e,function(t,n){var r=N(t,e);if(r=n.bb(r))return r});return n.qa(e,r,t,!0)};var of=1;wf.prototype.Zd=function(e,t){for(var n=this.Gc[e]||[],r=0;r<n.length;r++)n[r].rc.apply(n[r].Ka,Array.prototype.slice.call(arguments,1))},wf.prototype.wb=function(e,t,n){xf(this,e),this.Gc[e]=this.Gc[e]||[],this.Gc[e].push({rc:t,Ka:n}),(e=this.te(e))&&t.apply(n,e)},wf.prototype.$b=function(e,t,n){xf(this,e),e=this.Gc[e]||[];for(var r=0;r<e.length;r++)if(e[r].rc===t&&(!n||n===e[r].Ka)){e.splice(r,1);break}};var yf=function(){var e=0,t=[];return function(n){var r=n===e;e=n;for(var i=Array(8),s=7;0<=s;s--)i[s]="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz".charAt(n%64),n=Math.floor(n/64);J(0===n,"Cannot push at time == 0"),n=i.join("");if(r){for(s=11;0<=s&&63===t[s];s--)t[s]=0;t[s]++}else for(s=0;12>s;s++)t[s]=Math.floor(64*Math.random());for(s=0;12>s;s++)n+="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz".charAt(t[s]);return J(20===n.length,"nextPushId: Length should be 20."),n}}();ma(zf,wf),zf.prototype.te=function(e){return J("online"===e,"Unknown event type: "+e),[this.Lc]},ca(zf),ma(Af,wf),Af.prototype.te=function(e){return J("visible"===e,"Unknown event type: "+e),[this.nc]},ca(Af);var Bf=/[\[\].#$\/\u0000-\u001F\u007F]/,Cf=/[\[\].#$\u0000-\u001F\u007F]/;h=Rf.prototype,h.add=function(e,t){this.set[e]=null!==t?t:!0},h.contains=function(e){return u(this.set,e)},h.get=function(e){return this.contains(e)?this.set[e]:void 0},h.remove=function(e){delete this.set[e]},h.clear=function(){this.set={}},h.e=function(){return wa(this.set)},h.count=function(){return pa(this.set)},h.keys=function(){var e=[];return r(this.set,function(t,n){e.push(n)}),e},rc.prototype.find=function(e){if(null!=this.B)return this.B.ka(e);if(e.e()||null==this.m)return null;var t=O(e);return e=H(e),this.m.contains(t)?this.m.get(t).find(e):null},rc.prototype.ec=function(e,t){if(e.e())this.B=t,this.m=null;else if(null!==this.B)this.B=this.B.F(e,t);else{null==this.m&&(this.m=new Rf);var n=O(e);this.m.contains(n)||this.m.add(n,new rc),n=this.m.get(n),e=H(e),n.ec(e,t)}},rc.prototype.U=function(e){null!==this.m&&Sf(this.m,function(t,n){e(t,n)})};var Uf="auth.firebase.com",Wf=["remember","redirectTo"];Yf.prototype.set=function(e,t){if(!t){if(!this.Vd.length)throw Error("fb.login.SessionManager : No storage options available!");t=this.Vd[0]}t.set(this.Je,e)},Yf.prototype.get=function(){var e=Qa(this.Vd,q(this.Zf,this)),e=Pa(e,function(e){return null!==e});return Xa(e,function(e,t){return fd(t.token)-fd(e.token)}),0<e.length?e.shift():null},Yf.prototype.Zf=function(e){try{var t=e.get(this.Je);if(t&&t.token)return t}catch(n){}return null},Yf.prototype.clear=function(){var e=this;Oa(this.Vd,function(t){t.remove(e.Je)})},ig.prototype.ac=function(e){var t=this,n;try{n=kb(e.data)}catch(r){}n&&"request"===n.a&&(cg(window,"message",this.ac),this.Wd=e.origin,this.sc&&setTimeout(function(){t.sc(t.Wd,n.d,function(e,n){t.Mf=!n,t.sc=void 0,jg(t,{a:"response",d:e,forceKeepWindowOpen:n})})},0))},ig.prototype.jg=function(){try{cg(this.od,"message",this.nf)}catch(e){}this.sc&&(jg(this,{a:"error",d:"unknown closed window"}),this.sc=void 0);try{window.close()}catch(t){}},ig.prototype.nf=function(e){if(this.Mf&&"die"===e.data)try{window.close()}catch(t){}},kg.prototype.open=function(e,t){P.set("redirect_request_id",this.gc),P.set("redirect_request_id",this.gc),t.requestId=this.gc,t.redirectTo=t.redirectTo||window.location.href,e+=(/\?/.test(e)?"":"?")+fg(t),window.location=e},kg.isAvailable=function(){return!/^file:\//.test(location.href)&&!Zf()},kg.prototype.tc=function(){return"redirect"};var lg={NETWORK_ERROR:"Unable to contact the Firebase server.",SERVER_ERROR:"An unknown server error occurred.",TRANSPORT_UNAVAILABLE:"There are no login transports available for the requested method.",REQUEST_INTERRUPTED:"The browser redirected the page before the login request could complete.",USER_CANCELLED:"The user cancelled authentication."};ng.prototype.open=function(e,t,n){function r(e){o&&(document.body.removeChild(o),o=void 0),l&&(l=clearInterval(l)),cg(window,"message",i),cg(window,"unload",r);if(f&&!e)try{f.close()}catch(t){u.postMessage("die",a)}f=u=void 0}function i(e){if(e.origin===a)try{var t=kb(e.data);"ready"===t.a?u.postMessage(c,a):"error"===t.a?(r(!1),n&&(n(t.d),n=null)):"response"===t.a&&(r(t.forceKeepWindowOpen),n&&(n(null,t.d),n=null))}catch(i){}}var s=$f(),o,u;if(!this.options.relay_url)return n(Error("invalid arguments: origin of url and relay_url must match"));var a=dg(e);if(a!==dg(this.options.relay_url))n&&setTimeout(function(){n(Error("invalid arguments: origin of url and relay_url must match"))},0);else{s&&(o=document.createElement("iframe"),o.setAttribute("src",this.options.relay_url),o.style.display="none",o.setAttribute("name","__winchan_relay_frame"),document.body.appendChild(o),u=o.contentWindow),e+=(/\?/.test(e)?"":"?")+fg(t);var f=window.open(e,this.options.window_name,this.options.window_features);u||(u=f);var l=setInterval(function(){f&&f.closed&&(r(!1),n&&(n(mg("USER_CANCELLED")),n=null))},500),c=B({a:"request",d:t});bg(window,"unload",r),bg(window,"message",i)}},ng.isAvailable=function(){return"postMessage"in window&&!/^file:\//.test(location.href)&&!(Zf()||navigator.userAgent.match(/Windows Phone/)||window.Windows&&/^ms-appx:/.test(location.href)||navigator.userAgent.match(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i)||navigator.userAgent.match(/CriOS/)||navigator.userAgent.match(/Twitter for iPhone/)||navigator.userAgent.match(/FBAN\/FBIOS/)||window.navigator.standalone)&&!navigator.userAgent.match(/PhantomJS/)},ng.prototype.tc=function(){return"popup"},og.prototype.open=function(e,t,n){function r(){n&&(n(mg("REQUEST_INTERRUPTED")),n=null)}var i=new XMLHttpRequest,s=this.options.method.toUpperCase(),o;bg(window,"beforeunload",r),i.onreadystatechange=function(){if(n&&4===i.readyState){var e;if(200<=i.status&&300>i.status){try{e=kb(i.responseText)}catch(t){}n(null,e)}else 500<=i.status&&600>i.status?n(mg("SERVER_ERROR")):n(mg("NETWORK_ERROR"));n=null,cg(window,"beforeunload",r)}};if("GET"===s)e+=(/\?/.test(e)?"":"?")+fg(t),o=null;else{var u=this.options.headers.content_type;"application/json"===u&&(o=B(t)),"application/x-www-form-urlencoded"===u&&(o=fg(t))}i.open(s,e,!0),e={"X-Requested-With":"XMLHttpRequest",Accept:"application/json;text/plain"},za(e,this.options.headers);for(var a in e)i.setRequestHeader(a,e[a]);i.send(o)},og.isAvailable=function(){return!!window.XMLHttpRequest&&"string"==typeof (new XMLHttpRequest).responseType&&(!navigator.userAgent.match(/MSIE/)&&!navigator.userAgent.match(/Trident/)||$f())},og.prototype.tc=function(){return"json"},pg.prototype.open=function(e,t,n){function r(){n&&(n
(mg("USER_CANCELLED")),n=null)}var i=this,s=Vc(Uf),o;t.requestId=this.gc,t.redirectTo=s.scheme+"://"+s.host+"/blank/page.html",e+=/\?/.test(e)?"":"?",e+=fg(t),(o=window.open(e,"_blank","location=no"))&&ha(o.addEventListener)?(o.addEventListener("loadstart",function(e){var t;if(t=e&&e.url)e:{try{var u=document.createElement("a");u.href=e.url,t=u.host===s.host&&"/blank/page.html"===u.pathname;break e}catch(a){}t=!1}t&&(e=eg(e.url),o.removeEventListener("exit",r),o.close(),e=new Vf(null,null,{requestId:i.gc,requestKey:e}),i.pf.requestWithCredential("/auth/session",e,n),n=null)}),o.addEventListener("exit",r)):n(mg("TRANSPORT_UNAVAILABLE"))},pg.isAvailable=function(){return Zf()},pg.prototype.tc=function(){return"redirect"},qg.prototype.open=function(e,t,n){function r(){n&&(n(mg("REQUEST_INTERRUPTED")),n=null)}function i(){setTimeout(function(){window.__firebase_auth_jsonp[s]=void 0,wa(window.__firebase_auth_jsonp)&&(window.__firebase_auth_jsonp=void 0);try{var e=document.getElementById(s);e&&e.parentNode.removeChild(e)}catch(t){}},1),cg(window,"beforeunload",r)}var s="fn"+(new Date).getTime()+Math.floor(99999*Math.random());t[this.options.callback_parameter]="__firebase_auth_jsonp."+s,e+=(/\?/.test(e)?"":"?")+fg(t),bg(window,"beforeunload",r),window.__firebase_auth_jsonp[s]=function(e){n&&(n(null,e),n=null),i()},rg(s,e,n)},qg.isAvailable=function(){return!Zf()},qg.prototype.tc=function(){return"json"},ma(sg,wf),h=sg.prototype,h.qe=function(){return this.ib||null},h.me=function(e,t){Bg(this);var n=Xf(e);n.Xa._method="POST",this.hc("/users",n,function(e,n){e?R(t,e):R(t,e,n)})},h.Le=function(e,t){var n=this;Bg(this);var r="/users/"+encodeURIComponent(e.email),i=Xf(e);i.Xa._method="DELETE",this.hc(r,i,function(e,r){!e&&r&&r.uid&&n.ib&&n.ib.uid&&n.ib.uid===r.uid&&zg(n),R(t,e)})},h.ie=function(e,t){Bg(this);var n="/users/"+encodeURIComponent(e.email)+"/password",r=Xf(e);r.Xa._method="PUT",r.Xa.password=e.newPassword,this.hc(n,r,function(e){R(t,e)})},h.he=function(e,t){Bg(this);var n="/users/"+encodeURIComponent(e.oldEmail)+"/email",r=Xf(e);r.Xa._method="PUT",r.Xa.email=e.newEmail,r.Xa.password=e.password,this.hc(n,r,function(e){R(t,e)})},h.Me=function(e,t){Bg(this);var n="/users/"+encodeURIComponent(e.email)+"/password",r=Xf(e);r.Xa._method="POST",this.hc(n,r,function(e){R(t,e)})},h.hc=function(e,t,n){Eg(this,[og,qg],e,t,n)},h.te=function(e){return J("auth_status"===e,'initial event must be of type "auth_status"'),[this.ib]};var Jg,Kg;Ig.prototype.open=function(e,t){this.$e=0,this.ga=t,this.mf=new Fg(e),this.rb=!1;var n=this;this.mb=setTimeout(function(){n.f("Timed out trying to connect."),n.eb(),n.mb=null},Math.floor(3e4)),Xc(function(){if(!n.rb){n.Pa=new Lg(function(e,t,r,i,s){Mg(n,arguments);if(n.Pa)if(n.mb&&(clearTimeout(n.mb),n.mb=null),n.yc=!0,"start"==e)n.id=t,n.rf=r;else{if("close"!==e)throw Error("Unrecognized command received: "+e);t?(n.Pa.Od=!1,Gg(n.mf,t,function(){n.eb()})):n.eb()}},function(e,t){Mg(n,arguments),Hg(n.mf,e,t)},function(){n.eb()},n.Yc);var e={start:"t"};e.ser=Math.floor(1e8*Math.random()),n.Pa.$d&&(e.cb=n.Pa.$d),e.v="5",n.Qd&&(e.s=n.Qd),"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf("firebaseio.com")&&(e.r="f"),e=n.Yc(e),n.f("Connecting via long-poll to "+e),Ng(n.Pa,e,function(){})}})},Ig.prototype.start=function(){var e=this.Pa,t=this.rf;e.cg=this.id,e.dg=t;for(e.ee=!0;Og(e););e=this.id,t=this.rf,this.Zb=document.createElement("iframe");var n={dframe:"t"};n.id=e,n.pw=t,this.Zb.src=this.Yc(n),this.Zb.style.display="none",document.body.appendChild(this.Zb)},Ig.isAvailable=function(){return!Kg&&!("object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&("object"!=typeof Windows||"object"!=typeof Windows.Fg)&&(Jg||!0)},h=Ig.prototype,h.ud=function(){},h.Uc=function(){this.rb=!0,this.Pa&&(this.Pa.close(),this.Pa=null),this.Zb&&(document.body.removeChild(this.Zb),this.Zb=null),this.mb&&(clearTimeout(this.mb),this.mb=null)},h.eb=function(){this.rb||(this.f("Longpoll is closing itself"),this.Uc(),this.ga&&(this.ga(this.yc),this.ga=null))},h.close=function(){this.rb||(this.f("Longpoll is being closed."),this.Uc())},h.send=function(e){e=B(e),this.kb+=e.length,Mb(this.Ra,"bytes_sent",e.length),e=Oc(e),e=fb(e,!0),e=ad(e,1840);for(var t=0;t<e.length;t++){var n=this.Pa;n.Qc.push({ug:this.$e,Cg:e.length,bf:e[t]}),n.ee&&Og(n),this.$e++}},Lg.prototype.close=function(){this.ee=!1;if(this.Aa){this.Aa.ab.body.innerHTML="";var e=this;setTimeout(function(){null!==e.Aa&&(document.body.removeChild(e.Aa),e.Aa=null)},Math.floor(0))}var t=this.fb;t&&(this.fb=null,t())};var Qg=null;"undefined"!=typeof MozWebSocket?Qg=MozWebSocket:"undefined"!=typeof WebSocket&&(Qg=WebSocket);var Sg;Rg.prototype.open=function(e,t){this.fb=t,this.hg=e,this.f("Websocket connecting to "+this.$a),this.yc=!1,Hc.set("previous_websocket_failure",!0);try{this.ua=new Qg(this.$a)}catch(n){this.f("Error instantiating WebSocket.");var r=n.message||n.data;r&&this.f(r),this.eb();return}var i=this;this.ua.onopen=function(){i.f("Websocket connected."),i.yc=!0},this.ua.onclose=function(){i.f("Websocket connection was disconnected."),i.ua=null,i.eb()},this.ua.onmessage=function(e){if(null!==i.ua)if(e=e.data,i.jb+=e.length,Mb(i.Ra,"bytes_received",e.length),Tg(i),null!==i.frames)Ug(i,e);else{e:{J(null===i.frames,"We already have a frame buffer");if(6>=e.length){var t=Number(e);if(!isNaN(t)){i.Ue=t,i.frames=[],e=null;break e}}i.Ue=1,i.frames=[]}null!==e&&Ug(i,e)}},this.ua.onerror=function(e){i.f("WebSocket error.  Closing connection."),(e=e.message||e.data)&&i.f(e),i.eb()}},Rg.prototype.start=function(){},Rg.isAvailable=function(){var e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var t=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);t&&1<t.length&&4.4>parseFloat(t[1])&&(e=!0)}return!e&&null!==Qg&&!Sg},Rg.responsesRequiredToBeHealthy=2,Rg.healthyTimeout=3e4,h=Rg.prototype,h.ud=function(){Hc.remove("previous_websocket_failure")},h.send=function(e){Tg(this),e=B(e),this.kb+=e.length,Mb(this.Ra,"bytes_sent",e.length),e=ad(e,16384),1<e.length&&this.ua.send(String(e.length));for(var t=0;t<e.length;t++)this.ua.send(e[t])},h.Uc=function(){this.rb=!0,this.Cc&&(clearInterval(this.Cc),this.Cc=null),this.ua&&(this.ua.close(),this.ua=null)},h.eb=function(){this.rb||(this.f("WebSocket is closing itself"),this.Uc(),this.fb&&(this.fb(this.yc),this.fb=null))},h.close=function(){this.rb||(this.f("WebSocket is being closed"),this.Uc())};var Xg=[Ig,Rg];Zg.prototype.Ba=function(e){jh(this,{t:"d",d:e})},Zg.prototype.Bd=function(e){gh(this),this.ac(e)},Zg.prototype.close=function(){2!==this.Qa&&(this.f("Closing realtime connection."),this.Qa=2,fh(this),this.ga&&(this.ga(),this.ga=null))};var lh=0,nh=0;h=kh.prototype,h.Ba=function(e,t,n){var r=++this.tg;e={r:r,a:e,b:t},this.f(B(e)),J(this.ja,"sendRequest call when we're not connected not allowed."),this.Oa.Ba(e),n&&(this.Sc[r]=n)},h.Q=function(e,t,n){this.Ib={Rf:e,df:!1,rc:t,$c:n},this.f("Authenticating using credential: "+e),rh(this),(t=40==e.length)||(e=ed(e).je,t="object"==typeof e&&!0===v(e,"admin")),t&&(this.f("Admin auth credential detected.  Reducing max reconnect time."),this.wd=3e4)},h.Ve=function(e){delete this.Ib,this.ja&&this.Ba("unauth",{},function(t){e(t.s,t.d)})},h.Fe=function(e,t){this.ja?th(this,"oc",e,null,t):this.Jc.push({Pc:e,action:"oc",data:null,H:t})},h.put=function(e,t,n,r){vh(this,"p",e,t,n,r)},h.Bd=function(e){if("r"in e){this.f("from server: "+B(e));var t=e.r,n=this.Sc[t];n&&(delete this.Sc[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&(t=e.a,n=e.b,this.f("handleServerMessage",t,n),"d"===t?this.Cd(n.p,n.d,!1,n.t):"m"===t?this.Cd(n.p,n.d,!0,n.t):"c"===t?yh(this,n.p,n.q):"ac"===t?(e=n.s,t=n.d,n=this.Ib,delete this.Ib,n&&n.$c&&n.$c(e,t)):"sd"===t?this.Oe?this.Oe(n):"msg"in n&&"undefined"!=typeof console&&console.log("FIREBASE: "+n.msg.replace("\n","\nFIREBASE: ")):Tc("Unrecognized action received from server: "+B(t)+"\nAre you using the latest client?"))}},h.Kc=function(e){this.f("connection ready"),this.ja=!0,this.Dc=(new Date).getTime(),this.He({serverTimeOffset:e-(new Date).getTime()}),zh(this),this.Ad(!0)},h.kg=function(e){e&&!this.nc&&this.Wa===this.wd&&(this.f("Window became visible.  Reducing delay."),this.Wa=1e3,this.Oa||mh(this,0)),this.nc=e},h.ig=function(e){e?(this.f("Browser went online.  Reconnecting."),this.Wa=1e3,this.Db=!0,this.Oa||mh(this,0)):(this.f("Browser went offline.  Killing connection; don't reconnect."),this.Db=!1,this.Oa&&this.Oa.close())},h.of=function(){this.f("data client disconnected"),this.ja=!1,this.Oa=null;for(var e=0;e<this.ma.length;e++){var t=this.ma[e];t&&"h"in t.uf&&t.rg&&(t.H&&t.H("disconnect"),delete this.ma[e],this.Nc--)}0===this.Nc&&(this.ma=[]);if(this.Db)this.nc?this.Dc&&(3e4<(new Date).getTime()-this.Dc&&(this.Wa=1e3),this.Dc=null):(this.f("Window isn't visible.  Delaying reconnect."),this.Wa=this.wd,this.ze=(new Date).getTime()),e=Math.max(0,this.Wa-((new Date).getTime()-this.ze)),e*=Math.random(),this.f("Trying to reconnect in "+e+"ms"),mh(this,e),this.Wa=Math.min(this.wd,1.3*this.Wa);else for(var n in this.Sc)delete this.Sc[n];this.Ad(!1)},h.qb=function(){this.Db=!1,this.Oa?this.Oa.close():(this.Kb&&(clearTimeout(this.Kb),this.Kb=null),this.ja&&this.of())},h.ic=function(){this.Db=!0,this.Wa=1e3,this.Oa||mh(this,0)};var W={Xf:function(){Jg=Sg=!0}};W.forceLongPolling=W.Xf,W.Yf=function(){Kg=!0},W.forceWebSockets=W.Yf,W.xg=function(e,t){e.k.S.Oe=t},W.setSecurityDebugCallback=W.xg,W.Qe=function(e,t){e.k.Qe(t)},W.stats=W.Qe,W.Re=function(e,t){e.k.Re(t)},W.statsIncrementCounter=W.Re,W.gd=function(e){return e.k.gd},W.dataUpdateCount=W.gd,W.ag=function(e,t){e.k.xe=t},W.interceptServerData=W.ag,W.gg=function(e){new ig(e)},W.onPopupOpen=W.gg,W.vg=function(e){Uf=e},W.setAuthenticationServer=W.vg,S.prototype.I=function(){return x("Firebase.DataSnapshot.val",0,0,arguments.length),this.A.I()},S.prototype.val=S.prototype.I,S.prototype.cf=function(){return x("Firebase.DataSnapshot.exportVal",0,0,arguments.length),this.A.I(!0)},S.prototype.exportVal=S.prototype.cf,S.prototype.Wf=function(){return x("Firebase.DataSnapshot.exists",0,0,arguments.length),!this.A.e()},S.prototype.exists=S.prototype.Wf,S.prototype.u=function(e){x("Firebase.DataSnapshot.child",0,1,arguments.length),ga(e)&&(e=String(e)),Mf("Firebase.DataSnapshot.child",e);var t=new K(e),n=this.W.u(t);return new S(this.A.ka(t),n,M)},S.prototype.child=S.prototype.u,S.prototype.Da=function(e){x("Firebase.DataSnapshot.hasChild",1,1,arguments.length),Mf("Firebase.DataSnapshot.hasChild",e);var t=new K(e);return!this.A.ka(t).e()},S.prototype.hasChild=S.prototype.Da,S.prototype.L=function(){return x("Firebase.DataSnapshot.getPriority",0,0,arguments.length),this.A.L().I()},S.prototype.getPriority=S.prototype.L,S.prototype.forEach=function(e){x("Firebase.DataSnapshot.forEach",1,1,arguments.length),A("Firebase.DataSnapshot.forEach",1,e,!1);if(this.A.M())return!1;var t=this;return!!this.A.U(this.g,function(n,r){return e(new S(r,t.W.u(n),M))})},S.prototype.forEach=S.prototype.forEach,S.prototype.ld=function(){return x("Firebase.DataSnapshot.hasChildren",0,0,arguments.length),this.A.M()?!1:!this.A.e()},S.prototype.hasChildren=S.prototype.ld,S.prototype.name=function(){return Q("Firebase.DataSnapshot.name() being deprecated. Please use Firebase.DataSnapshot.key() instead."),x("Firebase.DataSnapshot.name",0,0,arguments.length),this.key()},S.prototype.name=S.prototype.name,S.prototype.key=function(){return x("Firebase.DataSnapshot.key",0,0,arguments.length),this.W.key()},S.prototype.key=S.prototype.key,S.prototype.vb=function(){return x("Firebase.DataSnapshot.numChildren",0,0,arguments.length),this.A.vb()},S.prototype.numChildren=S.prototype.vb,S.prototype.dc=function(){return x("Firebase.DataSnapshot.ref",0,0,arguments.length),this.W},S.prototype.ref=S.prototype.dc,h=Bh.prototype,h.toString=function(){return(this.O.Bb?"https://":"http://")+this.O.host},h.name=function(){return this.O.ub},h.Cd=function(e,t,n,r){this.gd++;var i=new K(e);t=this.xe?this.xe(e,t):t,e=[],r?n?(t=na(t,function(e){return L(e)}),e=mf(this.N,i,t,r)):(t=L(t),e=hf(this.N,i,t,r)):n?(r=na(t,function(e){return L(e)}),e=gf(this.N,i,r)):(r=L(t),e=df(this.N,new Vb(xe,i,r))),r=i,0<e.length&&(r=Fh(this,i)),xb(this.ba,r,e)},h.Ad=function(e){Ch(this,"connected",e),!1===e&&Gh(this)},h.He=function(e){var t=this;bd(e,function(e,n){Ch(t,n,e)})},h.Ee=function(e){Ch(this,"authenticated",e)},h.Cb=function(e,t,n,r){this.f("set",{path:e.toString(),value:t,Ig:n});var i=Eh(this);t=L(t,n);var i=tc(t,i),s=this.zd++,i=cf(this.N,e,i,s,!0);tb(this.ba,i);var o=this;this.S.put(e.toString(),t.I(!0),function(t,n){var i="ok"===t;i||Q("set at "+e+" failed: "+t),i=ff(o.N,s,!i),xb(o.ba,e,i),Hh(r,t,n)}),i=Ih(this,e),Fh(this,i),xb(this.ba,i,[])},h.update=function(e,t,n){this.f("update",{path:e.toString(),value:t});var i=!0,s=Eh(this),o={};r(t,function(e,t){i=!1;var n=L(e);o[t]=tc(n,s)});if(i)zb("update() called with empty data.  Don't do anything."),Hh(n,"ok");else{var u=this.zd++,a=ef(this.N,e,o,u);tb(this.ba,a);var f=this;wh(this.S,e.toString(),t,function(t,r){J("ok"===t||"permission_denied"===t,"merge at "+e+" failed.");var i="ok"===t;i||Q("update at "+e+" failed: "+t);var i=ff(f.N,u,!i),s=e;0<i.length&&(s=Fh(f,e)),xb(f.ba,s,i),Hh(n,t,r)}),t=Ih(this,e),Fh(this,t),xb(this.ba,e,[])}},h.Fe=function(e,t){var n=this;this.S.Fe(e.toString(),function(r,i){"ok"===r&&Tf(n.ga,e),Hh(t,r,i)})},h.qb=function(){this.S.qb()},h.ic=function(){this.S.ic()},h.Qe=function(e){if("undefined"!=typeof console){e?(this.Td||(this.Td=new Jb(this.Ra)),e=this.Td.get()):e=this.Ra.get();var t=Ra(sa(e),function(e,t){return Math.max(t.length,e)},0),n;for(n in e){for(var r=e[n],i=n.length;i<t+2;i++)n+=" ";console.log(n+r)}}},h.Re=function(e){Mb(this.Ra,e),this.Ag.zf[e]=!0},h.f=function(e){zb("r:"+this.S.id+":",arguments)},ca(Wh),Wh.prototype.qb=function(){for(var e in this.fc)this.fc[e].qb()},Wh.prototype.interrupt=Wh.prototype.qb,Wh.prototype.ic=function(){for(var e in this.fc)this.fc[e].ic()},Wh.prototype.resume=Wh.prototype.ic,X.prototype.cancel=function(e){x("Firebase.onDisconnect().cancel",0,1,arguments.length),A("Firebase.onDisconnect().cancel",1,e,!0),this.Rc.Fe(this.Ea,e||null)},X.prototype.cancel=X.prototype.cancel,X.prototype.remove=function(e){x("Firebase.onDisconnect().remove",0,1,arguments.length),Nf("Firebase.onDisconnect().remove",this.Ea),A("Firebase.onDisconnect().remove",1,e,!0),Jh(this.Rc,this.Ea,null,e)},X.prototype.remove=X.prototype.remove,X.prototype.set=function(e,t){x("Firebase.onDisconnect().set",1,2,arguments.length),Nf("Firebase.onDisconnect().set",this.Ea),Ff("Firebase.onDisconnect().set",e,!1),A("Firebase.onDisconnect().set",2,t,!0),Jh(this.Rc,this.Ea,e,t)},X.prototype.set=X.prototype.set,X.prototype.Cb=function(e,t,n){x("Firebase.onDisconnect().setWithPriority",2,3,arguments.length),Nf("Firebase.onDisconnect().setWithPriority",this.Ea),Ff("Firebase.onDisconnect().setWithPriority",e,!1),Jf("Firebase.onDisconnect().setWithPriority",2,t),A("Firebase.onDisconnect().setWithPriority",3,n,!0),Kh(this.Rc,this.Ea,e,t,n)},X.prototype.setWithPriority=X.prototype.Cb,X.prototype.update=function(e,t){x("Firebase.onDisconnect().update",1,2,arguments.length),Nf("Firebase.onDisconnect().update",this.Ea);if(ea(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,Q("Passing an Array to Firebase.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}If("Firebase.onDisconnect().update",e),A("Firebase.onDisconnect().update",2,t,!0),Lh(this.Rc,this.Ea,e,t)},X.prototype.update=X.prototype.update,Y.prototype.dc=function(){return x("Query.ref",0,0,arguments.length),new U(this.k,this.path)},Y.prototype.ref=Y.prototype.dc,Y.prototype.wb=function(e,t,n,r){x("Query.on",2,4,arguments.length),Kf("Query.on",e,!1),A("Query.on",2,t,!1);var i=$h("Query.on",n,r);if("value"===e)Mh(this.k,this,new nd(t,i.cancel||null,i.Ka||null));else{var s={};s[e]=t,Mh(this.k,this,new od(s,i.cancel,i.Ka))}return t},Y.prototype.on=Y.prototype.wb,Y.prototype.$b=function(e,t,n){x("Query.off",0,3,arguments.length),Kf("Query.off",e,!0),A("Query.off",2,t,!0),jb("Query.off",3,n);var r=null,i=null;"value"===e?r=new nd(t||null,null,n||null):e&&(t&&(i={},i[e]=t),r=new od(i,null,n||null)),i=this.k,r=".info"===O(this.path)?i.qd.gb(this,r):i.N.gb(this,r),vb(i.ba,this.path,r)},Y.prototype.off=Y.prototype.$b,Y.prototype.lg=function(e,t){function n(o){s&&(s=!1,i.$b(e,n),t.call(r.Ka,o))}x("Query.once",2,4,arguments.length),Kf("Query.once",e,!1),A("Query.once",2,t,!1);var r=$h("Query.once",arguments[2],arguments[3]),i=this,s=!0;this.wb(e,n,function(t){i.$b(e,n),r.cancel&&r.cancel.call(r.Ka,t)})},Y.prototype.once=Y.prototype.lg,Y.prototype.Ae=function(e){Q("Query.limit() being deprecated. Please use Query.limitToFirst() or Query.limitToLast() instead."),x("Query.limit",1,1,arguments.length);if(!ga(e)||Math.floor(e)!==e||0>=e)throw Error("Query.limit: First argument must be a positive integer.");if(this.n.la)throw Error("Query.limit: Limit was already set (by another call to limit, limitToFirst, orlimitToLast.");var t=this.n.Ae(e);return Yh(t),new Y(this.k,this.path,t,this.bc)},Y.prototype.limit=Y.prototype.Ae,Y.prototype.Be=function(e){x("Query.limitToFirst",1,1,arguments.length);if(!ga(e)||Math.floor(e)!==e||0>=e)throw Error("Query.limitToFirst: First argument must be a positive integer.");if(this.n.la)throw Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new Y(this.k,this.path,this.n.Be(e),this.bc)},Y.prototype.limitToFirst=Y.prototype.Be,Y.prototype.Ce=function(e){x("Query.limitToLast",1,1,arguments.length);if(!ga(e)||Math.floor(e)!==e||0>=e)throw Error("Query.limitToLast: First argument must be a positive integer.");if(this.n.la)throw Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new Y(this.k,this.path,this.n.Ce(e),this.bc)},Y.prototype.limitToLast=Y.prototype.Ce,Y.prototype.mg=function(e){x("Query.orderByChild",1,1,arguments.length);if("$key"===e)throw Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===e)throw Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===e)throw Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');Lf("Query.orderByChild",1,e,!1),Zh(this,"Query.orderByChild");var t=fe(this.n,new Wd(e));return Xh(t),new Y(this.k,this.path,t,!0)},Y.prototype.orderByChild=Y.prototype.mg,Y.prototype.ng=function(){x("Query.orderByKey",0,0,arguments.length),Zh(this,"Query.orderByKey");var e=fe(this.n,Zd);return Xh(e),new Y(this.k,this.path,e,!0)},Y.prototype.orderByKey=Y.prototype.ng,Y.prototype.og=function(){x("Query.orderByPriority",0,0,arguments.length),Zh(this,"Query.orderByPriority");var e=fe(this.n,M);return Xh(e),new Y(this.k,this.path,e,!0)},Y.prototype.orderByPriority=Y.prototype.og,Y.prototype.pg=function(){x("Query.orderByValue",0,0,arguments.length),Zh(this,"Query.orderByValue");var e=fe(this.n,be);return Xh(e),new Y(this.k,this.path,e,!0)},Y.prototype.orderByValue=Y.prototype.pg,Y.prototype.Sd=function(e,t){x("Query.startAt",0,2,arguments.length),Ff("Query.startAt",e,!0),Lf("Query.startAt",2,t,!0);var r=this.n.Sd(e,t);Yh(r),Xh(r);if(this.n.ia)throw Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return n(e)||(t=e=null),new Y(this.k,this.path,r,this.bc)},Y.prototype.startAt=Y.prototype.Sd,Y.prototype.hd=function(e,t){x("Query.endAt",0,2,arguments.length),Ff("Query.endAt",e,!0),Lf("Query.endAt",2,t,!0);var n=this.n.hd(e,t);Yh(n),Xh(n);if(this.n.ra)throw Error("Query.endAt: Ending point was already set (by another call to endAt or equalTo).");return new Y(this.k,this.path,n,this.bc)},Y.prototype.endAt=Y.prototype.hd,Y.prototype.Tf=function(e,t){x("Query.equalTo",1,2,arguments.length),Ff("Query.equalTo",e,!1),Lf("Query.equalTo",2,t,!0);if(this.n.ia)throw Error("Query.equalTo: Starting point was already set (by another call to endAt or equalTo).");if(this.n.ra)throw Error("Query.equalTo: Ending point was already set (by another call to endAt or equalTo).");return this.Sd(e,t).hd(e,t)},Y.prototype.equalTo=Y.prototype.Tf,Y.prototype.Fa=function(){var e=$c(ge(this.n));return"{}"===e?"default":e};var Z={};Z.oc=kh,Z.DataConnection=Z.oc,kh.prototype.zg=function(e,t){this.Ba("q",{p:e},t)},Z.oc.prototype.simpleListen=Z.oc.prototype.zg,kh.prototype.Sf=function(e,t){this.Ba("echo",{d:e},t)},Z.oc.prototype.echo=Z.oc.prototype.Sf,kh.prototype.interrupt=kh.prototype.qb,Z.Df=Zg,Z.RealTimeConnection=Z.Df,Zg.prototype.sendRequest=Zg.prototype.Ba,Zg.prototype.close=Zg.prototype.close,Z.$f=function(e){var t=kh.prototype.put;return kh.prototype.put=function(r,i,s,o){n(o)&&(o=e()),t.call(this,r,i,s,o)},function(){kh.prototype.put=t}},Z.hijackHash=Z.$f,Z.Cf=Ic,Z.ConnectionTarget=Z.Cf,Z.Fa=function(e){return e.Fa()},Z.queryIdentifier=Z.Fa,Z.bg=function(e){return e.k.S.ta},Z.listens=Z.bg,ma(U,Y);var ai=U,bi=["Firebase"],ci=aa;bi[0]in ci||!ci.execScript||ci.execScript("var "+bi[0]);for(var di;bi.length&&(di=bi.shift());)!bi.length&&n(ai)?ci[di]=ai:ci=ci[di]?ci[di]:ci[di]={};U.prototype.name=function(){return Q("Firebase.name() being deprecated. Please use Firebase.key() instead."),x("Firebase.name",0,0,arguments.length),this.key()},U.prototype.name=U.prototype.name,U.prototype.key=function(){return x("Firebase.key",0,0,arguments.length),this.path.e()?null:wc(this.path)},U.prototype.key=U.prototype.key,U.prototype.u=function(e){x("Firebase.child",1,1,arguments.length);if(ga(e))e=String(e);else if(!(e instanceof K))if(null===O(this.path)){var t=e;t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Mf("Firebase.child",t)}else Mf("Firebase.child",e);return new U(this.k,this.path.u(e))},U.prototype.child=U.prototype.u,U.prototype.parent=function(){x("Firebase.parent",0,0,arguments.length);var e=this.path.parent();return null===e?null:new U(this.k,e)},U.prototype.parent=U.prototype.parent,U.prototype.root=function(){x("Firebase.ref",0,0,arguments.length);for(var e=this;null!==e.parent();)e=e.parent();return e},U.prototype.root=U.prototype.root,U.prototype.toString=function(){x("Firebase.toString",0,0,arguments.length);var e;if(null===this.parent())e=this.k.toString();else{e=this.parent().toString()+"/";var t=this.key();e+=encodeURIComponent(String(t))}return e},U.prototype.toString=U.prototype.toString,U.prototype.set=function(e,t){x("Firebase.set",1,2,arguments.length),Nf("Firebase.set",this.path),Ff("Firebase.set",e,!1),A("Firebase.set",2,t,!0),this.k.Cb(this.path,e,null,t||null)},U.prototype.set=U.prototype.set,U.prototype.update=function(e,t){x("Firebase.update",1,2,arguments.length),Nf("Firebase.update",this.path);if(ea(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,Q("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}If("Firebase.update",e),A("Firebase.update",2,t,!0),this.k.update(this.path,e,t||null)},U.prototype.update=U.prototype.update,U.prototype.Cb=function(e,t,n){x("Firebase.setWithPriority",2,3,arguments.length),Nf("Firebase.setWithPriority",this.path),Ff("Firebase.setWithPriority",e,!1),Jf("Firebase.setWithPriority",2,t),A("Firebase.setWithPriority",3,n,!0);if(".length"===this.key()||".keys"===this.key())throw"Firebase.setWithPriority failed: "+this.key()+" is a read-only object.";this.k.Cb(this.path,e,t,n||null)},U.prototype.setWithPriority=U.prototype.Cb,U.prototype.remove=function(e){x("Firebase.remove",0,1,arguments.length),Nf("Firebase.remove",this.path),A("Firebase.remove",1,e,!0),this.set(null,e)},U.prototype.remove=U.prototype.remove,U.prototype.transaction=function(e,t,r){x("Firebase.transaction",1,3,arguments.length),Nf("Firebase.transaction",this.path),A("Firebase.transaction",1,e,!1),A("Firebase.transaction",2,t,!0);if(n(r)&&"boolean"!=typeof r)throw Error(z("Firebase.transaction",3,!0)+"must be a boolean.");if(".length"===this.key()||".keys"===this.key())throw"Firebase.transaction failed: "+this.key()+" is a read-only object.";"undefined"==typeof r&&(r=!0),Nh(this.k,this.path,e,t||null,r)},U.prototype.transaction=U.prototype.transaction,U.prototype.wg=function(e,t){x("Firebase.setPriority",1,2,arguments.length),Nf("Firebase.setPriority",this.path),Jf("Firebase.setPriority",1,e),A("Firebase.setPriority",2,t,!0),this.k.Cb(this.path.u(".priority"),e,null,t)},U.prototype.setPriority=U.prototype.wg,U.prototype.push=function(e,t){x("Firebase.push",0,2,arguments.length),Nf("Firebase.push",this.path),Ff("Firebase.push",e,!0),A("Firebase.push",2,t,!0);var n=Dh(this.k),n=yf(n),n=this.u(n);return"undefined"!=typeof e&&null!==e&&n.set(e,t),n},U.prototype.push=U.prototype.push,U.prototype.fb=function(){return Nf("Firebase.onDisconnect",this.path),new X(this.k,this.path)},U.prototype.onDisconnect=U.prototype.fb,U.prototype.Q=function(e,t,n){Q("FirebaseRef.auth() being deprecated. Please use FirebaseRef.authWithCustomToken() instead."),x("Firebase.auth",1,3,arguments.length),Of("Firebase.auth",e),A("Firebase.auth",2,t,!0),A("Firebase.auth",3,t,!0),yg(this.k.Q,e,{},{remember:"none"},t,n)},U.prototype.auth=U.prototype.Q,U.prototype.Ve=function(e){x("Firebase.unauth",0,1,arguments.length),A("Firebase.unauth",1,e,!0),zg(this.k.Q,e)},U.prototype.unauth=U.prototype.Ve,U.prototype.qe=function(){return x("Firebase.getAuth",0,0,arguments.length),this.k.Q.qe()},U.prototype.getAuth=U.prototype.qe,U.prototype.fg=function(e,t){x("Firebase.onAuth",1,2,arguments.length),A("Firebase.onAuth",1,e,!1),jb("Firebase.onAuth",2,t),this.k.Q.wb("auth_status",e,t)},U.prototype.onAuth=U.prototype.fg,U.prototype.eg=function(e,t){x("Firebase.offAuth",1,2,arguments.length),A("Firebase.offAuth",1,e,!1),jb("Firebase.offAuth",2,t),this.k.Q.$b("auth_status",e,t)},U.prototype.offAuth=U.prototype.eg,U.prototype.Hf=function(e,t,n){x("Firebase.authWithCustomToken",2,3,arguments.length),Of("Firebase.authWithCustomToken",e),A("Firebase.authWithCustomToken",2,t,!1),V("Firebase.authWithCustomToken",3,n,!0),yg(this.k.Q,e,{},n||{},t)},U.prototype.authWithCustomToken=U.prototype.Hf,U.prototype.If=function(e,t,n){x("Firebase.authWithOAuthPopup",2,3,arguments.length),Pf("Firebase.authWithOAuthPopup",1,e),A("Firebase.authWithOAuthPopup",2,t,!1),V("Firebase.authWithOAuthPopup",3,n,!0),Dg(this.k.Q,e,n,t)},U.prototype.authWithOAuthPopup=U.prototype.If,U.prototype.Jf=function(e,t,n){x("Firebase.authWithOAuthRedirect",2,3,arguments.length),Pf("Firebase.authWithOAuthRedirect",1,e),A("Firebase.authWithOAuthRedirect",2,t,!1),V("Firebase.authWithOAuthRedirect",3,n,!0);var r=this.k.Q;Bg(r);var i=[kg],s=Xf(n);"anonymous"===e||"firebase"===e?R(t,mg("TRANSPORT_UNAVAILABLE")):(P.set("redirect_client_options",s.bd),Cg(r,i,"/auth/"+e,s,t))},U.prototype.authWithOAuthRedirect=U.prototype.Jf,U.prototype.Kf=function(e,t,n,r){x("Firebase.authWithOAuthToken",3,4,arguments.length),Pf("Firebase.authWithOAuthToken",1,e),A("Firebase.authWithOAuthToken",3,n,!1),V("Firebase.authWithOAuthToken",4,r,!0),p(t)?(Pf("Firebase.authWithOAuthToken",2,t),Ag(this.k.Q,e+"/token",{access_token:t},r,n)):(V("Firebase.authWithOAuthToken",2,t,!1),Ag(this.k.Q,e+"/token",t,r,n))},U.prototype.authWithOAuthToken=U.prototype.Kf,U.prototype.Gf=function(e,t){x("Firebase.authAnonymously",1,2,arguments.length),A("Firebase.authAnonymously",1,e,!1),V("Firebase.authAnonymously",2,t,!0),Ag(this.k.Q,"anonymous",{},t,e)},U.prototype.authAnonymously=U.prototype.Gf,U.prototype.Lf=function(e,t,n){x("Firebase.authWithPassword",2,3,arguments.length),V("Firebase.authWithPassword",1,e,!1),Qf("Firebase.authWithPassword",e,"email"),Qf("Firebase.authWithPassword",e,"password"),A("Firebase.authAnonymously",2,t,!1),V("Firebase.authAnonymously",3,n,!0),Ag(this.k.Q,"password",e,n,t)},U.prototype.authWithPassword=U.prototype.Lf,U.prototype.me=function(e,t){x("Firebase.createUser",2,2,arguments.length),V("Firebase.createUser",1,e,!1),Qf("Firebase.createUser",e,"email"),Qf("Firebase.createUser",e,"password"),A("Firebase.createUser",2,t,!1),this.k.Q.me(e,t)},U.prototype.createUser=U.prototype.me,U.prototype.Le=function(e,t){x("Firebase.removeUser",2,2,arguments.length),V("Firebase.removeUser",1,e,!1),Qf("Firebase.removeUser",e,"email"),Qf("Firebase.removeUser",e,"password"),A("Firebase.removeUser",2,t,!1),this.k.Q.Le(e,t)},U.prototype.removeUser=U.prototype.Le,U.prototype.ie=function(e,t){x("Firebase.changePassword",2,2,arguments.length),V("Firebase.changePassword",1,e,!1),Qf("Firebase.changePassword",e,"email"),Qf("Firebase.changePassword",e,"oldPassword"),Qf("Firebase.changePassword",e,"newPassword"),A("Firebase.changePassword",2,t,!1),this.k.Q.ie(e,t)},U.prototype.changePassword=U.prototype.ie,U.prototype.he=function(e,t){x("Firebase.changeEmail",2,2,arguments.length),V("Firebase.changeEmail",1,e,!1),Qf("Firebase.changeEmail",e,"oldEmail"),Qf("Firebase.changeEmail",e,"newEmail"),Qf("Firebase.changeEmail",e,"password"),A("Firebase.changeEmail",2,t,!1),this.k.Q.he(e,t)},U.prototype.changeEmail=U.prototype.he,U.prototype.Me=function(e,t){x("Firebase.resetPassword",2,2,arguments.length),V("Firebase.resetPassword",1,e,!1),Qf("Firebase.resetPassword",e,"email"),A("Firebase.resetPassword",2,t,!1),this.k.Q.Me(e,t)},U.prototype.resetPassword=U.prototype.Me,U.goOffline=function(){x("Firebase.goOffline",0,0,arguments.length),Wh.Ob().qb()},U.goOnline=function(){x("Firebase.goOnline",0,0,arguments.length),Wh.Ob().ic()},U.enableLogging=Rc,U.ServerValue={TIMESTAMP:{".sv":"timestamp"}},U.SDK_VERSION="2.2.1",U.INTERNAL=W,U.Context=Wh,U.TEST_ACCESS=Z})(),typeof JSON!="object"&&(JSON={}),function(){"use strict";function f(e){return e<10?"0"+e:e}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return typeof t=="string"?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,r,i,s,o=gap,u,a=t[e];a&&typeof a=="object"&&typeof a.toJSON=="function"&&(a=a.toJSON(e)),typeof rep=="function"&&(a=rep.call(t,e,a));switch(typeof a){case"string":return quote(a);case"number":return isFinite(a)?String(a):"null";case"boolean":case"null":return String(a);case"object":if(!a)return"null";gap+=indent,u=[];if(Object.prototype.toString.apply(a)==="[object Array]"){s=a.length;for(n=0;n<s;n+=1)u[n]=str(n,a)||"null";return i=u.length===0?"[]":gap?"[\n"+gap+u.join(",\n"+gap)+"\n"+o+"]":"["+u.join(",")+"]",gap=o,i}if(rep&&typeof rep=="object"){s=rep.length;for(n=0;n<s;n+=1)typeof rep[n]=="string"&&(r=rep[n],i=str(r,a),i&&u.push(quote(r)+(gap?": ":":")+i))}else for(r in a)Object.prototype.hasOwnProperty.call(a,r)&&(i=str(r,a),i&&u.push(quote(r)+(gap?": ":":")+i));return i=u.length===0?"{}":gap?"{\n"+gap+u.join(",\n"+gap)+"\n"+o+"}":"{"+u.join(",")+"}",gap=o,i}}typeof Date.prototype.toJSON!="function"&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx,escapable,gap,indent,meta,rep;typeof JSON.stringify!="function"&&(escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},JSON.stringify=function(e,t,n){var r;gap="",indent="";if(typeof n=="number")for(r=0;r<n;r+=1)indent+=" ";else typeof n=="string"&&(indent=n);rep=t;if(!t||typeof t=="function"||typeof t=="object"&&typeof t.length=="number")return str("",{"":e});throw new Error("JSON.stringify")}),typeof JSON.parse!="function"&&(cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,JSON.parse=function(text,reviver){function walk(e,t){var n,r,i=e[t];if(i&&typeof i=="object")for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(r=walk(i,n),r!==undefined?i[n]=r:delete i[n]);return reviver.call(e,t,i)}var j;text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),typeof reviver=="function"?
walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),function(){var e="StripeCheckout.require".split("."),t=e[e.length-1],n=this,r;for(r=0;r<e.length-1;r++)n=n[e[r]]=n[e[r]]||{};n[t]===undefined&&(n[t]=function(){var e={},t={},n=function(n,o){var u=r(o,n),a=r(u,"./index"),f,l;f=t[u]||t[a];if(f)return f;if(l=e[u]||e[u=a])return f={id:u,exports:{}},t[u]=f.exports,l(f.exports,function(e){return s(e,i(u))},f),t[u]=f.exports;throw"module "+n+" not found"},r=function(e,t){var n=[],r,i;/^\.\.?(\/|$)/.test(t)?r=[e,t].join("/").split("/"):r=t.split("/");for(var s=0,o=r.length;s<o;s++)i=r[s],i==".."?n.pop():i!="."&&i!=""&&n.push(i);return n.join("/")},i=function(e){return e.split("/").slice(0,-1).join("/")},s=function(e){return n(e,"")};return s.define=function(t){for(var n in t)e[n]=t[n]},s.modules=e,s.cache=t,s}.call())}(),StripeCheckout.require.define({"vendor/cookie":function(e,t,n){function s(e,t){e=e||{};for(var n in t)typeof source[n]=="object"?e[n]=s(e[n],source[n]):e[n]=source[n];return e}function o(e){return e}function u(e){return decodeURIComponent(e.replace(i," "))}function a(e){e.indexOf('"')===0&&(e=e.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return f.json?JSON.parse(e):e}catch(t){}}var r={},i=/\+/g,f=r.set=r.get=function(e,t,n){if(t!==undefined){n=s(n,f.defaults);if(typeof n.expires=="number"){var r=n.expires,i=n.expires=new Date;i.setDate(i.getDate()+r)}return t=f.json?JSON.stringify(t):String(t),document.cookie=[f.raw?e:encodeURIComponent(e),"=",f.raw?t:encodeURIComponent(t),n.expires?"; expires="+n.expires.toUTCString():"",n.path?"; path="+n.path:"",n.domain?"; domain="+n.domain:"",n.secure?"; secure":""].join("")}var l=f.raw?o:u,c=document.cookie.split("; "),h=e?undefined:{};for(var p=0,d=c.length;p<d;p++){var v=c[p].split("="),m=l(v.shift()),g=l(v.join("="));if(e&&e===m){h=a(g);break}e||(h[m]=a(g))}return h};f.defaults={},r.remove=function(e,t){return r.get(e)!==undefined?(r.set(e,"",s(t,{expires:-1})),!0):!1},n.exports=r}}),StripeCheckout.require.define({"vendor/ready":function(e,t,n){!function(e,t){typeof n!="undefined"?n.exports=t():typeof define=="function"&&typeof define.amd=="object"?define(t):this[e]=t()}("domready",function(e){function p(e){h=1;while(e=t.shift())e()}var t=[],n,r=!1,i=document,s=i.documentElement,o=s.doScroll,u="DOMContentLoaded",a="addEventListener",f="onreadystatechange",l="readyState",c=o?/^loaded|^c/:/^loaded|c/,h=c.test(i[l]);return i[a]&&i[a](u,n=function(){i.removeEventListener(u,n,r),p()},r),o&&i.attachEvent(f,n=function(){/^c/.test(i[l])&&(i.detachEvent(f,n),p())}),e=o?function(n){self!=top?h?n():t.push(n):function(){try{s.doScroll("left")}catch(t){return setTimeout(function(){e(n)},50)}n()}()}:function(e){h?e():t.push(e)}})}}),function(){Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){var n,r,i,s;i=this.length,n=t?t:0;for(r=s=n;n<=i?s<i:s>i;r=n<=i?++s:--s)if(this[r]===e)return r;return-1})}.call(this),StripeCheckout.require.define({"lib/helpers":function(e,t,n){(function(){var e,t,r;r=function(e){return function(){var n;return n=t.userAgent.match(e),n&&parseInt(n[1])}},e=function(e){return function(){return e()&&!t.isWindowsPhone()}},t={userAgent:window.navigator.userAgent,escape:function(e){return e&&(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\"/g,"&quot;")},trim:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},sanitizeURL:function(e){var n,r,i,s,o;if(!e)return;e=t.trim(e),n=["data:","http:","https:"],r=!1;for(s=0,o=n.length;s<o;s++){i=n[s];if(e.indexOf(i)===0){r=!0;break}}return r?encodeURI(e):null},iOSVersion:r(/(?:iPhone OS |iPad; CPU OS )(\d+)_\d+/),iOSMinorVersion:r(/(?:iPhone OS |iPad; CPU OS )\d+_(\d+)/),iOSBuildVersion:r(/(?:iPhone OS |iPad; CPU OS )\d+_\d+_(\d+)/),androidWebkitVersion:r(/Mozilla\/5\.0.*Android.*AppleWebKit\/([\d]+)/),androidVersion:r(/Android (\d+)\.\d+/),firefoxVersion:r(/Firefox\/(\d+)\.\d+/),chromeVersion:r(/Chrome\/(\d+)\.\d+/),safariVersion:r(/Version\/(\d+)\.\d+ Safari/),iOSChromeVersion:r(/CriOS\/(\d+)\.\d+/),iOSNativeVersion:r(/Stripe\/(\d+)\.\d+/),ieVersion:r(/(?:MSIE |Trident\/.*rv:)(\d{1,2})\./),isiOSChrome:function(){return/CriOS/.test(t.userAgent)},isiOSWebView:function(){return/(iPhone|iPod|iPad).*AppleWebKit((?!.*Safari)|(.*\([^)]*like[^)]*Safari[^)]*\)))/i.test(t.userAgent)},isiOS:e(function(){return/(iPhone|iPad|iPod)/i.test(t.userAgent)}),isiOSNative:function(){return this.isiOS()&&this.iOSNativeVersion()>=3},isiPad:function(){return/(iPad)/i.test(t.userAgent)},isMac:e(function(){return/mac/i.test(t.userAgent)}),isWindowsPhone:function(){return/(Windows\sPhone|IEMobile)/i.test(t.userAgent)},isWindowsOS:function(){return/(Windows NT \d\.\d)/i.test(t.userAgent)},isIE:function(){return/(MSIE ([0-9]{1,}[\.0-9]{0,})|Trident\/)/i.test(t.userAgent)},isChrome:function(){return"chrome"in window},isSafari:e(function(){var e;return e=t.userAgent,/Safari/i.test(e)&&!/Chrome/i.test(e)}),isFirefox:e(function(){return t.firefoxVersion()!=null}),isAndroidBrowser:function(){var e;return e=t.androidWebkitVersion(),e&&e<537},isAndroidChrome:function(){var e;return e=t.androidWebkitVersion(),e&&e>=537},isAndroidDevice:e(function(){return/Android/.test(t.userAgent)}),isAndroidWebView:function(){return t.isAndroidChrome()&&/Version\/\d+\.\d+/.test(t.userAgent)},isNativeWebContainer:function(){return window.cordova!=null||/GSA\/\d+\.\d+/.test(t.userAgent)},isSupportedMobileOS:function(){return t.isiOS()||t.isAndroidDevice()},isAndroidWebapp:function(){var e;return t.isAndroidChrome()?(e=document.getElementsByName("apple-mobile-web-app-capable")[0]||document.getElementsByName("mobile-web-app-capable")[0],e&&e.content==="yes"):!1},isiOSBroken:function(){if(!t.isiPad()||t.iOSVersion()!==8)return!1;switch(t.iOSMinorVersion()){case 0:return!0;case 1:return t.iOSBuildVersion()<1}return!1},isUserGesture:function(){var e,t;return(e=(t=window.event)!=null?t.type:void 0)==="click"||e==="touchstart"||e==="touchend"},isInsideFrame:function(){return window.top!==window.self},isFallback:function(){var e,n,r,i;return!("postMessage"in window)||window.postMessageDisabled||document.documentMode&&document.documentMode<8?!0:(e=t.androidVersion(),e&&e<4?!0:(i=t.iOSVersion(),i&&i<6?!0:(r=t.firefoxVersion(),r&&r<11?!0:(n=t.iOSChromeVersion(),n&&n<36?!0:!1))))},isSmallScreen:function(){return Math.min(window.screen.availHeight,window.screen.availWidth)<=640||/FakeCheckoutMobile/.test(t.userAgent)},pad:function(e,t,n){var r;return t==null&&(t=2),n==null&&(n="0"),e+="",e.length>t?e:(r=(new Array(t-e.length+1)).join(n),r+e)},requestAnimationFrame:function(e){return(typeof window.requestAnimationFrame=="function"?window.requestAnimationFrame(e):void 0)||(typeof window.webkitRequestAnimationFrame=="function"?window.webkitRequestAnimationFrame(e):void 0)||window.setTimeout(e,100)},requestAnimationInterval:function(e,n){var r,i;return i=new Date,r=function(){var s,o,u;return s=t.requestAnimationFrame(r),o=new Date,u=n-(o-i),u<=0&&(i=o,e()),s},r()},getQueryParameterByName:function(e){var t;return t=RegExp("[?&]"+e+"=([^&]*)").exec(window.location.search),t&&decodeURIComponent(t[1].replace(/\+/g," "))},addQueryParameter:function(e,t,n){var r,i;return i=encodeURIComponent(t)+"="+encodeURIComponent(n),r=(new String(e)).split("#"),r[0]+=r[0].indexOf("?")!==-1?"&":"?",r[0]+=i,r.join("#")},bind:function(e,t,n){return e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)},unbind:function(e,t,n){return e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent("on"+t,n)},host:function(e){var t,n;return t=document.createElement("div"),t.innerHTML='<a href="'+this.escape(e)+'">x</a>',n=t.firstChild,""+n.protocol+"//"+n.host},strip:function(e){var t,n,r;return t=document.createElement("div"),t.innerHTML=e,(n=(r=t.textContent)!=null?r:t.innerText)!=null?n:""},setAutocomplete:function(e,n){var r;r=t.chromeVersion()>14||t.safariVersion()>7,n!=="cc-csc"&&(!/^cc-/.test(n)||r)?(e.setAttribute("x-autocompletetype",n),e.setAttribute("autocompletetype",n)):e.setAttribute("autocomplete","off"),n!=="country-name"&&n!=="language"&&n!=="sex"&&n!=="gender-identity"&&(e.setAttribute("autocorrect","off"),e.setAttribute("spellcheck","off"));if(!/name|honorific/.test(n)&&n!=="locality"&&n!=="city"&&n!=="adminstrative-area"&&n!=="state"&&n!=="province"&&n!=="region"&&n!=="language"&&n!=="org"&&n!=="organization-title"&&n!=="sex"&&n!=="gender-identity")return e.setAttribute("autocapitalize","off")},hashCode:function(e){var t,n,r,i;t=5381;for(n=r=0,i=e.length;r<i;n=r+=1)t=(t<<5)+t+e.charCodeAt(n);return(t>>>0)%65535},stripeUrlPrefix:function(){var e;return e=window.location.hostname.match("^([a-z-]*)checkout."),e?e[1]:""}},n.exports=t}).call(this)}}),StripeCheckout.require.define({"lib/rpc":function(e,t,n){(function(){var e,r,i,s=function(e,t){return function(){return e.apply(t,arguments)}},o=[].slice;r=t("lib/helpers"),i=t("lib/tracker"),e=function(){function e(e,t){t==null&&(t={}),this.processMessage=s(this.processMessage,this),this.sendMessage=s(this.sendMessage,this),this.invoke=s(this.invoke,this),this.startSession=s(this.startSession,this),this.rpcID=0,this.target=e,this.callbacks={},this.readyQueue=[],this.readyStatus=!1,this.methods={},r.bind(window,"message",function(e){return function(){var t;return t=1<=arguments.length?o.call(arguments,0):[],e.message.apply(e,t)}}(this))}return e.prototype.startSession=function(){return this.sendMessage("frameReady"),this.frameReady()},e.prototype.invoke=function(){var e,t;return t=arguments[0],e=2<=arguments.length?o.call(arguments,1):[],i.trace.rpcInvoke(t),this.ready(function(n){return function(){return n.sendMessage(t,e)}}(this))},e.prototype.message=function(e){var t;t=!1;try{t=e.source===this.target}catch(n){}if(t)return this.processMessage(e.data)},e.prototype.ready=function(e){return this.readyStatus?e():this.readyQueue.push(e)},e.prototype.frameCallback=function(e,t){var n;return typeof (n=this.callbacks)[e]=="function"&&n[e](t),delete this.callbacks[e],!0},e.prototype.frameReady=function(){var e,t,n,r;this.readyStatus=!0,e=this.readyQueue.slice(0);for(n=0,r=e.length;n<r;n++)t=e[n],t();return!1},e.prototype.isAlive=function(){return!0},e.prototype.sendMessage=function(e,t){var n,r,s,o;t==null&&(t=[]),r=++this.rpcID,typeof t[t.length-1]=="function"&&(this.callbacks[r]=t.pop()),s=JSON.stringify({method:e,args:t,id:r});if(((o=this.target)!=null?o.postMessage:void 0)==null){n=new Error("Unable to communicate with Checkout. Please contact support@stripe.com if the problem persists.");if(this.methods.rpcError==null)throw n;this.methods.rpcError(n);return}return this.target.postMessage(s,"*"),i.trace.rpcPostMessage(e,t,r)},e.prototype.processMessage=function(e){var t,n,r,i;try{e=JSON.parse(e)}catch(s){return}["frameReady","frameCallback","isAlive"].indexOf(e.method)!==-1?(n=null,t=this[e.method],t!=null&&(n=t.apply(this,e.args))):n=typeof (r=this.methods)[i=e.method]=="function"?r[i].apply(r,e.args):void 0;if(e.method!=="frameCallback")return this.invoke("frameCallback",e.id,n)},e}(),n.exports=e}).call(this)}}),StripeCheckout.require.define({"lib/uuid":function(e,t,n){(function(){var e;e=function(){return((1+Math.random())*65536|0).toString(16).substring(1)},n.exports.generate=function(){var t;return t="-",e()+e()+t+e()+t+e()+t+e()+t+e()+e()+e()}}).call(this)}}),StripeCheckout.require.define({"lib/pixel":function(e,t,n){(function(){var e,t,r,i,s,o,u,a,f;r=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t,n;return t=Math.random()*16|0,n=e==="x"?t:t&3|8,n.toString(16)})},a=function(e,t,n){var r,i;return n==null&&(n={}),n.expires===!0&&(n.expires=-1),typeof n.expires=="number"&&(i=new Date,i.setTime(i.getTime()+n.expires*24*60*60*1e3),n.expires=i),n.path==null&&(n.path="/"),t=(t+"").replace(/[^!#-+\--:<-\[\]-~]/g,encodeURIComponent),r=encodeURIComponent(e)+"="+t,n.expires&&(r+=";expires="+n.expires.toGMTString()),n.path&&(r+=";path="+n.path),n.domain&&(r+=";domain="+n.domain),document.cookie=r},i=function(e){var t,n,r,i,s,o,u;n=document.cookie.split("; ");for(o=0,u=n.length;o<u;o++){t=n[o],r=t.indexOf("="),i=decodeURIComponent(t.substr(0,r)),s=decodeURIComponent(t.substr(r+1));if(i===e)return s}return null},t=function(e){return typeof e=="string"?encodeURIComponent(e):encodeURIComponent(JSON.stringify(e))},u=function(e,n,r){var i,s,o;return n==null&&(n={}),n.i=(new Date).getTime(),n=function(){var e;e=[];for(s in n)o=n[s],e.push(""+s+"="+t(o));return e}().join("&"),i=new Image,r&&(i.onload=r),i.src=""+e+"?"+n,!0},e=function(){var e,t;e=(t=window.navigator.doNotTrack)!=null?t.toString().toLowerCase():void 0;switch(e){case"1":case"yes":case"true":return!1;default:return!0}},o=function(){var t,n;if(!e())return"DNT";try{return n=localStorage.getItem("lsid"),n||(n=r(),localStorage.setItem("lsid",n)),n}catch(i){return t=i,"NA"}},s=function(){var t,n;if(!e())return"DNT";try{return n=i("cid")||r(),a("cid",n,{expires:7200,domain:".stripe.com"}),n}catch(s){return t=s,"NA"}},f=function(e,t,n){var r,i,a,f,l;t==null&&(t={}),i=document.referrer,f=window.location.search,a={event:e,rf:i,sc:f};for(r in t)l=t[r],a[r]=l;return a.lsid||(a.lsid=o()),a.cid||(a.cid=s()),u("https://web.archive.org/web/20170518220231/https://q.stripe.com/",a,n)},n.exports.track=f,n.exports.getLocalStorageID=o,n.exports.getCookieID=s}).call(this)}}),StripeCheckout.require.define({"vendor/base64":function(e,t,n){var r=function(e){e=(e+"").replace(/\r\n/g,"\n").replace(/\r/g,"\n");var t="",n,r,i=0,s;n=r=0,i=e.length;for(s=0;s<i;s++){var o=e.charCodeAt(s),u=null;o<128?r++:o>127&&o<2048?u=String.fromCharCode(o>>6|192,o&63|128):u=String.fromCharCode(o>>12|224,o>>6&63|128,o&63|128),u!==null&&(r>n&&(t+=e.substring(n,r)),t+=u,n=r=s+1)}return r>n&&(t+=e.substring(n,e.length)),t};n.exports.encode=function(e){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n,i,s,o,u,a,f,l,c=0,h=0,p="",d=[];if(!e)return e;e=r(e);do n=e.charCodeAt(c++),i=e.charCodeAt(c++),s=e.charCodeAt(c++),l=n<<16|i<<8|s,o=l>>18&63,u=l>>12&63,a=l>>6&63,f=l&63,d[h++]=t.charAt(o)+t.charAt(u)+t.charAt(a)+t.charAt(f);while(c<e.length);p=d.join("");switch(e.length%3){case 1:p=p.slice(0,-2)+"==";break;case 2:p=p.slice(0,-1)+"="}return p}}}),StripeCheckout.require.define({"lib/tracker":function(e,t,n){(function(){var e,r,i,s,o,u,a,f,l,c,h,p=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};h=t("lib/uuid"),o=t("lib/pixel"),e=t("vendor/base64"),r={enabled:!1,tracingEnabled:!1,eventNamePrefix:"checkout.",distinctId:h.generate(),mixpanelKey:null},u={},c={},c.setEnabled=function(e){return r.enabled=e},c.setTracingEnabled=function(e){return r.tracingEnabled=e},c.setDistinctID=function(e){if(e)return r.distinctId=e},c.getDistinctID=function(){return r.distinctId},c.setMixpanelKey=function(e){return r.mixpanelKey=e},c.track={outerOpen:function(e){var t;return t=["key"],l("outer.open",e,t,{appendStateParameters:!1})},open:function(e){var t,n;for(t in e)n=e[t],u["option-"+t]=n;return l("open")},close:function(e){return l("close",e,["withToken"])},rememberMe:function(e){return l("checkbox.rememberMe",e,["checked"])},authorizeAccount:function(){return l("account.authorize")},login:function(){return l("account.authorize.success")},wrongVerificationCode:function(){return l("account.authorize.fail")},keepMeLoggedIn:function(e){return l("checkbox.keepMeLoggedIn",e,["checked"])},logout:function(){return l("account.logout")},submit:function(){return l("submit")},invalid:function(e){if(e["err"]==null&&e["fields"]==null)throw new Error("Cannot track invalid because err or fields should be provided");return l("invalid",e)},tokenError:function(e){return l("token.error",{message:e,type:"exception"})},moreInfo:function(){return l("moreInfoLink.click")},accountCreateSuccess:function(){return l("account.create.success")},accountCreateFail:function(){return l("account.create.fail")},addressAutocompleteShow:function(){return l("addressAutoComplete.show")},addressAutocompleteResultSelected:function(){return l("addressAutocomplete.result.selected")},back:function(e){return l("back",e,["from_step","to_step"])},token:function(e){return l("token",e,["stripe_token"])},phoneVerificationShow:function(){return l("phoneVerification.show")},phoneVerificationCreate:function(e){return l("phoneVerification.create",e,["use_sms"])},phoneVerificationAuthorize:function(e){return l("fraudCodeVerification.authorize",e,["valid"])},addressVerificationShow:function(){return l("addressVerification.show")},alert:function(e){return l("alert",e)}},c.trace={trigger:function(e,t){var n;n=["didResize","viewAddedToDOM","valueDidChange","checkedDidChange","keyUp","keyDown","keyPress","keyInput","click","blur"],e=e.split("."),e[e.length-1]==="checkout"&&e.pop(),e=e.join(".");if(p.call(n,e)<0)return this._triggerQueue==null&&(this._triggerQueue={}),this._triggerQueue[e]=f(t),this._triggerTimeout!=null?this._triggerTimeout:this._triggerTimeout=setTimeout(function(n){return function(){var r;r=n._triggerQueue;for(e in r)t=r[e],a("trigger."+e,{args:t});return n._triggerQueue={},n._triggerTimeout=null}}(this),0)},rpcInvoke:function(e){return a("rpc.invoke."+e)},rpcPostMessage:function(e,t,n){return a("rpc.postMessage."+e,{id:n,args:f(t)})}},c.state={setUIType:function(e){return u["st-ui-type"]=e},setUIIntegration:function(e){return u["st-ui-integration"]=e},setAccountsEnabled:function(e){return u["st-accounts-enabled"]=e},setRememberMeEnabled:function(e){return u["st-remember-me-enabled"]=e},setRememberMeChecked:function(e){return u["st-remember-me-checked"]=e},setAccountCreated:function(e){return u["st-account-created"]=e},setLoggedIn:function(e){return u["st-logged-in"]=e},setVariants:function(e){var t,n,r;r=[];for(t in e)n=e[t],r.push(u["st-variant-"+t]=n);return r},setPhoneVerificationShown:function(e){return u["st-phone-verification-shown"]=e},setAddressVerificationShown:function(e){return u["st-address-verification-shown"]=e},setAlipayShouldDisplay:function(e){return u["st-alipay-should-display"]=e}},c.dontTrack=function(e){var t;return t=r.enabled,r.enabled=!1,e(),r.enabled=t},i=function(e){var t,n,r,i;t=!1,i=c.events;for(n in i){r=i[n];if(r===e){t=!0;break}}return t},a=function(e,t,n,i){t==null&&(t={}),n==null&&(n=[]),i==null&&(i={});if(!r.tracingEnabled)return;return e="trace."+e,i.excludeMixpanel=!0,l.apply(this,arguments)},l=function(e,t,n,i){var a,f,l,c,h,p,d;t==null&&(t={}),n==null&&(n=[]),i==null&&(i={});if(!r.enabled)return;c=function(){var e,r,i;i=[];for(e=0,r=n.length;e<r;e++)l=n[e],l in t||i.push(l);return i}();if(c.length>0)throw new Error("Missing required data ("+c.join(", ")+") for tracking "+e+".");t.distinct_id=r.distinctId,i.appendStateParameters==null&&(i.appendStateParameters=!0);if(i.appendStateParameters)for(f in u)h=u[f],t[f]=h;t.h=screen.height,t.w=screen.width;for(h=p=0,d=t.length;p<d;h=++p)f=t[h],h instanceof Array&&h.sort();return a=""+r.eventNamePrefix+e,i.excludeMixpanel||s.track(a,t),o.track(a,t)},s={},s.track=function(t,n){var i,s;n==null&&(n={});if(typeof $=="undefined"||$===null||r.mixpanelKey==null)return;return s=$.extend({token:r.mixpanelKey,userAgent:window.navigator.userAgent},n),delete s.stripe_token,i=e.encode(JSON.stringify({event:t,properties:s})),(new Image).src="https://web.archive.org/web/20170518220231/https://api.mixpanel.com/track/?ip=1&img=1&data="+i},f=function(e){var t,n,r;if(e instanceof Array)return JSON.stringify(function(){var t,n,i;i=[];for(t=0,n=e.length;t<n;t++)r=e[t],i.push(f(r));return i}());if(e!=null&&e.target!=null&&e.type!=null)return f({type:e.type,target_id:e.target.id});if(e instanceof Object){if(e.constructor===Object){n={};for(t in e)r=e[t],n[t]=f(r);return JSON.stringify(n)}return e.toString()}return e},n.exports=c}).call(this)}}),StripeCheckout.require.define({"outer/lib/fallbackRpc":function(e,t,n){(function(){var e,t,r,i,s,o=function(e,t){return function(){return e.apply(t,arguments)}};t=1,r=null,i=null,s=/^#?\d+&/,e=function(){function e(e,t){this.invokeTarget=o(this.invokeTarget,this),this.target=e,this.host=t}return e.prototype.invokeTarget=function(e){var n;return e=+(new Date)+t++ +"&"+encodeURIComponent(e),n=this.host+"",this.target.location=n.replace(/#.*$/,"")+"#"+e},e.prototype.receiveMessage=function(e,t){return t==null&&(t=100),r&&clearInterval(r),r=setInterval(function(){var t;t=decodeURIComponent(window.location.hash);if(t!==i&&s.test(t))return window.location.hash="",i=t,e({data:t.replace(s,"")})},t)},e}(),n.exports=e}).call(this)}}),StripeCheckout.require.define({"outer/lib/utils":function(e,t,n){(function(){var e,t,r,i,s,o,u,a,f,l,c,h,p,d,v=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};e=function(e){return document.querySelectorAll(e)},t=function(e){var t,n,r,i,s,o;if(typeof document.getElementsByClassName=="function")return document.getElementsByClassName(e);if(typeof document.querySelectorAll=="function")return document.querySelectorAll("."+e);n=new RegExp("(^|\\s)"+e+"(\\s|$)"),s=document.getElementsByTagName("*"),o=[];for(r=0,i=s.length;r<i;r++)t=s[r],n.test(t.className)&&o.push(t);return o},o=function(e,t){var n;return typeof e.hasAttribute=="function"?e.hasAttribute(t):(n=e.getAttributeNode(t),!(!n||!n.specified&&!n.nodeValue))},d=function(e,t,n,r){n==null&&(n={}),r==null&&(r=!0);if(window.jQuery)return jQuery(e).trigger(t,n)},r=function(e,t){return e.className+=" "+t},u=function(e,t){return v.call(e.className.split(" "),t)>=0},s=function(e,t){return e.style.cssText+=";"+t},f=function(e,t){return e.parentNode.insertBefore(t,e)},a=function(e,t){return e.parentNode.insertBefore(t,e.nextSibling)},i=function(e,t){return e.appendChild(t)},c=function(e){var t;return(t=e.parentNode)!=null?t.removeChild(e):void 0},l=function(e){var t;t=[];while((e=e.parentNode)&&e!==document&&v.call(t,e)<0)t.push(e);return t},h=function(e){var t;return t=document.createElement("a"),t.href=e,""+t.href},p=function(e,t){return"innerText"in e?e.innerText=t:e.textContent=t,t},n.exports={$:e,$$:t,hasAttr:o,trigger:d,addClass:r,hasClass:u,css:s,insertBefore:f,insertAfter:a,append:i,remove:c,parents:l,resolve:h,text:p}}).call(this)}}),StripeCheckout.require.define({"outer/controllers/app":function(e,t,n){(function(){var e,r,i,s,o,u,a=function(e,t){return function(){return e.apply(t,arguments)}};r=t("outer/controllers/checkout"),s=t("outer/controllers/tokenCallback"),i=t("lib/rpc"),o=t("lib/tracker"),u=t("outer/lib/utils"),e=function(){function e(e){var t,n;e==null&&(e={}),this.setHost=a(this.setHost,this),this.configure=a(this.configure,this),this.close=a(this.close,this),this.open=a(this.open,this),this.configurations={},this.checkouts={},this.host="https://web.archive.org/web/20170518220231/https://checkout.stripe.com/",this.timeLoaded=Math.floor((new Date).getTime()/1e3),this.totalButtons=0,((t=window.Prototype)!=null?(n=t.Version)!=null?n.indexOf("1.6"):void 0:void 0)===0&&console.error("Stripe Checkout is not compatible with your version of Prototype.js. Please upgrade to version 1.7 or greater.")}return e.prototype.open=function(e,t){var n,i,o,a,f;e==null&&(e={}),t==null&&(t=null),o={referrer:document.referrer,url:document.URL,timeLoaded:this.timeLoaded};if(t&&this.configurations[t]){f=this.configurations[t];for(i in f)a=f[i],o[i]=a}for(i in e)a=e[i],o[i]=a;return o.image&&(o.image=u.resolve(o.image)),this.validateOptions(e,"open"),t?(n=this.checkouts[t],(e.token!=null||e.onToken!=null)&&n.setOnToken(new s(e))):n=new r(new s(e),this.host),this.trackOpen(n,o),n.open(o)},e.prototype.close=function(e){var t;return(t=this.checkouts[e])!=null?t.close():void 0},e.prototype.configure=function(e,t){return t==null&&(t={}),e instanceof Object&&(t=e,e="button"+this.totalButtons++),t.image&&(t.image=u.resolve(t.image)),this.validateOptions(t,"configure"),this.configurations[e]=t,this.checkouts[e]=new r(new s(t),this.host),this.checkouts[e].preload(t),{open:function(t){return function(n){return t.open(n,e)}}(this),close:function(t){return function(){return t.close(e)}}(this)}},e.prototype.validateOptions=function(e,t){var n;try{return JSON.stringify(e)}catch(r){throw n="https://web.archive.org/web/20170518220231/https://stripe.com/docs/checkout#integration-custom",new Error("Stripe Checkout was unable to serialize the options passed to StripeCheckout."+t+"(). Please consult the doumentation to confirm that you're supplying values of the expected type: "+n)}},e.prototype.setHost=function(e){return this.host=e},e.prototype.trackOpen=function(e,t){return o.setEnabled(!t.notrack),o.track.outerOpen({key:t.key,lsid:"NA",cid:"NA"})},e}(),n.exports=e}).call(this)}}),StripeCheckout.require.define({"outer/controllers/button":function(e,t,n){(function(){var e,r,i,s,o,u,a,f,l,c,h,p,d=function(e,t){return function(){return e.apply(t,arguments)}};p=t("outer/lib/utils"),e=p.$$,u=p.hasClass,i=p.addClass,h=p.trigger,s=p.append,c=p.text,l=p.parents,f=p.insertAfter,o=p.hasAttr,a=t("lib/helpers"),r=function(){function t(e,t){this.parseOptions=d(this.parseOptions,this),this.parentHead=d(this.parentHead,this),this.parentForm=d(this.parentForm,this),this.onToken=d(this.onToken,this),this.open=d(this.open,this),this.submit=d(this.submit,this),this.append=d(this.append,this),this.render=d(this.render,this);var n;this.scriptEl=e,this.app=t,this.document=this.scriptEl.ownerDocument,this.nostyle=a.isFallback(),this.options=this.parseOptions(),(n=this.options).label||(n.label="Pay with Card"),this.options.token=this.onToken,this.$el=document.createElement("button"),this.$el.setAttribute("type","submit"),this.$el.className="stripe-button-el",a.bind(this.$el,"click",this.submit),a.bind(this.$el,"touchstart",function(){}),this.render()}return t.totalButtonId=0,t.load=function(n){var r,s,o;o=e("stripe-button"),o=function(){var e,t,n;n=[];for(e=0,t=o.length;e<t;e++)s=o[e],u(s,"active")||n.push(s);return n}(),o=o[o.length-1];if(!o)return;return i(o,"active"),r=new t(o,n),r.append()},t.prototype.render=function(){return this.$el.innerHTML="",this.$span=document.createElement("span"),c(this.$span,this.options.label),this.nostyle||(this.$el.style.visibility="hidden",this.$span.style.display="block",this.$span.style.minHeight="30px"),this.$style=document.createElement("link"),this.$style.setAttribute("type","text/css"),this.$style.setAttribute("rel","stylesheet"),this.$style.setAttribute("href",this.app.host+"/v3/checkout/button-qpwW2WfkB0oGWVWIASjIOQ.css"),s(this.$el,this.$span)},t.prototype.append=function(){var e;this.scriptEl&&f(this.scriptEl,this.$el),this.nostyle||(e=this.parentHead(),e&&s(e,this.$style));if(this.$form=this.parentForm())a.unbind(this.$form,"submit",this.submit),a.bind(this.$form,"submit",this.submit);return this.nostyle||setTimeout(function(e){return function(){return e.$el.style.visibility="visible"}}(this),1e3),this.app.setHost(a.host(this.scriptEl.src)),this.appHandler=this.app.configure(this.options,{form:this.$form})},t.prototype.disable=function(){return this.$el.setAttribute("disabled",!0)},t.prototype.enable=function(){return this.$el.removeAttribute("disabled")},t.prototype.isDisabled=function(){return o(this.$el,"disabled")},t.prototype.submit=function(e){return typeof e.preventDefault=="function"&&e.preventDefault(),this.isDisabled()||this.open(),!1},t.prototype.open=function(){return this.appHandler.open(this.options)},t.prototype.onToken=function(e,t){var n,r,i,o,u;h(this.scriptEl,"token",e);if(this.$form){r=this.renderInput("stripeToken",e.id),s(this.$form,r),i=this.renderInput("stripeTokenType",e.type),s(this.$form,i),e.email&&s(this.$form,this.renderInput("stripeEmail",e.email));if(t)for(o in t)u=t[o],n=this.renderInput(this.formatKey(o),u),s(this.$form,n);this.$form.submit()}return this.disable()},t.prototype.formatKey=function(e){var t,n,r,i;n=e.split("_"),e="";for(r=0,i=n.length;r<i;r++)t=n[r],t.length>0&&(e=e+t.substr(0,1).toUpperCase()+t.substr(1).toLowerCase());return"stripe"+e},t.prototype.renderInput=function(e,t){var n;return n=document.createElement("input"),n.type="hidden",n.name=e,n.value=t,n},t.prototype.parentForm=function(){var e,t,n,r,i;t=l(this.$el);for(n=0,r=t.length;n<r;n++){e=t[n];if(((i=e.tagName)!=null?i.toLowerCase():void 0)==="form")return e}return null},t.prototype.parentHead=function(){var e,t;return((e=this.document)!=null?e.head:void 0)||((t=this.document)!=null?t.getElementsByTagName("head")[0]:void 0)||this.document.body},t.prototype.parseOptions=function(){var e,t,n,r,i,s;n={},s=this.scriptEl.attributes;for(r=0,i=s.length;r<i;r++){e=s[r],t=e.name.match(/^data-(.+)$/);if(t!=null?t[1]:void 0)n[t[1]]=e.value}return n},t}(),n.exports=r}).call(this)}}),StripeCheckout.require.define({"outer/controllers/checkout":function(e,t,n){(function(){var e,r,i,s,o,u,a=function(e,t){return function(){return e.apply(t,arguments)}};o=t("lib/helpers"),i=t("outer/views/iframeView"),s=t("outer/views/tabView"),r=t("outer/views/fallbackView"),u=t("lib/tracker"),e=function(){function e(e,t){this.onTokenCallback=a(this.onTokenCallback,this),this.preload=a(this.preload,this),this.open=a(this.open,this),this.setOnToken=a(this.setOnToken,this);var n,f,l;this.host=t,this.setOnToken(e),o.isFallback()?(l=r,n="/v3/fallback/QV14TaevZZDjOVO2aSiPxA.html"):(n="/v3/1IrXW89B8CtobV8IeIalDQ.html",Math.random()<.5&&(n="/v3/var-YZO92D7N2LqNcf7pu6ag.html"),f=o.isSupportedMobileOS()&&!(o.isNativeWebContainer()||o.isAndroidWebapp()||o.isiOSWebView()||o.isiOSBroken()),f?l=s:l=i),n=""+n+"?distinct_id="+u.getDistinctID(),this.view=new l(this.onToken,this.host,n)}return e.activeView=null,e.prototype.setOnToken=function(e){var t;return this.tokenCallback=e,this.onToken=function(t){return function(n){return e.trigger(n.token,n.args,t.onTokenCallback)}}(this),(t=this.view)!=null?t.onToken=this.onToken:void 0},e.prototype.open=function(t){var n;return t==null&&(t={}),e.activeView&&e.activeView!==this.view&&e.activeView.close(),e.activeView=this.view,t.supportsTokenCallback=this.tokenCallback.supportsTokenCallback(),n=function(){if(this.view instanceof s)return this.view=new i(this.onToken,this.host,"/v3/1IrXW89B8CtobV8IeIalDQ.html"),this.open(t);return},o.isiOSChrome()&&!o.isUserGesture()?n():this.view.open(t,function(e){return function(e){if(!e)return n()}}(this))},e.prototype.close=function(){var e;return(e=this.view)!=null?e.close():void 0},e.prototype.preload=function(e){return this.view.preload(e)},e.prototype.onTokenCallback=function(){return this.view.triggerTokenCallback.apply(this.view,arguments)},e}(),n.exports=e}).call(this)}}),StripeCheckout.require.define({"outer/controllers/tokenCallback":function(e,t,n){(function(){var e,t=function(e,t){return function(){return e.apply(t,arguments)}};e=function(){function e(e){this.supportsTokenCallback=t(this.supportsTokenCallback,this),this.trigger=t(this.trigger,this),e.token?(this.fn=e.token,this.version=1):e.onToken&&(this.fn=e.onToken,this.version=2)}return e.prototype.trigger=function(e,t,n){var r,i,s,o;if(this.version===2){r={token:e},s=null;for(i in t)o=t[i],/^shipping_/.test(i)&&(s==null&&(s={}),s[i.replace(/^shipping_/,"")]=o);return s!=null&&(r.shipping=s),this.fn(r,n)}return this.fn(e,t)},e.prototype.supportsTokenCallback=function(){return this.version>1},e}(),n.exports=e}).call(this)}}),StripeCheckout.require.define({"outer/views/fallbackView":function(e,t,n){(function(){var e,r,i,s=function(e,t){return function(){return e.apply(t,arguments)}},o={}.hasOwnProperty,u=function(e,t){function r(){this.constructor=e}for(var n in t)o.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};e=t("outer/lib/fallbackRpc"),i=t("outer/views/view"),r=function(t){function n(){this.triggerTokenCallback=s(this.triggerTokenCallback,this),this.close=s(this.close,this),this.open=s(this.open,this),n.__super__.constructor.apply(this,arguments)}return u(n,t),n.prototype.open=function(t,r){var i,s;n.__super__.open.apply(this,arguments),s=this.host+this.path,this.frame=window.open(s,"stripe_checkout_app","width=400,height=400,location=yes,resizable=yes,scrollbars=yes");if(this.frame==null)throw alert("Disable your popup blocker to proceed with checkout."),s="https://web.archive.org/web/20170518220231/https://stripe.com/docs/checkout#integration-more-runloop",new Error("To learn how to prevent the Stripe Checkout popup from being blocked, please visit "+s);return this.rpc=new e(this.frame,s),this.rpc.receiveMessage(function(e){return function(t){var n;try{n=JSON.parse(t.data)}catch(r){return}return e.onToken(n)}}(this)),i=JSON.stringify(this.options),this.rpc.invokeTarget(i),r(!0)},n.prototype.close=function(){var e;return(e=this.frame)!=null?e.close():void 0},n.prototype.triggerTokenCallback=function(e){if(e)return alert(e)},n}(i),n.exports=r}).call(this)}}),StripeCheckout.require.define({"outer/views/iframeView":function(e,t,n){(function(){var e,r,i,s,o,u,a=function(e,t){return function(){return e.apply(t,arguments)}},f={}.hasOwnProperty,l=function(
e,t){function r(){this.constructor=e}for(var n in t)f.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};u=t("outer/lib/utils"),s=t("lib/helpers"),r=t("lib/rpc"),i=t("outer/views/view"),o=t("vendor/ready"),e=function(e){function t(){return this.configure=a(this.configure,this),this.removeFrame=a(this.removeFrame,this),this.removeTouchOverlay=a(this.removeTouchOverlay,this),this.showTouchOverlay=a(this.showTouchOverlay,this),this.attachIframe=a(this.attachIframe,this),this.setToken=a(this.setToken,this),this.closed=a(this.closed,this),this.close=a(this.close,this),this.preload=a(this.preload,this),this.open=a(this.open,this),t.__super__.constructor.apply(this,arguments)}return l(t,e),t.prototype.open=function(e,n){return t.__super__.open.apply(this,arguments),o(function(e){return function(){var t,r,i;return e.originalOverflowValue=document.body.style.overflow,e.frame==null&&e.configure(),(typeof $!="undefined"&&$!==null?(i=$.fn)!=null?i.modal:void 0:void 0)&&$(document).off("focusin.bs.modal").off("focusin.modal"),e.frame.style.display="block",e.shouldShowTouchOverlay()&&(e.showTouchOverlay(),e.frame.style.top=(window.scrollY||window.pageYOffset)+"px",t=(window.scrollX||window.pageXOffset)+(window.innerWidth-e.iframeWidth())/2,t=Math.min(window.innerWidth-e.iframeWidth(),Math.max(0,t)),t=Math.max(0,t),e.frame.style.left=t+"px"),r=!1,setTimeout(function(){if(r)return;return r=!0,n(!1),e.removeFrame()},8e3),e.rpc.ready(function(){if(r)return;return r=!0,n(!0),e.rpc.invoke("render","","iframe",e.options),document.body.style.overflow="hidden",e.rpc.invoke("open",{timeLoaded:e.options.timeLoaded},function(t){var n;if(t)return typeof (n=e.options).opened=="function"?n.opened():void 0})})}}(this))},t.prototype.preload=function(e){return o(function(t){return function(){return t.configure(),t.rpc.invoke("preload",e)}}(this))},t.prototype.iframeWidth=function(){return s.isSmallScreen()?328:380},t.prototype.close=function(){return this.rpc.invoke("close")},t.prototype.closed=function(e){var t;return document.body.style.overflow=this.originalOverflowValue,this.removeFrame(),clearTimeout(this.tokenTimeout),this.token!=null&&this.onToken(this.token),this.token=null,typeof (t=this.options).closed=="function"&&t.closed(),(e!=null?e.type:void 0)==="error.close"?alert(e.message):this.preload(this.options),!0},t.prototype.setToken=function(e){return this.token=e,this.tokenTimeout!=null?this.tokenTimeout:this.tokenTimeout=setTimeout(function(e){return function(){return e.onToken(e.token),e.tokenTimeout=null,e.token=null}}(this),3e3)},t.prototype.attachIframe=function(){var e,t;return t=document.createElement("iframe"),t.setAttribute("frameBorder","0"),t.setAttribute("allowtransparency","true"),e="z-index: 9999;\ndisplay: none;\nbackground: transparent;\nbackground: rgba(0,0,0,0.005);\nborder: 0px none transparent;\noverflow-x: hidden;\noverflow-y: auto;\nvisibility: hidden;\nmargin: 0;\npadding: 0;\n-webkit-tap-highlight-color: transparent;\n-webkit-touch-callout: none;",this.shouldShowTouchOverlay()?e+="position: absolute;\nwidth: "+this.iframeWidth()+"px;\nheight: 100%;":e+="position: fixed;\nleft: 0;\ntop: 0;\nwidth: 100%;\nheight: 100%;",t.style.cssText=e,s.bind(t,"load",function(){return t.style.visibility="visible"}),t.src=this.host+this.path,t.className=t.name="stripe_checkout_app",u.append(document.body,t),t},t.prototype.showTouchOverlay=function(){var e;if(this.overlay)return;return this.overlay=document.createElement("div"),this.overlay.style.cssText="z-index: 9998;\nbackground: #000;\nopacity: 0;\nborder: 0px none transparent;\noverflow: none;\nmargin: 0;\npadding: 0;\n-webkit-tap-highlight-color: transparent;\n-webkit-touch-callout: none;\nposition: fixed;\nleft: 0;\ntop: 0;\nwidth: 200%;\nheight: 200%;\ntransition: opacity 320ms ease;\n-webkit-transition: opacity 320ms ease;\n-moz-transition: opacity 320ms ease;\n-ms-transition: opacity 320ms ease;",u.append(document.body,this.overlay),e=this.overlay.offsetHeight,this.overlay.style.opacity="0.5"},t.prototype.removeTouchOverlay=function(){var e;if(!this.overlay)return;return e=this.overlay,e.style.opacity="0",setTimeout(function(){return u.remove(e)},400),this.overlay=null},t.prototype.removeFrame=function(){var e;return this.shouldShowTouchOverlay()&&this.removeTouchOverlay(),e=this.frame,setTimeout(function(){return u.remove(e)},500),this.frame=null},t.prototype.configure=function(){return this.frame!=null&&this.removeFrame(),this.frame=this.attachIframe(),this.rpc=new r(this.frame.contentWindow,{host:this.host}),this.rpc.methods.closed=this.closed,this.rpc.methods.setToken=this.setToken},t.prototype.shouldShowTouchOverlay=function(){return s.isSupportedMobileOS()},t}(i),n.exports=e}).call(this)}}),StripeCheckout.require.define({"outer/views/tabView":function(e,t,n){(function(){var e,r,i,s,o=function(e,t){return function(){return e.apply(t,arguments)}},u={}.hasOwnProperty,a=function(e,t){function r(){this.constructor=e}for(var n in t)u.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};e=t("lib/rpc"),s=t("lib/helpers"),i=t("outer/views/view"),r=function(t){function n(){this.closed=o(this.closed,this),this.checkForClosedTab=o(this.checkForClosedTab,this),this.setToken=o(this.setToken,this),this.fullPath=o(this.fullPath,this),this.close=o(this.close,this),this.open=o(this.open,this),n.__super__.constructor.apply(this,arguments),this.closedTabInterval=null,this.color=null,this.colorSet=!1}return a(n,t),n.prototype.open=function(t,r){var i,o,u,a,f;n.__super__.open.apply(this,arguments);try{(a=this.frame)!=null&&a.close()}catch(l){}window.name==="stripe_checkout_tabview"&&(window.name=""),s.isiOSChrome()?i="_blank":i="stripe_checkout_tabview",this.frame=window.open(this.fullPath(),i),!this.frame&&((f=this.options.key)!=null?f.indexOf("test"):void 0)!==-1&&(o="https://web.archive.org/web/20170518220231/https://stripe.com/docs/checkout#integration-more-runloop",console.error("Stripe Checkout was unable to open a new window, possibly due to a popup blocker.\nTo provide the best experience for your users, follow the guide at "+o+".\nThis message will only appear when using a test publishable key."));if(!this.frame||this.frame===window){this.close(),r(!1);return}return typeof (u=this.frame).focus=="function"&&u.focus(),this.rpc=new e(this.frame,{host:this.host}),this.rpc.methods.setToken=this.setToken,this.rpc.methods.closed=this.closed,this.rpc.ready(function(e){return function(){var t;return r(!0),e.rpc.invoke("render","","tab",e.options),e.rpc.invoke("open"),typeof (t=e.options).opened=="function"&&t.opened(),e.checkForClosedTab()}}(this))},n.prototype.close=function(){if(this.frame&&this.frame!==window)return this.frame.close()},n.prototype.fullPath=function(){return this.host+this.path},n.prototype.setToken=function(e){return this.token=e,this.tokenTimeout!=null?this.tokenTimeout:this.tokenTimeout=setTimeout(function(e){return function(){return e.onToken(e.token),e.tokenTimeout=null,e.token=null}}(this),3e3)},n.prototype.checkForClosedTab=function(){return this.closedTabInterval&&clearInterval(this.closedTabInterval),this.closedTabInterval=setInterval(function(e){return function(){if(!e.frame||!e.frame.postMessage||e.frame.closed)return e.closed()}}(this),100)},n.prototype.closed=function(){var e;return clearInterval(this.closedTabInterval),clearTimeout(this.tokenTimeout),this.token!=null&&this.onToken(this.token),typeof (e=this.options).closed=="function"?e.closed():void 0},n}(i),n.exports=r}).call(this)}}),StripeCheckout.require.define({"outer/views/view":function(e,t,n){(function(){var e,t=function(e,t){return function(){return e.apply(t,arguments)}},r=[].slice;e=function(){function e(e,n,r){this.triggerTokenCallback=t(this.triggerTokenCallback,this),this.open=t(this.open,this),this.onToken=e,this.host=n,this.path=r}return e.prototype.open=function(e,t){return this.options=e},e.prototype.close=function(){},e.prototype.preload=function(e){},e.prototype.triggerTokenCallback=function(){var e;return e=arguments,this.rpc.ready(function(t){return function(){var n;return(n=t.rpc).invoke.apply(n,["tokenCallback"].concat(r.call(e)))}}(this))},e}(),n.exports=e}).call(this)}}),function(){var e,t,n,r,i,s;r=r||this.StripeCheckout.require,t=r("outer/controllers/button"),e=r("outer/controllers/app"),((i=this.StripeCheckout)!=null?i.__app:void 0)==null&&(this.StripeCheckout||(this.StripeCheckout={}),this.StripeCheckout.__app=n=new e,this.StripeCheckout.open=n.open,this.StripeCheckout.configure=n.configure,this.StripeButton=this.StripeCheckout,((s=this.StripeCheckout)!=null?s.__host:void 0)&&this.StripeCheckout.__host!==""&&n.setHost(this.StripeCheckout.__host)),t.load(this.StripeCheckout.__app)}.call(this),window.gl={},Math.log10=Math.log10||function(e){return Math.log(e)/Math.LN10},Array.prototype.sum=function(){var e=0;for(var t=this.length;t--;)e+=this[t];return e},Array.prototype.min=function(){var e=this.length;if(!e)return;var t=this[0];for(var n=1;n<e;n++)this[n]<t&&(t=this[n]);return t},Array.prototype.minIndex=function(){var e=this.length;if(!e)return;var t=this[0],n=0;for(var r=1;r<e;r++)this[r]<t&&(t=this[r],n=r);return n},Array.prototype.max=function(){var e=this.length;if(!e)return;var t=this[0];for(var n=1;n<e;n++)this[n]>t&&(t=this[n]);return t},Array.prototype.maxIndex=function(){var e=this.length;if(!e)return;var t=this[0],n=0;for(var r=1;r<e;r++)this[r]>t&&(t=this[r],n=r);return n},Array.prototype.avg=function(){return this.sum()/this.length},window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e,t){window.setTimeout(e,1e3/60)}}(),function(e,undefined){function j(e){var t=e.length,n=x.type(e);return x.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===n||"function"!==n&&(0===t||"number"==typeof t&&t>0&&t-1 in e)}function A(e){var t=D[e]={};return x.each(e.match(w)||[],function(e,n){t[n]=!0}),t}function F(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=x.expando+Math.random()}function P(e,t,n){var r;if(n===undefined&&1===e.nodeType)if(r="data-"+t.replace(O,"-$1").toLowerCase(),n=e.getAttribute(r),"string"==typeof n){try{n="true"===n?!0:"false"===n?!1:"null"===n?null:+n+""===n?+n:H.test(n)?JSON.parse(n):n}catch(i){}L.set(e,t,n)}else n=undefined;return n}function U(){return!0}function Y(){return!1}function V(){try{return o.activeElement}catch(e){}}function Z(e,t){while((e=e[t])&&1!==e.nodeType);return e}function et(e,t,n){if(x.isFunction(t))return x.grep(e,function(e,r){return!!t.call(e,r,e)!==n});if(t.nodeType)return x.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(G.test(t))return x.filter(t,e,n);t=x.filter(t,e)}return x.grep(e,function(e){return g.call(t,e)>=0!==n})}function pt(e,t){return x.nodeName(e,"table")&&x.nodeName(1===t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function ft(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function ht(e){var t=ut.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function dt(e,t){var n=e.length,r=0;for(;n>r;r++)q.set(e[r],"globalEval",!t||q.get(t[r],"globalEval"))}function gt(e,t){var n,r,i,s,o,u,a,f;if(1===t.nodeType){if(q.hasData(e)&&(s=q.access(e),o=q.set(t,s),f=s.events)){delete o.handle,o.events={};for(i in f)for(n=0,r=f[i].length;r>n;n++)x.event.add(t,i,f[i][n])}L.hasData(e)&&(u=L.access(e),a=x.extend({},u),L.set(t,a))}}function mt(e,t){var n=e.getElementsByTagName?e.getElementsByTagName(t||"*"):e.querySelectorAll?e.querySelectorAll(t||"*"):[];return t===undefined||t&&x.nodeName(e,t)?x.merge([e],n):n}function yt(e,t){var n=t.nodeName.toLowerCase();"input"===n&&ot.test(e.type)?t.checked=e.checked:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}function At(e,t){if(t in e)return t;var n=t.charAt(0).toUpperCase()+t.slice(1),r=t,i=Dt.length;while(i--)if(t=Dt[i]+n,t in e)return t;return r}function Lt(e,t){return e=t||e,"none"===x.css(e,"display")||!x.contains(e.ownerDocument,e)}function qt(t){return e.getComputedStyle(t,null)}function Ht(e,t){var n,r,i,s=[],o=0,u=e.length;for(;u>o;o++)r=e[o],r.style&&(s[o]=q.get(r,"olddisplay"),n=r.style.display,t?(s[o]||"none"!==n||(r.style.display=""),""===r.style.display&&Lt(r)&&(s[o]=q.access(r,"olddisplay",Rt(r.nodeName)))):s[o]||(i=Lt(r),(n&&"none"!==n||!i)&&q.set(r,"olddisplay",i?n:x.css(r,"display"))));for(o=0;u>o;o++)r=e[o],r.style&&(t&&"none"!==r.style.display&&""!==r.style.display||(r.style.display=t?s[o]||"":"none"));return e}function Ot(e,t,n){var r=Tt.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function Ft(e,t,n,r,i){var s=n===(r?"border":"content")?4:"width"===t?1:0,o=0;for(;4>s;s+=2)"margin"===n&&(o+=x.css(e,n+jt[s],!0,i)),r?("content"===n&&(o-=x.css(e,"padding"+jt[s],!0,i)),"margin"!==n&&(o-=x.css(e,"border"+jt[s]+"Width",!0,i))):(o+=x.css(e,"padding"+jt[s],!0,i),"padding"!==n&&(o+=x.css(e,"border"+jt[s]+"Width",!0,i)));return o}function Pt(e,t,n){var r=!0,i="width"===t?e.offsetWidth:e.offsetHeight,s=qt(e),o=x.support.boxSizing&&"border-box"===x.css(e,"boxSizing",!1,s);if(0>=i||null==i){if(i=vt(e,t,s),(0>i||null==i)&&(i=e.style[t]),Ct.test(i))return i;r=o&&(x.support.boxSizingReliable||i===e.style[t]),i=parseFloat(i)||0}return i+Ft(e,t,n||(o?"border":"content"),r,s)+"px"}function Rt(e){var t=o,n=Nt[e];return n||(n=Mt(e,t),"none"!==n&&n||(xt=(xt||x("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(t.documentElement),t=(xt[0].contentWindow||xt[0].contentDocument).document,t.write("<!doctype html><html><body>"),t.close(),n=Mt(e,t),xt.detach()),Nt[e]=n),n}function Mt(e,t){var n=x(t.createElement(e)).appendTo(t.body),r=x.css(n[0],"display");return n.remove(),r}function _t(e,t,n,r){var i;if(x.isArray(t))x.each(t,function(t,i){n||$t.test(e)?r(e,i):_t(e+"["+("object"==typeof i?t:"")+"]",i,n,r)});else if(n||"object"!==x.type(t))r(e,t);else for(i in t)_t(e+"["+i+"]",t[i],n,r)}function un(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,s=t.toLowerCase().match(w)||[];if(x.isFunction(n))while(r=s[i++])"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function ln(e,t,n,r){function o(u){var a;return i[u]=!0,x.each(e[u]||[],function(e,u){var f=u(t,n,r);return"string"!=typeof f||s||i[f]?s?!(a=f):undefined:(t.dataTypes.unshift(f),o(f),!1)}),a}var i={},s=e===on;return o(t.dataTypes[0])||!i["*"]&&o("*")}function cn(e,t){var n,r,i=x.ajaxSettings.flatOptions||{};for(n in t)t[n]!==undefined&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&x.extend(!0,e,r),e}function pn(e,t,n){var r,i,s,o,u=e.contents,a=e.dataTypes;while("*"===a[0])a.shift(),r===undefined&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in u)if(u[i]&&u[i].test(r)){a.unshift(i);break}if(a[0]in n)s=a[0];else{for(i in n){if(!a[0]||e.converters[i+" "+a[0]]){s=i;break}o||(o=i)}s=s||o}return s?(s!==a[0]&&a.unshift(s),n[s]):undefined}function fn(e,t,n,r){var i,s,o,u,a,f={},l=e.dataTypes.slice();if(l[1])for(o in e.converters)f[o.toLowerCase()]=e.converters[o];s=l.shift();while(s)if(e.responseFields[s]&&(n[e.responseFields[s]]=t),!a&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),a=s,s=l.shift())if("*"===s)s=a;else if("*"!==a&&a!==s){if(o=f[a+" "+s]||f["* "+s],!o)for(i in f)if(u=i.split(" "),u[1]===s&&(o=f[a+" "+u[0]]||f["* "+u[0]])){o===!0?o=f[i]:f[i]!==!0&&(s=u[0],l.unshift(u[1]));break}if(o!==!0)if(o&&e["throws"])t=o(t);else try{t=o(t)}catch(c){return{state:"parsererror",error:o?c:"No conversion from "+a+" to "+s}}}return{state:"success",data:t}}function En(){return setTimeout(function(){xn=undefined}),xn=x.now()}function Sn(e,t,n){var r,i=(Nn[t]||[]).concat(Nn["*"]),s=0,o=i.length;for(;o>s;s++)if(r=i[s].call(n,t,e))return r}function jn(e,t,n){var r,i,s=0,o=kn.length,u=x.Deferred().always(function(){delete a.elem}),a=function(){if(i)return!1;var t=xn||En(),n=Math.max(0,f.startTime+f.duration-t),r=n/f.duration||0,s=1-r,o=0,a=f.tweens.length;for(;a>o;o++)f.tweens[o].run(s);return u.notifyWith(e,[f,s,n]),1>s&&a?n:(u.resolveWith(e,[f]),!1)},f=u.promise({elem:e,props:x.extend({},t),opts:x.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:xn||En(),duration:n.duration,tweens:[],createTween:function(t,n){var r=x.Tween(e,f.opts,t,n,f.opts.specialEasing[t]||f.opts.easing);return f.tweens.push(r),r},stop:function(t){var n=0,r=t?f.tweens.length:0;if(i)return this;for(i=!0;r>n;n++)f.tweens[n].run(1);return t?u.resolveWith(e,[f,t]):u.rejectWith(e,[f,t]),this}}),l=f.props;for(Dn(l,f.opts.specialEasing);o>s;s++)if(r=kn[s].call(f,e,l,f.opts))return r;return x.map(l,Sn,f),x.isFunction(f.opts.start)&&f.opts.start.call(e,f),x.fx.timer(x.extend(a,{elem:e,anim:f,queue:f.opts.queue})),f.progress(f.opts.progress).done(f.opts.done,f.opts.complete).fail(f.opts.fail).always(f.opts.always)}function Dn(e,t){var n,r,i,s,o;for(n in e)if(r=x.camelCase(n),i=t[r],s=e[n],x.isArray(s)&&(i=s[1],s=e[n]=s[0]),n!==r&&(e[r]=s,delete e[n]),o=x.cssHooks[r],o&&"expand"in o){s=o.expand(s),delete e[r];for(n in s)n in e||(e[n]=s[n],t[n]=i)}else t[r]=i}function An(e,t,n){var r,i,s,o,u,a,f=this,l={},c=e.style,h=e.nodeType&&Lt(e),p=q.get(e,"fxshow");n.queue||(u=x._queueHooks(e,"fx"),null==u.unqueued&&(u.unqueued=0,a=u.empty.fire,u.empty.fire=function(){u.unqueued||a()}),u.unqueued++,f.always(function(){f.always(function(){u.unqueued--,x.queue(e,"fx").length||u.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[c.overflow,c.overflowX,c.overflowY],"inline"===x.css(e,"display")&&"none"===x.css(e,"float")&&(c.display="inline-block")),n.overflow&&(c.overflow="hidden",f.always(function(){c.overflow=n.overflow[0],c.overflowX=n.overflow[1],c.overflowY=n.overflow[2]}));for(r in t)if(i=t[r],wn.exec(i)){if(delete t[r],s=s||"toggle"===i,i===(h?"hide":"show")){if("show"!==i||!p||p[r]===undefined)continue;h=!0}l[r]=p&&p[r]||x.style(e,r)}if(!x.isEmptyObject(l)){p?"hidden"in p&&(h=p.hidden):p=q.access(e,"fxshow",{}),s&&(p.hidden=!h),h?x(e).show():f.done(function(){x(e).hide()}),f.done(function(){var t;q.remove(e,"fxshow");for(t in l)x.style(e,t,l[t])});for(r in l)o=Sn(h?p[r]:0,r,f),r in p||(p[r]=o.start,h&&(o.end=o.start,o.start="width"===r||"height"===r?1:0))}}function Ln(e,t,n,r,i){return new Ln.prototype.init(e,t,n,r,i)}function qn(e,t){var n,r={height:e},i=0;for(t=t?1:0;4>i;i+=2-t)n=jt[i],r["margin"+n]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function Hn(e){return x.isWindow(e)?e:9===e.nodeType&&e.defaultView}var t,n,r=typeof undefined,i=e.location,o=e.document,s=o.documentElement,a=e.jQuery,u=e.$,l={},c=[],p="2.0.3",f=c.concat,h=c.push,d=c.slice,g=c.indexOf,m=l.toString,y=l.hasOwnProperty,v=p.trim,x=function(e,n){return new x.fn.init(e,n,t)},b=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,w=/\S+/g,T=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,C=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,k=/^-ms-/,N=/-([\da-z])/gi,E=function(e,t){return t.toUpperCase()},S=function(){o.removeEventListener("DOMContentLoaded",S,!1),e.removeEventListener("load",S,!1),x.ready()};x.fn=x.prototype={jquery:p,constructor:x,init:function(e,t,n){var r,i;if(!e)return this;if("string"==typeof e){if(r="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:T.exec(e),!r||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof x?t[0]:t,x.merge(this,x.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:o,!0)),C.test(r[1])&&x.isPlainObject(t))for(r in t)x.isFunction(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return i=o.getElementById(r[2]),i&&i.parentNode&&(this.length=1,this[0]=i),this.context=o,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):x.isFunction(e)?n.ready(e):(e.selector!==undefined&&(this.selector=e.selector,this.context=e.context),x.makeArray(e,this))},selector:"",length:0,toArray:function(){return d.call(this)},get:function(e){return null==e?this.toArray():0>e?this[this.length+e]:this[e]},pushStack:function(e){var t=x.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return x.each(this,e,t)},ready:function(e){return x.ready.promise().done(e),this},slice:function(){return this.pushStack(d.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},map:function(e){return this.pushStack(x.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:h,sort:[].sort,splice:[].splice},x.fn.init.prototype=x.fn,x.extend=x.fn.extend=function(){var e,t,n,r,i,s,o=arguments[0]||{},u=1,a=arguments.length,f=!1;for("boolean"==typeof o&&(f=o,o=arguments[1]||{},u=2),"object"==typeof o||x.isFunction(o)||(o={}),a===u&&(o=this,--u);a>u;u++)if(null!=(e=arguments[u]))for(t in e)n=o[t],r=e[t],o!==r&&(f&&r&&(x.isPlainObject(r)||(i=x.isArray(r)))?(i?(i=!1,s=n&&x.isArray(n)?n:[]):s=n&&x.isPlainObject(n)?n:{},o[t]=x.extend(f,s,r)):r!==undefined&&(o[t]=r));return o},x.extend({expando:"jQuery"+(p+Math.random()).replace(/\D/g,""),noConflict:function(t){return e.$===x&&(e.$=u),t&&e.jQuery===x&&(e.jQuery=a),x},isReady:!1,readyWait:1,holdReady:function(e){e?x.readyWait++:x.ready(!0)},ready:function(e){(e===!0?--x.readyWait:x.isReady)||(x.isReady=!0,e!==!0&&--x.readyWait>0||(n.resolveWith(o,[x]),x.fn.trigger&&x(o).trigger("ready").off("ready")))},isFunction:function(e){return"function"===x.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?l[m.call(e)]||"object":typeof e},isPlainObject:function(e){if("object"!==x.type(e)||e.nodeType||x.isWindow(e))return!1;try{if(e.constructor&&!y.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(t){return!1}return!0},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw Error(e)},parseHTML:function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||o;var r=C.exec(e),i=!n&&[];return r?[t.createElement(r[1])]:(r=x.buildFragment([e],t,i),i&&x(i).remove(),x.merge([],r.childNodes))},parseJSON:JSON.parse,parseXML:function(e){var t,n;if(!e||"string"!=typeof e)return null;try{n=new DOMParser,t=n.parseFromString(e,"text/xml")}catch(r){t=undefined}return(!t||t.getElementsByTagName("parsererror").length)&&x.error("Invalid XML: "+e),t},noop:function(){},globalEval:function(e){var t,n=eval;e=x.trim(e),e&&(1===e.indexOf("use strict")?(t=o.createElement("script"),t.text=e,o.head.appendChild(t).parentNode.removeChild(t)):n(e))},camelCase:function(e){return e.replace(k,"ms-").replace(N,E)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var r,i=0,s=e.length,o=j(e);if(n){if(o){for(;s>i;i++)if(r=t.apply(e[i],n),r===!1)break}else for(i in e)if(r=t.apply(e[i],n),r===!1)break}else if(o){for(;s>i;i++)if(r=t.call(e[i],i,e[i]),r===!1)break}else for(i in e)if(r=t.call(e[i],i,e[i]),r===!1)break;return e},trim:function(e){return null==e?"":v.call(e)},makeArray:function(e,t){var n=t||[];return null!=e&&(j(Object(e))?x.merge(n,"string"==typeof e?[e]:e):h.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:g.call(t,e,n)},merge:function(e,t){var n=t.length,r=e.length,i=0;if("number"==typeof n)for(;n>i;i++)e[r++]=t[i];else while(t[i]!==undefined)e[r++]=t[i++];return e.length=r,e},grep:function(e,t,n){var r,i=[],s=0,o=e.length;for(n=!!n;o>s;s++)r=!!t(e[s],s),n!==r&&i.push(e[s]);return i},map:function(e,t,n){var r,i=0,s=e.length,o=j(e),u=[];if(o)for(;s>i;i++)r=t(e[i],i,n),null!=r&&(u[u.length]=r);else for(i in e)r=t(e[i],i,n),null!=r&&(u[u.length]=r);return f.apply([],u)},guid:1,proxy:function(e,t){var n,r,i;return"string"==typeof t&&(n=e[t],t=e,e=n),x.isFunction(e)?(r=d.call(arguments,2),i=function(){return e.apply(t||this,r.concat(d.call(arguments)))},i.guid=e.guid=e.guid||x.guid++,i):undefined},access:function(e,t,n,r,i,s,o){var u=0,a=e.length,f=null==n;if("object"===x.type(n)){i=!0;for(u in n)x.access(e,t,u,n[u],!0,s,o)}else if(r!==undefined&&(i=!0,x.isFunction(r)||(o=!0),f&&(o?(t.call(e,r),t=null):(f=t,t=function(e,t,n){return f.call(x(e),n)})),t))for(;a>u;u++)t(e[u],n,o?r:r.call(e[u],u,t(e[u],n)));return i?e:f?t.call(e):a?t(e[0],n):s},now:Date.now,swap:function(e,t,n,r){var i,s,o={};for(s in t)o[s]=e.style[s],e.style[s]=t[s];i=n.apply(e,r||[]);for(s in t)e.style[s]=o[s];return i}}),x.ready.promise=function(t){return n||(n=x.Deferred(),"complete"===o.readyState?setTimeout(x.ready):(o.addEventListener("DOMContentLoaded",S,!1),e.addEventListener("load",S,!1))),n.promise(t)},x.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){l["[object "+t+"]"]=t.toLowerCase()}),t=x(o),function(e,t){function ot(e,t,n,i){var s,o,u,a,f,l,p,m,g,E;if((t?t.ownerDocument||t:w)!==h&&c(t),t=t||h,n=n||[],!e||"string"!=typeof e)return n;if(1!==(a=t.nodeType)&&9!==a)return[];if(d&&!i){if(s=Z.exec(e))if(u=s[1]){if(9===a){if(o=t.getElementById(u),!o||!o.parentNode)return n;if(o.id===u)return n.push(o),n}else if(t.ownerDocument&&(o=t.ownerDocument.getElementById(u))&&y(t,o)&&o.id===u)return n.push(o),n}else{if(s[2])return H.apply(n,t.getElementsByTagName(e)),n;if((u=s[3])&&r.getElementsByClassName&&t.getElementsByClassName)return H.apply(n,t.getElementsByClassName(u)),n}if(r.qsa&&(!v||!v.test(e))){if(m=p=b,g=t,E=9===a&&e,1===a&&"object"!==t.nodeName.toLowerCase()){l=mt(e),(p=t.getAttribute("id"))?m=p.replace(nt,"\\$&"):t.setAttribute("id",m),m="[id='"+m+"'] ",f=l.length;while(f--)l[f]=m+gt(l[f]);g=$.test(e)&&t.parentNode||t,E=l.join(",")}if(E)try{return H.apply(n,g.querySelectorAll(E)),n}catch(S){}finally{p||t.removeAttribute("id")}}}return Nt(e.replace(W,"$1"),t,n,i)}function ut(){function t(n,r){return e.push(n+=" ")>s.cacheLength&&delete t[e.shift()],t[n]=r}var e=[];return t}function at(e){return e[b]=!0,e}function ft(e){var t=h.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function lt(e,t){var n=e.split("|"),r=e.length;while(r--)s.attrHandle[n[r]]=t}function ct(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||O)-(~e.sourceIndex||O);if(r)return r;if(n)while(n=n.nextSibling)if(n===t)return-1;return e?1:-1}function ht(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function pt(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function dt(e){return at(function(t){return t=+t,at(function(n,r){var i,s=e([],n.length,t),o=s.length;while(o--)n[i=s[o]]&&(n[i]=!(r[i]=n[i]))})})}function vt(){}function mt(e,t){var n,r,i,o,u,a,f,l=N[e+" "];if(l)return t?0:l.slice(0);u=e,a=[],f=s.preFilter;while(u){(!n||(r=X.exec(u)))&&(r&&(u=u.slice(r[0].length)||u),a.push(i=[])),n=!1,(r=V.exec(u))&&(n=r.shift(),i.push({value:n,type:r[0].replace(W," ")}),u=u.slice(n.length));for(o in s.filter)!(r=G[o].exec(u))||f[o]&&!(r=f[o](r))||(n=r.shift(),i.push({value:n,type:o,matches:r}),u=u.slice(n.length));if(!n)break}return t?u.length:u?ot.error(e):N(e,a).slice(0)}function gt(e){var t=0,n=e.length,r="";for(;n>t;t++)r+=e[t].value;return r}function yt(e,t,n){var r=t.dir,s=n&&"parentNode"===r,o=S++;return t.first?function(t,n,i){while(t=t[r])if(1===t.nodeType||s)return e(t,n,i)}:function(t,n,u){var a,f,l,c=E+" "+o;if(u){while(t=t[r])if((1===t.nodeType||s)&&e(t,n,u))return!0}else while(t=t[r])if(1===t.nodeType||s)if(l=t[b]||(t[b]={}),(f=l[r])&&f[0]===c){if((a=f[1])===!0||a===i)return a===!0}else if(f=l[r]=[c],f[1]=e(t,n,u)||i,f[1]===!0)return!0}}function bt(e){return e.length>1?function(t,n,r){var i=e.length;while(i--)if(!e[i](t,n,r))return!1;return!0}:e[0]}function wt(e,t,n,r,i){var s,o=[],u=0,a=e.length,f=null!=t;for(;a>u;u++)(s=e[u])&&(!n||n(s,r,i))&&(o.push(s),f&&t.push(u));return o}function Et(e,t,n,r,i,s){return r&&!r[b]&&(r=Et(r)),i&&!i[b]&&(i=Et(i,s)),at(function(s,o,u,a){var f,l,c,h=[],p=[],d=o.length,v=s||Tt(t||"*",u.nodeType?[u]:u,[]),m=!e||!s&&t?v:wt(v,h,e,u,a),g=n?i||(s?e:d||r)?[]:o:m;if(n&&n(m,g,u,a),r){f=wt(g,p),r(f,[],u,a),l=f.length;while(l--)(c=f[l])&&(g[p[l]]=!(m[p[l]]=c))}if(s){if(i||e){if(i){f=[],l=g.length;while(l--)(c=g[l])&&f.push(m[l]=c);i(null,g=[],f,a)}l=g.length;while(l--)(c=g[l])&&(f=i?j.call(s,c):h[l])>-1&&(s[f]=!(o[f]=c))}}else g=wt(g===o?g.splice(d,g.length):g),i?i(null,o,g,a):H.apply(o,g)})}function St(e){var t,n,r,i=e.length,o=s.relative[e[0].type],u=o||s.relative[" "],a=o?1:0,l=yt(function(e){return e===t},u,!0),c=yt(function(e){return j.call(t,e)>-1},u,!0),h=[function(e,n,r){return!o&&(r||n!==f)||((t=n).nodeType?l(e,n,r):c(e,n,r))}];for(;i>a;a++)if(n=s.relative[e[a].type])h=[yt(bt(h),n)];else{if(n=s.filter[e[a].type].apply(null,e[a].matches),n[b]){for(r=++a;i>r;r++)if(s.relative[e[r].type])break;return Et(a>1&&bt(h),a>1&&gt(e.slice(0,a-1).concat({value:" "===e[a-2].type?"*":""})).replace(W,"$1"),n,r>a&&St(e.slice(a,r)),i>r&&St(e=e.slice(r)),i>r&&gt(e))}h.push(n)}return bt(h)}function xt(e,t){var n=0,r=t.length>0,o=e.length>0,u=function(u,a,l,c,p){var d,v,m,g=[],y=0,b="0",w=u&&[],S=null!=p,x=f,T=u||o&&s.find.TAG("*",p&&a.parentNode||a),N=E+=null==x?1:Math.random()||.1;for(S&&(f=a!==h&&a,i=n);null!=(d=T[b]);b++){if(o&&d){v=0;while(m=e[v++])if(m(d,a,l)){c.push(d);break}S&&(E=N,i=++n)}r&&((d=!m&&d)&&y--,u&&w.push(d))}if(y+=b,r&&b!==y){v=0;while(m=t[v++])m(w,g,a,l);if(u){if(y>0)while(b--)w[b]||g[b]||(g[b]=D.call(c));g=wt(g)}H.apply(c,g),S&&!u&&g.length>0&&y+t.length>1&&ot.uniqueSort(c)}return S&&(E=N,f=x),w};return r?at(u):u}function Tt(e,t,n){var r=0,i=t.length;for(;i>r;r++)ot(e,t[r],n);return n}function Nt(e,t,n,i){var o,u,f,l,c,h=mt(e);if(!i&&1===h.length){if(u=h[0]=h[0].slice(0),u.length>2&&"ID"===(f=u[0]).type&&r.getById&&9===t.nodeType&&d&&s.relative[u[1].type]){if(t=(s.find.ID(f.matches[0].replace(rt,it),t)||[])[0],!t)return n;e=e.slice(u.shift().value.length)}o=G.needsContext.test(e)?0:u.length;while(o--){if(f=u[o],s.relative[l=f.type])break;if((c=s.find[l])&&(i=c(f.matches[0].replace(rt,it),$.test(u[0].type)&&t.parentNode||t))){if(u.splice(o,1),e=i.length&&gt(u),!e)return H.apply(n,i),n;break}}}return a(e,h)(i,t,!d,n,$.test(e)),n}var n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b="sizzle"+ -(new Date),w=e.document,E=0,S=0,T=ut(),N=ut(),C=ut(),k=!1,L=function(e,t){return e===t?(k=!0,0):0},A=typeof t,O=1<<31,M={}.hasOwnProperty,_=[],D=_.pop,P=_.push,H=_.push,B=_.slice,j=_.indexOf||function(e){var t=0,n=this.length;for(;n>t;t++)if(this[t]===e)return t;return-1},F="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",I="[\\x20\\t\\r\\n\\f]",q="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",R=q.replace("w","w#"),U="\\["+I+"*("+q+")"+I+"*(?:([*^$|!~]?=)"+I+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+R+")|)|)"+I+"*\\]",z=":("+q+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+U.replace(3,8)+")*)|.*)\\)|)",W=RegExp("^"+I+"+|((?:^|[^\\\\])(?:\\\\.)*)"+I+"+$","g"),X=RegExp("^"+I+"*,"+I+"*"),V=RegExp("^"+I+"*([>+~]|"+I+")"+I+"*"),$=RegExp(I+"*[+~]"),J=RegExp("="+I+"*([^\\]'\"]*)"+I+"*\\]","g"),K=RegExp(z),Q=RegExp("^"+R+"$"),G={ID:RegExp("^#("+q+")"),CLASS:RegExp("^\\.("+q+")"),TAG:RegExp("^("+q.replace("w","w*")+")"),ATTR:RegExp("^"+U),PSEUDO:RegExp("^"+z),CHILD:RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+I+"*(even|odd|(([+-]|)(\\d*)n|)"+I+"*(?:([+-]|)"+I+"*(\\d+)|))"+I+"*\\)|)","i"),bool:RegExp("^(?:"+F+")$","i"),needsContext:RegExp("^"+I+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+I+"*((?:-\\d)?\\d*)"+I+"*\\)|)(?=[^-]|$)","i")},Y=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,et=/^(?:input|select|textarea|button)$/i,tt=/^h\d$/i,nt=/'|\\/g,rt=RegExp("\\\\([\\da-f]{1,6}"+I+"?|("+I+")|.)","ig"),it=function(e,t,n){var r="0x"+t-65536;return r!==r||n?t:0>r?String.fromCharCode(r+65536):String.fromCharCode(55296|r>>10,56320|1023&r)};try{H.apply(_=B.call(w.childNodes),w.childNodes),_[w.childNodes.length].nodeType}catch(st){H={apply:_.length?function(e,t){P.apply(e,B.call(t))}:function(e,t){var n=e.length,r=0;while(e[n++]=t[r++]);e.length=n-1}}}u=ot.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},r=ot.support={},c=ot.setDocument=function(e){var n=e?e.ownerDocument||e:w,i=n.defaultView;return n!==h&&9===n.nodeType&&n.documentElement?(h=n,p=n.documentElement,d=!u(n),i&&i.attachEvent&&i!==i.top&&i.attachEvent("onbeforeunload",function(){c()}),r.attributes=ft(function(e){return e.className="i",!
e.getAttribute("className")}),r.getElementsByTagName=ft(function(e){return e.appendChild(n.createComment("")),!e.getElementsByTagName("*").length}),r.getElementsByClassName=ft(function(e){return e.innerHTML="<div class='a'></div><div class='a i'></div>",e.firstChild.className="i",2===e.getElementsByClassName("i").length}),r.getById=ft(function(e){return p.appendChild(e).id=b,!n.getElementsByName||!n.getElementsByName(b).length}),r.getById?(s.find.ID=function(e,t){if(typeof t.getElementById!==A&&d){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},s.filter.ID=function(e){var t=e.replace(rt,it);return function(e){return e.getAttribute("id")===t}}):(delete s.find.ID,s.filter.ID=function(e){var t=e.replace(rt,it);return function(e){var n=typeof e.getAttributeNode!==A&&e.getAttributeNode("id");return n&&n.value===t}}),s.find.TAG=r.getElementsByTagName?function(e,n){return typeof n.getElementsByTagName!==A?n.getElementsByTagName(e):t}:function(e,t){var n,r=[],i=0,s=t.getElementsByTagName(e);if("*"===e){while(n=s[i++])1===n.nodeType&&r.push(n);return r}return s},s.find.CLASS=r.getElementsByClassName&&function(e,n){return typeof n.getElementsByClassName!==A&&d?n.getElementsByClassName(e):t},m=[],v=[],(r.qsa=Y.test(n.querySelectorAll))&&(ft(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||v.push("\\["+I+"*(?:value|"+F+")"),e.querySelectorAll(":checked").length||v.push(":checked")}),ft(function(e){var t=n.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("t",""),e.querySelectorAll("[t^='']").length&&v.push("[*^$]="+I+"*(?:''|\"\")"),e.querySelectorAll(":enabled").length||v.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),v.push(",.*:")})),(r.matchesSelector=Y.test(g=p.webkitMatchesSelector||p.mozMatchesSelector||p.oMatchesSelector||p.msMatchesSelector))&&ft(function(e){r.disconnectedMatch=g.call(e,"div"),g.call(e,"[s!='']:x"),m.push("!=",z)}),v=v.length&&RegExp(v.join("|")),m=m.length&&RegExp(m.join("|")),y=Y.test(p.contains)||p.compareDocumentPosition?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!!r&&1===r.nodeType&&!!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r))}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},L=p.compareDocumentPosition?function(e,t){if(e===t)return k=!0,0;var i=t.compareDocumentPosition&&e.compareDocumentPosition&&e.compareDocumentPosition(t);return i?1&i||!r.sortDetached&&t.compareDocumentPosition(e)===i?e===n||y(w,e)?-1:t===n||y(w,t)?1:l?j.call(l,e)-j.call(l,t):0:4&i?-1:1:e.compareDocumentPosition?-1:1}:function(e,t){var r,i=0,s=e.parentNode,o=t.parentNode,u=[e],a=[t];if(e===t)return k=!0,0;if(!s||!o)return e===n?-1:t===n?1:s?-1:o?1:l?j.call(l,e)-j.call(l,t):0;if(s===o)return ct(e,t);r=e;while(r=r.parentNode)u.unshift(r);r=t;while(r=r.parentNode)a.unshift(r);while(u[i]===a[i])i++;return i?ct(u[i],a[i]):u[i]===w?-1:a[i]===w?1:0},n):h},ot.matches=function(e,t){return ot(e,null,null,t)},ot.matchesSelector=function(e,t){if((e.ownerDocument||e)!==h&&c(e),t=t.replace(J,"='$1']"),!(!r.matchesSelector||!d||m&&m.test(t)||v&&v.test(t)))try{var n=g.call(e,t);if(n||r.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(i){}return ot(t,h,null,[e]).length>0},ot.contains=function(e,t){return(e.ownerDocument||e)!==h&&c(e),y(e,t)},ot.attr=function(e,n){(e.ownerDocument||e)!==h&&c(e);var i=s.attrHandle[n.toLowerCase()],o=i&&M.call(s.attrHandle,n.toLowerCase())?i(e,n,!d):t;return o===t?r.attributes||!d?e.getAttribute(n):(o=e.getAttributeNode(n))&&o.specified?o.value:null:o},ot.error=function(e){throw Error("Syntax error, unrecognized expression: "+e)},ot.uniqueSort=function(e){var t,n=[],i=0,s=0;if(k=!r.detectDuplicates,l=!r.sortStable&&e.slice(0),e.sort(L),k){while(t=e[s++])t===e[s]&&(i=n.push(s));while(i--)e.splice(n[i],1)}return e},o=ot.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=o(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r];r++)n+=o(t);return n},s=ot.selectors={cacheLength:50,createPseudo:at,match:G,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(rt,it),e[3]=(e[4]||e[5]||"").replace(rt,it),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||ot.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&ot.error(e[0]),e},PSEUDO:function(e){var n,r=!e[5]&&e[2];return G.CHILD.test(e[0])?null:(e[3]&&e[4]!==t?e[2]=e[4]:r&&K.test(r)&&(n=mt(r,!0))&&(n=r.indexOf(")",r.length-n)-r.length)&&(e[0]=e[0].slice(0,n),e[2]=r.slice(0,n)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(rt,it).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=T[e+" "];return t||(t=RegExp("(^|"+I+")"+e+"("+I+"|$)"))&&T(e,function(e){return t.test("string"==typeof e.className&&e.className||typeof e.getAttribute!==A&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var i=ot.attr(r,e);return null==i?"!="===t:t?(i+="","="===t?i===n:"!="===t?i!==n:"^="===t?n&&0===i.indexOf(n):"*="===t?n&&i.indexOf(n)>-1:"$="===t?n&&i.slice(-n.length)===n:"~="===t?(" "+i+" ").indexOf(n)>-1:"|="===t?i===n||i.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,n,r,i){var s="nth"!==e.slice(0,3),o="last"!==e.slice(-4),u="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,a){var f,l,c,h,p,d,v=s!==o?"nextSibling":"previousSibling",m=t.parentNode,g=u&&t.nodeName.toLowerCase(),y=!a&&!u;if(m){if(s){while(v){c=t;while(c=c[v])if(u?c.nodeName.toLowerCase()===g:1===c.nodeType)return!1;d=v="only"===e&&!d&&"nextSibling"}return!0}if(d=[o?m.firstChild:m.lastChild],o&&y){l=m[b]||(m[b]={}),f=l[e]||[],p=f[0]===E&&f[1],h=f[0]===E&&f[2],c=p&&m.childNodes[p];while(c=++p&&c&&c[v]||(h=p=0)||d.pop())if(1===c.nodeType&&++h&&c===t){l[e]=[E,p,h];break}}else if(y&&(f=(t[b]||(t[b]={}))[e])&&f[0]===E)h=f[1];else while(c=++p&&c&&c[v]||(h=p=0)||d.pop())if((u?c.nodeName.toLowerCase()===g:1===c.nodeType)&&++h&&(y&&((c[b]||(c[b]={}))[e]=[E,h]),c===t))break;return h-=i,h===r||0===h%r&&h/r>=0}}},PSEUDO:function(e,t){var n,r=s.pseudos[e]||s.setFilters[e.toLowerCase()]||ot.error("unsupported pseudo: "+e);return r[b]?r(t):r.length>1?(n=[e,e,"",t],s.setFilters.hasOwnProperty(e.toLowerCase())?at(function(e,n){var i,s=r(e,t),o=s.length;while(o--)i=j.call(e,s[o]),e[i]=!(n[i]=s[o])}):function(e){return r(e,0,n)}):r}},pseudos:{not:at(function(e){var t=[],n=[],r=a(e.replace(W,"$1"));return r[b]?at(function(e,t,n,i){var s,o=r(e,null,i,[]),u=e.length;while(u--)(s=o[u])&&(e[u]=!(t[u]=s))}):function(e,i,s){return t[0]=e,r(t,null,s,n),!n.pop()}}),has:at(function(e){return function(t){return ot(e,t).length>0}}),contains:at(function(e){return function(t){return(t.textContent||t.innerText||o(t)).indexOf(e)>-1}}),lang:at(function(e){return Q.test(e||"")||ot.error("unsupported lang: "+e),e=e.replace(rt,it).toLowerCase(),function(t){var n;do if(n=d?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===p},focus:function(e){return e===h.activeElement&&(!h.hasFocus||h.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeName>"@"||3===e.nodeType||4===e.nodeType)return!1;return!0},parent:function(e){return!s.pseudos.empty(e)},header:function(e){return tt.test(e.nodeName)},input:function(e){return et.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||t.toLowerCase()===e.type)},first:dt(function(){return[0]}),last:dt(function(e,t){return[t-1]}),eq:dt(function(e,t,n){return[0>n?n+t:n]}),even:dt(function(e,t){var n=0;for(;t>n;n+=2)e.push(n);return e}),odd:dt(function(e,t){var n=1;for(;t>n;n+=2)e.push(n);return e}),lt:dt(function(e,t,n){var r=0>n?n+t:n;for(;--r>=0;)e.push(r);return e}),gt:dt(function(e,t,n){var r=0>n?n+t:n;for(;t>++r;)e.push(r);return e})}},s.pseudos.nth=s.pseudos.eq;for(n in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})s.pseudos[n]=ht(n);for(n in{submit:!0,reset:!0})s.pseudos[n]=pt(n);vt.prototype=s.filters=s.pseudos,s.setFilters=new vt,a=ot.compile=function(e,t){var n,r=[],i=[],s=C[e+" "];if(!s){t||(t=mt(e)),n=t.length;while(n--)s=St(t[n]),s[b]?r.push(s):i.push(s);s=C(e,xt(i,r))}return s},r.sortStable=b.split("").sort(L).join("")===b,r.detectDuplicates=k,c(),r.sortDetached=ft(function(e){return 1&e.compareDocumentPosition(h.createElement("div"))}),ft(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||lt("type|href|height|width",function(e,n,r){return r?t:e.getAttribute(n,"type"===n.toLowerCase()?1:2)}),r.attributes&&ft(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||lt("value",function(e,n,r){return r||"input"!==e.nodeName.toLowerCase()?t:e.defaultValue}),ft(function(e){return null==e.getAttribute("disabled")})||lt(F,function(e,n,r){var i;return r?t:(i=e.getAttributeNode(n))&&i.specified?i.value:e[n]===!0?n.toLowerCase():null}),x.find=ot,x.expr=ot.selectors,x.expr[":"]=x.expr.pseudos,x.unique=ot.uniqueSort,x.text=ot.getText,x.isXMLDoc=ot.isXML,x.contains=ot.contains}(e);var D={};x.Callbacks=function(e){e="string"==typeof e?D[e]||A(e):x.extend({},e);var t,n,r,i,s,o,u=[],a=!e.once&&[],f=function(h){for(t=e.memory&&h,n=!0,o=i||0,i=0,s=u.length,r=!0;u&&s>o;o++)if(u[o].apply(h[0],h[1])===!1&&e.stopOnFalse){t=!1;break}r=!1,u&&(a?a.length&&f(a.shift()):t?u=[]:l.disable())},l={add:function(){if(u){var n=u.length;(function o(t){x.each(t,function(t,n){var r=x.type(n);"function"===r?e.unique&&l.has(n)||u.push(n):n&&n.length&&"string"!==r&&o(n)})})(arguments),r?s=u.length:t&&(i=n,f(t))}return this},remove:function(){return u&&x.each(arguments,function(e,t){var n;while((n=x.inArray(t,u,n))>-1)u.splice(n,1),r&&(s>=n&&s--,o>=n&&o--)}),this},has:function(e){return e?x.inArray(e,u)>-1:!!u&&!!u.length},empty:function(){return u=[],s=0,this},disable:function(){return u=a=t=undefined,this},disabled:function(){return!u},lock:function(){return a=undefined,t||l.disable(),this},locked:function(){return!a},fireWith:function(e,t){return!u||n&&!a||(t=t||[],t=[e,t.slice?t.slice():t],r?a.push(t):f(t)),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!n}};return l},x.extend({Deferred:function(e){var t=[["resolve","done",x.Callbacks("once memory"),"resolved"],["reject","fail",x.Callbacks("once memory"),"rejected"],["notify","progress",x.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return x.Deferred(function(n){x.each(t,function(t,s){var o=s[0],u=x.isFunction(e[t])&&e[t];i[s[1]](function(){var e=u&&u.apply(this,arguments);e&&x.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[o+"With"](this===r?n.promise():this,u?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?x.extend(e,r):r}},i={};return r.pipe=r.then,x.each(t,function(e,s){var o=s[2],u=s[3];r[s[1]]=o.add,u&&o.add(function(){n=u},t[1^e][2].disable,t[2][2].lock),i[s[0]]=function(){return i[s[0]+"With"](this===i?r:this,arguments),this},i[s[0]+"With"]=o.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var t=0,n=d.call(arguments),r=n.length,i=1!==r||e&&x.isFunction(e.promise)?r:0,s=1===i?e:x.Deferred(),o=function(e,t,n){return function(r){t[e]=this,n[e]=arguments.length>1?d.call(arguments):r,n===u?s.notifyWith(t,n):--i||s.resolveWith(t,n)}},u,a,f;if(r>1)for(u=Array(r),a=Array(r),f=Array(r);r>t;t++)n[t]&&x.isFunction(n[t].promise)?n[t].promise().done(o(t,f,n)).fail(s.reject).progress(o(t,a,u)):--i;return i||s.resolveWith(f,n),s.promise()}}),x.support=function(t){var n=o.createElement("input"),r=o.createDocumentFragment(),i=o.createElement("div"),s=o.createElement("select"),u=s.appendChild(o.createElement("option"));return n.type?(n.type="checkbox",t.checkOn=""!==n.value,t.optSelected=u.selected,t.reliableMarginRight=!0,t.boxSizingReliable=!0,t.pixelPosition=!1,n.checked=!0,t.noCloneChecked=n.cloneNode(!0).checked,s.disabled=!0,t.optDisabled=!u.disabled,n=o.createElement("input"),n.value="t",n.type="radio",t.radioValue="t"===n.value,n.setAttribute("checked","t"),n.setAttribute("name","t"),r.appendChild(n),t.checkClone=r.cloneNode(!0).cloneNode(!0).lastChild.checked,t.focusinBubbles="onfocusin"in e,i.style.backgroundClip="content-box",i.cloneNode(!0).style.backgroundClip="",t.clearCloneStyle="content-box"===i.style.backgroundClip,x(function(){var n,r,s="padding:0;margin:0;border:0;display:block;-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box",u=o.getElementsByTagName("body")[0];u&&(n=o.createElement("div"),n.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",u.appendChild(n).appendChild(i),i.innerHTML="",i.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%",x.swap(u,null!=u.style.zoom?{zoom:1}:{},function(){t.boxSizing=4===i.offsetWidth}),e.getComputedStyle&&(t.pixelPosition="1%"!==(e.getComputedStyle(i,null)||{}).top,t.boxSizingReliable="4px"===(e.getComputedStyle(i,null)||{width:"4px"}).width,r=i.appendChild(o.createElement("div")),r.style.cssText=i.style.cssText=s,r.style.marginRight=r.style.width="0",i.style.width="1px",t.reliableMarginRight=!parseFloat((e.getComputedStyle(r,null)||{}).marginRight)),u.removeChild(n))}),t):t}({});var L,q,H=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,O=/([A-Z])/g;F.uid=1,F.accepts=function(e){return e.nodeType?1===e.nodeType||9===e.nodeType:!0},F.prototype={key:function(e){if(!F.accepts(e))return 0;var t={},n=e[this.expando];if(!n){n=F.uid++;try{t[this.expando]={value:n},Object.defineProperties(e,t)}catch(r){t[this.expando]=n,x.extend(e,t)}}return this.cache[n]||(this.cache[n]={}),n},set:function(e,t,n){var r,i=this.key(e),s=this.cache[i];if("string"==typeof t)s[t]=n;else if(x.isEmptyObject(s))x.extend(this.cache[i],t);else for(r in t)s[r]=t[r];return s},get:function(e,t){var n=this.cache[this.key(e)];return t===undefined?n:n[t]},access:function(e,t,n){var r;return t===undefined||t&&"string"==typeof t&&n===undefined?(r=this.get(e,t),r!==undefined?r:this.get(e,x.camelCase(t))):(this.set(e,t,n),n!==undefined?n:t)},remove:function(e,t){var n,r,i,s=this.key(e),o=this.cache[s];if(t===undefined)this.cache[s]={};else{x.isArray(t)?r=t.concat(t.map(x.camelCase)):(i=x.camelCase(t),t in o?r=[t,i]:(r=i,r=r in o?[r]:r.match(w)||[])),n=r.length;while(n--)delete o[r[n]]}},hasData:function(e){return!x.isEmptyObject(this.cache[e[this.expando]]||{})},discard:function(e){e[this.expando]&&delete this.cache[e[this.expando]]}},L=new F,q=new F,x.extend({acceptData:F.accepts,hasData:function(e){return L.hasData(e)||q.hasData(e)},data:function(e,t,n){return L.access(e,t,n)},removeData:function(e,t){L.remove(e,t)},_data:function(e,t,n){return q.access(e,t,n)},_removeData:function(e,t){q.remove(e,t)}}),x.fn.extend({data:function(e,t){var n,r,i=this[0],s=0,o=null;if(e===undefined){if(this.length&&(o=L.get(i),1===i.nodeType&&!q.get(i,"hasDataAttrs"))){for(n=i.attributes;n.length>s;s++)r=n[s].name,0===r.indexOf("data-")&&(r=x.camelCase(r.slice(5)),P(i,r,o[r]));q.set(i,"hasDataAttrs",!0)}return o}return"object"==typeof e?this.each(function(){L.set(this,e)}):x.access(this,function(t){var n,r=x.camelCase(e);if(i&&t===undefined){if(n=L.get(i,e),n!==undefined)return n;if(n=L.get(i,r),n!==undefined)return n;if(n=P(i,r,undefined),n!==undefined)return n}else this.each(function(){var n=L.get(this,r);L.set(this,r,t),-1!==e.indexOf("-")&&n!==undefined&&L.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){L.remove(this,e)})}}),x.extend({queue:function(e,t,n){var r;return e?(t=(t||"fx")+"queue",r=q.get(e,t),n&&(!r||x.isArray(n)?r=q.access(e,t,x.makeArray(n)):r.push(n)),r||[]):undefined},dequeue:function(e,t){t=t||"fx";var n=x.queue(e,t),r=n.length,i=n.shift(),s=x._queueHooks(e,t),o=function(){x.dequeue(e,t)};"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete s.stop,i.call(e,o,s)),!r&&s&&s.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return q.get(e,n)||q.access(e,n,{empty:x.Callbacks("once memory").add(function(){q.remove(e,[t+"queue",n])})})}}),x.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),n>arguments.length?x.queue(this[0],e):t===undefined?this:this.each(function(){var n=x.queue(this,e,t);x._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&x.dequeue(this,e)})},dequeue:function(e){return this.each(function(){x.dequeue(this,e)})},delay:function(e,t){return e=x.fx?x.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=x.Deferred(),s=this,o=this.length,u=function(){--r||i.resolveWith(s,[s])};"string"!=typeof e&&(t=e,e=undefined),e=e||"fx";while(o--)n=q.get(s[o],e+"queueHooks"),n&&n.empty&&(r++,n.empty.add(u));return u(),i.promise(t)}});var R,M,W=/[\t\r\n\f]/g,$=/\r/g,B=/^(?:input|select|textarea|button)$/i;x.fn.extend({attr:function(e,t){return x.access(this,x.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){x.removeAttr(this,e)})},prop:function(e,t){return x.access(this,x.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[x.propFix[e]||e]})},addClass:function(e){var t,n,r,i,s,o=0,u=this.length,a="string"==typeof e&&e;if(x.isFunction(e))return this.each(function(t){x(this).addClass(e.call(this,t,this.className))});if(a)for(t=(e||"").match(w)||[];u>o;o++)if(n=this[o],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(W," "):" ")){s=0;while(i=t[s++])0>r.indexOf(" "+i+" ")&&(r+=i+" ");n.className=x.trim(r)}return this},removeClass:function(e){var t,n,r,i,s,o=0,u=this.length,a=0===arguments.length||"string"==typeof e&&e;if(x.isFunction(e))return this.each(function(t){x(this).removeClass(e.call(this,t,this.className))});if(a)for(t=(e||"").match(w)||[];u>o;o++)if(n=this[o],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(W," "):"")){s=0;while(i=t[s++])while(r.indexOf(" "+i+" ")>=0)r=r.replace(" "+i+" "," ");n.className=e?x.trim(r):""}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):x.isFunction(e)?this.each(function(n){x(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if("string"===n){var t,i=0,s=x(this),o=e.match(w)||[];while(t=o[i++])s.hasClass(t)?s.removeClass(t):s.addClass(t)}else(n===r||"boolean"===n)&&(this.className&&q.set(this,"__className__",this.className),this.className=this.className||e===!1?"":q.get(this,"__className__")||"")})},hasClass:function(e){var t=" "+e+" ",n=0,r=this.length;for(;r>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(W," ").indexOf(t)>=0)return!0;return!1},val:function(e){var t,n,r,i=this[0];if(arguments.length)return r=x.isFunction(e),this.each(function(n){var i;1===this.nodeType&&(i=r?e.call(this,n,x(this).val()):e,null==i?i="":"number"==typeof i?i+="":x.isArray(i)&&(i=x.map(i,function(e){return null==e?"":e+""})),t=x.valHooks[this.type]||x.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&t.set(this,i,"value")!==undefined||(this.value=i))});if(i)return t=x.valHooks[i.type]||x.valHooks[i.nodeName.toLowerCase()],t&&"get"in t&&(n=t.get(i,"value"))!==undefined?n:(n=i.value,"string"==typeof n?n.replace($,""):null==n?"":n)}}),x.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){var t,n,r=e.options,i=e.selectedIndex,s="select-one"===e.type||0>i,o=s?null:[],u=s?i+1:r.length,a=0>i?u:s?i:0;for(;u>a;a++)if(n=r[a],!(!n.selected&&a!==i||(x.support.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&x.nodeName(n.parentNode,"optgroup"))){if(t=x(n).val(),s)return t;o.push(t)}return o},set:function(e,t){var n,r,i=e.options,s=x.makeArray(t),o=i.length;while(o--)r=i[o],(r.selected=x.inArray(x(r).val(),s)>=0)&&(n=!0);return n||(e.selectedIndex=-1),s}}},attr:function(e,t,n){var i,s,o=e.nodeType;if(e&&3!==o&&8!==o&&2!==o)return typeof e.getAttribute===r?x.prop(e,t,n):(1===o&&x.isXMLDoc(e)||(t=t.toLowerCase(),i=x.attrHooks[t]||(x.expr.match.bool.test(t)?M:R)),n===undefined?i&&"get"in i&&null!==(s=i.get(e,t))?s:(s=x.find.attr(e,t),null==s?undefined:s):null!==n?i&&"set"in i&&(s=i.set(e,n,t))!==undefined?s:(e.setAttribute(t,n+""),n):(x.removeAttr(e,t),undefined))},removeAttr:function(e,t){var n,r,i=0,s=t&&t.match(w);if(s&&1===e.nodeType)while(n=s[i++])r=x.propFix[n]||n,x.expr.match.bool.test(n)&&(e[r]=!1),e.removeAttribute(n)},attrHooks:{type:{set:function(e,t){if(!x.support.radioValue&&"radio"===t&&x.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},propFix:{"for":"htmlFor","class":"className"},prop:function(e,t,n){var r,i,s,o=e.nodeType;if(e&&3!==o&&8!==o&&2!==o)return s=1!==o||!x.isXMLDoc(e),s&&(t=x.propFix[t]||t,i=x.propHooks[t]),n!==undefined?i&&"set"in i&&(r=i.set(e,n,t))!==undefined?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){return e.hasAttribute("tabindex")||B.test(e.nodeName)||e.href?e.tabIndex:-1}}}}),M={set:function(e,t,n){return t===!1?x.removeAttr(e,n):e.setAttribute(n,n),n}},x.each(x.expr.match.bool.source.match(/\w+/g),function(e,t){var n=x.expr.attrHandle[t]||x.find.attr;x.expr.attrHandle[t]=function(e,t,r){var i=x.expr.attrHandle[t],s=r?undefined:(x.expr.attrHandle[t]=undefined)!=n(e,t,r)?t.toLowerCase():null;return x.expr.attrHandle[t]=i,s}}),x.support.optSelected||(x.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null}}),x.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){x.propFix[this.toLowerCase()]=this}),x.each(["radio","checkbox"],function(){x.valHooks[this]={set:function(e,t){return x.isArray(t)?e.checked=x.inArray(x(e).val(),t)>=0:undefined}},x.support.checkOn||(x.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var I=/^key/,z=/^(?:mouse|contextmenu)|click/,_=/^(?:focusinfocus|focusoutblur)$/,X=/^([^.]*)(?:\.(.+)|)$/;x.event={global:{},add:function(e,t,n,i,s){var o,u,a,f,l,c,h,p,d,v,m,g=q.get(e);if(g){n.handler&&(o=n,n=o.handler,s=o.selector),n.guid||(n.guid=x.guid++),(f=g.events)||(f=g.events={}),(u=g.handle)||(u=g.handle=function(e){return typeof x===r||e&&x.event.triggered===e.type?undefined:x.event.dispatch.apply(u.elem,arguments)},u.elem=e),t=(t||"").match(w)||[""],l=t.length;while(l--)a=X.exec(t[l])||[],d=m=a[1],v=(a[2]||"").split(".").sort(),d&&(h=x.event.special[d]||{},d=(s?h.delegateType:h.bindType)||d,h=x.event.special[d]||{},c=x.extend({type:d,origType:m,data:i,handler:n,guid:n.guid,selector:s,needsContext:s&&x.expr.match.needsContext.test(s),namespace:v.join(".")},o),(p=f[d])||(p=f[d]=[],p.delegateCount=0,h.setup&&h.setup.call(e,i,v,u)!==!1||e.addEventListener&&e.addEventListener(d,u,!1)),h.add&&(h.add.call(e,c),c.handler.guid||(c.handler.guid=n.guid)),s?p.splice(p.delegateCount++,0,c):p.push(c),x.event.global[d]=!0);e=null}},remove:function(e,t,n,r,i){var s,o,u,a,f,l,c,h,p,d,v,m=q.hasData(e)&&q.get(e);if(m&&(a=m.events)){t=(t||"").match(w)||[""],f=t.length;while(f--)if(u=X.exec(t[f])||[],p=v=u[1],d=(u[2]||"").split(".").sort(),p){c=x.event.special[p]||{},p=(r?c.delegateType:c.bindType)||p,h=a[p]||[],u=u[2]&&RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"),o=s=h.length;while(s--)l=h[s],!i&&v!==l.origType||n&&n.guid!==l.guid||u&&!u.test(l.namespace)||r&&r!==l.selector&&("**"!==r||!l.selector)||(h.splice(s,1),l.selector&&h.delegateCount--,c.remove&&c.remove.call(e,l));o&&!h.length&&(c.teardown&&c.teardown.call(e,d,m.handle)!==!1||x.removeEvent(e,p,m.handle),delete a[p])}else for(p in a)x.event.remove(e,p+t[f],n,r,!0);x.isEmptyObject(a)&&(delete m.handle,q.remove(e,"events"))}},trigger:function(t,n,r,i){var s,u,a,f,l,c,h,p=[r||o],d=y.call(t,"type")?t.type:t,v=y.call(t,"namespace")?t.namespace.split("."):[];if(u=a=r=r||o,3!==r.nodeType&&8!==r.nodeType&&!_.test(d+x.event.triggered)&&(d.indexOf(".")>=0&&(v=d.split("."),d=v.shift(),v.sort()),l=0>d.indexOf(":")&&"on"+d,t=t[x.expando]?t:new x.Event(d,"object"==typeof t&&t),t.isTrigger=i?2:3,t.namespace=v.join("."),t.namespace_re=t.namespace?RegExp("(^|\\.)"+v.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=undefined,t.target||(t.target=r),n=null==n?[t]:x.makeArray(n,[t]),h=x.event.special[d]||{},i||!h.trigger||h.trigger.apply(r,n)!==!1)){if(!i&&!h.noBubble&&!x.isWindow(r)){for(f=h.delegateType||d,_.test(f+d)||(u=u.parentNode);u;u=u.parentNode)p.push(u),a=u;a===(r.ownerDocument||o)&&p.push(a.defaultView||a.parentWindow||e)}s=0;while((u=p[s++])&&!t.isPropagationStopped())t.type=s>1?f:h.bindType||d,c=(q.get(u,"events")||{})[t.type]&&q.get(u,"handle"),c&&c.apply(u,n),c=l&&u[l],c&&x.acceptData(u)&&c.apply&&c.apply(u,n)===!1&&t.preventDefault();return t.type=d,i||t.isDefaultPrevented()||h._default&&h._default.apply(p.pop(),n)!==!1||!x.acceptData(r)||l&&x.isFunction(r[d])&&!x.isWindow(r)&&(a=r[l],a&&(r[l]=null),x.event.triggered=d,r[d](),x.event.triggered=undefined,a&&(r[l]=a)),t.result}},dispatch:function(e){e=x.event.fix(e);var t,n,r,i,s,o=[],u=d.call(arguments),a=(q.get(this,"events")||{})[e.type]||[],f=x.event.special[e.type]||{};if(u[0]=e,e.delegateTarget=this,!f.preDispatch||f.preDispatch.call(this,e)!==!1){o=x.event.handlers.call(this,e,a),t=0;while((i=o[t++])&&!e.isPropagationStopped()){e.currentTarget=i.elem,n=0;while((s=i.handlers[n++])&&!e.isImmediatePropagationStopped())(!e.namespace_re||e.namespace_re.test(s.namespace))&&(e.handleObj=s,e.data=s.data,r=((x.event.special[s.origType]||{}).handle||s.handler).apply(i.elem,u),r!==undefined&&(e.result=r)===!1&&(e.preventDefault(),e.stopPropagation()))}return f.postDispatch&&f.postDispatch.call(this,e),e.result}},handlers:function(e,t){var n,r,i,s,o=[],u=t.delegateCount,a=e.target;if(u&&a.nodeType&&(!e.button||"click"!==e.type))for(;a!==this;a=a.parentNode||this)if(a.disabled!==!0||"click"!==e.type){for(r=[],n=0;u>n;n++)s=t[n],i=s.selector+" ",r[i]===undefined&&(r[i]=s.needsContext?x(i,this).index(a)>=0:x.find(i,this,null,[a]).length),r[i]&&r.push(s);r.length&&o.push({elem:a,handlers:r})}return t.length>u&&o.push({elem:this,handlers:t.slice(u)}),o},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,r,i,s=t.button;return null==e.pageX&&null!=t.clientX&&(n=e.target.ownerDocument||o,r=n.documentElement,i=n.body,e.pageX=t.clientX+(r&&r.scrollLeft||i&&i.scrollLeft||0)-(r&&r.clientLeft||i&&i.clientLeft||0),e.pageY=t.clientY+(r&&r.scrollTop||i&&i.scrollTop||0)-(r&&r.clientTop||i&&i.clientTop||0)),e.which||s===undefined||(e.which=1&s?1:2&s?3:4&s?2:0),e}},fix:function(e){if(e[x.expando])return e;var t,n,r,i=e.type,s=e,u=this.fixHooks[i];u||(this.fixHooks[i]=u=z.test(i)?this.mouseHooks:I.test(i)?this.keyHooks:{}),r=u.props?this.props.concat(u.props):this.props,e=new x.Event(s),t=r.length;while(t--)n=r[t],e[n]=s[n];return e.target||(e.target=o),3===e.target.nodeType&&(e.target=e.target.parentNode),u.filter?u.filter(e,s):e},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==V()&&this.focus?(this.focus(),!1):undefined},delegateType:"focusin"},blur:{trigger:function(){return this===V()&&this.blur?(this.blur(),!1):undefined},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&x.nodeName(this,"input")?(this.click(),!1):undefined},_default:function(e){return x.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){e.result!==undefined&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,r){var i=x.extend(new x.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?x.event.trigger(i,null,t):x.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},x.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)},x.Event=function(e,t){return this instanceof x.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.getPreventDefault&&e.getPreventDefault()?U:Y):this.type=e,t&&x.extend(this,t),this.timeStamp=e&&e.timeStamp||x.now(),this[x.expando]=!0,undefined):new x.Event(e,t)},x.Event.prototype={isDefaultPrevented:Y,isPropagationStopped:Y,isImmediatePropagationStopped:Y,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=U,e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=U,e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=U,this.stopPropagation()}},x.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){x.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,s=e.handleObj;return(!i||i!==r&&!x.contains(r,i))&&(e.type=s.origType,n=s.handler.apply(this,arguments),e.type=t),n}}}),x.support.focusinBubbles||x.each({focus:"focusin",blur:"focusout"},function(e,t){var n=0,r=function(e){x.event.simulate(t,e.target,x.event.fix(e),!0)};x.event.special[t]={setup:function(){0===n++&&o.addEventListener(e,r,!0)},teardown:function(){0===--n&&o.removeEventListener(e,r,!0)}}}),x.fn.extend({on:function(e,t,n,r,i){var s,o;if("object"==typeof e){"string"!=typeof t&&(n=n||t,t=undefined);for(o in e)this.on(o,t,n,e[o],i);return this}if(null==n&&null==r?(r=t,n=t=undefined):null==r&&("string"==typeof t?(r=n,n=undefined):(r=n,n=t,t=undefined)),r===!1)r=Y;else if(!r)return this;return 1===i&&(s=r,r=function(e){return x().off(e),s.apply(this,arguments)},r.guid=s.guid||(s.guid=x.guid++)),this.each(function(){x.event.add(this,e,r,n,t)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,x(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return(t===!1||"function"==typeof t)&&(n=t,t=undefined),n===!1&&(n=Y),this.each(function(){x.event.remove(this,e,n,t)})},trigger:function(e,t){return this.each(function(){x.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];return n?x.event.trigger(e,t,n,!0):undefined}});var G=/^.[^:#\[\.,]*$/,J=/^(?:parents|prev(?:Until|All))/,Q=x.expr.match.needsContext,K={children:!0,contents:!0,next:!0,prev:!0};x.fn.extend({find:function(e){var t,n=[],r=this,i=r.length;if("string"!=typeof e)return this.pushStack(x(e).filter(function(){for(t=0;i>t;t++)if(x.contains(r[t],this))return!0}));for(t=0;i>t;t++)x.find(e,r[t],n);return n=this.pushStack(i>1?x.unique(n):n),n.selector=this.selector?this.selector+" "+e:e,n},has:function(e){var t=x(e,this),n=t.length;return this.filter(function(){var e=0;for(;n>e;e++)if(x.contains(this,t[e]))return!0})},not:function(e){return this.pushStack(et(this,e||[],!0))},filter:function(e){return this.pushStack(et(this,e||[],!1))},is:function(e){return!!et(this,"string"==typeof e&&Q.test(e)?x(e):e||[],!1).length},closest
:function(e,t){var n,r=0,i=this.length,s=[],o=Q.test(e)||"string"!=typeof e?x(e,t||this.context):0;for(;i>r;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(11>n.nodeType&&(o?o.index(n)>-1:1===n.nodeType&&x.find.matchesSelector(n,e))){n=s.push(n);break}return this.pushStack(s.length>1?x.unique(s):s)},index:function(e){return e?"string"==typeof e?g.call(x(e),this[0]):g.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){var n="string"==typeof e?x(e,t):x.makeArray(e&&e.nodeType?[e]:e),r=x.merge(this.get(),n);return this.pushStack(x.unique(r))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),x.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return x.dir(e,"parentNode")},parentsUntil:function(e,t,n){return x.dir(e,"parentNode",n)},next:function(e){return Z(e,"nextSibling")},prev:function(e){return Z(e,"previousSibling")},nextAll:function(e){return x.dir(e,"nextSibling")},prevAll:function(e){return x.dir(e,"previousSibling")},nextUntil:function(e,t,n){return x.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return x.dir(e,"previousSibling",n)},siblings:function(e){return x.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return x.sibling(e.firstChild)},contents:function(e){return e.contentDocument||x.merge([],e.childNodes)}},function(e,t){x.fn[e]=function(n,r){var i=x.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=x.filter(r,i)),this.length>1&&(K[e]||x.unique(i),J.test(e)&&i.reverse()),this.pushStack(i)}}),x.extend({filter:function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?x.find.matchesSelector(r,e)?[r]:[]:x.find.matches(e,x.grep(t,function(e){return 1===e.nodeType}))},dir:function(e,t,n){var r=[],i=n!==undefined;while((e=e[t])&&9!==e.nodeType)if(1===e.nodeType){if(i&&x(e).is(n))break;r.push(e)}return r},sibling:function(e,t){var n=[];for(;e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}});var tt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,nt=/<([\w:]+)/,rt=/<|&#?\w+;/,it=/<(?:script|style|link)/i,ot=/^(?:checkbox|radio)$/i,st=/checked\s*(?:[^=]|=\s*.checked.)/i,at=/^$|\/(?:java|ecma)script/i,ut=/^true\/(.*)/,lt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,ct={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ct.optgroup=ct.option,ct.tbody=ct.tfoot=ct.colgroup=ct.caption=ct.thead,ct.th=ct.td,x.fn.extend({text:function(e){return x.access(this,function(e){return e===undefined?x.text(this):this.empty().append((this[0]&&this[0].ownerDocument||o).createTextNode(e))},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=pt(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=pt(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){var n,r=e?x.filter(e,this):this,i=0;for(;null!=(n=r[i]);i++)t||1!==n.nodeType||x.cleanData(mt(n)),n.parentNode&&(t&&x.contains(n.ownerDocument,n)&&dt(mt(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){var e,t=0;for(;null!=(e=this[t]);t++)1===e.nodeType&&(x.cleanData(mt(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return x.clone(this,e,t)})},html:function(e){return x.access(this,function(e){var t=this[0]||{},n=0,r=this.length;if(e===undefined&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!it.test(e)&&!ct[(nt.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(tt,"<$1></$2>");try{for(;r>n;n++)t=this[n]||{},1===t.nodeType&&(x.cleanData(mt(t,!1)),t.innerHTML=e);t=0}catch(i){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=x.map(this,function(e){return[e.nextSibling,e.parentNode]}),t=0;return this.domManip(arguments,function(n){var r=e[t++],i=e[t++];i&&(r&&r.parentNode!==i&&(r=this.nextSibling),x(this).remove(),i.insertBefore(n,r))},!0),t?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t,n){e=f.apply([],e);var r,i,s,o,u,a,l=0,c=this.length,h=this,p=c-1,d=e[0],v=x.isFunction(d);if(v||!(1>=c||"string"!=typeof d||x.support.checkClone)&&st.test(d))return this.each(function(r){var i=h.eq(r);v&&(e[0]=d.call(this,r,i.html())),i.domManip(e,t,n)});if(c&&(r=x.buildFragment(e,this[0].ownerDocument,!1,!n&&this),i=r.firstChild,1===r.childNodes.length&&(r=i),i)){for(s=x.map(mt(r,"script"),ft),o=s.length;c>l;l++)u=r,l!==p&&(u=x.clone(u,!0,!0),o&&x.merge(s,mt(u,"script"))),t.call(this[l],u,l);if(o)for(a=s[s.length-1].ownerDocument,x.map(s,ht),l=0;o>l;l++)u=s[l],at.test(u.type||"")&&!q.access(u,"globalEval")&&x.contains(a,u)&&(u.src?x._evalUrl(u.src):x.globalEval(u.textContent.replace(lt,"")))}return this}}),x.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){x.fn[e]=function(e){var n,r=[],i=x(e),s=i.length-1,o=0;for(;s>=o;o++)n=o===s?this:this.clone(!0),x(i[o])[t](n),h.apply(r,n.get());return this.pushStack(r)}}),x.extend({clone:function(e,t,n){var r,i,s,o,u=e.cloneNode(!0),a=x.contains(e.ownerDocument,e);if(!(x.support.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||x.isXMLDoc(e)))for(o=mt(u),s=mt(e),r=0,i=s.length;i>r;r++)yt(s[r],o[r]);if(t)if(n)for(s=s||mt(e),o=o||mt(u),r=0,i=s.length;i>r;r++)gt(s[r],o[r]);else gt(e,u);return o=mt(u,"script"),o.length>0&&dt(o,!a&&mt(e,"script")),u},buildFragment:function(e,t,n,r){var i,s,o,u,a,f,l=0,c=e.length,h=t.createDocumentFragment(),p=[];for(;c>l;l++)if(i=e[l],i||0===i)if("object"===x.type(i))x.merge(p,i.nodeType?[i]:i);else if(rt.test(i)){s=s||h.appendChild(t.createElement("div")),o=(nt.exec(i)||["",""])[1].toLowerCase(),u=ct[o]||ct._default,s.innerHTML=u[1]+i.replace(tt,"<$1></$2>")+u[2],f=u[0];while(f--)s=s.lastChild;x.merge(p,s.childNodes),s=h.firstChild,s.textContent=""}else p.push(t.createTextNode(i));h.textContent="",l=0;while(i=p[l++])if((!r||-1===x.inArray(i,r))&&(a=x.contains(i.ownerDocument,i),s=mt(h.appendChild(i),"script"),a&&dt(s),n)){f=0;while(i=s[f++])at.test(i.type||"")&&n.push(i)}return h},cleanData:function(e){var t,n,r,i,s,o,u=x.event.special,a=0;for(;(n=e[a])!==undefined;a++){if(F.accepts(n)&&(s=n[q.expando],s&&(t=q.cache[s]))){if(r=Object.keys(t.events||{}),r.length)for(o=0;(i=r[o])!==undefined;o++)u[i]?x.event.remove(n,i):x.removeEvent(n,i,t.handle);q.cache[s]&&delete q.cache[s]}delete L.cache[n[L.expando]]}},_evalUrl:function(e){return x.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})}}),x.fn.extend({wrapAll:function(e){var t;return x.isFunction(e)?this.each(function(t){x(this).wrapAll(e.call(this,t))}):(this[0]&&(t=x(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstElementChild)e=e.firstElementChild;return e}).append(this)),this)},wrapInner:function(e){return x.isFunction(e)?this.each(function(t){x(this).wrapInner(e.call(this,t))}):this.each(function(){var t=x(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=x.isFunction(e);return this.each(function(n){x(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){x.nodeName(this,"body")||x(this).replaceWith(this.childNodes)}).end()}});var vt,xt,bt=/^(none|table(?!-c[ea]).+)/,wt=/^margin/,Tt=RegExp("^("+b+")(.*)$","i"),Ct=RegExp("^("+b+")(?!px)[a-z%]+$","i"),kt=RegExp("^([+-])=("+b+")","i"),Nt={BODY:"block"},Et={position:"absolute",visibility:"hidden",display:"block"},St={letterSpacing:0,fontWeight:400},jt=["Top","Right","Bottom","Left"],Dt=["Webkit","O","Moz","ms"];x.fn.extend({css:function(e,t){return x.access(this,function(e,t,n){var r,i,s={},o=0;if(x.isArray(t)){for(r=qt(e),i=t.length;i>o;o++)s[t[o]]=x.css(e,t[o],!1,r);return s}return n!==undefined?x.style(e,t,n):x.css(e,t)},e,t,arguments.length>1)},show:function(){return Ht(this,!0)},hide:function(){return Ht(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){Lt(this)?x(this).show():x(this).hide()})}}),x.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=vt(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,s,o,u=x.camelCase(t),a=e.style;return t=x.cssProps[u]||(x.cssProps[u]=At(a,u)),o=x.cssHooks[t]||x.cssHooks[u],n===undefined?o&&"get"in o&&(i=o.get(e,!1,r))!==undefined?i:a[t]:(s=typeof n,"string"===s&&(i=kt.exec(n))&&(n=(i[1]+1)*i[2]+parseFloat(x.css(e,t)),s="number"),null==n||"number"===s&&isNaN(n)||("number"!==s||x.cssNumber[u]||(n+="px"),x.support.clearCloneStyle||""!==n||0!==t.indexOf("background")||(a[t]="inherit"),o&&"set"in o&&(n=o.set(e,n,r))===undefined||(a[t]=n)),undefined)}},css:function(e,t,n,r){var i,s,o,u=x.camelCase(t);return t=x.cssProps[u]||(x.cssProps[u]=At(e.style,u)),o=x.cssHooks[t]||x.cssHooks[u],o&&"get"in o&&(i=o.get(e,!0,n)),i===undefined&&(i=vt(e,t,r)),"normal"===i&&t in St&&(i=St[t]),""===n||n?(s=parseFloat(i),n===!0||x.isNumeric(s)?s||0:i):i}}),vt=function(e,t,n){var r,i,s,o=n||qt(e),u=o?o.getPropertyValue(t)||o[t]:undefined,a=e.style;return o&&(""!==u||x.contains(e.ownerDocument,e)||(u=x.style(e,t)),Ct.test(u)&&wt.test(t)&&(r=a.width,i=a.minWidth,s=a.maxWidth,a.minWidth=a.maxWidth=a.width=u,u=o.width,a.width=r,a.minWidth=i,a.maxWidth=s)),u},x.each(["height","width"],function(e,t){x.cssHooks[t]={get:function(e,n,r){return n?0===e.offsetWidth&&bt.test(x.css(e,"display"))?x.swap(e,Et,function(){return Pt(e,t,r)}):Pt(e,t,r):undefined},set:function(e,n,r){var i=r&&qt(e);return Ot(e,n,r?Ft(e,t,r,x.support.boxSizing&&"border-box"===x.css(e,"boxSizing",!1,i),i):0)}}}),x(function(){x.support.reliableMarginRight||(x.cssHooks.marginRight={get:function(e,t){return t?x.swap(e,{display:"inline-block"},vt,[e,"marginRight"]):undefined}}),!x.support.pixelPosition&&x.fn.position&&x.each(["top","left"],function(e,t){x.cssHooks[t]={get:function(e,n){return n?(n=vt(e,t),Ct.test(n)?x(e).position()[t]+"px":n):undefined}}})}),x.expr&&x.expr.filters&&(x.expr.filters.hidden=function(e){return 0>=e.offsetWidth&&0>=e.offsetHeight},x.expr.filters.visible=function(e){return!x.expr.filters.hidden(e)}),x.each({margin:"",padding:"",border:"Width"},function(e,t){x.cssHooks[e+t]={expand:function(n){var r=0,i={},s="string"==typeof n?n.split(" "):[n];for(;4>r;r++)i[e+jt[r]+t]=s[r]||s[r-2]||s[0];return i}},wt.test(e)||(x.cssHooks[e+t].set=Ot)});var Wt=/%20/g,$t=/\[\]$/,Bt=/\r?\n/g,It=/^(?:submit|button|image|reset|file)$/i,zt=/^(?:input|select|textarea|keygen)/i;x.fn.extend({serialize:function(){return x.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=x.prop(this,"elements");return e?x.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!x(this).is(":disabled")&&zt.test(this.nodeName)&&!It.test(e)&&(this.checked||!ot.test(e))}).map(function(e,t){var n=x(this).val();return null==n?null:x.isArray(n)?x.map(n,function(e){return{name:t.name,value:e.replace(Bt,"\r\n")}}):{name:t.name,value:n.replace(Bt,"\r\n")}}).get()}}),x.param=function(e,t){var n,r=[],i=function(e,t){t=x.isFunction(t)?t():null==t?"":t,r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(t===undefined&&(t=x.ajaxSettings&&x.ajaxSettings.traditional),x.isArray(e)||e.jquery&&!x.isPlainObject(e))x.each(e,function(){i(this.name,this.value)});else for(n in e)_t(n,e[n],t,i);return r.join("&").replace(Wt,"+")},x.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){x.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),x.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}});var Xt,Ut,Yt=x.now(),Vt=/\?/,Gt=/#.*$/,Jt=/([?&])_=[^&]*/,Qt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Kt=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Zt=/^(?:GET|HEAD)$/,en=/^\/\//,tn=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,nn=x.fn.load,rn={},on={},sn="*/".concat("*");try{Ut=i.href}catch(an){Ut=o.createElement("a"),Ut.href="",Ut=Ut.href}Xt=tn.exec(Ut.toLowerCase())||[],x.fn.load=function(e,t,n){if("string"!=typeof e&&nn)return nn.apply(this,arguments);var r,i,s,o=this,u=e.indexOf(" ");return u>=0&&(r=e.slice(u),e=e.slice(0,u)),x.isFunction(t)?(n=t,t=undefined):t&&"object"==typeof t&&(i="POST"),o.length>0&&x.ajax({url:e,type:i,dataType:"html",data:t}).done(function(e){s=arguments,o.html(r?x("<div>").append(x.parseHTML(e)).find(r):e)}).complete(n&&function(e,t){o.each(n,s||[e.responseText,t,e])}),this},x.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){x.fn[t]=function(e){return this.on(t,e)}}),x.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ut,type:"GET",isLocal:Kt.test(Xt[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":sn,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":x.parseJSON,"text xml":x.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?cn(cn(e,x.ajaxSettings),t):cn(x.ajaxSettings,e)},ajaxPrefilter:un(rn),ajaxTransport:un(on),ajax:function(e,t){function T(e,t,s,u){var f,m,g,b,w,S=t;2!==y&&(y=2,o&&clearTimeout(o),n=undefined,i=u||"",E.readyState=e>0?4:0,f=e>=200&&300>e||304===e,s&&(b=pn(l,E,s)),b=fn(l,b,E,f),f?(l.ifModified&&(w=E.getResponseHeader("Last-Modified"),w&&(x.lastModified[r]=w),w=E.getResponseHeader("etag"),w&&(x.etag[r]=w)),204===e||"HEAD"===l.type?S="nocontent":304===e?S="notmodified":(S=b.state,m=b.data,g=b.error,f=!g)):(g=S,(e||!S)&&(S="error",0>e&&(e=0))),E.status=e,E.statusText=(t||S)+"",f?p.resolveWith(c,[m,S,E]):p.rejectWith(c,[E,S,g]),E.statusCode(v),v=undefined,a&&h.trigger(f?"ajaxSuccess":"ajaxError",[E,l,f?m:g]),d.fireWith(c,[E,S]),a&&(h.trigger("ajaxComplete",[E,l]),--x.active||x.event.trigger("ajaxStop")))}"object"==typeof e&&(t=e,e=undefined),t=t||{};var n,r,i,s,o,u,a,f,l=x.ajaxSetup({},t),c=l.context||l,h=l.context&&(c.nodeType||c.jquery)?x(c):x.event,p=x.Deferred(),d=x.Callbacks("once memory"),v=l.statusCode||{},m={},g={},y=0,b="canceled",E={readyState:0,getResponseHeader:function(e){var t;if(2===y){if(!s){s={};while(t=Qt.exec(i))s[t[1].toLowerCase()]=t[2]}t=s[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===y?i:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return y||(e=g[n]=g[n]||e,m[e]=t),this},overrideMimeType:function(e){return y||(l.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>y)for(t in e)v[t]=[v[t],e[t]];else E.always(e[E.status]);return this},abort:function(e){var t=e||b;return n&&n.abort(t),T(0,t),this}};if(p.promise(E).complete=d.add,E.success=E.done,E.error=E.fail,l.url=((e||l.url||Ut)+"").replace(Gt,"").replace(en,Xt[1]+"//"),l.type=t.method||t.type||l.method||l.type,l.dataTypes=x.trim(l.dataType||"*").toLowerCase().match(w)||[""],null==l.crossDomain&&(u=tn.exec(l.url.toLowerCase()),l.crossDomain=!(!u||u[1]===Xt[1]&&u[2]===Xt[2]&&(u[3]||("http:"===u[1]?"80":"443"))===(Xt[3]||("http:"===Xt[1]?"80":"443")))),l.data&&l.processData&&"string"!=typeof l.data&&(l.data=x.param(l.data,l.traditional)),ln(rn,l,t,E),2===y)return E;a=l.global,a&&0===x.active++&&x.event.trigger("ajaxStart"),l.type=l.type.toUpperCase(),l.hasContent=!Zt.test(l.type),r=l.url,l.hasContent||(l.data&&(r=l.url+=(Vt.test(r)?"&":"?")+l.data,delete l.data),l.cache===!1&&(l.url=Jt.test(r)?r.replace(Jt,"$1_="+Yt++):r+(Vt.test(r)?"&":"?")+"_="+Yt++)),l.ifModified&&(x.lastModified[r]&&E.setRequestHeader("If-Modified-Since",x.lastModified[r]),x.etag[r]&&E.setRequestHeader("If-None-Match",x.etag[r])),(l.data&&l.hasContent&&l.contentType!==!1||t.contentType)&&E.setRequestHeader("Content-Type",l.contentType),E.setRequestHeader("Accept",l.dataTypes[0]&&l.accepts[l.dataTypes[0]]?l.accepts[l.dataTypes[0]]+("*"!==l.dataTypes[0]?", "+sn+"; q=0.01":""):l.accepts["*"]);for(f in l.headers)E.setRequestHeader(f,l.headers[f]);if(!l.beforeSend||l.beforeSend.call(c,E,l)!==!1&&2!==y){b="abort";for(f in{success:1,error:1,complete:1})E[f](l[f]);if(n=ln(on,l,t,E)){E.readyState=1,a&&h.trigger("ajaxSend",[E,l]),l.async&&l.timeout>0&&(o=setTimeout(function(){E.abort("timeout")},l.timeout));try{y=1,n.send(m,T)}catch(S){if(!(2>y))throw S;T(-1,S)}}else T(-1,"No Transport");return E}return E.abort()},getJSON:function(e,t,n){return x.get(e,t,n,"json")},getScript:function(e,t){return x.get(e,undefined,t,"script")}}),x.each(["get","post"],function(e,t){x[t]=function(e,n,r,i){return x.isFunction(n)&&(i=i||r,r=n,n=undefined),x.ajax({url:e,type:t,dataType:i,data:n,success:r})}}),x.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return x.globalEval(e),e}}}),x.ajaxPrefilter("script",function(e){e.cache===undefined&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),x.ajaxTransport("script",function(e){if(e.crossDomain){var t,n;return{send:function(r,i){t=x("<script>").prop({async:!0,charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&i("error"===e.type?404:200,e.type)}),o.head.appendChild(t[0])},abort:function(){n&&n()}}}});var hn=[],dn=/(=)\?(?=&|$)|\?\?/;x.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=hn.pop()||x.expando+"_"+Yt++;return this[e]=!0,e}}),x.ajaxPrefilter("json jsonp",function(t,n,r){var i,s,o,u=t.jsonp!==!1&&(dn.test(t.url)?"url":"string"==typeof t.data&&!(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&dn.test(t.data)&&"data");return u||"jsonp"===t.dataTypes[0]?(i=t.jsonpCallback=x.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,u?t[u]=t[u].replace(dn,"$1"+i):t.jsonp!==!1&&(t.url+=(Vt.test(t.url)?"&":"?")+t.jsonp+"="+i),t.converters["script json"]=function(){return o||x.error(i+" was not called"),o[0]},t.dataTypes[0]="json",s=e[i],e[i]=function(){o=arguments},r.always(function(){e[i]=s,t[i]&&(t.jsonpCallback=n.jsonpCallback,hn.push(i)),o&&x.isFunction(s)&&s(o[0]),o=s=undefined}),"script"):undefined}),x.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(e){}};var gn=x.ajaxSettings.xhr(),mn={0:200,1223:204},yn=0,vn={};e.ActiveXObject&&x(e).on("unload",function(){for(var e in vn)vn[e]();vn=undefined}),x.support.cors=!!gn&&"withCredentials"in gn,x.support.ajax=gn=!!gn,x.ajaxTransport(function(e){var t;return x.support.cors||gn&&!e.crossDomain?{send:function(n,r){var i,s,o=e.xhr();if(o.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(i in e.xhrFields)o[i]=e.xhrFields[i];e.mimeType&&o.overrideMimeType&&o.overrideMimeType(e.mimeType),e.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest");for(i in n)o.setRequestHeader(i,n[i]);t=function(e){return function(){t&&(delete vn[s],t=o.onload=o.onerror=null,"abort"===e?o.abort():"error"===e?r(o.status||404,o.statusText):r(mn[o.status]||o.status,o.statusText,"string"==typeof o.responseText?{text:o.responseText}:undefined,o.getAllResponseHeaders()))}},o.onload=t(),o.onerror=t("error"),t=vn[s=yn++]=t("abort"),o.send(e.hasContent&&e.data||null)},abort:function(){t&&t()}}:undefined});var xn,bn,wn=/^(?:toggle|show|hide)$/,Tn=RegExp("^(?:([+-])=|)("+b+")([a-z%]*)$","i"),Cn=/queueHooks$/,kn=[An],Nn={"*":[function(e,t){var n=this.createTween(e,t),r=n.cur(),i=Tn.exec(t),s=i&&i[3]||(x.cssNumber[e]?"":"px"),o=(x.cssNumber[e]||"px"!==s&&+r)&&Tn.exec(x.css(n.elem,e)),u=1,a=20;if(o&&o[3]!==s){s=s||o[3],i=i||[],o=+r||1;do u=u||".5",o/=u,x.style(n.elem,e,o+s);while(u!==(u=n.cur()/r)&&1!==u&&--a)}return i&&(o=n.start=+o||+r||0,n.unit=s,n.end=i[1]?o+(i[1]+1)*i[2]:+i[2]),n}]};x.Animation=x.extend(jn,{tweener:function(e,t){x.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");var n,r=0,i=e.length;for(;i>r;r++)n=e[r],Nn[n]=Nn[n]||[],Nn[n].unshift(t)},prefilter:function(e,t){t?kn.unshift(e):kn.push(e)}}),x.Tween=Ln,Ln.prototype={constructor:Ln,init:function(e,t,n,r,i,s){this.elem=e,this.prop=n,this.easing=i||"swing",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=s||(x.cssNumber[n]?"":"px")},cur:function(){var e=Ln.propHooks[this.prop];return e&&e.get?e.get(this):Ln.propHooks._default.get(this)},run:function(e){var t,n=Ln.propHooks[this.prop];return this.pos=t=this.options.duration?x.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):Ln.propHooks._default.set(this),this}},Ln.prototype.init.prototype=Ln.prototype,Ln.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=x.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){x.fx.step[e.prop]?x.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[x.cssProps[e.prop]]||x.cssHooks[e.prop])?x.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},Ln.propHooks.scrollTop=Ln.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},x.each(["toggle","show","hide"],function(e,t){var n=x.fn[t];x.fn[t]=function(e,r,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(qn(t,!0),e,r,i)}}),x.fn.extend({fadeTo:function(e,t,n,r){return this.filter(Lt).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=x.isEmptyObject(e),s=x.speed(t,n,r),o=function(){var t=jn(this,x.extend({},e),s);(i||q.get(this,"finish"))&&t.stop(!0)};return o.finish=o,i||s.queue===!1?this.each(o):this.queue(s.queue,o)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=undefined),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,i=null!=e&&e+"queueHooks",s=x.timers,o=q.get(this);if(i)o[i]&&o[i].stop&&r(o[i]);else for(i in o)o[i]&&o[i].stop&&Cn.test(i)&&r(o[i]);for(i=s.length;i--;)s[i].elem!==this||null!=e&&s[i].queue!==e||(s[i].anim.stop(n),t=!1,s.splice(i,1));(t||!n)&&x.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=q.get(this),r=n[e+"queue"],i=n[e+"queueHooks"],s=x.timers,o=r?r.length:0;for(n.finish=!0,x.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=s.length;t--;)s[t].elem===this&&s[t].queue===e&&(s[t].anim.stop(!0),s.splice(t,1));for(t=0;o>t;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),x.each({slideDown:qn("show"),slideUp:qn("hide"),slideToggle:qn("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){x.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),x.speed=function(e,t,n){var r=e&&"object"==typeof e?x.extend({},e):{complete:n||!n&&t||x.isFunction(e)&&e,duration:e,easing:n&&t||t&&!x.isFunction(t)&&t};return r.duration=x.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in x.fx.speeds?x.fx.speeds[r.duration]:x.fx.speeds._default,(null==r.queue||r.queue===!0)&&(r.queue="fx"),r.old=r.complete,r.complete=function(){x.isFunction(r.old)&&r.old.call(this),r.queue&&x.dequeue(this,r.queue)},r},x.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},x.timers=[],x.fx=Ln.prototype.init,x.fx.tick=function(){var e,t=x.timers,n=0;for(xn=x.now();t.length>n;n++)e=t[n],e()||t[n]!==e||t.splice(n--,1);t.length||x.fx.stop(),xn=undefined},x.fx.timer=function(e){e()&&x.timers.push(e)&&x.fx.start()},x.fx.interval=13,x.fx.start=function(){bn||(bn=setInterval(x.fx.tick,x.fx.interval))},x.fx.stop=function(){clearInterval(bn),bn=null},x.fx.speeds={slow:600,fast:200,_default:400},x.fx.step={},x.expr&&x.expr.filters&&(x.expr.filters.animated=function(e){return x.grep(x.timers,function(t){return e===t.elem}).length}),x.fn.offset=function(e){if(arguments.length)return e===undefined?this:this.each(function(t){x.offset.setOffset(this,e,t)});var t,n,i=this[0],s={top:0,left:0},o=i&&i.ownerDocument;if(o)return t=o.documentElement,x.contains(t,i)?(typeof i.getBoundingClientRect!==r&&(s=i.getBoundingClientRect()),n=Hn(o),{top:s.top+n.pageYOffset-t.clientTop,left:s.left+n.pageXOffset-t.clientLeft}):s},x.offset={setOffset:function(e,t,n){var r,i,s,o,u,a,f,l=x.css(e,"position"),c=x(e),h={};"static"===l&&(e.style.position="relative"),u=c.offset(),s=x.css(e,"top"),a=x.css(e,"left"),f=("absolute"===l||"fixed"===l)&&(s+a).indexOf("auto")>-1,f?(r=c.position(),o=r.top,i=r.left):(o=parseFloat(s)||0,i=parseFloat(a)||0),x.isFunction(t)&&(t=t.call(e,n,u)),null!=t.top&&(h.top=t.top-u.top+o),null!=t.left&&(h.left=t.left-u.left+i),"using"in t?t.using.call(e,h):c.css(h)}},x.fn.extend({position:function(){if(this[0]){var e,t,n=this[0],r={top:0,left:0};return"fixed"===x.css(n,"position")?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),x.nodeName(e[0],"html")||(r=e.offset()),r.top+=x.css(e[0],"borderTopWidth",!0),r.left+=x.css(e[0],"borderLeftWidth",!0)),{top:t.top-r.top-x.css(n,"marginTop",!0),left:t.left-r.left-x.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||s;while(e&&!x.nodeName(e,"html")&&"static"===x.css(e,"position"))e=e.offsetParent;return e||s})}}),x.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,n){var r="pageYOffset"===n;x.fn[t]=function(i){return x.access(this,function(t,i,s){var o=Hn(t);return s===undefined?o?o[n]:t[i]:(o?o.scrollTo(r?e.pageXOffset:s,r?s:e.pageYOffset):t[i]=s,undefined)},t,i,arguments.length,null)}}),x.each({Height:"height",Width:"width"},function(e,t){x.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,r){x.fn[r]=function(r,i){var s=arguments.length&&(n||"boolean"!=typeof r),o=n||(r===!0||i===!0?"margin":"border");return x.access(this,function(t,n,r){var i;return x.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(i=t.documentElement,Math.max(t.body["scroll"+e],i["scroll"+e],t.body["offset"+e],i["offset"+e],i["client"+e])):r===undefined?x.css(t,n,o):x.style(t,n,r,o)},t,s?r:undefined,s,null)}})}),x.fn.size=function(){return this.length},x.fn.andSelf=x.fn.addBack,"object"==typeof module&&module&&"object"==typeof module.exports?module.exports=x:"function"==typeof define&&define.amd&&define("jquery",[],function(){return x}),"object"==typeof e&&"object"==typeof e.document&&(e.jQuery=e.$=x)}(window),function(e){function r(){}function i(e){if(!e)return 0;var t=e.split(".");return 1e4*parseInt(t[0])+100*parseInt(t[1])+parseInt(t[2])}function s(e){e=e.replace(/-/g,"_");var n=e.split("."),i=t;for(var s=0;s<n.length;s++)i[n[s]]===undefined&&(i[n[s]]=new r),i=i[n[s]];return i}var t=e.namespace,n="3.0.1";if(t){if(i(n)<=i(t.VERSION))return;r=t.constructor}else e.namespace=t=new r;t.VERSION=n;var o=r.prototype;o.module=function(e,t){var n=s(e);return t&&t(n,s),n},o.extend=function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t])}}(this),namespace.module("org.startpad.types",function(e,t){function n(){return Object.keys=Object.keys||p,e}function r(e){return Array.prototype.slice.call(e)}function s(e){return Object.prototype.toString.call(e).match(/\[object (.*)\]/)[1].toLowerCase()}function o(e,t){return u(e)==t}function u(e){if(e===undefined)return"undefined";if(e===null)return"null";var t=s(e);return i.indexOf(t)==-1&&(t=typeof e),t}function l(e){var t,n,r,i;e===undefined&&(e={});for(t=1;t<arguments.length;t++){r=arguments[t];if(r===undefined)continue;for(i in r)r.hasOwnProperty(i)&&(e[i]=r[i]);if(!a)continue;for(n=0;n<f.length;n++)i=f[n],r.hasOwnProperty(i)&&(e[i]=r[i])}return e}function c(e,t){var n={};typeof t=="string"&&(t=[t]);for(var r=0;r<t.length;r++){var i=t[r];e&&e.hasOwnProperty(i)&&(n[i]=e[i])}return n}function h(e){if(typeof e!="function")return undefined;var t=e.toString().match(/function\s*(\S+)\s*\(/);return t?t[1]:""}function p(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t}e.extend({VERSION:"0.2.2",isArguments:function(e){return o(e,"arguments")},isArray:function(e){return o(e,"array")},copyArray:r,isType:o,typeOf:u,extend:l,project:c,getFunctionName:h,keys:Object.keys||p,patch:n});var i=["number","string","boolean","array","function","date","regexp","arguments","undefined","null"],a=!{toString:!0}.propertyIsEnumerable("toString"),f=["toString","toLocaleString","valueOf","constructor","isPrototypeOf"];Array.indexOf||(Array.prototype.indexOf=function(e){for(var t=0;t<this.length;t++)if(this[t]===e)return t;return-1})}),namespace.module("org.startpad.funcs",function(e,t){function r(e){if(!e)return 0;var t=e.split(".");return 1e4*parseInt(t[0])+100*parseInt(t[1])+parseInt(t[2])}function i(e,t,n,i){if(e._patches){var s=e._patches[t];if(r(s)>=r(n))return}e._patches=e._patches||{},e._patches[t]=n,o(e,i)}function s(){return Object.create||(Object.create=f),i(Function,"org.startpad.funcs",e.VERSION,{methods:function(e){o(this,e)},curry:function(){var e=[this,undefined].concat(n.copyArray(arguments));return u.apply(undefined,e)},curryThis:function(e){var t=n.copyArray(arguments);return t.unshift(this),u.apply(undefined,t)},decorate:function(e){return a(this,e)},subclass:function(e,t){l(this,e,t)},mro:function(e,t){e.unshift(this),c(e,t)}}),e}function o(e,t){n.extend(e.prototype,t)}function u(e,t){function i(e,t){var r=n.copyArray(e);t=n.copyArray(t);for(var i=0;i<r.length;i++)r[i]===undefined&&(r[i]=t.shift());return r.concat(t)}var r;return arguments.length==3&&n.isArguments(arguments[2])?r=Array.prototype.slice.call(arguments[2],self1):r=Array.prototype.slice.call(arguments,2),function(){return e.apply(t||this,i(r,arguments))}}function a(e,t){function n(){return t.call(this,e,arguments,n)}return t.call(e,undefined,arguments,n),n}function f(e){function t(){}return t.prototype=e,new t}function l(t,n,r){return t.prototype=e.create(n.prototype),t.prototype.constructor=t,o(t,r),t}function c(t,r){var i=t.pop().prototype,s;while(t.length>0){s=t.pop();var u=n.getFunctionName(s),a=e.create(i);n.extend(a,s.prototype),a.constructor=s,a[u+"_super"]=i,i=a}s.prototype=i,o(s,r)}var n=t("org.startpad.types");e.extend({VERSION:"0.3.1",methods:o,bind:u,decorate:a,create:Object.create||f,subclass:l,mro:c,numericVersion:r,monkeyPatch:i,patch:s})}),namespace.module("org.startpad.string",function(e,t){function r(){return n.monkeyPatch(String,"org.startpad.string",e.VERSION,{format:function(){return arguments.length==1&&typeof arguments[0]=="object"?s(this,arguments[0]):s(this,arguments)}}),e}function s(e,t,n){return n=n||i,e==undefined?"undefined":(e=e.toString(),e=e.replace(n,function(e,n){var r=t,i=n.split(".");for(var s=0;s<i.length;s++){n=i[s];var o=parseInt(n);isNaN(o)?r=r[n]:r=r[o];if(r==undefined)return""}return r}),e)}function o(e){return(e||"").replace(/^\s+|\s+$/g,"")}var n=t("org.startpad.funcs");e.extend({VERSION:"0.3.0",patch:r,format:s,strip:o});var i=/\{\s*([^} ]+)\s*\}/g}),function(e){function t(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}function n(e,t){for(var n=[];t>0;n[--t]=e);return n.join("")}var r=function(){return r.cache.hasOwnProperty(arguments[0])||(r.cache[arguments[0]]=r.parse(arguments[0])),r.format.call(null,r.cache[arguments[0]],arguments)};r.format=function(e,i){var s=1,o=e.length,u="",a,f=[],l,c,h,p,d,v;for(l=0;l<o;l++){u=t(e[l]);if(u==="string")f.push(e[l]);else if(u==="array"){h=e[l];if(h[2]){a=i[s];for(c=0;c<h[2].length;c++){if(!a.hasOwnProperty(h[2][c]))throw r('[sprintf] property "%s" does not exist',h[2][c]);a=a[h[2][c]]}}else h[1]?a=i[h[1]]:a=i[s++];if(/[^s]/.test(h[8
])&&t(a)!="number")throw r("[sprintf] expecting number but found %s",t(a));switch(h[8]){case"b":a=a.toString(2);break;case"c":a=String.fromCharCode(a);break;case"d":a=parseInt(a,10);break;case"e":a=h[7]?a.toExponential(h[7]):a.toExponential();break;case"f":a=h[7]?parseFloat(a).toFixed(h[7]):parseFloat(a);break;case"o":a=a.toString(8);break;case"s":a=(a=String(a))&&h[7]?a.substring(0,h[7]):a;break;case"u":a>>>=0;break;case"x":a=a.toString(16);break;case"X":a=a.toString(16).toUpperCase()}a=/[def]/.test(h[8])&&h[3]&&a>=0?"+"+a:a,d=h[4]?h[4]=="0"?"0":h[4].charAt(1):" ",v=h[6]-String(a).length,p=h[6]?n(d,v):"",f.push(h[5]?a+p:p+a)}}return f.join("")},r.cache={},r.parse=function(e){var t=e,n=[],r=[],i=0;while(t){if((n=/^[^\x25]+/.exec(t))!==null)r.push(n[0]);else if((n=/^\x25{2}/.exec(t))!==null)r.push("%");else{if((n=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(t))===null)throw"[sprintf] huh?";if(n[2]){i|=1;var s=[],o=n[2],u=[];if((u=/^([a-z_][a-z_\d]*)/i.exec(o))===null)throw"[sprintf] huh?";s.push(u[1]);while((o=o.substring(u[0].length))!=="")if((u=/^\.([a-z_][a-z_\d]*)/i.exec(o))!==null)s.push(u[1]);else{if((u=/^\[(\d+)\]/.exec(o))===null)throw"[sprintf] huh?";s.push(u[1])}n[2]=s}else i|=2;if(i===3)throw"[sprintf] mixing positional and named placeholders is not (yet) supported";r.push(n)}t=t.substring(n[0].length)}return r};var i=function(e,t,n){return n=t.slice(0),n.splice(0,0,e),r.apply(null,n)};e.sprintf=r,e.vsprintf=i}(typeof exports!="undefined"?exports:window),function(){var e=this,t=e._,n={},r=Array.prototype,i=Object.prototype,s=Function.prototype,o=r.push,u=r.slice,a=r.concat,f=i.toString,l=i.hasOwnProperty,c=r.forEach,h=r.map,p=r.reduce,d=r.reduceRight,v=r.filter,m=r.every,g=r.some,y=r.indexOf,b=r.lastIndexOf,w=Array.isArray,E=Object.keys,S=s.bind,x=function(e){if(e instanceof x)return e;if(!(this instanceof x))return new x(e);this._wrapped=e};typeof exports!="undefined"?(typeof module!="undefined"&&module.exports&&(exports=module.exports=x),exports._=x):e._=x,x.VERSION="1.6.0";var T=x.each=x.forEach=function(e,t,r){if(e==null)return e;if(c&&e.forEach===c)e.forEach(t,r);else if(e.length===+e.length){for(var i=0,s=e.length;i<s;i++)if(t.call(r,e[i],i,e)===n)return}else{var o=x.keys(e);for(var i=0,s=o.length;i<s;i++)if(t.call(r,e[o[i]],o[i],e)===n)return}return e};x.map=x.collect=function(e,t,n){var r=[];return e==null?r:h&&e.map===h?e.map(t,n):(T(e,function(e,i,s){r.push(t.call(n,e,i,s))}),r)};var N="Reduce of empty array with no initial value";x.reduce=x.foldl=x.inject=function(e,t,n,r){var i=arguments.length>2;e==null&&(e=[]);if(p&&e.reduce===p)return r&&(t=x.bind(t,r)),i?e.reduce(t,n):e.reduce(t);T(e,function(e,s,o){i?n=t.call(r,n,e,s,o):(n=e,i=!0)});if(!i)throw new TypeError(N);return n},x.reduceRight=x.foldr=function(e,t,n,r){var i=arguments.length>2;e==null&&(e=[]);if(d&&e.reduceRight===d)return r&&(t=x.bind(t,r)),i?e.reduceRight(t,n):e.reduceRight(t);var s=e.length;if(s!==+s){var o=x.keys(e);s=o.length}T(e,function(u,a,f){a=o?o[--s]:--s,i?n=t.call(r,n,e[a],a,f):(n=e[a],i=!0)});if(!i)throw new TypeError(N);return n},x.find=x.detect=function(e,t,n){var r;return C(e,function(e,i,s){if(t.call(n,e,i,s))return r=e,!0}),r},x.filter=x.select=function(e,t,n){var r=[];return e==null?r:v&&e.filter===v?e.filter(t,n):(T(e,function(e,i,s){t.call(n,e,i,s)&&r.push(e)}),r)},x.reject=function(e,t,n){return x.filter(e,function(e,r,i){return!t.call(n,e,r,i)},n)},x.every=x.all=function(e,t,r){t||(t=x.identity);var i=!0;return e==null?i:m&&e.every===m?e.every(t,r):(T(e,function(e,s,o){if(!(i=i&&t.call(r,e,s,o)))return n}),!!i)};var C=x.some=x.any=function(e,t,r){t||(t=x.identity);var i=!1;return e==null?i:g&&e.some===g?e.some(t,r):(T(e,function(e,s,o){if(i||(i=t.call(r,e,s,o)))return n}),!!i)};x.contains=x.include=function(e,t){return e==null?!1:y&&e.indexOf===y?e.indexOf(t)!=-1:C(e,function(e){return e===t})},x.invoke=function(e,t){var n=u.call(arguments,2),r=x.isFunction(t);return x.map(e,function(e){return(r?t:e[t]).apply(e,n)})},x.pluck=function(e,t){return x.map(e,x.property(t))},x.where=function(e,t){return x.filter(e,x.matches(t))},x.findWhere=function(e,t){return x.find(e,x.matches(t))},x.max=function(e,t,n){if(!t&&x.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.max.apply(Math,e);var r=-Infinity,i=-Infinity;return T(e,function(e,s,o){var u=t?t.call(n,e,s,o):e;u>i&&(r=e,i=u)}),r},x.min=function(e,t,n){if(!t&&x.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.min.apply(Math,e);var r=Infinity,i=Infinity;return T(e,function(e,s,o){var u=t?t.call(n,e,s,o):e;u<i&&(r=e,i=u)}),r},x.shuffle=function(e){var t,n=0,r=[];return T(e,function(e){t=x.random(n++),r[n-1]=r[t],r[t]=e}),r},x.sample=function(e,t,n){return t==null||n?(e.length!==+e.length&&(e=x.values(e)),e[x.random(e.length-1)]):x.shuffle(e).slice(0,Math.max(0,t))};var k=function(e){return e==null?x.identity:x.isFunction(e)?e:x.property(e)};x.sortBy=function(e,t,n){return t=k(t),x.pluck(x.map(e,function(e,r,i){return{value:e,index:r,criteria:t.call(n,e,r,i)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||n===void 0)return 1;if(n<r||r===void 0)return-1}return e.index-t.index}),"value")};var L=function(e){return function(t,n,r){var i={};return n=k(n),T(t,function(s,o){var u=n.call(r,s,o,t);e(i,u,s)}),i}};x.groupBy=L(function(e,t,n){x.has(e,t)?e[t].push(n):e[t]=[n]}),x.indexBy=L(function(e,t,n){e[t]=n}),x.countBy=L(function(e,t){x.has(e,t)?e[t]++:e[t]=1}),x.sortedIndex=function(e,t,n,r){n=k(n);var i=n.call(r,t),s=0,o=e.length;while(s<o){var u=s+o>>>1;n.call(r,e[u])<i?s=u+1:o=u}return s},x.toArray=function(e){return e?x.isArray(e)?u.call(e):e.length===+e.length?x.map(e,x.identity):x.values(e):[]},x.size=function(e){return e==null?0:e.length===+e.length?e.length:x.keys(e).length},x.first=x.head=x.take=function(e,t,n){return e==null?void 0:t==null||n?e[0]:t<0?[]:u.call(e,0,t)},x.initial=function(e,t,n){return u.call(e,0,e.length-(t==null||n?1:t))},x.last=function(e,t,n){return e==null?void 0:t==null||n?e[e.length-1]:u.call(e,Math.max(e.length-t,0))},x.rest=x.tail=x.drop=function(e,t,n){return u.call(e,t==null||n?1:t)},x.compact=function(e){return x.filter(e,x.identity)};var A=function(e,t,n){return t&&x.every(e,x.isArray)?a.apply(n,e):(T(e,function(e){x.isArray(e)||x.isArguments(e)?t?o.apply(n,e):A(e,t,n):n.push(e)}),n)};x.flatten=function(e,t){return A(e,t,[])},x.without=function(e){return x.difference(e,u.call(arguments,1))},x.partition=function(e,t){var n=[],r=[];return T(e,function(e){(t(e)?n:r).push(e)}),[n,r]},x.uniq=x.unique=function(e,t,n,r){x.isFunction(t)&&(r=n,n=t,t=!1);var i=n?x.map(e,n,r):e,s=[],o=[];return T(i,function(n,r){if(t?!r||o[o.length-1]!==n:!x.contains(o,n))o.push(n),s.push(e[r])}),s},x.union=function(){return x.uniq(x.flatten(arguments,!0))},x.intersection=function(e){var t=u.call(arguments,1);return x.filter(x.uniq(e),function(e){return x.every(t,function(t){return x.contains(t,e)})})},x.difference=function(e){var t=a.apply(r,u.call(arguments,1));return x.filter(e,function(e){return!x.contains(t,e)})},x.zip=function(){var e=x.max(x.pluck(arguments,"length").concat(0)),t=new Array(e);for(var n=0;n<e;n++)t[n]=x.pluck(arguments,""+n);return t},x.object=function(e,t){if(e==null)return{};var n={};for(var r=0,i=e.length;r<i;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n},x.indexOf=function(e,t,n){if(e==null)return-1;var r=0,i=e.length;if(n){if(typeof n!="number")return r=x.sortedIndex(e,t),e[r]===t?r:-1;r=n<0?Math.max(0,i+n):n}if(y&&e.indexOf===y)return e.indexOf(t,n);for(;r<i;r++)if(e[r]===t)return r;return-1},x.lastIndexOf=function(e,t,n){if(e==null)return-1;var r=n!=null;if(b&&e.lastIndexOf===b)return r?e.lastIndexOf(t,n):e.lastIndexOf(t);var i=r?n:e.length;while(i--)if(e[i]===t)return i;return-1},x.range=function(e,t,n){arguments.length<=1&&(t=e||0,e=0),n=arguments[2]||1;var r=Math.max(Math.ceil((t-e)/n),0),i=0,s=new Array(r);while(i<r)s[i++]=e,e+=n;return s};var O=function(){};x.bind=function(e,t){var n,r;if(S&&e.bind===S)return S.apply(e,u.call(arguments,1));if(!x.isFunction(e))throw new TypeError;return n=u.call(arguments,2),r=function(){if(this instanceof r){O.prototype=e.prototype;var i=new O;O.prototype=null;var s=e.apply(i,n.concat(u.call(arguments)));return Object(s)===s?s:i}return e.apply(t,n.concat(u.call(arguments)))}},x.partial=function(e){var t=u.call(arguments,1);return function(){var n=0,r=t.slice();for(var i=0,s=r.length;i<s;i++)r[i]===x&&(r[i]=arguments[n++]);while(n<arguments.length)r.push(arguments[n++]);return e.apply(this,r)}},x.bindAll=function(e){var t=u.call(arguments,1);if(t.length===0)throw new Error("bindAll must be passed function names");return T(t,function(t){e[t]=x.bind(e[t],e)}),e},x.memoize=function(e,t){var n={};return t||(t=x.identity),function(){var r=t.apply(this,arguments);return x.has(n,r)?n[r]:n[r]=e.apply(this,arguments)}},x.delay=function(e,t){var n=u.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},x.defer=function(e){return x.delay.apply(x,[e,1].concat(u.call(arguments,1)))},x.throttle=function(e,t,n){var r,i,s,o=null,u=0;n||(n={});var a=function(){u=n.leading===!1?0:x.now(),o=null,s=e.apply(r,i),r=i=null};return function(){var f=x.now();!u&&n.leading===!1&&(u=f);var l=t-(f-u);return r=this,i=arguments,l<=0?(clearTimeout(o),o=null,u=f,s=e.apply(r,i),r=i=null):!o&&n.trailing!==!1&&(o=setTimeout(a,l)),s}},x.debounce=function(e,t,n){var r,i,s,o,u,a=function(){var f=x.now()-o;f<t?r=setTimeout(a,t-f):(r=null,n||(u=e.apply(s,i),s=i=null))};return function(){s=this,i=arguments,o=x.now();var f=n&&!r;return r||(r=setTimeout(a,t)),f&&(u=e.apply(s,i),s=i=null),u}},x.once=function(e){var t=!1,n;return function(){return t?n:(t=!0,n=e.apply(this,arguments),e=null,n)}},x.wrap=function(e,t){return x.partial(t,e)},x.compose=function(){var e=arguments;return function(){var t=arguments;for(var n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},x.after=function(e,t){return function(){if(--e<1)return t.apply(this,arguments)}},x.keys=function(e){if(!x.isObject(e))return[];if(E)return E(e);var t=[];for(var n in e)x.has(e,n)&&t.push(n);return t},x.values=function(e){var t=x.keys(e),n=t.length,r=new Array(n);for(var i=0;i<n;i++)r[i]=e[t[i]];return r},x.pairs=function(e){var t=x.keys(e),n=t.length,r=new Array(n);for(var i=0;i<n;i++)r[i]=[t[i],e[t[i]]];return r},x.invert=function(e){var t={},n=x.keys(e);for(var r=0,i=n.length;r<i;r++)t[e[n[r]]]=n[r];return t},x.functions=x.methods=function(e){var t=[];for(var n in e)x.isFunction(e[n])&&t.push(n);return t.sort()},x.extend=function(e){return T(u.call(arguments,1),function(t){if(t)for(var n in t)e[n]=t[n]}),e},x.pick=function(e){var t={},n=a.apply(r,u.call(arguments,1));return T(n,function(n){n in e&&(t[n]=e[n])}),t},x.omit=function(e){var t={},n=a.apply(r,u.call(arguments,1));for(var i in e)x.contains(n,i)||(t[i]=e[i]);return t},x.defaults=function(e){return T(u.call(arguments,1),function(t){if(t)for(var n in t)e[n]===void 0&&(e[n]=t[n])}),e},x.clone=function(e){return x.isObject(e)?x.isArray(e)?e.slice():x.extend({},e):e},x.tap=function(e,t){return t(e),e};var M=function(e,t,n,r){if(e===t)return e!==0||1/e==1/t;if(e==null||t==null)return e===t;e instanceof x&&(e=e._wrapped),t instanceof x&&(t=t._wrapped);var i=f.call(e);if(i!=f.call(t))return!1;switch(i){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:e==0?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if(typeof e!="object"||typeof t!="object")return!1;var s=n.length;while(s--)if(n[s]==e)return r[s]==t;var o=e.constructor,u=t.constructor;if(o!==u&&!(x.isFunction(o)&&o instanceof o&&x.isFunction(u)&&u instanceof u)&&"constructor"in e&&"constructor"in t)return!1;n.push(e),r.push(t);var a=0,l=!0;if(i=="[object Array]"){a=e.length,l=a==t.length;if(l)while(a--)if(!(l=M(e[a],t[a],n,r)))break}else{for(var c in e)if(x.has(e,c)){a++;if(!(l=x.has(t,c)&&M(e[c],t[c],n,r)))break}if(l){for(c in t)if(x.has(t,c)&&!(a--))break;l=!a}}return n.pop(),r.pop(),l};x.isEqual=function(e,t){return M(e,t,[],[])},x.isEmpty=function(e){if(e==null)return!0;if(x.isArray(e)||x.isString(e))return e.length===0;for(var t in e)if(x.has(e,t))return!1;return!0},x.isElement=function(e){return!!e&&e.nodeType===1},x.isArray=w||function(e){return f.call(e)=="[object Array]"},x.isObject=function(e){return e===Object(e)},T(["Arguments","Function","String","Number","Date","RegExp"],function(e){x["is"+e]=function(t){return f.call(t)=="[object "+e+"]"}}),x.isArguments(arguments)||(x.isArguments=function(e){return!!e&&!!x.has(e,"callee")}),typeof /./!="function"&&(x.isFunction=function(e){return typeof e=="function"}),x.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},x.isNaN=function(e){return x.isNumber(e)&&e!=+e},x.isBoolean=function(e){return e===!0||e===!1||f.call(e)=="[object Boolean]"},x.isNull=function(e){return e===null},x.isUndefined=function(e){return e===void 0},x.has=function(e,t){return l.call(e,t)},x.noConflict=function(){return e._=t,this},x.identity=function(e){return e},x.constant=function(e){return function(){return e}},x.property=function(e){return function(t){return t[e]}},x.matches=function(e){return function(t){if(t===e)return!0;for(var n in e)if(e[n]!==t[n])return!1;return!0}},x.times=function(e,t,n){var r=Array(Math.max(0,e));for(var i=0;i<e;i++)r[i]=t.call(n,i);return r},x.random=function(e,t){return t==null&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},x.now=Date.now||function(){return(new Date).getTime()};var _={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};_.unescape=x.invert(_.escape);var D={escape:new RegExp("["+x.keys(_.escape).join("")+"]","g"),unescape:new RegExp("("+x.keys(_.unescape).join("|")+")","g")};x.each(["escape","unescape"],function(e){x[e]=function(t){return t==null?"":(""+t).replace(D[e],function(t){return _[e][t]})}}),x.result=function(e,t){if(e==null)return void 0;var n=e[t];return x.isFunction(n)?n.call(e):n},x.mixin=function(e){T(x.functions(e),function(t){var n=x[t]=e[t];x.prototype[t]=function(){var e=[this._wrapped];return o.apply(e,arguments),F.call(this,n.apply(x,e))}})};var P=0;x.uniqueId=function(e){var t=++P+"";return e?e+t:t},x.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var H=/(.)^/,B={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},j=/\\|'|\r|\n|\t|\u2028|\u2029/g;x.template=function(e,t,n){var r;n=x.defaults({},n,x.templateSettings);var i=new RegExp([(n.escape||H).source,(n.interpolate||H).source,(n.evaluate||H).source].join("|")+"|$","g"),s=0,o="__p+='";e.replace(i,function(t,n,r,i,u){return o+=e.slice(s,u).replace(j,function(e){return"\\"+B[e]}),n&&(o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),r&&(o+="'+\n((__t=("+r+"))==null?'':__t)+\n'"),i&&(o+="';\n"+i+"\n__p+='"),s=u+t.length,t}),o+="';\n",n.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{r=new Function(n.variable||"obj","_",o)}catch(u){throw u.source=o,u}if(t)return r(t,x);var a=function(e){return r.call(this,e,x)};return a.source="function("+(n.variable||"obj")+"){\n"+o+"}",a},x.chain=function(e){return x(e).chain()};var F=function(e){return this._chain?x(e).chain():e};x.mixin(x),T(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=r[e];x.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),(e=="shift"||e=="splice")&&n.length===0&&delete n[0],F.call(this,n)}}),T(["concat","join","slice"],function(e){var t=r[e];x.prototype[e]=function(){return F.call(this,t.apply(this._wrapped,arguments))}}),x.extend(x.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}}),typeof define=="function"&&define.amd&&define("underscore",[],function(){return x})}.call(this),function(e,t){if(typeof define=="function"&&define.amd)define(["underscore","jquery","exports"],function(n,r,i){e.Backbone=t(e,i,n,r)});else if(typeof exports!="undefined"){var n=require("underscore");t(e,exports,n)}else e.Backbone=t(e,{},e._,e.jQuery||e.Zepto||e.ender||e.$)}(this,function(e,t,n,r){var i=e.Backbone,s=[],o=s.push,u=s.slice,a=s.splice;t.VERSION="1.1.2",t.$=r,t.noConflict=function(){return e.Backbone=i,this},t.emulateHTTP=!1,t.emulateJSON=!1;var f=t.Events={on:function(e,t,n){if(!c(this,"on",e,[t,n])||!t)return this;this._events||(this._events={});var r=this._events[e]||(this._events[e]=[]);return r.push({callback:t,context:n,ctx:n||this}),this},once:function(e,t,r){if(!c(this,"once",e,[t,r])||!t)return this;var i=this,s=n.once(function(){i.off(e,s),t.apply(this,arguments)});return s._callback=t,this.on(e,s,r)},off:function(e,t,r){var i,s,o,u,a,f,l,h;if(!this._events||!c(this,"off",e,[t,r]))return this;if(!e&&!t&&!r)return this._events=void 0,this;u=e?[e]:n.keys(this._events);for(a=0,f=u.length;a<f;a++){e=u[a];if(o=this._events[e]){this._events[e]=i=[];if(t||r)for(l=0,h=o.length;l<h;l++)s=o[l],(t&&t!==s.callback&&t!==s.callback._callback||r&&r!==s.context)&&i.push(s);i.length||delete this._events[e]}}return this},trigger:function(e){if(!this._events)return this;var t=u.call(arguments,1);if(!c(this,"trigger",e,t))return this;var n=this._events[e],r=this._events.all;return n&&h(n,t),r&&h(r,arguments),this},stopListening:function(e,t,r){var i=this._listeningTo;if(!i)return this;var s=!t&&!r;!r&&typeof t=="object"&&(r=this),e&&((i={})[e._listenId]=e);for(var o in i)e=i[o],e.off(t,r,this),(s||n.isEmpty(e._events))&&delete this._listeningTo[o];return this}},l=/\s+/,c=function(e,t,n,r){if(!n)return!0;if(typeof n=="object"){for(var i in n)e[t].apply(e,[i,n[i]].concat(r));return!1}if(l.test(n)){var s=n.split(l);for(var o=0,u=s.length;o<u;o++)e[t].apply(e,[s[o]].concat(r));return!1}return!0},h=function(e,t){var n,r=-1,i=e.length,s=t[0],o=t[1],u=t[2];switch(t.length){case 0:while(++r<i)(n=e[r]).callback.call(n.ctx);return;case 1:while(++r<i)(n=e[r]).callback.call(n.ctx,s);return;case 2:while(++r<i)(n=e[r]).callback.call(n.ctx,s,o);return;case 3:while(++r<i)(n=e[r]).callback.call(n.ctx,s,o,u);return;default:while(++r<i)(n=e[r]).callback.apply(n.ctx,t);return}},p={listenTo:"on",listenToOnce:"once"};n.each(p,function(e,t){f[t]=function(t,r,i){var s=this._listeningTo||(this._listeningTo={}),o=t._listenId||(t._listenId=n.uniqueId("l"));return s[o]=t,!i&&typeof r=="object"&&(i=this),t[e](r,i,this),this}}),f.bind=f.on,f.unbind=f.off,n.extend(t,f);var d=t.Model=function(e,t){var r=e||{};t||(t={}),this.cid=n.uniqueId("c"),this.attributes={},t.collection&&(this.collection=t.collection),t.parse&&(r=this.parse(r,t)||{}),r=n.defaults({},r,n.result(this,"defaults")),this.set(r,t),this.changed={},this.initialize.apply(this,arguments)};n.extend(d.prototype,f,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(e){return n.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return n.escape(this.get(e))},has:function(e){return this.get(e)!=null},set:function(e,t,r){var i,s,o,u,a,f,l,c;if(e==null)return this;typeof e=="object"?(s=e,r=t):(s={})[e]=t,r||(r={});if(!this._validate(s,r))return!1;o=r.unset,a=r.silent,u=[],f=this._changing,this._changing=!0,f||(this._previousAttributes=n.clone(this.attributes),this.changed={}),c=this.attributes,l=this._previousAttributes,this.idAttribute in s&&(this.id=s[this.idAttribute]);for(i in s)t=s[i],n.isEqual(c[i],t)||u.push(i),n.isEqual(l[i],t)?delete this.changed[i]:this.changed[i]=t,o?delete c[i]:c[i]=t;if(!a){u.length&&(this._pending=r);for(var h=0,p=u.length;h<p;h++)this.trigger("change:"+u[h],this,c[u[h]],r)}if(f)return this;if(!a)while(this._pending)r=this._pending,this._pending=!1,this.trigger("change",this,r);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,n.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var r in this.attributes)t[r]=void 0;return this.set(t,n.extend({},e,{unset:!0}))},hasChanged:function(e){return e==null?!n.isEmpty(this.changed):n.has(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?n.clone(this.changed):!1;var t,r=!1,i=this._changing?this._previousAttributes:this.attributes;for(var s in e){if(n.isEqual(i[s],t=e[s]))continue;(r||(r={}))[s]=t}return r},previous:function(e){return e==null||!this._previousAttributes?null:this._previousAttributes[e]},previousAttributes:function(){return n.clone(this._previousAttributes)},fetch:function(e){e=e?n.clone(e):{},e.parse===void 0&&(e.parse=!0);var t=this,r=e.success;return e.success=function(n){if(!t.set(t.parse(n,e),e))return!1;r&&r(t,n,e),t.trigger("sync",t,n,e)},I(this,e),this.sync("read",this,e)},save:function(e,t,r){var i,s,o,u=this.attributes;e==null||typeof e=="object"?(i=e,r=t):(i={})[e]=t,r=n.extend({validate:!0},r);if(i&&!r.wait){if(!this.set(i,r))return!1}else if(!this._validate(i,r))return!1;i&&r.wait&&(this.attributes=n.extend({},u,i)),r.parse===void 0&&(r.parse=!0);var a=this,f=r.success;return r.success=function(e){a.attributes=u;var t=a.parse(e,r);r.wait&&(t=n.extend(i||{},t));if(n.isObject(t)&&!a.set(t,r))return!1;f&&f(a,e,r),a.trigger("sync",a,e,r)},I(this,r),s=this.isNew()?"create":r.patch?"patch":"update",s==="patch"&&(r.attrs=i),o=this.sync(s,this,r),i&&r.wait&&(this.attributes=u),o},destroy:function(e){e=e?n.clone(e):{};var t=this,r=e.success,i=function(){t.trigger("destroy",t,t.collection,e)};e.success=function(n){(e.wait||t.isNew())&&i(),r&&r(t,n,e),t.isNew()||t.trigger("sync",t,n,e)};if(this.isNew())return e.success(),!1;I(this,e);var s=this.sync("delete",this,e);return e.wait||i(),s},url:function(){var e=n.result(this,"urlRoot")||n.result(this.collection,"url")||F();return this.isNew()?e:e.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(e){return this._validate({},n.extend(e||{},{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=n.extend({},this.attributes,e);var r=this.validationError=this.validate(e,t)||null;return r?(this.trigger("invalid",this,r,n.extend(t,{validationError:r})),!1):!0}});var v=["keys","values","pairs","invert","pick","omit"];n.each(v,function(e){d.prototype[e]=function(){var t=u.call(arguments);return t.unshift(this.attributes),n[e].apply(n,t)}});var m=t.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),t.comparator!==void 0&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,n.extend({silent:!0},t))},g={add:!0,remove:!0,merge:!0},y={add:!0,remove:!1};n.extend(m.prototype,f,{model:d,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return t.sync.apply(this,arguments)},add:function(e,t){return this.set(e,n.extend({merge:!1},t,y))},remove:function(e,t){var r=!n.isArray(e);e=r?[e]:n.clone(e),t||(t={});var i,s,o,u;for(i=0,s=e.length;i<s;i++){u=e[i]=this.get(e[i]);if(!u)continue;delete this._byId[u.id],delete this._byId[u.cid],o=this.indexOf(u),this.models.splice(o,1),this.length--,t.silent||(t.index=o,u.trigger("remove",u,this,t)),this._removeReference(u,t)}return r?e[0]:e},set:function(e,t){t=n.defaults({},t,g),t.parse&&(e=this.parse(e,t));var r=!n.isArray(e);e=r?e?[e]:[]:n.clone(e);var i,s,o,u,a,f,l,c=t.at,h=this.model,p=this.comparator&&c==null&&t.sort!==!1,v=n.isString(this.comparator)?this.comparator:null,m=[],y=[],b={},w=t.add,E=t.merge,S=t.remove,x=!p&&w&&S?[]:!1;for(i=0,s=e.length;i<s;i++){a=e[i]||{},a instanceof d?o=u=a:o=a[h.prototype.idAttribute||"id"];if(f=this.get(o))S&&(b[f.cid]=!0),E&&(a=a===u?u.attributes:a,t.parse&&(a=f.parse(a,t)),f.set(a,t),p&&!l&&f.hasChanged(v)&&(l=!0)),e[i]=f;else if(w){u=e[i]=this._prepareModel(a,t);if(!u)continue;m.push(u),this._addReference(u,t)}u=f||u,x&&(u.isNew()||!b[u.id])&&x.push(u),b[u.id]=!0}if(S){for(i=0,s=this.length;i<s;++i)b[(u=this.models[i]).cid]||y.push(u);y.length&&this.remove(y,t)}if(m.length||x&&x.length){p&&(l=!0),this.length+=m.length;if(c!=null)for(i=0,s=m.length;i<s;i++)this.models.splice(c+i,0,m[i]);else{x&&(this.models.length=0);var T=x||m;for(i=0,s=T.length;i<s;i++)this.models.push(T[i])}}l&&this.sort({silent:!0});if(!t.silent){for(i=0,s=m.length;i<s;i++)(u=m[i]).trigger("add",u,this,t);(l||x&&x.length)&&this.trigger("sort",this,t)}return r?e[0]:e},reset:function(e,t){t||(t={});for(var r=0,i=this.models.length;r<i;r++)this._removeReference(this.models[r],t);return t.previousModels=this.models,this._reset(),e=this.add(e,n.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),e},push:function(e,t){return this.add(e,n.extend({at:this.length},t))},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return this.add(e,n.extend({at:0},t))},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(){return u.apply(this.models,arguments)},get:function(e){return e==null?void 0:this._byId[e]||this._byId[e.id]||this._byId[e.cid]},at:function(e){return this.models[e]},where:function(e,t){return n.isEmpty(e)?t?void 0:[]:this[t?"find":"filter"](function(t){for(var n in e)if(e[n]!==t.get(n))return!1;return!0})},findWhere:function(e){return this.where(e,!0)},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),n.isString(this.comparator)||this.comparator.length===1?this.models=this.sortBy(this.comparator,this):this.models.sort(n.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},pluck:function(e){return n.invoke(this.models,"get",e)},fetch:function(e){e=e?n.clone(e):{},e.parse===void 0&&(e.parse=!0);var t=e.success,r=this;return e.success=function(n){var i=e.reset?"reset":"set";r[i](n,e),t&&t(r,n,e),r.trigger("sync",r,n,e)},I(this,e),this.sync("read",this,e)},create:function(e,t){t=t?n.clone(t):{};if(!(e=this._prepareModel(e,t)))return!1;t.wait||this.add(e,t);var r=this,i=t.success;return t.success=function(e,n){t.wait&&r.add(e,t),i&&i(e,n,t)},e.save(null,t),e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(e instanceof d)return e;t=t?n.clone(t):{},t.collection=this;var r=new this.model(e,t);return r.validationError?(this.trigger("invalid",this,r.validationError,t),!1):r},_addReference:function(e,t){this._byId[e.cid]=e,e.id!=null&&(this._byId[e.id]=e),e.collection||(e.collection=this),e.on("all",this._onModelEvent,this)},_removeReference:function(e,t){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,r){if((e==="add"||e==="remove")&&n!==this)return;e==="destroy"&&this.remove(t,r),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],t.id!=null&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments)}});var b=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"];n.each(b,function(e){m.prototype[e]=function(){var t=u.call(arguments);return t.unshift(this.models),n[e].apply(n,t)}});var w=["groupBy","countBy","sortBy","indexBy"];n.each(w,function(e){m.prototype[e]=function(t,r){var i=n.isFunction(t)?t:function(e){return e.get(t)};return n[e](this.models,i,r)}});var E=t.View=function(e){this.cid=n.uniqueId("view"),e||(e={}),n.extend(this,n.pick(e,x)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},S=/^(\S+)\s*(.*)$/,x=["model","collection","el","id","attributes","className","tagName","events"];n.extend(E.prototype,f,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(e,n){return this.$el&&this.undelegateEvents(),this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0],n!==!1&&this.delegateEvents(),this},delegateEvents:function(e){if(!e&&!(e=n.result(this,"events")))return this;this.undelegateEvents();for(var t in e){var r=e[t];n.isFunction(r)||(r=this[e[t]]);if(!r)continue;var i=t.match(S),s=i[1],o=i[2];r=n.bind(r,this),s+=".delegateEvents"+this.cid,o===""?this.$el.on(s,r):this.$el.on(s,o,r)}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(!this.el){var e=n.extend({},n.result(this,"attributes"));this.id&&(e.id=n.result(this,"id")),this.className&&(e["class"]=n.result(this,"className"));var r=t.$("<"+n.result(this,"tagName")+">").attr(e);this.setElement(r,!1)}else this.setElement(n.result(this,"el"),!1)}}),t.sync=function(e,r,i){var s=N[e];n.defaults(i||(i={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON});var o={type:s,dataType:"json"};i.url||(o.url=n.result(r,"url")||F()),i.data==null&&r&&(e==="create"||e==="update"||e==="patch")&&(o.contentType="application/json",o.data=JSON.stringify(i.attrs||r.toJSON(i))),i.emulateJSON&&(o.contentType="application/x-www-form-urlencoded",o.data=o.data?{model:o.data}:{});if(i.emulateHTTP&&(s==="PUT"||s==="DELETE"||s==="PATCH")){o.type="POST",i.emulateJSON&&(o.data._method=s);var u=i.beforeSend;i.beforeSend=function(e){e.setRequestHeader("X-HTTP-Method-Override",s);if(u)return u.apply(this,arguments)}}o.type!=="GET"&&!i.emulateJSON&&(o.processData=!1),o.type==="PATCH"&&T&&(o.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var a=i.xhr=t.ajax(n.extend(o,i));return r.trigger("request",r,a,i),a};var T=typeof window!="undefined"&&!!window.ActiveXObject&&(!window.XMLHttpRequest||!(new XMLHttpRequest).dispatchEvent),N={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var C=t.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},k=/\((.*?)\)/g,L=/(\(\?)?:\w+/g,A=/\*\w+/g,O=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(C.prototype,f,{initialize:function(){},route:function(e,r,i){n.isRegExp(e)||(e=this._routeToRegExp(e)),n.isFunction(r)&&(i=r,r=""),i||(i=this[r]);var s=this;return t.history.route(e,function(n){var o=s._extractParameters(e,n);s.execute(i,o),s.trigger.apply(s,["route:"+r].concat(o)),s.trigger("route",r,o),t.history.trigger("route",s,r,o)}),this},execute:function(e,t){e&&e.apply(this,t)},navigate:function(e,n){return t.history.navigate(e,n),this},_bindRoutes:function(){if(!this.routes)return;this.routes=n.result(this,"routes");var e,t=n.keys(this.routes);while((e=t.pop())!=null)this.route(e,this.routes[e])},_routeToRegExp:function(e){return e=e.replace(O,"\\$&").replace(k,"(?:$1)?").replace(L,function(e,t){return t?e:"([^/?]+)"}).replace(A,"([^?]*?)"),new RegExp("^"+e+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(e,t){var r=e.exec(t).slice(1);return n.map(r,function(e,t){return t===r.length-1?e||null:e?decodeURIComponent(e):null})}});var M=t.History=function(){this.handlers=[],n.bindAll(this,"checkUrl"),typeof window!="undefined"&&(this.location=window.location,this.history=window.history)},_=/^[#\/]|\s+$/g,D=/^\/+|\/+$/g,P=/msie [\w.]+/,H=/\/$/,B=/#.*$/;M.started=!1,n.extend(M.prototype,f,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(e,t){if(e==null)if(this._hasPushState||!this._wantsHashChange||t){e=decodeURI(this.location.pathname+this.location.search);var n=this.root.replace(H,"");e.indexOf(n)||(e=e.slice(n.length))}else e=this.getHash();return e.replace(_,"")},start:function(e){if(M.started)throw new Error("Backbone.history has already been started");M.started=!0,this.options=n.extend({root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var r=this.getFragment(),i=document.documentMode,s=P.exec(navigator.userAgent.toLowerCase())&&(!i||i<=7);this.root=("/"+this.root+"/").replace(D,"/");if(s&&this._wantsHashChange){var o=t.$('<iframe src="javascript:0" tabindex="-1">');this.iframe=o.hide
().appendTo("body")[0].contentWindow,this.navigate(r)}this._hasPushState?t.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!s?t.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=r;var u=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&this.atRoot()&&u.hash&&(this.fragment=this.getHash().replace(_,""),this.history.replaceState({},document.title,this.root+this.fragment))}if(!this.options.silent)return this.loadUrl()},stop:function(){t.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),M.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();t===this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe)));if(t===this.fragment)return!1;this.iframe&&this.navigate(t),this.loadUrl()},loadUrl:function(e){return e=this.fragment=this.getFragment(e),n.any(this.handlers,function(t){if(t.route.test(e))return t.callback(e),!0})},navigate:function(e,t){if(!M.started)return!1;if(!t||t===!0)t={trigger:!!t};var n=this.root+(e=this.getFragment(e||""));e=e.replace(B,"");if(this.fragment===e)return;this.fragment=e,e===""&&n!=="/"&&(n=n.slice(0,-1));if(this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}if(t.trigger)return this.loadUrl(e)},_updateHash:function(e,t,n){if(n){var r=e.href.replace(/(javascript:|#).*$/,"");e.replace(r+"#"+t)}else e.hash="#"+t}}),t.history=new M;var j=function(e,t){var r=this,i;e&&n.has(e,"constructor")?i=e.constructor:i=function(){return r.apply(this,arguments)},n.extend(i,r,t);var s=function(){this.constructor=i};return s.prototype=r.prototype,i.prototype=new s,e&&n.extend(i.prototype,e),i.__super__=r.prototype,i};d.extend=m.extend=C.extend=E.extend=M.extend=j;var F=function(){throw new Error('A "url" property or function must be specified')},I=function(e,t){var n=t.error;t.error=function(r){n&&n(e,r,t),e.trigger("error",e,r,t)}};return t}),$(function(){var e=gl.Model=function(){this.id=_.uniqueId("m"),this.initialize.apply(this,arguments)};_.extend(gl.Model.prototype,Backbone.Events,{initialize:function(){}}),e.extend=Backbone.Model.extend}()),function(e,t){typeof define=="function"&&define.amd?define(["underscore","backbone"],function(n,r){return t(n||e._,r||e.Backbone)}):t(_,Backbone)}(this,function(e,t){function n(){return((1+Math.random())*65536|0).toString(16).substring(1)}function r(){return n()+n()+"-"+n()+"-"+n()+"-"+n()+"-"+n()+n()+n()}return t.LocalStorage=window.Store=function(e){this.name=e;var t=this.localStorage().getItem(this.name);this.records=t&&t.split(",")||[]},e.extend(t.LocalStorage.prototype,{save:function(){this.localStorage().setItem(this.name,this.records.join(","))},create:function(e){return e.id||(e.id=r(),e.set(e.idAttribute,e.id)),this.localStorage().setItem(this.name+"-"+e.id,JSON.stringify(e)),this.records.push(e.id.toString()),this.save(),this.find(e)},update:function(t){return this.localStorage().setItem(this.name+"-"+t.id,JSON.stringify(t)),e.include(this.records,t.id.toString())||this.records.push(t.id.toString()),this.save(),this.find(t)},find:function(e){return this.jsonData(this.localStorage().getItem(this.name+"-"+e.id))},findAll:function(){return e(this.records).chain().map(function(e){return this.jsonData(this.localStorage().getItem(this.name+"-"+e))},this).compact().value()},destroy:function(t){return t.isNew()?!1:(this.localStorage().removeItem(this.name+"-"+t.id),this.records=e.reject(this.records,function(e){return e===t.id.toString()}),this.save(),t)},localStorage:function(){return localStorage},jsonData:function(e){return e&&JSON.parse(e)}}),t.LocalStorage.sync=window.Store.sync=t.localSync=function(e,t,n){var r=t.localStorage||t.collection.localStorage,i,s,o=$.Deferred&&$.Deferred();try{switch(e){case"read":i=t.id!=undefined?r.find(t):r.findAll();break;case"create":i=r.create(t);break;case"update":i=r.update(t);break;case"delete":i=r.destroy(t)}}catch(u){u.code===DOMException.QUOTA_EXCEEDED_ERR&&window.localStorage.length===0?s="Private browsing is unsupported":s=u.message}return i?(t.trigger("sync",t,i,n),n&&n.success&&n.success(i),o&&o.resolve(i)):(s=s?s:"Record Not Found",n&&n.error&&n.error(s),o&&o.reject(s)),n&&n.complete&&n.complete(i),o&&o.promise()},t.ajaxSync=t.sync,t.getSyncMethod=function(e){return e.localStorage||e.collection&&e.collection.localStorage?t.localSync:t.ajaxSync},t.sync=function(e,n,r){return t.getSyncMethod(n).apply(this,[e,n,r])},t.LocalStorage}),namespace.module("bot.storage",function(e,t){function r(e){return e>64&&e<91?e-65:e>96&&e<123?e-71:e>47&&e<58?e+4:e===43?62:e===47?63:0}function i(e,t){var n=e.replace(/[^A-Za-z0-9\+\/]/g,""),i=n.length,s=t?Math.ceil((i*3+1>>2)/t)*t:i*3+1>>2,o=new Uint8Array(s);for(var u,a,f=0,l=0,c=0;c<i;c++){a=c&3,f|=r(n.charCodeAt(c))<<6*(3-a);if(a===3||i-c===1){for(u=0;u<3&&l<s;u++,l++)o[l]=f>>>(16>>>u&24)&255;f=0}}return o}function s(e){return e<26?e+65:e<52?e+71:e<62?e-4:e===62?43:e===63?47:65}function o(e){var t=2,n="";for(var r=e.length,i=0,o=0;o<r;o++){t=o%3,o>0&&o*4/3%76===0&&(n+="\r\n"),i|=e[o]<<(16>>>t&24);if(t===2||e.length-o===1)n+=String.fromCharCode(s(i>>>18&63),s(i>>>12&63),s(i>>>6&63),s(i&63)),i=0}return n.substr(0,n.length-2+t)+(t===2?"":t===1?"=":"==")}function u(e){var t="";for(var n,r=e.length,i=0;i<r;i++)n=e[i],t+=String.fromCharCode(n>251&&n<254&&i+5<r?(n-252)*1073741824+(e[++i]-128<<24)+(e[++i]-128<<18)+(e[++i]-128<<12)+(e[++i]-128<<6)+e[++i]-128:n>247&&n<252&&i+4<r?(n-248<<24)+(e[++i]-128<<18)+(e[++i]-128<<12)+(e[++i]-128<<6)+e[++i]-128:n>239&&n<248&&i+3<r?(n-240<<18)+(e[++i]-128<<12)+(e[++i]-128<<6)+e[++i]-128:n>223&&n<240&&i+2<r?(n-224<<12)+(e[++i]-128<<6)+e[++i]-128:n>191&&n<224&&i+1<r?(n-192<<6)+e[++i]-128:n);return t}function a(e){var t,n,r=e.length,i=0;for(var s=0;s<r;s++)n=e.charCodeAt(s),i+=n<128?1:n<2048?2:n<65536?3:n<2097152?4:n<67108864?5:6;t=new Uint8Array(i);for(var o=0,u=0;o<i;u++)n=e.charCodeAt(u),n<128?t[o++]=n:n<2048?(t[o++]=192+(n>>>6),t[o++]=128+(n&63)):n<65536?(t[o++]=224+(n>>>12),t[o++]=128+(n>>>6&63),t[o++]=128+(n&63)):n<2097152?(t[o++]=240+(n>>>18),t[o++]=128+(n>>>12&63),t[o++]=128+(n>>>6&63),t[o++]=128+(n&63)):n<67108864?(t[o++]=248+(n>>>24),t[o++]=128+(n>>>18&63),t[o++]=128+(n>>>12&63),t[o++]=128+(n>>>6&63),t[o++]=128+(n&63)):(t[o++]=252+(n>>>30),t[o++]=128+(n>>>24&63),t[o++]=128+(n>>>18&63),t[o++]=128+(n>>>12&63),t[o++]=128+(n>>>6&63),t[o++]=128+(n&63));return t}function f(e){var t=16777619,n=0,r=e.length;for(;n<r;n++)t=((t>>>1)+((t&1)<<15)|0)+(e[n]&255)&65535|0;return t}function l(e){return arguments.callee.caller===null&&namespace.bot.log.weird("enc_console"),localStorage.setItem("readOnlyData",e),c(e)}function c(e){var t=a(e),n=f(t),r=t.length,i=new Uint8Array(r+2);for(var s=0;s<r;s++)i[s]=t[s];t=i,t[r]=n>>>8&255,t[r+1]=n&255;var u=o(t);return u}function h(e){return arguments.callee.caller===null?namespace.bot.log.weird("dec_console"):arguments.callee.caller.toString().length!==501&&arguments.callee.caller.toString().length!==237&&namespace.bot.log.weird("dec_weirdFunc"+arguments.callee.caller.toString().length),p(e)}function p(e){var t=i(e),n=t.length,r=((t[n-2]&255)<<8)+(t[n-1]&255),s=t.subarray(0,n-2),o=f(s),a=u(s);try{var l=JSON.parse(a);return o!==r&&namespace.bot.log.tmpr(a),l}catch(c){return}}function d(){n.warning("loading");var e=localStorage.getItem("data");if(!e)return undefined;try{e=JSON.parse(e),n.warning("Found regular json data")}catch(t){try{e=h(e),n.warning("Found encoded data")}catch(t){return undefined}}return e}var n;$(function(){n=namespace.bot.log}),"use strict",e.extend({enc:l,dec:h,getData:d})}),namespace.module("bot.log",function(e,t){function c(e,t){a=e,u=t,o=localStorage.getItem("uid"),o?M("Recovered UID, resuming."):(M("UID not found, creating new one."),o=Math.floor(Math.random()*Math.pow(2,32)),localStorage.setItem("uid",o)),r=new Firebase("https://web.archive.org/web/20170518220231/https://fiery-heat-4226.firebaseio.com/"),i=r.child("logs").child(o).child(a),i.child("logs").push("starting"),i.child("sessionOrder").push(u),this.FB=r,h()}function h(e){var t=i.child("time").child(u).child(Math.floor(gl.time).toString());t.child("servertime").set(Firebase.ServerValue.TIMESTAMP),t.child("local-time").set((new Date).getTime()),e&&t.child("timeCoef").set(e)}function p(e){i.child("currentZone").set(e)}function d(e){i.child("prestiges").push(""+new Date+" - "+e)}function v(e){i.child("name").set(e.hero.name),i.child("version").set(gl.VERSION_NUMBER),i.child("lastReport").set(String(new Date)),i.child("level").set(e.hero.level);var t=e.toJSON();i.child("equipped").set(t.equipped),_.each(t.equipped,function(e,n){var r=_.findWhere(t.inv,{name:e});i.child("cards").child(n+"cards").set(r.cardNames.join(", "))}),i.child("skillchain").set(t.skillchain),_.each(t.skillchain,function(e,n){var r=_.findWhere(t.inv,{name:e});i.child("cards").child("s"+n+"cards").set(r.cardNames.join(", "))}),i.child("zone").set(t.zone.nextZone),i.child("unlockedZones").set(t.zone.unlockedZones),h(e.timeCoefficient),gl.ZONE_LEVEL_SPACING!==5&&r.child("panel").child("weird").push(localStorage.getItem("uid")+" - gl.ZONE_LEVEL_SPACING: "+gl.VERSION_NUMBER)}function m(e,t){if(e.name==="some newbie"){D("default name, not elligible for leaderboard");return}f=f==""?"0":f,l=l==""?"0":l;var n=e.prestigeTotal+":"+e.name+":"+e.level+":"+t.getZoneFromNum(t.unlockedZones).nameStr+":"+t.getZoneFromNum(t.nextZone).nameStr+":"+f+":"+l+":";_.each(e.skillchain.skills,function(e){if(e===undefined)return;n+=namespace.bot.utils.firstCap(e.name)+", "}),n=n.slice(0,n.length-2),n+=":"+namespace.bot.utils.firstCap(e.lastDeath),e.versionCreated==="0-3-2"||e.versionCreated==="0-3-3"||e.versionCreated==="0-3-4"?r.child("leaderboard").child("PRESTIGE").child(o).set(n):r.child("leaderboard").child("legacy").child(e.versionCreated).child(o).set(n)}function g(){i.child("deathCount").set(0),i.child("potionCount").set(0),r.child(a).child("newBuilds").child(o).set(Firebase.ServerValue.TIMESTAMP)}function y(e){i.child("level").set(e)}function b(e){var t=[],n=e.saveBuild();_.each(n.equipped,function(e,n){t.push(e)}),_.each(n.skillchain,function(e,n){t.push(e)}),_.each(n.inv,function(e){t=t.concat(e.cardNames)});var r=""+localStorage.getItem("uid")+":"+e.hero.level+":"+e.zone.nameStr+":"+t.join(",");i.child("clearLogs").child(r).set(Firebase.ServerValue.TIMESTAMP)}function w(e,t){var n=o||localStorage.getItem("uid"),i={amount:t,uid:n,date:(new Date).toString(),tokenId:e.id,email:e.email,type:e.type,version:gl.VERSION_NUMBER};r.child("panel").child("payments").child(o).set(i),D("Donation! token: %s",JSON.stringify(e))}function E(e){r.child("panel").child("donateAttempts").push(localStorage.getItem("uid")+": "+new Date+" "+e)}function S(e){r.child("panel").child("weird").child(e).push(localStorage.getItem("uid")+": "+new Date)}function x(e){M(e),i.child("deaths").push(e);var t=i.child("deathCount");t.transaction(function(e){return f=(e||0)+1,f})}function T(){var e=i.child("potionCount");e.transaction(function(e){return l=(e||0)+1,l})}function N(e,t){i.child("loadedBuilds").child(e).set(t)}function C(e){if(e&&e.length){var t=e.indexOf("says: ")<e.length-6;t&&r.child("panel").child("feedback").child(gl.VERSION_NUMBER).push(o+" - "+e)}}function k(){var e=(new Error).stack.split("\n")[3];return e.slice(e.indexOf("(")+1,e.length-1)}function L(){return(new Date).toString().slice(4,-15)}function A(){var e=arguments;e[0]="DEBUG "+k()+" "+e[0],console.log("%c"+sprintf.apply(null,e),"color: blue")}function O(){var e=arguments;e[0]="INFO "+k()+" "+e[0],console.log("%c"+sprintf.apply(null,e),"color: green")}function M(){var e=arguments;e[0]="WARNING "+k()+" "+e[0],console.log("%c"+sprintf.apply(null,e),"color: orange")}function D(){var e=arguments;B("ERROR:"+sprintf.apply(null,e)+"  @"+gl.time),e[0]="ERROR "+k()+" "+e[0],console.log("%c"+sprintf.apply(null,e),"color: red")}function P(){var e=arguments;e[0]=(new Error).stack.replace(/   at /g,"").split("\n").slice(2).join("\n")+"\n  "+e[0],console.log("%c"+sprintf.apply(null,e),"color: purple")}function H(){var e=arguments;e[0]="UI: "+k()+" "+e[0],console.log("%c"+sprintf.apply(null,e),"color: cyan")}function B(e){i.child("logs").push(e)}function j(e){var t=o||localStorage.getItem("uid"),n="Unable to retreive name";try{n=JSON.parse(e).hero.name}catch(i){D("%s when trying to get hero name",String(i))}r.child("tmprs").child(t).push(a+" - "+n+" - "+String(new Date))}var n="UI",r,i,s,o,u,a,f="",l="",F={init:c,timeReport:h,reportData:v,reportWinner:m,reportClear:b,reportPotion:T,reportNewBuild:g,enterZone:p,levelUp:y,handleDonationToken:w,donateAttempt:E,feedback:C,logFB:B,reportDeath:x,reportBuild:N,tmpr:j,weird:S,prestige:d},I=[A,O,H,M,D,P],q=["debug","info","UI","warning","error","stack"],R=!1;for(var U=0;U<I.length;U++)R||n===q[U]?(F[q[U]]=I[U],R=!0):F[q[U]]=function(){};e.extend(F)}),namespace.module("bot.prob",function(e,t){function r(e,t){if(typeof e!="number"||typeof t!="number")throw"rand() must be called with 2 numbers";return Math.floor(Math.random()*(t-e+1)+e)}function i(e,t){if(typeof e!="number"||typeof t!="number")throw"pyRand() must be called with 2 numbers";return Math.floor(Math.random()*(t-e)+e)}function o(e,t){var n=f(e*2,t);return Math.max(e,n)}function u(e){return Math.random()<e?!0:!1}function a(e){var t=Math.floor(e/4),n=Math.ceil(e*3/4);return r(t,n)}function f(e,t){var r=Math.random(),i=0,s;t||(t=100);while(i<t){s=Math.pow(e,i)*Math.exp(-e)/n[i],r-=s;if(r<0)return i;i++}return i}function l(e){var t=0;for(var n=e.length;n--;)t+=e[n];return t}function c(e){var t=e.length,n=Math.random()*l(e),r=0,i=0;while(i<t&&n>0)n-=e[i],i++;return i-=1,i}function h(e){var t=[1,1];for(var n=1;n<e;n++)t[n+1]=t[n]*(n+1);return t}function p(e,t){var n=e;if(typeof e=="string"){e=e.replace("#",""),e.length===3&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]);if(e.length!==6)throw"randcolor base != 6";e=[parseInt(e.slice(0,2),16),parseInt(e.slice(2,4),16),parseInt(e.slice(4,6),16)]}color=_.map(e,function(e){return e+=r(-t,t),e=e>255?255:e,e=e<0?0:e,e});var i=sprintf("#%02X%02X%02X",color[0],color[1],color[2]);return i}function d(){var e=h(200),t=(new Date).getTime(),n=[];for(var r=0;r<100;r++)n[r]=0;for(var r=0;r<1e3;r++){var i=f(40,200);console.log(i+" monsters in room "+r),n[i]++}console.log("1000 cycles took "+((new Date).getTime()-t)+"ms"),console.log(n);for(var r=0;r<20;r++){s="";var o=n[r];for(var u=0;u<o;u++)s+="x";console.log(s)}}e.extend({rand:r,pyRand:i,rootRand:o,binProb:u,middle50:a,pProb:f,test:d,pick:c,sum:l,randColor:p});var n;n=h(200)}),namespace.module("bot.itemref",function(e,t){function H(e,t,n){if("prototype"in t[e]&&t[e].prototype.length>0)for(var r=0;r<t[e].prototype.length;r++)n=H(t[e].prototype[r],t,n);return n[n.length]=e,n}function B(e,t){if(e in P&&t in P[e]){var r=H(t,P[e],[]),i=$.extend(!0,{},P[e][t]);for(var s=0;s<r.length;s++)i=$.extend(!0,i,P[e][r[s]]);if("itemType"in i)throw sprintf('Found a "itemType" key in item %s. No item is allowed to have "itemType" as it it set in expand',JSON.stringify(i));i.itemType=e;if("name"in i)throw sprintf('Found a "name" key in item %s. No item is allowed to have "name" as it it set in expand',JSON.stringify(i));return i.name=t,n.debug("itemref.expand(%s, %s), Final item: %s",e,t,JSON.stringify(i)),i}throw n.error("Could not find reference for a %s named %s",e,t),"fudge"}var n=namespace.bot.log,r=namespace.bot.prob,i=300,s=4e3,o=4e3,u="rgba(119, 119, 119, 1)",a="rgba(255, 130, 0, 0.6)",f="rgba(0, 255, 255, 0.6)",l="rgba(173, 7, 194, 0.6)",c="rgba(85, 255, 139, 0.6)",h="rgba(255, 130, 0, 1)",p="rgba(0, 255, 255, 1)",d="rgba(173, 7, 194, 1)",v="rgba(85, 255, 139, 1)",m="rgba(221,221,221,1)",g="rgba(0, 136, 51, 1)",y="rgba(0,0,0, 1)",b="rgba(85, 153, 0, 1)",w="rgba(68, 102, 0, 1)",E="rgba(85, 85, 136, 1)",S="rgba(51, 51, 51, 1)",x="rgba(204, 170, 51, 1)",T="rgba(102, 68, 34, 1)",N="rgba(51, 0, 0, 1)",C="rgba(0, 51, 0, 1)",k="rgba(0, 0, 51, 1)",L="rgba(136, 85, 136, 1)",A="rgba(153, 102, 170, 1)",O="rgba(255, 102, 136, 1)",M="rgba(255, 255, 255, 1)",_="rgba(0, 0, 255, 1)",D="rgba(153, 0, 0, 1)",P={weapon:{"cardboard sword":{mods:["physDmg added 6","physDmg more 0.5 perLevel"],weaponType:"melee"},"hand axe":{mods:["speed more -20","physDmg added 10","physDmg more 0.55 perLevel"],weaponType:"melee"},"stone hammer":{mods:["speed more 20","physDmg added 10","physDmg more 1.1 perLevel"],weaponType:"melee"},falchion:{mods:["speed more -25","physDmg added 12","physDmg more 0.7 perLevel"],weaponType:"melee"},"morning star":{mods:["speed more 100","physDmg added 14","physDmg more 2 perLevel"],weaponType:"melee"},"long sword":{mods:["speed more -20","speed more -0.1 perLevel","physDmg added 16","physDmg more 0.6 perLevel"],weaponType:"melee"},"spikey mace":{mods:["speed more 50","physDmg added 16","physDmg more 1.5 perLevel"],weaponType:"melee"},"spiked battle axe":{mods:["speed more -30","physDmg added 20","physDmg more 0.8 perLevel","accuracy more 2 perLevel"],weaponType:"melee"},"winged axe":{mods:["range more 50","range more 0.1 perLevel","physDmg added 25","physDmg more 0.8 perLevel"],weaponType:"melee"},"dream eater":{mods:["physDmg gainedas 0.5 hpLeech","physDmg gainedas 0.5 manaLeech","physDmg added 50","physDmg more 0.75 perLevel"],weaponType:"melee"},tanto:{mods:["range more -60","speed more -30","physDmg added 1 perLevel","physDmg more 0.75 perLevel"],weaponType:"melee"},katana:{mods:["speed more -30","physDmg added 1 perLevel","physDmg more 0.7 perLevel"],weaponType:"melee"},wakizashi:{mods:["range more -90","accuracy more 100","physDmg added 1 perLevel","physDmg more 0.8 perLevel"],weaponType:"melee"},"barbarian blade":{mods:["strength gainedas 0.2 moveSpeed","strength more 0.2 perLevel","physDmg added 23","physDmg more 0.6 perLevel"],weaponType:"melee"},"grounding rod":{mods:["physDmg converted 100 lightDmg","physDmg added 21","physDmg more 0.55 perLevel"],weaponType:"melee"},pike:{mods:["physDmg added 30","range added 1000","speed more 80","physDmg more 1.8 perLevel"],weaponType:"melee"},"angelic blade":{mods:["physDmg added 2 perLevel","fireDmg added 2 perLevel","coldDmg added 2 perLevel","lightDmg added 2 perLevel","meleeDmg more 1 perLevel"],weaponType:"melee"},"wooden bow":{mods:["physDmg added 5","physDmg more 0.5 perLevel"],weaponType:"range"},"elf bow":{mods:["projSpeed more 50","physDmg added 7","physDmg more 0.6 perLevel"],weaponType:"range"},"hand crossbow":{mods:["physDmg added 7","speed more -30","physDmg more 0.6 perLevel"],weaponType:"range"},crossbow:{mods:["speed more 30","physDmg added 9","physDmg more 0.85 perLevel"],weaponType:"range"},"composite bow":{mods:["range more 20","physDmg added 20","physDmg more 0.75 perLevel"],weaponType:"range"},shuriken:{mods:["projCount added 2","range more -40","physDmg added 15","physDmg more 0.7 perLevel"],weaponType:"range"},yumi:{mods:["physDmg added 20","physDmg more 0.8 perLevel"],weaponType:"range"},"compound bow":{mods:["physDmg added 20","physDmg more 0.6 perLevel","projSpeed more 0.5 perLevel"],weaponType:"range"},"sunfury bow":{mods:["physDmg converted 100 fireDmg","poisDmg more -15","speed more -20","physDmg more 0.75 perLevel","physDmg added 1 perLevel"],weaponType:"range",credit:"Blindfold"},"simple wand":{mods:["spellDmg more 15","spellDmg more 0.5 perLevel"],weaponType:"spell"},"knobby wand":{mods:["spellDmg more 15","spellDmg more 0.7 perLevel","speed more -0.1 perLevel"],weaponType:"spell"},"pewter wand":{mods:["spellDmg more 50","spellDmg more 1.5 perLevel","eleResistAll more -30"],weaponType:"spell"},"delicate wand":{mods:["speed more -20","spellDmg more 25","spellDmg more 1 perLevel"],weaponType:"spell"},"dragonstone wand":{mods:["spellDmg more 0.8 perLevel","fireDmg more 1 perLevel"],weaponType:"spell"},"fairy wand":{mods:["wisdom added 3 perLevel","spellDmg more 1.2 perLevel"],weaponType:"spell"},"star wand":{mods:["spellDmg more 50","spellDmg more 1 perLevel"],weaponType:"spell"},"demon wand":{mods:["hpRegen added -50","spellDmg more 1.4 perLevel"],weaponType:"spell"},"succubus skull":{mods:["maxHp converted 70 maxMana","spellDmg more 2 perLevel"],weaponType:"spell"},"magic wand":{mods:["speed more -20","spellDmg more 1.2 perLevel"],weaponType:"spell",flavor:"BZZZZZZZZZZZZZZ"}},armor:{"balsa helmet":{mods:["armor added 5","armor more 1 perLevel"],slot:"head"},collander:{mods:["armor added 7","armor more 1.2 perLevel"],slot:"head"},"conquistador helm":{mods:["armor added 9","armor more 1.4 perLevel"],slot:"head"},"crusader helm":{mods:["armor more 1.6 perLevel"],slot:"head"},"gladiator helm":{mods:["armor added 22","armor more 1.3 perLevel"],slot:"head"},"apollo helmet":{mods:["armor added 30","armor more 1.5 perLevel"],slot:"head"},"plague doctor":{mods:["poisResist more 10","poisDmg gainedas 0.5 hpLeech","poisResist more 2 perLevel","poisDmg more 0.5 perLevel"],slot:"head"},visor:{mods:["armor added 9","armor more 1.2 perLevel","rangeDmg more 0.8 perLevel"],slot:"head"},"mage hat":{mods:["manaRegen added 10","eleResistAll more 2 perLevel"],slot:"head"},lichgaze:{mods:["maxMana more 1 perLevel","wisdom added 1 perLevel","eleResistAll more 1 perLevel"],slot:"head"},"dodgers cap":{mods:["dodge added 30","dodge more 1 perLevel"],slot:"head"},kabuto:{mods:["armor more 0.5 perLevel","eleResistAll more 1 perLevel"],slot:"head"},"gooey gibus":{mods:["vitality more 0.5 perLevel","eleResistAll more 1 perLevel"],slot:"head"},"champion helm":{mods:["armor more 0.8 perLevel","eleResistAll more 0.8 perLevel","strength more 0.3 perLevel","dexterity more 0.3 perLevel"],slot:"head"},"zealot hood":{mods:["eleResistAll more -40","cooldownTime more -40","spellDmg more 1.5 perLevel"],slot:"head"},halo:{mods:["aoeSpeed more 0.8 perLevel","aoeRadius more 0.8 perLevel","dodge more 0.8 perLevel"],slot:"head"},"t-shirt":{mods:["armor added 5","armor more 1 perLevel"],slot:"chest"},"leather armor":{mods:["armor added 8","armor more 1.2 perLevel"],slot:"chest"},"goblin leather":{mods:["armor added 5","armor more 1.3 perLevel","fireResist more 2 perLevel"],slot:"chest"},"leatherscale armor":{mods:["dodge more 1 perLevel","armor more 1 perLevel","eleResistAll more 1 perLevel"],slot:"chest"},"leatherplate armor":{mods:["armor added 20","armor more 1.5 perLevel","eleResistAll more 0.6 perLevel"],slot:"chest"},"hammered chestplate":{mods:["armor more 50","armor more 1 perLevel"],slot:"chest"},"iron chestplate":{mods:["armor added 40","armor more 1.5 perLevel"],slot:"chest"},dragonscale:{mods:["fireDmg gainedas 0.5 hpLeech","fireDmg more 1 perLevel","eleResistAll more 1 perLevel","dodge more 0.5 perLevel"],slot:"chest"},"muscle plate":{mods:["armor added 100","armor more 1.6 perLevel"],slot:"chest"},chainmail:{mods:["armor more 1 perLevel","dexterity more 1 perLevel"],slot:"chest"},"elegant plate":{mods:["armor added 200","dodge more -50","armor more 1.9 perLevel","eleResistAll more 2 perLevel"],slot:"chest"},"paladin armor":{mods:["moveSpeed more -50","maxHp gainedas 2.2 hpRegen","armor more 2.2 perLevel","eleResistAll more 2.2 perLevel"],slot:"chest"},"raider armor":{mods:["physDmg more 2 perLevel","armor more -20"],slot:"chest"},"shadow armor":{mods:["dodge added 50","dodge more 1.5 perLevel","eleResistAll more 0.5 perLevel"],slot:"chest"},"scout leather":{mods:["dodge added 20","dodge more 1 perLevel","eleResistAll more 1 perLevel"],slot:"chest"},"studded leather":{mods:["dodge more 1.4 perLevel","armor more 0.5 perLevel","eleResistAll more 1 perLevel"],slot:"chest"},"velvet tunic":{mods:["manaRegen added 5","eleResistAll more 0.5 perLevel","eleResistAll added 5 perLevel"],slot:"chest"},"war robe":{mods:["manaRegen added 10","armor more 1.2 perLevel","eleResistAll more 2 perLevel"],slot:"chest"},"winged leather":{mods:["armor added 100","armor more 1.2 perLevel","eleResistAll more 1 perLevel"],slot:"chest"},"cultist robe":{mods:["spellDmg more 30","dodge more 0.5 perLevel","eleResistAll more 1 perLevel"],slot:"chest"},"embroidered silks":{mods:["manaRegen added 20","spellDmg more 1 perLevel","eleResistAll more 1 perLevel","eleResistAll added 1 perLevel"],slot:"chest"},"champion mail":{mods:["armor more 1.2 perLevel","eleResistAll more 1.2 perLevel","strength more 0.5 perLevel","dexterity more 0.5 perLevel"],slot:"chest"},batsuit:{mods:["speed more -20","physDmg more 1 perLevel"],slot:"chest"},"gooey gaberdine":{mods:["vitality more 1 perLevel","eleResistAll more 1 perLevel"],slot:"chest"},jeans:{mods:["armor added 5","armor more 1 perLevel"],slot:"legs"},"leather boots":{mods:["armor added 10","armor more 1.2 perLevel"],slot:"legs"},"elf boots":{mods:["dodge added 5","dodge more 1 perLevel"],slot:"legs"},"mage boots":{mods:["manaRegen added 5","manaRegen more 2 perLevel","eleResistAll more 1 perLevel"],slot:"legs"},"arcane boots":{mods:["spellDmg more 20","manaRegen more 2 perLevel","eleResistAll more 1 perLevel"],slot:"legs"},"buckaneer boots":{mods:["armor added 25","armor more 1 perLevel","eleResistAll more 0.6 perLevel"],slot:"legs"},"foot plate":{mods:["armor added 40","armor more 1.5 perLevel","dodge more -30","eleResistAll more 1 perLevel"],slot:"legs"},"ninja tabi":{mods:["dodge added 100","dodge more 1.5 perLevel"],slot:"legs"},"suess boots":{mods:["armor added 500","armor added 20 perLevel"],slot:"legs"},"rear claws":{mods:["cooldownTime more -30","strength added 3 perLevel","lightResist more 3 perLevel"],slot:"legs"},"shiny greaves":{mods:["vitality more 0.3 perLevel","eleResistAll more 0.8 perLevel","armor more 0.8 perLevel"],slot:"legs"},"cavalry boots":{mods:["strength more 0.8 perLevel","armor more 0.8 perLevel"],slot:"legs"},"magesteel greaves":{mods:["cooldownTime more -30","armor more 0.8 perLevel","eleResistAll more 0.8 perLevel"],slot:"legs"},"champion boots":{mods:["armor more 0.8 perLevel","eleResistAll more 0.8 perLevel","strength more 0.3 perLevel","dexterity more 0.3 perLevel"],slot:"legs"},"winged sandals":{mods:["dexterity more 1 perLevel","moveSpeed more 1 perLevel"],slot:"legs"},"latex gloves":{mods:["armor added 5","armor more 1 perLevel"],slot:"hands"},"gardening gloves":{mods:["armor added 7","armor more 1.2 perLevel"],slot:"hands"},"leather gloves":{mods:["dodge added 10","dodge more 1.2 perLevel"],slot:"hands"},"silk feather gloves":{mods:["speed more -25","dexterity more 1 perLevel","eleResistAll more 1 perLevel"],slot:"hands"},"velvet gloves":{mods:["manaRegen added 2","manaRegen more 2 perLevel","spellDmg more 0.5 perLevel","eleResistAll more 1 perLevel"],slot:"hands"},"front claws":{mods:["speed more -30","dexterity added 3 perLevel","lightDmg more 1 perLevel"],slot:"hands"},handmail:{mods:["armor added 15","armor more 1.3 perLevel"],slot:"hands"},"fancy gauntlets":{mods:["armor added 25","armor more 1.5 perLevel"],slot:"hands"},"polished gauntlets":{mods:["armor added 30","dodge more -30","armor more 1.8 perLevel"],slot:"hands"},"goldenscale gauntlets":{mods:["dodge added 50","dodge more 1.1 perLevel","eleResistAll more 0.6 perLevel"],slot:"hands"},"mage gloves":{mods:["manaRegen added 5","wisdom added 1 perLevel","eleResistAll more 1 perLevel"],slot:"hands"},"gooey gauntlets":{mods:["vitality more 0.5 perLevel","eleResistAll more 1 perLevel"],slot:"hands"},"magesteel gauntlets":{mods:["spellDmg more 30","armor more 0.8 perLevel","eleResistAll more 0.8 perLevel"],slot:"hands"},"champion gloves":{mods:["armor more 0.8 perLevel","eleResistAll more 0.8 perLevel","strength more 0.3 perLevel","dexterity more 0.3 perLevel"],slot:"hands"}},skill:{basic:{},"basic melee":{prototype:["basic"],skillType:"melee",types:["melee"],specs:[{type:"melee",color:u,quals:[],onHit:[],onKill:[],onRemove:[]}],baseMods:["speed added 500","range added "+i,"physDmg added 2 perLevel"]},"basic range":{prototype:["basic"],skillType:"range",types:["proj"],specs:[{type:"proj",color:u,quals:[],onHit:[],onKill:[],onRemove:[]}],baseMods:["speed added 500","range added "+s,"physDmg added 2 perLevel"]},"basic spell":{prototype:["basic"],skillType:"spell",types:["proj"],specs:[{type:"proj",color:u,quals:[],onHit:[],onKill:[],onRemove:[]}],baseMods:["speed added 500","range added "+o,"physDmg added 2 perLevel"]},pacifism:{prototype:["basic melee"],types:["melee"],specs:[{type:"melee",quals:["dmg more -100"],color:"#fff"}],baseMods:["speed added 1000","projRadius more -100","physDmg more -100","range added "+i*3],flavor:"Why isn't this working??"},"super smash":{prototype:["basic melee"],baseMods:["manaCost added 3","speed added 800","range added "+i,"physDmg more 10","physDmg more 1 perLevel","physDmg added 2 perLevel"]},"masterful strike":{prototype:["basic melee"],baseMods:["manaCost added 15","speed added 200","cooldownTime added 1000","range added "+i,"physDmg more 20","physDmg more 1 perLevel","physDmg added 5 perLevel"]},"quick hit":{prototype:["basic melee"],baseMods:["manaCost added 3","speed added 250","physDmg more 2 perLevel","range added "+i]},charge:{prototype:["basic melee"],baseMods:["manaCost added 15","speed added 800","cooldownTime added 800","physDmg more 3 perLevel","range added "+i*3]},sweep:{prototype:["basic melee"],specs:[{type:"cone",quals:["projRadius more 10000"]}],baseMods:["manaCost added 8","speed added 400","angle added 165","accuracy more 100","aoeSpeed more 200","aoeRadius more -50","physDmg more 2 perLevel","range added "+i]},"throw weapon":{prototype:["basic melee"],baseMods:["manaCost added 25","speed added 250","cooldownTime added 2000","physDmg more 2.5 perLevel","range added "+s]},"fire slash":{prototype:["basic melee"],types:["melee","fire"],specs:[{type:"melee",color:a}],baseMods:["manaCost added 3","speed added 300","range added "+i,"fireDmg more 2 perLevel","fireDmg added 1 perLevel","physDmg added 1 perLevel","physDmg converted 60 fireDmg"]},"flaming debris":{prototype:["basic melee"],types:["melee","fire"],specs:[{type:"melee",quals:[],onHit:[{type:"proj",color:a,quals:["projCount added 2","dmg more -20"],onKill:[],onRemove:[]}],onKill:[],onRemove:[]}],baseMods:["manaCost added 3","speed added 350","range added "+i,"projRange added "+o,"fireDmg more 1.8 perLevel","fireDmg added 1 perLevel","physDmg added 1 perLevel","physDmg converted 60 fireDmg","projSpeed more -80"]},"exploding strike":{prototype:["basic melee"],types:["melee","fire"],specs:[{type:"melee",quals:[],color:a,onHit:[],onKill:[{type:"circle",color:a,quals:["dmg more 100"],onHit:[{type:"cone",color:a,quals:["dmg more -50"]}],onKill:[],onRemove:[]}],onRemove:[]}],baseMods:["manaCost added 7","speed added 300","range added "+i,"fireDmg added 1 perLevel","physDmg added 1 perLevel","physDmg more 1.7 perLevel","physDmg converted 60 fireDmg","aoeRadius more -40","angle added 60","cooldownTime gainedas 100 physDmg"],flavor:"Creates fiery AoE explosions on kill dealing double damage and triggering fiery cones."},"chain lightning":{prototype:["basic melee"],types:["melee","lightning"],specs:[{type:"melee",quals:[],color:l,onHit:[],onKill:[{type:"circle",color:l,quals:["dmg more 100"],onHit:[{type:"circle",color:l,quals:["dmg more -50"],onHit:[],onKill:[],onRemove:[]}],onKill:[],onRemove:[]}],onRemove:[]}],baseMods:["manaCost added 4","speed added 300","range added "+i,"lightDmg added 1 perLevel","physDmg added 1 perLevel","physDmg more 1.7 perLevel","physDmg converted 60 lightDmg","aoeRadius more -40","cooldownTime gainedas 100 physDmg"],flavor:"Creates chained electical AoE explosions on kill"},"splashing hit":{prototype:["basic melee"],types:["melee"],specs:[{type:"melee",quals:[],color:u,onHit:[{type:"circle",color:u,quals:["dmg more -20"],onHit:[],onKill:[],onRemove:[]}],onKill:[],onRemove:[]}],baseMods:["manaCost added 10","speed added 500","range added "+i,"physDmg more 2 perLevel","physDmg added 1 perLevel","aoeRadius more -60"],flavor:"Creates small AoE explosions on hit"},"blast arrow":{prototype:["basic range"],types:["range"],specs:[{type:"proj",quals:[],color:u,onHit:[{type:"circle",color:u,quals:["dmg more -20"],onHit:[],onKill:[],onRemove:[]}],onKill:[],onRemove:[]}],baseMods:["manaCost added 12","speed added 500","range added "+s,"physDmg more 1.3 perLevel","physDmg added 1 perLevel","physDmg more -40","aoeRadius more -60"],flavor:"Creates small AoE explosions on hit"},"piercing shot":{prototype:["basic range"],types:["range"],specs:[{type:"proj",quals
:[],color:u,onHit:[{type:"proj",color:u,quals:["projCount added -100"],onHit:[{type:"proj",color:u,quals:["projCount added -100"]}],onKill:[],onRemove:[]}],onKill:[],onRemove:[]}],baseMods:["manaCost added 12","speed added 600","range added "+s,"physDmg more 1.3 perLevel","physDmg added 1 perLevel"],flavor:"Pierces up to two enemies"},"explonential shot":{prototype:["basic range"],types:["range"],specs:[{type:"proj",quals:[],color:u,onHit:[{type:"proj",color:u,quals:["projCount added 8","dmg more -50"],onHit:[{type:"proj",quals:["projCount added 8","dmg more -90"],color:u,onHit:[{type:"proj",color:u,quals:["projCount added 8","dmg more -95"]}]}],onKill:[],onRemove:[]}],onKill:[],onRemove:[]}],baseMods:["manaCost added 12","speed added 1000","cooldownTime added 8000","projCount more -100","range added "+s,"physDmg more 1.3 perLevel","physDmg added 1 perLevel","physDmg more -80","angle added 20"],flavor:"Spawns additional projectiles on hit"},shiverstorm:{prototype:["basic spell"],types:["spell"],specs:[{type:"circle",color:f,onHit:[{type:"circle",color:f,quals:["dmg more -50"]}]}],baseMods:["manaCost added 30","speed added 100","cooldownTime added 5000","range added "+o/2,"coldDmg added 3 perLevel","coldDmg more 2 perLevel"]},"plague field":{prototype:["basic spell"],types:["spell"],specs:[{type:"circle",color:c,onHit:[{type:"circle",color:c,quals:["dmg more -50"]}]}],baseMods:["manaCost added 30","speed added 100","cooldownTime added 5000","range added "+o/2,"poisDmg added 3 perLevel","poisDmg more 2 perLevel"]},thunderstorm:{prototype:["basic spell"],types:["spell"],specs:[{type:"circle",color:l,onHit:[{type:"circle",color:l,quals:["dmg more -50"]}]}],baseMods:["manaCost added 30","speed added 100","cooldownTime added 5000","range added "+o/2,"lightDmg added 3 perLevel","lightDmg more 2 perLevel"]},"blazing inferno":{prototype:["basic spell"],types:["spell"],specs:[{type:"circle",color:a,onHit:[{type:"circle",color:a,quals:["dmg more -50"]}]}],baseMods:["manaCost added 30","speed added 100","cooldownTime added 5000","range added "+o/2,"fireDmg added 3 perLevel","fireDmg more 2 perLevel"]},sacrifice:{prototype:["basic spell"],types:["spell"],specs:[{type:"circle",color:"#400",onHit:[{type:"proj",color:"#900"}]}],baseMods:["manaCost added 0","cooldownTime added 30000","speed added 100","accuracy more 1000","aoeSpeed more -80","range added "+o,"physDmg added 100 perLevel","physDmg more 3 perLevel","physDmg gainedas -200 hpOnHit"]},"ground smash":{prototype:["basic melee"],types:["melee","fire"],specs:[{type:"cone",color:a,quals:[],onHit:[{type:"proj",color:a}],onKill:[],onRemove:[]}],baseMods:["manaCost added 3","speed added 400","range added "+i,"fireDmg more 1.5 perLevel","fireDmg added 1 perLevel","physDmg added 1 perLevel","physDmg converted 60 fireDmg","angle more 200","projRange more 500"]},"ice slash":{prototype:["basic melee"],types:["melee","cold"],specs:[{type:"melee",color:f}],baseMods:["manaCost added 5","speed added 300","range added "+i,"coldDmg more 3 perLevel","coldDmg added 1 perLevel","physDmg added 1 perLevel","physDmg converted 60 coldDmg"]},"lightning slash":{prototype:["basic melee"],types:["melee","lightning"],specs:[{type:"melee",color:l}],baseMods:["manaCost added 5","speed added 250","range added "+i,"lightDmg more 2 perLevel","lightDmg added 1 perLevel","physDmg added 1 perLevel","physDmg converted 60 lightDmg"]},"poison slash":{prototype:["basic melee"],types:["melee","poison"],specs:[{type:"melee",color:c}],baseMods:["manaCost added 5","speed added 400","range added "+i,"poisDmg more 2 perLevel","poisDmg added 1 perLevel","physDmg added 1 perLevel","physDmg converted 60 poisDmg"]},"speed shot":{prototype:["basic range"],skillType:"range",types:["proj"],baseMods:["manaCost added 3","physDmg more -35","physDmg added 1 perLevel","physDmg more 1.4 perLevel","speed added 250","range added "+s]},"fire arrow":{prototype:["basic range"],skillType:"range",types:["proj","fire"],specs:[{type:"proj",color:a}],baseMods:["manaCost added 6","speed added 300","range added "+s,"physDmg added 3 perLevel","fireDmg more 1.5 perLevel","physDmg converted 50 fireDmg"]},"cold arrow":{prototype:["basic range"],skillType:"range",types:["proj","cold"],specs:[{type:"proj",color:f}],baseMods:["manaCost added 6","speed added 250","range added "+s,"physDmg added 1.2 perLevel","coldDmg more 3 perLevel","physDmg converted 50 coldDmg"]},"lightning arrow":{prototype:["basic range"],skillType:"range",types:["proj","lightning"],specs:[{type:"proj",color:l}],baseMods:["manaCost added 6","speed added 200","range added "+s,"physDmg added 1 perLevel","lightDmg more 3 perLevel","physDmg converted 50 lightDmg"]},"poison arrow":{prototype:["basic range"],skillType:"range",types:["proj","poison"],specs:[{type:"proj",color:c}],baseMods:["manaCost added 6","speed added 300","range added "+s,"physDmg added 1 perLevel","poisDmg more 3 perLevel","physDmg converted 50 poisDmg"]},headshot:{prototype:["basic"],skillType:"range",types:["proj"],specs:[{type:"proj",color:"#FFF",quals:[],onHit:[],onKill:[],onRemove:[]}],baseMods:["manaCost added 13","speed added 500","range added "+s,"physDmg more 5 perLevel","projSpeed more 200","cooldownTime added 3000"]},incinerate:{prototype:["basic spell"],skillType:"spell",types:["proj","fire","spell"],specs:[{type:"cone",color:a}],baseMods:["manaCost added 7","speed added 300","range added "+o/4,"fireDmg added 2","fireDmg added 1 perLevel","fireDmg more 0.7 perLevel","physDmg converted 100 fireDmg","angle added 30"]},"poison spray":{prototype:["basic spell"],skillType:"spell",types:["cone","pois","spell"],specs:[{type:"cone",color:c}],baseMods:["manaCost added 9","speed added 350","range added "+s*.2,"poisDmg added 4","poisDmg added 1 perLevel","poisDmg more 0.9 perLevel","physDmg converted 100 poisDmg","angle added 30"]},"fire ball":{prototype:["basic spell"],skillType:"spell",types:["proj","fire","spell"],specs:[{type:"proj",color:a,onHit:[{type:"circle",color:a}]}],baseMods:["manaCost added 9","speed added 600","range added "+o,"fireDmg added 3 perLevel","fireDmg added 3","fireDmg more 0.5 perLevel","projRadius more 200","aoeRadius more -70"],flavor:"Goodness gracious, these balls are great!"},"ice ball":{prototype:["basic spell"],skillType:"spell",types:["proj","cold","spell"],specs:[{type:"proj",color:f,onHit:[{type:"circle",color:f}]}],baseMods:["manaCost added 9","speed added 600","range added "+o,"coldDmg added 3 perLevel","coldDmg added 3","coldDmg more 0.5 perLevel","projRadius more 200","aoeRadius more -70"]},"lightning ball":{prototype:["basic spell"],skillType:"spell",types:["proj","lightning","spell"],specs:[{type:"proj",color:l,onHit:[{type:"circle",color:l}]}],baseMods:["manaCost added 9","speed added 600","range added "+o,"lightDmg added 3 perLevel","lightDmg added 3","lightDmg more 0.5 perLevel","projRadius more 200","aoeRadius more -50","projSpeed more 50"]},"poison ball":{prototype:["basic spell"],skillType:"spell",types:["proj","poison","spell"],specs:[{type:"proj",color:c,onHit:[{type:"circle",color:c}]}],baseMods:["manaCost added 16","speed added 1000","range added "+o*.7,"poisDmg added 5 perLevel","poisDmg added 5","poisDmg more 0.5 perLevel","projRadius more 200","aoeRadius more -70"]},"ice blast":{prototype:["basic spell"],skillType:"spell",types:["cone","cold","spell"],specs:[{type:"cone",color:f,quals:[],onHit:[],onKill:[],onRemove:[]}],baseMods:["manaCost added 5","speed added 400","range added "+o/4,"coldDmg added 6","coldDmg added 3 perLevel","coldDmg more 0.7 perLevel","angle added 30"]},"lightning spray":{prototype:["basic spell"],skillType:"spell",types:["cone","lightning","spell"],specs:[{type:"cone",color:l,quals:[],onHit:[],onKill:[],onRemove:[]}],baseMods:["manaCost added 5","speed added 400","range added "+o/4,"lightDmg added 6","lightDmg added 3 perLevel","lightDmg more 0.7 perLevel","angle added 30"]},"pressure wave":{prototype:["basic spell"],skillType:"spell",types:["cone","spell"],specs:[{type:"cone",color:u,quals:[],onHit:[],onKill:[],onRemove:[]}],baseMods:["manaCost added 10","cooldownTime added 300","speed added 500","range added "+o/3,"physDmg added 5 perLevel","aoeSpeed more 300","angle more 300"]},"shadow dagger":{prototype:["basic spell"],skillType:"spell",types:["proj","spell"],specs:[{type:"proj",color:"#000"}],baseMods:["manaCost added 10","cooldownTime added 5000","speed added 200","range added "+o,"physDmg added 10 perLevel"]},"oblivion ray":{prototype:["basic spell"],skillType:"spell",types:["proj","spell"],specs:[{type:"proj",color:"#000"}],baseMods:["manaCost added 20","projRadius more 300","projSpeed more -90","speed added 200","range added "+o*2,"coldDmg added 5 perLevel","lightDmg added 5 perLevel"]},telekinesis:{prototype:["basic spell"],skillType:"spell",types:["proj","spell"],specs:[{type:"proj",color:"#778"}],baseMods:["cooldownTime added 200","speed added 200","range added "+o,"physDmg added 6 perLevel"]},"health suck":{prototype:["basic spell"],skillType:"spell",types:["proj","spell"],baseMods:["manaCost added 25","speed added 700","range added "+o,"physDmg added 9","physDmg added 1 perLevel","physDmg more 0.5 perLevel","physDmg gainedas 1 hpLeech"]},consume:{prototype:["basic melee"],skillType:"melee",types:["proj","spell"],baseMods:["manaCost added 25","speed added 3000","range added "+i*5,"physDmg added 1 perLevel","physDmg more 0.5 perLevel","physDmg gainedas 500 hpLeech"]},nova:{prototype:["basic spell"],skillType:"spell",types:["proj","circle","spell"],specs:[{type:"circle",color:l,quals:[],onHit:[],onKill:[],onRemove:[]}],baseMods:["manaCost added 12","speed added 200","cooldownTime added 200","range added "+o/5,"aoeRadius more -50","lightDmg added 3 perLevel","lightDmg more 1.2 perLevel"]},"fire nova":{prototype:["basic spell"],skillType:"spell",types:["proj","aoecircle","spell"],specs:[{type:"circle",color:a}],baseMods:["manaCost added 12","speed added 200","cooldownTime added 200","range added "+o/5,"fireDmg added 3 perLevel","fireDmg more 1.2 perLevel","aoeRadius more -50"]},"ice nova":{prototype:["basic spell"],skillType:"spell",types:["proj","aoecircle","spell"],specs:[{type:"circle",color:f}],baseMods:["manaCost added 12","speed added 200","cooldownTime added 200","range added "+o/5,"coldDmg added 3 perLevel","coldDmg more 1.2 perLevel","aoeRadius more -50"]},"poison nova":{prototype:["basic spell"],skillType:"spell",types:["proj","aoecircle","spell"],specs:[{type:"circle",color:c}],baseMods:["manaCost added 12","speed added 200","cooldownTime added 200","range added "+o/5,"poisDmg added 3 perLevel","poisDmg more 1.2 perLevel","aoeRadius more -50"]},"holy light":{prototype:["basic spell"],skillType:"spell",types:["proj","aoecircle","spell"],specs:[{type:"circle",color:m}],baseMods:["manaCost added 20","speed added 200","cooldownTime added 200","range added "+o/5,"physDmg added 3 perLevel","physDmg more 1.2 perLevel","aoeRadius more -50"]},"flame cone":{prototype:["basic"],skillType:"melee",types:["cone","melee"],specs:[{type:"cone",color:a,quals:[],onHit:[],onKill:[],onRemove:[]}],baseMods:["manaCost added 5","speed added 200","range added "+i,"aoeRadius more 50","fireDmg added 3 perLevel"]},"lethal strike":{prototype:["basic melee"],skillType:"melee",types:["melee"],baseMods:["manaCost added 20","speed added 200","range added "+i,"physDmg added 1 perLevel","physDmg more 2 perLevel","physDmg more 100","cooldownTime added 3000"]},"deadly volley":{prototype:["basic"],skillType:"range",types:["proj"],specs:[{type:"proj",color:"#FFF",quals:[],onHit:[],onKill:[],onRemove:[]}],baseMods:["speed added 200","range added "+s,"manaCost added 20","physDmg added 1 perLevel","physDmg more 0.5 perLevel","projCount added 16","physDmg more -50","angle more -70","cooldownTime added 3000"]}},card:{"proto-skeleton":{mods:["fireResist more 20"]},"proto-grunt":{mods:["maxHp more -50","physDmg more -30"]},"proto-boss":{mods:["lineWidth added 30","width more 100","height more 100","physDmg more 100","maxHp more 500"]},"proto-bat":{mods:["height more -80"]},"proto-rofl":{mods:["height more -50","width more 300"]},"proto-buddha":{mods:["maxHp more 1 perLevel","accuracy more 1000 perLevel","lineWidth added 300","height more -30","width more 50"]},"proto-acheron":{mods:["range more 70","cooldownTime added 10"]},"proto-colossus":{mods:["cooldownTime more -99","accuracy more 1000000","accuracy added 1000000"]},"proto-tallman":{mods:["height more 200","width more -50"]},sharpened:{mods:["physDmg added 3 perLevel"],slot:"weapon",materials:["handle","metal","blade"]},"faster detonation":{mods:["aoeRadius more 50","speed more -2 perLevel"],slot:"skill",materials:["gargoyle","lichen","business card","energy"]},flash:{mods:["moveSpeed gainedas 3 aoeSpeed","lightDmg more 3 perLevel","lightResist more 3 perLevel"],slot:"weapon",materials:["handle","spark","spark","nightmare","nightmare"],credit:"WirelessKFC"},mobility:{mods:["speed converted 80 cooldownTime","cooldownTime added 100","cooldownTime more 50","cooldownTime more -1 perLevel"],slot:"skill",materials:["energy","wing","converter","gnome"],flavor:"Less Skill Duration means More Moving"},"hot sword":{mods:["fireDmg added 5 perLevel"],slot:"weapon",materials:["handle","ember","metal","blade"]},"cold sword":{mods:["coldDmg added 5 perLevel"],slot:"weapon",materials:["handle","ice","metal","blade"]},breadhat:{mods:["armor added 10 perLevel","armor more 1 perLevel"],slot:"head",materials:["skull","metal","shield"]},"six pack":{mods:["lineWidth added 30","armor added 10 perLevel"],slot:"chest",materials:["heart","metal","shield"]},"steel toed":{mods:["armor added 10 perLevel","armor more 0.5 perLevel","moveSpeed more -30"],slot:"legs",materials:["toe","metal","shield"]},"quenching blade":{mods:["fireResist more 7 perLevel"],slot:"weapon",materials:["handle","ember","shield"]},"enchant weapon":{mods:["eleResistAll more 3 perLevel"],slot:"weapon",materials:["handle","brain","shield"]},"possessed weapon":{mods:["physDmg gainedas 0.5 hpLeech","wisdom more -50","physDmg more 0.5 perLevel"],slot:"weapon",materials:["handle","metal","needle","razor"]},"multi-fingered":{mods:["accuracy more 20","physDmg more 20","accuracy more 1 perLevel","physDmg more 1 perLevel"],slot:"hands",materials:["finger","metal","eye","spike"]},"derping out":{mods:["wisdom more -75","armor more 2 perLevel","dodge more 2 perLevel","eleResistAll more 2 perLevel"],slot:"weapon",materials:["skull","shield","eye","muscle"]},"cool shoes":{mods:["fireResist more 7 perLevel"],slot:"legs",materials:["toe","ember","shield"]},"compression shorts":{mods:["moveSpeed more 30","moveSpeed more 1 perLevel"],slot:"legs",materials:["toe","wing","spike"]},"asbestos lining":{mods:["fireResist more 7 perLevel"],slot:"hands",materials:["finger","ember","shield"]},"sopping underclothes":{mods:["fireResist more 50","coldResist more -50","fireResist more 3 perLevel"],slot:"legs",materials:["toe","ember","shield","razor"]},"brain juice":{mods:["manaRegen added 2 perLevel"],slot:"head",materials:["skull","brain","potion"]},"heart juice":{mods:["hpRegen added 2 perLevel"],slot:"head",materials:["skull","blood","potion"]},"head of vigor":{mods:["vitality added 20 perLevel"],slot:"head",materials:["skull","blood","blade"]},nimble:{mods:["dexterity added 5 perLevel","dexterity added 20"],slot:"chest",materials:["heart","eye","blade"]},bloodsucker:{mods:["physDmg gainedas 0.3 hpLeech","physDmg added 5 perLevel"],slot:"head",materials:["skull","blood","needle","spine"],rarity:"rare"},"strong back":{mods:["strength added 10 perLevel"],slot:"chest",materials:["heart","muscle","blade"]},"holy shield":{mods:["armor converted 20 eleResistAll","armor more 4 perLevel"],slot:"chest",materials:["heart","metal","spike","converter"]},"sacred shield":{mods:["armor gainedas 20 physThorns","physThorns more 2 perLevel"],slot:"chest",materials:["heart","mirror","shield","converter"]},ascended:{mods:["strength more 0.7 perLevel","dexterity more 0.7 perLevel","wisdom more 0.7 perLevel","vitality more 0.7 perLevel"],slot:"chest",materials:["sigil","muscle","brain","eye"]},aura:{mods:["maxHp gainedas 0.5 hpRegen","spellDmg more 2 perLevel"],slot:"chest",materials:["heart","blood","brain","spike"]},thwomping:{mods:["physDmg more 5 perLevel","physDmg more 25","moveSpeed more -50"],slot:"legs",materials:["toe","metal","feather","razor"]},"dancing walk":{mods:["dodge more 30","dodge more 1 perLevel","moveSpeed more -50"],slot:"legs",materials:["toe","feather","razor"]},"dexterous hands":{mods:["dexterity added 5 perLevel"],slot:"hands",materials:["finger","feather","blade"]},dummy:{mods:["moveSpeed added -300"],slot:"head"},fear:{mods:["moveSpeed added -400"],slot:"legs"},"more projectiles":{mods:["projCount added 2","angle more 20","speed more -0.5 perLevel","manaCost added 2"],slot:"skill",materials:["energy","eye","feather","imp head"]},stinging:{mods:["physDmg added 3 perLevel"],slot:"skill",materials:["energy","metal","blade"]},ignited:{mods:["physDmg converted 20 fireDmg","fireDmg more 3 perLevel"],slot:"skill",materials:["energy","ember","spike","converter"]},frosted:{mods:["physDmg converted 20 coldDmg","coldDmg more 3 perLevel"],slot:"skill",materials:["energy","ice","spike","converter"]},charged:{mods:["physDmg converted 20 lightDmg","lightDmg more 3 perLevel"],slot:"skill",materials:["energy","spark","spike","converter"]},putrefied:{mods:["physDmg converted 20 poisDmg","poisDmg more 3 perLevel"],slot:"skill",materials:["energy","spore","spike","converter"]},"heart of granite":{mods:["armor added 5 perLevel","armor more 3 perLevel"],slot:"chest",materials:["heart","metal","blade","spike"]},"small stature":{mods:["height more -30","width more -30","moveSpeed more 1 perLevel","dodge added 50","dodge more 3 perLevel"],slot:"chest",materials:["heart","feather","spike","imp head"]},"keen wit":{mods:["wisdom added 10 perLevel"],slot:"head",materials:["skull","brain","blade"]},textbook:{mods:["wisdom added 10 perLevel"],slot:"hands",materials:["finger","brain","blade"]},electrified:{mods:["lightDmg more 4 perLevel"],slot:"weapon",materials:["handle","spark","spike"]},festering:{mods:["poisDmg more 4 perLevel"],slot:"weapon",materials:["handle","spore","spike"]},blazing:{mods:["fireDmg more 4 perLevel"],slot:"weapon",materials:["handle","ember","spike"]},iced:{mods:["coldDmg more 4 perLevel"],slot:"weapon",materials:["handle","ice","spike"]},flying:{mods:["armor more -20","dodge added 95","dodge added 5 perLevel"],slot:"chest",materials:["heart","feather","razor"]},clawed:{mods:["physDmg added 3 perLevel","physDmg more 10"],slot:"hands",materials:["finger","metal","blade","spike"]},riveted:{mods:["lineWidth added 30","armor more 5 perLevel"],slot:"chest",materials:["heart","metal","shield"]},clockwork:{mods:["physDmg more 5 perLevel","speed more -15"],slot:"chest",materials:["heart","metal","spike","gnome"]},"mecha heart":{mods:["lineWidth added 30","vitality added 5 perLevel","hpRegen added 5 perLevel"],slot:"chest",materials:["heart","blood","blade","potion"]},"steam powered":{mods:["manaRegen added 10 perLevel"],slot:"chest",materials:["heart","brain","potion","gnome"],flavor:"all hail gaben"},"goblin toe":{mods:["armor added 10 perLevel","physDmg more 2 perLevel","physDmg more 25"],slot:"legs",materials:["toe","metal","spike","crag shard"]},berserking:{mods:["physDmg more 20","physDmg more 1 perLevel","speed more -0.3 perLevel","maxHp more -50"],slot:"head",materials:["skull","metal","blood","razor"]},"simple minded":{mods:["spellDmg more -30","strength more 2 perLevel","meleeDmg more 2 perLevel"],slot:"head",materials:["skull","muscle","spike","razor"]},"explosive bolts":{mods:["rangeDmg more 0.5 perLevel","physDmg converted 25 fireDmg"],slot:"skill",types:["range"],materials:["energy","eye","ember","converter"]},shambling:{mods:["moveSpeed more -20","physDmg more 10","physDmg more 3 perLevel"],slot:"chest",materials:["heart","metal","razor"]},"unwashed hands":{mods:["physDmg converted 25 poisDmg","poisDmg more 3 perLevel"],slot:"hands",materials:["finger","spore","converter"]},"icy hands":{mods:["coldDmg more 3 perLevel"],slot:"hands",materials:["finger","ice","spike"]},"charged hands":{mods:["lightDmg more 3 perLevel"],slot:"hands",materials:["finger","spark","spike"]},"hot hands":{mods:["fireDmg more 3 perLevel"],slot:"hands",materials:["finger","ember","spike"]},"indigenous toxins":{mods:["poisDmg more 10","poisDmg added 3 perLevel","poisDmg more 1 perLevel"],slot:"skill",materials:["energy","spore","spike","blade"]},"swamp armor":{mods:["poisResist more 5 perLevel","poisResist more 10"],slot:"chest",materials:["heart","spore","shield"]},big:{mods:["height more 30","width more 30","vitality added 10 perLevel","maxHp more 2 perLevel"],slot:"chest",materials:["heart","blood","muscle","spike"]},colossus:{mods:["height more 200","width more 200","strength more -100","dexterity more -100","wisdom more -100","vitality more -50","cooldownTime added 999999","armor more 3 perLevel","armor gainedas 100 physThorns","fireResist gainedas 100 fireThorns","coldResist gainedas 100 coldThorns","lightResist gainedas 100 lightThorns","poisResist gainedas 100 poisThorns"],slot:"chest",materials:["heart","blood","razor","nightmare"]},"proto-bigger":{mods:["height more 50","width more 50","lineWidth more 50"]},buff:{mods:["width more 30","lineWidth added 30","strength added 5 perLevel","meleeDmg more 3 perLevel","rangeDmg more 3 perLevel","vitality added 3 perLevel"],slot:"chest",materials:["heart","muscle","eye","spike"]},"vampyric touch":{mods:["physDmg gainedas 0.3 hpLeech","physDmg more 2 perLevel"],slot:"hands",materials:["finger","metal","needle","gargoyle"]},"vampyric embrace":{mods:["physDmg gainedas 0.3 hpLeech","physDmg more 3 perLevel"],slot:"chest",materials:["heart","blood","needle","gargoyle"]},soulsucker:{mods:["physDmg gainedas 0.5 manaLeech","physDmg more 2 perLevel"],slot:"head",materials:["skull","metal","brain","needle"]},alabaster:{mods:["armor more 10 perLevel","armor added 100"],slot:"chest",materials:["heart","metal","shield","gargoyle"]},"vest pockets":{mods:["speed more -15","speed more -0.5 perLevel"],slot:"chest",materials:["heart","wing","blade"]},precise:{mods:["speed more 20","physDmg more 10","physDmg more 3 perLevel"],slot:"skill",materials:["energy","metal","razor"]},"fleece lining":{mods:["coldResist more 20","coldResist more 5 perLevel"],slot:"hands",materials:["finger","ice","shield"]},"fur hat":{mods:["coldResist more 20","coldResist more 5 perLevel"],slot:"head",materials:["skull","ice","shield"]},"chinchilla lining":{mods:["coldResist more 20","coldResist more 5 perLevel"],slot:"legs",materials:["toe","ice","shield"]},"yeti fur":{mods:["coldResist more 20","coldResist more 7 perLevel"],slot:"chest",materials:["heart","ice","shield"]},"ice plating":{mods:["armor more 3 perLevel","fireResist more 3 perLevel"],slot:"chest",materials:["heart","ember","metal","shield"]},"blue ice":{mods:["coldDmg gainedas 30 poisDmg","coldDmg more 3 perLevel"],slot:"skill",rarity:"rare",flavor:"I am not in danger, I am the danger.",materials:["energy","spore","converter","wight snow"]},"ice age":{mods:["physDmg converted 100 coldDmg","physDmg more -50","physDmg more 3 perLevel"],slot:"skill",rarity:"rare",credit:"TruePhantom",materials:["energy","ice","converter","wight snow"]},refridgerator:{mods:["lightDmg converted 100 coldDmg","lightDmg more -30","lightDmg more 3 perLevel"],slot:"chest",rarity:"rare",materials:["heart","spark","converter","gnome"]},"cycled attack":{mods:["speed gainedas 250 cooldownTime","speed more -0.3 perLevel"],slot:"hands",rarity:"rare",flavor:"Variety is the spice of life.",materials:["finger","wing","razor","wight snow"]},"chilly powder":{mods:["coldDmg gainedas 30 fireDmg","coldDmg more 5 perLevel"],slot:"skill",rarity:"rare",flavor:"Chilly P is my signature!",materials:["energy","ember","converter","wight snow"]},chemistry:{mods:["fireDmg converted 100 poisDmg","fireDmg more 3 perLevel","fireResist more -50"],slot:"hands",rarity:"rare",flavor:"Science, bitch",materials:["finger","spore","converter","crag shard"]},"shadow walker":{mods:["opacity more -20","dodge added 20 perLevel"],slot:"legs",materials:["toe","feather","shield"]},somnambulate:{mods:["dodge more 3 perLevel"],slot:"legs",materials:["toe","feather","shield"]},"full plating":{mods:["armor added 30 perLevel"],slot:"chest",materials:["heart","metal","shield"]},"hateful blade":{mods:["physDmg gainedas -0.6 hpLeech","physDmg more 20","physDmg more 5 perLevel"],slot:"weapon",materials:["handle","metal","razor","lichen"]},ethereal:{mods:["dodge more 4 perLevel","dodge added 100","opacity more -60"],slot:"hands",materials:["finger","feather","shield","business card"]},invisibility:{mods:["dodge more 3 perLevel","dodge added 100","opacity more -100"],slot:"chest",materials:["heart","feather","shield","nightmare"]},"liquefied body":{mods:["height more -100","moveSpeed more -30","dodge more 100","dodge more 2 perLevel"],slot:"chest",materials:["heart","feather","shield","slime"]},spiked:{mods:["physThorns added 10 perLevel"],slot:"chest",materials:["heart","metal","razor","slime"]},pyromania:{mods:["fireDmg more 8","fireDmg more 5 perLevel","fireDmg gainedas 0.5 hpLeech","fireResist more -50"],slot:"head",rarity:"rare",materials:["skull","ember","needle","spine"]},"life on hit":{mods:["hpOnHit added 1 perLevel"],slot:"skill",materials:["energy","blood","potion"]},"gratifying blow":{mods:["hpOnHit added 3 perLevel","manaCost more 100"],slot:"skill",rarity:"rare",materials:["energy","blood","potion","razor"]},"mana on hit":{mods:["manaOnHit added 2 perLevel"],slot:"skill",materials:["energy","brain","potion"]},"mana drinker":{mods:["manaOnHit added 5 perLevel"],slot:"skill",rarity:"rare",materials:["energy","blood","potion","gnome"]},"potion guzzler":{mods:["hpRegen more 2 perLevel"],slot:"head",materials:["slime","slime","blood"]},"earth commune":{mods:["hpRegen more 2 perLevel"],slot:"legs",materials:["slime","slime","blood"]},blessed:{mods:["hpRegen more 2 perLevel"],slot:"weapon",materials:["handle","blood","potion"]},"hydra blood":{mods:["maxHp more -30","maxHp gainedas 1 hpRegen","poisDmg more 3 perLevel"],slot:"chest",materials:["heart","blood","spore","imp head"]},"faster attacks":{mods:["speed more -25","speed more -0.3 perLevel"],slot:"skill",materials:["energy","wing","blade"]},"more physical damage":{mods:["physDmg more 20","physDmg more 1 perLevel"],slot:"skill",materials:["energy","metal","blade"]},"longer cooldown":{mods:["cooldownTime added 100","cooldownTime more 3 perLevel"],slot:"skill",materials:["energy","wing","razor"]},"shorter cooldown":{mods:["cooldownTime more -1 perLevel"],slot:"skill",materials:["energy","wing","spike"]},"faster propogation":{mods:["aoeSpeed more 2 perLevel"],slot:"skill",materials:["energy","energy","energy","spike"]},"telescoping handle":{mods:["range more 1 perLevel","range more 50"],slot:"weapon",materials:["handle","eye","spike"]},"shorter range":{mods:["range more -5 perLevel"],slot:"skill",materials:["energy","eye","razor"]},"ab shocker belt":{mods:["vitality added 20 perLevel","strength more 1 perLevel","lightResist more -20"],slot:"chest",materials:["heart","blood","muscle","razor"]},bloodfingers:{mods:["vitality added 10 perLevel"],slot:"hands",materials:["finger","blood","blade"]},stimpack:{mods:["hpRegen more 2 perLevel"],slot:"hands",materials:["finger","blood","spike","nightmare"]},"tinfoil hat":{mods:["lightDmg gainedas 0.5 hpLeech","manaRegen more 5 perLevel"],slot:"head",materials:["skull","blood","spike","nightmare"]},manafingers:{mods:["maxMana added 10 perLevel","spellDmg more 0.5 perLevel"],slot:"hands",materials:["finger","brain","blade"]},bloodbath:{mods:["maxHp more 3 perLevel","vitality added 2 perLevel"],slot:"chest",materials:["heart","blood","spike"]},"side arm":{mods:["cooldownTime added 250","speed more -50","speed more -0.3 perLevel"],slot:"skill",materials:["energy","wing","spike","razor"]},practiced:{mods:["physDmg more 15","speed more -20","speed more -0.1 perLevel"],slot:"skill",materials:["energy","metal","wing","spike"]},honed:{mods:["physDmg more 1 perLevel","speed more -0.2 perLevel"],slot:"skill",materials:["energy","metal","spike"]},"fatal blow":{mods:["meleeDmg more 1 perLevel","meleeDmg more 100","cooldownTime added 1000"],slot:"skill",materials:["energy","muscle","razor","gargoyle"]},"finishing move":{mods:["meleeDmg more 200","cooldownTime added 500","speed more 50","speed more -1 perLevel"],slot:"skill",materials:["energy","muscle","razor"]},"long reach":{mods:["range more 40","range more 0.5 perLevel"],slot:"skill",materials:["energy","eye","spike"]},frugal:{mods:["manaCost added -1 perLevel"],slot:"skill",materials:["energy","brain","shield"]},stingy:{mods:["manaCost added -3 perLevel","speed more 50"],slot:"skill",materials:["energy","brain","razor"]},"short sighted":{mods:["manaCost more -5 perLevel","range more -60"],slot:"skill",materials:["energy","brain","razor"]},"divine assistance":{mods:["manaCost more -100","cooldownTime added 1000","speed more -2 perLevel"],slot:"skill",materials:["energy","wing","razor"]},micronaps:{mods:["cooldownTime more -20","cooldownTime more -0.5 perLevel"],slot:"skill",materials:["energy","wing","blade"]},"healing charm":{mods:["manaRegen added -5 perLevel","hpRegen added 10 perLevel"],slot:"chest",materials:["heart","blood","potion","razor"]},"blood pact":{mods:["manaRegen added 10 perLevel","hpRegen added -5 perLevel"],slot:"head",materials:["skull","brain","potion","razor"]},vengeful:{mods:["maxHp gainedas -2 hpRegen","meleeDmg more 30","meleeDmg more 1 perLevel"],slot:"head",materials:["skull","muscle","potion","razor"]},"painful phylactery":{mods:["maxHp gainedas -6 hpRegen","maxHp gainedas 2 hpOnHit","hpRegen more -2 perLevel"],slot:"head",materials:["skull","blood","razor","lichen"],flavor:"Lich, Please!"},"deadly focus":{mods:["projCount converted 100 spellDmg","spellDmg more -30","spellDmg more 1 perLevel"],slot:"skill",materials:["energy","brain","converter","razor"]},undeath:{mods:["speed more 50","hpOnHit added 50","spellDmg more 1 perLevel"],slot:"chest",materials:["heart","brain","potion","razor"]},"soul channeling":{mods:["maxHp more -50","spellDmg more 30","spellDmg more 1 perLevel"],slot:"head",materials:["skull","brain","potion","razor"]},"arcane thirst":{mods:["maxHp more -25","maxMana gainedas 5 hpOnHit","maxMana more 1 perLevel"],slot:"hands",materials:["finger","brain","potion","razor"]},"jet pack":{mods:["moveSpeed more 50","moveSpeed more 4 perLevel","dodge more -50","armor more -50"],slot:"chest",flavor:"Burning out his fuse up here alone",materials:["heart","wing","razor"]},"cold blooded":{mods:["coldDmg more 30","fireDmg more -30","coldResist more 20","fireResist more -20","coldResist more 2 perLevel","coldDmg more 3 perLevel"],slot:"chest",flavor:"Ice-water in his veins...",materials:["heart","ice","spike","razor"]},"hot blooded":{mods:["coldDmg more -30","fireDmg more 30","coldResist more -20","fireResist more 20","fireResist more 2 perLevel","fireDmg more 3 perLevel"],slot:"chest",flavor:"Magma in his veins...",materials:["heart","ember","spike","razor"]},"semi automatic":{mods:["cooldownTime more -20","cooldownTime more -1 perLevel"],slot:"weapon",flavor:"NOW I HAVE A MACHINE GUN HO-HO-HO",materials:["handle","wing","spike"]},"careful aim":{mods:["physDmg more 50","cooldownTime added 3000","physDmg more 2 perLevel","accuracy more 100","manaCost more 100"],slot:"skill",flavor:"Ready... Aim... FIRE!",materials:["energy","metal","razor"]},"conductive suit":{mods:["lightDmg more 20","lightResist more 5 perLevel","lightDmg more 2 perLevel"],slot:"chest",flavor:"Fortunately the path of least resistance is no longer through your heart.",materials:["heart","spark","spike","shield"]},mageheart:{mods:["spellDmg more 30","spellDmg more 3 perLevel"],slot:"chest",materials:["heart","brain","spike"]},antibiotics:{mods:["poisResist more 20","poisResist more 5 perLevel"],slot:"hands",materials:["finger","spore","shield"]},"forest spirit":{mods:["maxHp gainedas 0.5 hpRegen","maxHp more 1 perLevel"],slot:"head",materials:["skull","blood","potion","spike"]},"armor plating":{mods:["armor added 10 perLevel","armor more 2 perLevel"],slot:"hands",materials:["finger","metal","shield"]},"diamond dust":{mods:["armor added 50","armor more 5 perLevel"],slot:"hands",materials:["finger","metal","shield"]},"mind expansion":{mods:["wisdom more 1 perLevel","wisdom gainedas 100 maxMana"],slot:"head",materials:["skull","brain","brain","spike"]},concentration:{mods:["angle more -50","speed more 35","wisdom added 30","wisdom added 3 perLevel"],slot:"hands",materials:["finger","brain","blade","gnome"]},unwavering
:{mods:["dexterity converted 100 accuracy","accuracy more 1000","accuracy more 5 perLevel"],slot:"legs",materials:["toe","eye","razor","elf ear"]},clarity:{mods:["wisdom converted 30 accuracy","wisdom more 1 perLevel"],slot:"head",materials:["skull","brain","converter","gnome"]},deathwish:{mods:["eleResistAll more -90","eleResistAll more -2 perLevel","spellDmg more 10 perLevel"],slot:"chest",materials:["heart","brain","razor","lichen"]},capacitor:{mods:["cooldownTime gainedas 100 lightDmg","lightDmg more 1 perLevel"],slot:"skill",materials:["energy","wing","converter","spark"]},"ice breath":{mods:["wisdom converted 30 coldDmg","wisdom more 1 perLevel"],slot:"head",materials:["skull","brain","converter","ice"]},"well grounded":{mods:["wisdom gainedas 30 lightDmg","wisdom more 1 perLevel"],slot:"head",materials:["skull","brain","converter","spark"]},"roller skates":{mods:["moveSpeed more 2 perLevel"],slot:"legs",materials:["toe","wing","spike"]},"prismatic toe ring":{mods:["eleResistAll added 100","eleResistAll added 5 perLevel"],slot:"legs",materials:["toe","brain","shield"]},"hobbit foot":{mods:["maxHp more 10","maxHp more 1 perLevel"],slot:"legs",materials:["toe","blood","spike"]},"clown shoes":{mods:["vitality added 10 perLevel","maxHp more 1 perLevel","moveSpeed more -30"],slot:"legs",materials:["toe","blood","razor"]},"happy feet":{mods:["vitality added 10 perLevel","maxHp more 20"],slot:"legs",materials:["toe","blood","spike","blade"]},"ice spikes":{mods:["coldResist more 10","coldResist more 5 perLevel","coldDmg added 3 perLevel"],slot:"legs",materials:["toe","spike","ice","shield"]},"extreme odor":{mods:["poisDmg more 30","poisDmg more 3 perLevel"],slot:"legs",materials:["toe","spore","spike"]},firewalker:{mods:["fireDmg more 30","fireDmg more 3 perLevel"],slot:"legs",materials:["toe","ember","spike"]},"static socks":{mods:["lightDmg more 30","lightDmg more 3 perLevel"],slot:"legs",materials:["toe","spark","spike"]},"knee pads":{mods:["armor more 10","armor more 0.5 perLevel"],slot:"legs",materials:["toe","metal","shield"]},"hazmat boots":{mods:["eleResistAll more 5 perLevel"],slot:"legs",materials:["toe","brain","shield"]},"rubber boots":{mods:["lightResist more 10","lightResist more 5 perLevel"],slot:"legs",materials:["toe","spark","shield"]},"good circulation":{mods:["maxHp more 20","vitality added 5 perLevel"],slot:"legs",materials:["toe","blood","spike","blade"]},"reduced radius":{mods:["aoeRadius more -50","speed more -10","speed more -0.1 perLevel"],slot:"skill",materials:["energy","brain","wing","razor"]},"increased radius":{mods:["aoeRadius more 50","aoeRadius more 1 perLevel","manaCost more 100"],slot:"skill",materials:["energy","brain","wing","razor"]},"potion holster":{mods:["vitality more 2 perLevel","vitality more 20"],slot:"hands",materials:["finger","blood","blade"]},"liquefied brain":{mods:["maxMana more -100","wisdom gainedas 60 vitality","vitality more 2 perLevel"],slot:"head",materials:["skull","slime","slime","slime","slime","slime"]},"flame ritual":{mods:["fireDmg gainedas 0.75 hpLeech","fireDmg more 1 perLevel"],slot:"skill",materials:["energy","ember","needle"]},"frost ritual":{mods:["coldDmg gainedas 0.75 hpLeech","coldDmg more 1 perLevel"],slot:"skill",materials:["energy","ice","needle"]},"shock ritual":{mods:["lightDmg gainedas 0.75 hpLeech","lightDmg more 1 perLevel"],slot:"skill",materials:["energy","spark","needle"]},"plague ritual":{mods:["poisDmg gainedas 0.75 hpLeech","poisDmg more 1 perLevel"],slot:"skill",materials:["energy","spore","needle"]},pyropotency:{mods:["fireDmg more 25","fireDmg more 1 perLevel"],slot:"skill",materials:["energy","ember","spike"]},frigopotency:{mods:["coldDmg more 25","coldDmg more 1 perLevel"],slot:"skill",materials:["energy","ice","spike"]},electropotency:{mods:["lightDmg more 25","lightDmg more 1 perLevel"],slot:"skill",materials:["energy","spark","spike"]},toxopotency:{mods:["poisDmg more 25","poisDmg more 1 perLevel"],slot:"skill",materials:["energy","spore","spike"]},"sure footing":{mods:["accuracy more 3 perLevel"],slot:"legs",materials:["toe","feather","spike"]},"steady hands":{mods:["accuracy more 3 perLevel"],slot:"hands",materials:["finger","feather","spike"]},imaginary:{mods:["dodge more 3 perLevel"],slot:"weapon",materials:["handle","feather","spike","nightmare"]},"planet buster":{mods:["projRadius more 200","spellDmg more 100","spellDmg more 5 perLevel","cooldownTime added 3000","manaCost more 100"],slot:"skill",materials:["energy","brain","spike","wight snow"]},"nanotube reinforcement":{mods:["armor more 5 perLevel"],slot:"weapon",materials:["handle","metal","shield"]},"pinpoint precision":{mods:["accuracy more 1 perLevel","rangeDmg more 20"],slot:"weapon",materials:["handle","feather","eye","elf ear"]},fletching:{mods:["rangeDmg more 3 perLevel"],slot:"weapon",materials:["handle","feather","eye","sigil"]},strafing:{mods:["projCount added 2","accuracy more -30","speed more -30","rangeDmg more -30","rangeDmg more 3 perLevel"],slot:"weapon",materials:["handle","feather","eye","spike"]},"swift hands":{mods:["speed more -14.6","speed more -0.4 perLevel"],slot:"hands",materials:["finger","feather","eye","spike"]},"war horse":{mods:["moveSpeed more 0.2 perLevel","meleeDmg more 2 perLevel"],slot:"chest",materials:["heart","muscle","spike","sigil"]},swashbuckling:{mods:["strength more 1 perLevel","dexterity more 1 perLevel"],slot:"weapon",materials:["handle","muscle","eye","spike"]},"soft weapons":{mods:["dexterity more 2 perLevel"],slot:"weapon",materials:["handle","eye","spike","sigil"]},"demonic split":{mods:["speed more 666","spellDmg more -66","projCount added 6","cooldownTime more -0.6 perLevel"],slot:"weapon",materials:["handle","brain","feather","sigil"]},"minimum tolerances":{mods:["accuracy more 1.5 perLevel","accuracy more 20"],slot:"weapon",materials:["handle","feather","spike"]},"hazmat suit":{mods:["eleResistAll more 5 perLevel"],slot:"chest",materials:["heart","brain","shield"]},"hazmat gloves":{mods:["eleResistAll more 5 perLevel"],slot:"hands",materials:["finger","brain","shield"]},"hazmat mask":{mods:["eleResistAll more 5 perLevel"],slot:"head",materials:["skull","brain","shield"]},"face training":{mods:["strength more 5 perLevel"],slot:"head",materials:["skull","muscle","spike"]},"cosmic channeling":{mods:["spellDmg more 50","rangeDmg more 50","meleeDmg more 50","cooldownTime added 2000","aoeSpeed more -50","aoeRadius more 5 perLevel","aoeSpeed more 1 perLevel"],slot:"skill",materials:["muscle","eye","brain","razor"]},"electricians gloves":{mods:["lightResist more 6 perLevel"],slot:"hands",materials:["finger","spark","shield"]},"basket hilt":{mods:["armor more 5 perLevel"],slot:"weapon",materials:["handle","metal","shield"]},accurate:{mods:["accuracy more 50","accuracy more 1 perLevel"],slot:"skill",materials:["energy","feather","spike"]},balanced:{mods:["dexterity more 1.5 perLevel"],slot:"head",materials:["skull","eye","spike","feather"]},"grabby arm":{mods:["range more 0.5 perLevel","range more 30"],slot:"hands",materials:["finger","eye","spike"]},bushido:{mods:["meleeDmg more 0.5 perLevel","armor more 0.5 perLevel","dodge more 0.5 perLevel","eleResistAll more 1 perLevel"],slot:"head",materials:["muscle","brain","eye","shield"]},jovial:{mods:["lineWidth added 60","maxHp more 30","maxHp more 0.75 perLevel","moveSpeed more -30"],slot:"head",materials:["skull","blood","spike","razor"]},"proto-slime":{mods:["manaCost more -100","lineWidth added 500","height more -50","maxHp gainedas 20 hpLeech"]},"proto-corpse":{mods:["moveSpeed more -100"]},impenetrable:{mods:["dodge more -50","armor more 50","armor more 1 perLevel"],slot:"chest",materials:["heart","metal","shield","razor"]},meditation:{mods:["eleResistAll more 10","eleResistAll more 1 perLevel","maxHp gainedas 0.5 hpRegen"],slot:"head",materials:["skull","brain","blood","potion"]},"more balls":{mods:["projCount added 2","projRadius more 100","projRadius more 2.5 perLevel"],slot:"legs",materials:["toe","eye","blade","business card"]},"ninja stance":{mods:["dexterity gainedas 0.2 moveSpeed","dexterity more 1 perLevel","range more -35","cooldownTime added 25"],slot:"legs",materials:["toe","eye","wing","razor"]},"smart footing":{mods:["wisdom gainedas 0.1 moveSpeed","wisdom more 1 perLevel","speed more 25"],slot:"legs",materials:["toe","brain","wing","razor"]},momentum:{mods:["moveSpeed gainedas 100 projSpeed","projSpeed more 1 perLevel"],slot:"legs",materials:["toe","eye","wing","spike"]},overdraw:{mods:["projSpeed more 1 perLevel"],slot:"weapon",materials:["handle","wing","spike"]},"eagle eye":{mods:["accuracy more 30","accuracy more 1 perLevel"],slot:"head",materials:["skull","feather","spike"]},"quick reaction":{mods:["dodge more 30","dodge more 1 perLevel"],slot:"head",materials:["skull","feather","shield"]},"titan's grip":{mods:["strength added 10 perLevel"],slot:"hands",materials:["finger","muscle","blade","slime"],designCredit:"Virakai"}},monster:{skeleton:{items:[["weapon","cardboard sword"],["armor","balsa helmet"],["armor","t-shirt"],["armor","jeans"],["armor","latex gloves"]],skills:["basic melee"],sourceCards:[["proto-skeleton",0],["breadhat",1],["bloodbath",1]],color:m},"fire skeleton":{items:[["weapon","cardboard sword"],["armor","balsa helmet"],["armor","t-shirt"],["armor","jeans"],["armor","latex gloves"]],skills:["lethal strike","fire slash","super smash","basic melee"],sourceCards:[["hot sword",1],["proto-skeleton",0],["six pack",1],["compression shorts",1],["asbestos lining",1],["basket hilt",1]],color:h},"skeleton archer":{items:[["weapon","wooden bow"],["armor","t-shirt"],["armor","latex gloves"],["armor","balsa helmet"],["armor","jeans"]],skills:["speed shot","basic range"],sourceCards:[["proto-skeleton",0],["head of vigor",1],["bloodfingers",1],["mana on hit",1],["sharpened",1]],color:m,moveAngle:45},"skeleton mage":{items:[["weapon","simple wand"],["armor","velvet tunic"],["armor","mage hat"],["armor","mage boots"],["armor","mage gloves"]],skills:["fire ball","basic spell"],sourceCards:[["proto-skeleton",0],["brain juice",1],["heart juice",1],["life on hit",1]],color:m},"skeleton warmage":{items:[["weapon","demon wand"],["armor","war robe"],["armor","mage hat"],["armor","mage boots"],["armor","mage gloves"]],skills:["shadow dagger","fire ball"],sourceCards:[["big",1],["buff",1],["proto-skeleton",0],["brain juice",1],["heart juice",1],["life on hit",1],["long reach",1],["deadly focus",1],["telescoping handle",1],["more projectiles",1],["mageheart",1]],color:m,minLevel:200,moveAngle:75},"skeleton champion":{items:[["weapon","winged axe"],["armor","elegant plate"],["armor","crusader helm"],["armor","buckaneer boots"],["armor","polished gauntlets"]],skills:["lethal strike","fire slash","quick hit"],sourceCards:[["big",1],["buff",1],["ninja stance",1],["proto-skeleton",0],["alabaster",1],["riveted",1],["clockwork",1],["clawed",1],["balanced",1],["faster attacks",1],["long reach",1],["telescoping handle",1]],color:m,minLevel:200,moveAngle:-30},"skeleton highlord":{items:[["weapon","winged axe"],["armor","elegant plate"],["armor","crusader helm"],["armor","buckaneer boots"],["armor","polished gauntlets"]],skills:["lethal strike","fire slash","quick hit"],sourceCards:[["big",1],["buff",1],["ninja stance",1],["proto-skeleton",0],["alabaster",1],["riveted",1],["clockwork",1],["clawed",1],["balanced",1],["faster attacks",1],["long reach",1],["telescoping handle",1],["stinging",1],["armor plating",1],["knee pads",1],["breadhat",1]],color:m,minLevel:500,moveAngle:-30},"skeleton pyromage":{items:[["weapon","dragonstone wand"],["armor","velvet tunic"],["armor","mage hat"],["armor","mage boots"],["armor","mage gloves"]],skills:["incinerate","fire ball","basic spell"],sourceCards:[["proto-skeleton",0],["life on hit",2],["mana on hit",2],["pyromania",1],["ignited",1],["pyropotency",1],["armor plating",1],["knee pads",1],["breadhat",1],["riveted",1],["clockwork",1],["clawed",1]],rarity:"rare",color:m,moveAngle:-30,minLevel:400},"skeleton embermage":{items:[["weapon","simple wand"],["armor","velvet tunic"],["armor","mage hat"],["armor","mage boots"],["armor","mage gloves"]],skills:["incinerate","fire ball","basic spell"],sourceCards:[["proto-skeleton",0],["life on hit",2],["mana on hit",2],["pyromania",1]],rarity:"rare",color:m,moveAngle:-30},"skeleton king":{items:[["weapon","hand axe"],["armor","collander"],["armor","leatherscale armor"],["armor","gardening gloves"],["armor","leather boots"]],skills:["lethal strike","super smash","basic melee"],sourceCards:[["proto-skeleton",1],["proto-boss",1],["hot sword",3],["sharpened",1],["precise",1],["life on hit",4],["telescoping handle",2],["stinging",4]],color:m},"wood nymph":{items:[["weapon","cardboard sword"],["armor","scout leather"],["armor","balsa helmet"],["armor","latex gloves"],["armor","leather boots"]],skills:["basic melee"],sourceCards:[["small stature",1],["compression shorts",1],["life on hit",2],["hobbit foot",1],["accurate",1],["stinging",1]],color:b},bat:{items:[["weapon","cardboard sword"],["armor","batsuit"],["armor","latex gloves"],["armor","leather boots"],["armor","balsa helmet"]],skills:["quick hit","basic melee"],sourceCards:[["proto-bat",1],["nimble",1],["bloodsucker",1],["life on hit",1],["clawed",1],["simple minded",1],["good circulation",1]],color:y},ent:{items:[["weapon","cardboard sword"],["armor","conquistador helm"],["armor","leatherplate armor"],["armor","arcane boots"],["armor","gardening gloves"]],skills:["super smash","basic melee"],sourceCards:[["strong back",2],["thwomping",2],["precise",1],["accurate",1],["forest spirit",1],["hobbit foot",1],["sharpened",1]],color:b,moveAngle:-10},elf:{items:[["weapon","elf bow"],["armor","t-shirt"],["armor","elf boots"],["armor","leather gloves"],["armor","dodgers cap"]],skills:["poison arrow","speed shot","basic range"],sourceCards:[["dexterous hands",1],["balanced",1],["accurate",1],["nimble",1],["steady hands",1],["pinpoint precision",1]],rarity:"rare",color:g,moveAngle:70},"elf marksman":{items:[["weapon","elf bow"],["armor","t-shirt"],["armor","elf boots"],["armor","leather gloves"],["armor","dodgers cap"]],skills:["poison arrow","speed shot","basic range"],sourceCards:[["dexterous hands",1],["balanced",1],["accurate",1],["nimble",1],["steady hands",1],["pinpoint precision",1],["unwavering",1]],rarity:"rare",color:g,moveAngle:70,minLevel:200},"elf king":{items:[["weapon","composite bow"],["armor","scout leather"],["armor","elf boots"],["armor","dodgers cap"],["armor","goldenscale gauntlets"]],skills:["deadly volley","poison arrow","speed shot"],sourceCards:[["proto-boss",0],["dexterous hands",2],["bloodsucker",1],["balanced",1],["accurate",1],["sure footing",1],["steady hands",1],["pinpoint precision",1],["steam powered",1],["sharpened",1],["precise",1]],flavor:"He knows you've been naughty",color:g},dummy:{items:[],skills:[],sourceCards:[["dummy",0]]},"fire golem":{items:[["weapon","long sword"],["armor","gladiator helm"],["armor","leatherscale armor"],["armor","handmail"],["armor","arcane boots"]],skills:["blazing inferno","ground smash","fire slash"],sourceCards:[["heart of granite",1],["ignited",1],["flame ritual",1],["pyropotency",1],["hot blooded",1],["pyromania",1],["hot sword",1],["alabaster",1],["ignited",1],["goblin toe",1],["minimum tolerances",1],["sharpened",1],["stinging",1],["momentum",1]],rarity:"rare",color:h},"ice golem":{items:[["weapon","long sword"],["armor","gladiator helm"],["armor","leatherscale armor"],["armor","handmail"],["armor","arcane boots"]],skills:["ice slash","basic melee"],sourceCards:[["heart of granite",1],["frosted",1],["frost ritual",1]],rarity:"rare",color:p},"shock golem":{items:[["weapon","long sword"],["armor","gladiator helm"],["armor","leatherscale armor"],["armor","handmail"],["armor","arcane boots"]],skills:["thunderstorm","lightning slash","basic melee"],sourceCards:[["heart of granite",1],["shock ritual",1],["electropotency",1],["charged hands",1],["conductive suit",1],["static socks",1],["tinfoil hat",1]],rarity:"rare",color:d},"toxic golem":{items:[["weapon","long sword"],["armor","gladiator helm"],["armor","leatherscale armor"],["armor","handmail"],["armor","arcane boots"]],skills:["plague field","poison spray","poison nova"],sourceCards:[["heart of granite",1],["festering",1],["plague ritual",1],["putrefied",1],["cosmic channeling",1],["increased radius",1],["hazmat suit",1],["hazmat gloves",1],["hazmat mask",1],["semi automatic",1],["healing charm",1],["blood pact",1],["faster propogation",1],["extreme odor",1]],rarity:"rare",color:v},gnome:{items:[["weapon","falchion"],["armor","gladiator helm"],["armor","leatherscale armor"],["armor","handmail"],["armor","arcane boots"]],skills:["lightning slash","quick hit","chain lightning","basic melee"],sourceCards:[["small stature",1],["keen wit",1],["conductive suit",1],["shock ritual",1],["enchant weapon",1],["static socks",1]],color:A},"gnome electrician":{items:[["weapon","simple wand"],["armor","velvet tunic"],["armor","gladiator helm"],["armor","handmail"],["armor","arcane boots"]],skills:["lightning ball","nova","basic spell"],sourceCards:[["small stature",1],["keen wit",1],["electrified",1],["healing charm",3],["blood pact",3],["conductive suit",1],["shock ritual",1],["rubber boots",1],["electricians gloves",1],["enchant weapon",1]],rarity:"rare",color:A,moveAngle:60},"gnome chuck testa":{items:[["weapon","simple wand"],["armor","velvet tunic"],["armor","gladiator helm"],["armor","handmail"],["armor","arcane boots"]],skills:["lightning ball","nova","basic spell"],sourceCards:[["small stature",1],["keen wit",1],["electrified",1],["healing charm",3],["blood pact",3],["conductive suit",1],["shock ritual",1],["rubber boots",1],["electricians gloves",1],["enchant weapon",1],["well grounded",1],["capacitor",1]],rarity:"rare",color:A,moveAngle:60,minLevel:500},roflcopter:{items:[["weapon","hand axe"],["armor","gladiator helm"],["armor","leatherscale armor"],["armor","handmail"],["armor","arcane boots"]],skills:["pressure wave","quick hit","basic melee"],sourceCards:[["flying",1],["nimble",1],["proto-rofl",1],["clown shoes",1],["happy feet",1],["possessed weapon",1],["faster propogation",1]],color:u,moveAngle:65},harpy:{items:[["weapon","winged axe"],["armor","crusader helm"],["armor","winged leather"],["armor","handmail"],["armor","arcane boots"]],skills:["pressure wave","quick hit","basic melee"],sourceCards:[["flying",1],["nimble",1],["clawed",1],["eagle eye",1],["quick reaction",1]],color:T,moveAngle:-25},mechcinerator:{items:[["weapon","pewter wand"],["armor","gladiator helm"],["armor","leatherscale armor"],["armor","handmail"],["armor","arcane boots"]],skills:["incinerate","fire nova","basic spell"],sourceCards:[["mobility",1],["riveted",1],["clockwork",1],["mecha heart",1],["ignited",1],["steam powered",1],["jet pack",1],["flame ritual",1],["nanotube reinforcement",1],["minimum tolerances",1],["blazing",1],["hot hands",1],["firewalker",1]],rarity:"rare",color:u,moveAngle:-65},mechfridgerator:{items:[["weapon","pewter wand"],["armor","gladiator helm"],["armor","leatherscale armor"],["armor","handmail"],["armor","arcane boots"]],skills:["ice blast","ice nova","basic spell"],sourceCards:[["refridgerator",1],["mobility",1],["riveted",1],["clockwork",1],["mecha heart",1],["frosted",1],["steam powered",1],["frost ritual",1],["nanotube reinforcement",1],["minimum tolerances",1],["iced",1],["icy hands",1]],rarity:"rare",color:u,moveAngle:-65},"mecha watt":{items:[["weapon","pewter wand"],["armor","gladiator helm"],["armor","leatherscale armor"],["armor","handmail"],["armor","arcane boots"]],skills:["lightning ball","nova","basic spell"],sourceCards:[["mobility",1],["riveted",1],["clockwork",1],["mecha heart",1],["charged",1],["steam powered",1],["conductive suit",1],["shock ritual",1],["nanotube reinforcement",1],["minimum tolerances",1],["static socks",1],["charged hands",1]],rarity:"rare",color:u,moveAngle:65},"mecha tank":{items:[["weapon","pewter wand"],["armor","gladiator helm"],["armor","leatherscale armor"],["armor","handmail"],["armor","arcane boots"]],skills:["lightning ball","nova"],sourceCards:[["mobility",1],["riveted",1],["clockwork",1],["mecha heart",1],["charged",1],["steam powered",1],["conductive suit",1],["shock ritual",1],["nanotube reinforcement",1],["minimum tolerances",1],["static socks",1],["charged hands",1],["proto-boss",1],["alabaster",1],["riveted",1],["clown shoes",1],["thwomping",1],["meditation",1],["forest spirit",1],["jovial",1],["good circulation",1]],rarity:"rare",color:u,moveAngle:65,minLevel:250},"sir mechs-a-lot":{items:[["weapon","long sword"],["armor","gladiator helm"],["armor","leatherscale armor"],["armor","handmail"],["armor","arcane boots"]],skills:["ground smash","lightning ball","ice nova","basic melee"],sourceCards:[["proto-boss",1],["riveted",1],["clockwork",1],["mecha heart",1],["charged",1],["steam powered",4],["frosted",1],["ignited",1],["shock ritual",1],["roller skates",1],["nanotube reinforcement",1],["minimum tolerances",1]],color:u},goblin:{items:[["weapon","spikey mace"],["armor","goblin leather"],["armor","handmail"],["armor","gladiator helm"],["armor","buckaneer boots"]],skills:["ground smash","flaming debris","basic melee"],sourceCards:[["goblin toe",1],["berserking",1],["simple minded",1],["armor plating",1],["knee pads",1],["sopping underclothes",1],["quenching blade",1],["more physical damage",1],["faster attacks",1]],color:w},"goblin priest":{items:[["weapon","knobby wand"],["armor","goblin leather"],["armor","mage gloves"],["armor","mage hat"],["armor","mage boots"]],skills:["fire ball","incinerate","basic spell"],sourceCards:[["goblin toe",1],["berserking",1],["simple minded",1],["precise",1],["pyromania",1],["hot blooded",1],["cool shoes",1],["blazing",1],["firewalker",1]],rarity:"rare",color:w,moveAngle:85},"goblin artillery":{items:[["weapon","crossbow"],["armor","goblin leather"],["armor","conquistador helm"],["armor","leather boots"],["armor","handmail"]],skills:["blast arrow","fire arrow","basic range"],sourceCards:[["goblin toe",1],["berserking",1],["simple minded",1],["ignited",2],["hot blooded",1],["sharpened",1],["pinpoint precision",1],["faster attacks",1],["more physical damage",1]],color:w},"goblin bombardier":{items:[["weapon","sunfury bow"],["armor","goblin leather"],["armor","conquistador helm"],["armor","leather boots"],["armor","handmail"]],skills:["blast arrow","fire arrow","basic range"],sourceCards:[["faster detonation",1],["faster attacks",1],["goblin toe",1],["berserking",1],["simple minded",1],["ignited",2],["hot blooded",1],["sharpened",1],["pinpoint precision",1],["faster attacks",1],["more physical damage",1]],color:w,minLevel:500},"goblin barbarian":{items:[["weapon","barbarian blade"],["armor","goblin leather"],["armor","handmail"],["armor","gladiator helm"],["armor","buckaneer boots"]],skills:["ground smash","flaming debris","exploding strike"],sourceCards:[["big",1],["buff",1],["strong back",1],["face training",1],["goblin toe",1],["berserking",1],["armor plating",1],["knee pads",1],["sopping underclothes",1],["quenching blade",1],["hot hands",1]],minLevel:200,color:w},"the inhuman torch":{items:[["weapon","dragonstone wand"],["armor","fancy gauntlets"],["armor","velvet tunic"],["armor","arcane boots"],["armor","mage hat"]],skills:["fire ball","incinerate","basic spell"],sourceCards:[["ignited",3],["proto-boss",1],["pyromania",2],["keen wit",3],["brain juice",3],["mana on hit",3],["telescoping handle",3],["hot blooded",1],["flame ritual",1],["increased radius",1]],color:h},zombie:{items:[["weapon","long sword"],["armor","gladiator helm"],["armor","iron chestplate"],["armor","leather boots"],["armor","handmail"]],skills:["poison slash","basic melee"],sourceCards:[["unwashed hands",1],["shambling",1],["simple minded",1],["knee pads",1],["hazmat boots",1]],color:b},"angry imp":{items:[["weapon","long sword"],["armor","gladiator helm"],["armor","iron chestplate"],["armor","leather boots"],["armor","handmail"]],skills:["poison slash","quick hit","basic melee"],sourceCards:[["berserking",1],["small stature",1],["simple minded",1],["indigenous toxins",1],["antibiotics",1],["happy feet",1]],color:L},"dart imp":{items:[["weapon","hand crossbow"],["armor","plague doctor"],["armor","iron chestplate"],["armor","leather boots"],["armor","handmail"]],skills:["poison arrow","speed shot","basic range"],sourceCards:[["berserking",1],["small stature",1],["simple minded",1],["indigenous toxins",1],["putrefied",1],["more projectiles",1],["antibiotics",1],["plague ritual",1],["overdraw",1]],color:L,moveAngle:-75},"imp shaman":{items:[["weapon","star wand"],["armor","plague doctor"],["armor","iron chestplate"],["armor","leather boots"],["armor","handmail"]],skills:["poison ball","poison spray","poison nova","basic spell"],sourceCards:[["berserking",1],["small stature",1],["simple minded",1],["indigenous toxins",1],["antibiotics",1],["plague ritual",1],["potion holster",1],["increased radius",1],["pinpoint precision",1]],rarity:"rare",color:L,moveAngle:-75},hydra:{items:[["weapon","star wand"],["armor","plague doctor"],["armor","iron chestplate"],["armor","leather boots"],["armor","handmail"]],skills:["poison ball","poison spray","poison nova","basic spell"],sourceCards:[["hydra blood",1],["festering",1],["faster attacks",1],["berserking",1],["big",1],["buff",1],["simple minded",1],["indigenous toxins",1],["antibiotics",1],["plague ritual",1],["potion holster",1],["increased radius",1],["pinpoint precision",1]],rarity:"rare",color:L,moveAngle:-75,minLevel:300},"imp chieftain":{items:[["weapon","star wand"],["armor","plague doctor"],["armor","iron chestplate"],["armor","leather boots"],["armor","handmail"]],skills:["poison ball","poison spray","poison nova","basic spell"],sourceCards:[["berserking",1],["small stature",1],["simple minded",1],["indigenous toxins",1],["antibiotics",1],["plague ritual",1],["potion holster",1],["increased radius",1],["pinpoint precision",1],["smart footing",1],["toxopotency",1],["faster attacks",1],["unwashed hands",1]],rarity:"rare",color:L,moveAngle:-75,minLevel:500},marshwalker:{items:[["weapon","long sword"],["armor","iron chestplate"],["armor","leather boots"],["armor","handmail"],["armor","gladiator helm"]],skills:["poison slash","poison nova","basic melee"],sourceCards:[["indigenous toxins",1],["swamp armor",1],["good circulation",1],["happy feet",1],["plague ritual",1],["hazmat boots",1],["potion holster",1],["hobbit foot",1],["reduced radius",1],["putrefied",1],["extreme odor",1]],color:C,moveAngle:75},"mad ape":{items:[["weapon","stone hammer"],["armor","iron chestplate"],["armor","leather boots"],["armor","handmail"],["armor","gladiator helm"]],skills:["super smash","basic melee"],sourceCards:[["big",1],["berserking",1],["buff",1],["clown shoes",1],["happy feet",1],["good circulation",1],["potion holster",1]],color:T},"scalp collector":{items:[["weapon","compound bow"],["armor","plague doctor"],["armor","iron chestplate"],["armor","leather boots"],["armor","handmail"]],skills:["headshot","speed shot"],sourceCards:[["side arm",1],["indigenous toxins",1],["putrefied",1],["precise",1],["vest pockets",1],["semi automatic",1],["antibiotics",1],["bloodsucker",1],["plague ritual",1],["sharpened",1],["telescoping handle",1],["soulsucker",1],["potion holster",1]],color:A,moveAngle:135},"swamp thing":{items:[["weapon","long sword"],["armor","plague doctor"],["armor","raider armor"],["armor","elf boots"],["armor","leather gloves"]],skills:["sweep","throw weapon"],sourceCards:[["proto-boss",1],["unwashed hands",1],["indigenous toxins",1],["swamp armor",1],["faster attacks",1],["festering",1],["good circulation",1],["plague ritual",1],["hobbit foot",1],["putrefied",1],["shorter cooldown",1],["micronaps",1],["toxopotency",1],["increased radius",1],["semi automatic",20],["basket hilt",1],["vampyric embrace",1],["buff",1],["vampyric touch",1],["minimum tolerances",1],["steady hands",1],["goblin toe",1],["shadow walker",1],["steam powered",3]],color:v},"frost skeleton":{items:[["weapon","long sword"],["armor","balsa helmet"],["armor","iron chestplate"],["armor","buckaneer boots"],["armor","handmail"]],skills:["ice slash","basic melee"],sourceCards:[["cold sword",1],["proto-skeleton",0],["six pack",1],["compression shorts",1],["fleece lining",1],["ice spikes",1]],color:p},"frost mage":{items:[["weapon","knobby wand"],["armor","mage hat"],["armor","embroidered silks"],["armor","mage boots"],["armor","mage gloves"]],skills:["ice blast","ice nova","ice ball","basic spell"],sourceCards:[["fleece lining",1],["frosted",1],["keen wit",1],["fur hat",1],["cold blooded",1],["frost ritual",1]],color:p,moveAngle:45},"shiver spirit":{items:[["weapon","knobby wand"],["armor","mage hat"],["armor","embroidered silks"],["armor","mage boots"],["armor","mage gloves"]],skills:["ice ball","basic spell"],sourceCards:[["fleece lining",1],["iced",1],["ice spikes",1],["icy hands",1],["frosted",1],["fur hat",1],["frost ritual",1],["planet buster",1],["minimum tolerances",1]],rarity:"rare",color:p,moveAngle:135},"frozen warrior":{items:[["weapon","long sword"],["armor","gladiator helm"],["armor","iron chestplate"],["armor","leather boots"],["armor","handmail"]],skills:["ice slash","basic melee"],sourceCards:[["fleece lining",1],["frosted",1],["chinchilla lining",1],["ice plating",1],["good circulation",1],["frost ritual",1],["sure footing",1]],color:E,moveAngle:30},"frost goliath":{items:[["weapon","barbarian blade"],["armor","gladiator helm"],["armor","iron chestplate"],["armor","leather boots"],["armor","handmail"]],skills:["ice slash","basic melee"],sourceCards:[["fleece lining",1],["frosted",1],["chinchilla lining",1],["ice plating",1],["good circulation",1],["frost ritual",1],["sure footing",1],["cold blooded",1],["proto-boss",1],["ice spikes",1],["side arm",1],["clown shoes",1],["clown shoes",1],["riveted",1],["alabaster",1],["knee pads",1],["thwomping",1],["big",1],["frosted",1],["ice age",1]],color:E,moveAngle:20,minLevel:250},yeti:{items:[["weapon","long sword"],["armor","gladiator helm"],["armor","iron chestplate"],["armor","leather boots"],["armor","handmail"]],skills:["super smash","basic melee"],sourceCards:[["big",1],["fleece lining",1],["frosted",1],["chinchilla lining",1],["clawed",1],["yeti fur",1],["cold blooded",1],["happy feet",1],["good circulation",1],["hobbit foot",1],["prismatic toe ring",1]],color:m},wight:{items:[["weapon","delicate wand"],["armor","gladiator helm"],["armor","iron chestplate"],["armor","leather boots"],["armor","handmail"]],skills:["ice blast","ice nova","ice ball","basic spell"],sourceCards:[["fleece lining",1],["frosted",1],["fur hat",1],["ethereal",1],["shadow walker",1],["mind expansion",1],["frost ritual",1],["mageheart",1],["icy hands",1]],color:M,moveAngle:80},"walter wight":{items:[["weapon","star wand"],["armor","mage hat"],["armor","embroidered silks"],["armor","mage boots"],["armor","mage gloves"]],skills:["ice blast","ice nova","ice ball","basic spell"],sourceCards:[["proto-boss",0],["fleece lining",1],["frosted",1],["blue ice",3],["fur hat",1],["ethereal",1],["shadow walker",1],["keen wit",4],["mana on hit",3],["frost ritual",1],["prismatic toe ring",1],["increased radius",1],["hazmat boots",1],["hazmat gloves",1],["hazmat suit",1],["hazmat mask",1]],color:M},"jesse blueman":{items:[["weapon","star wand"],["armor","mage hat"],["armor","buckaneer boots"],["armor","elegant plate"],["armor","polished gauntlets"]],skills:["shiverstorm","ice ball"],sourceCards:[["proto-boss",0],["more balls",1],["fleece lining",1],["blue ice",3],["fur hat",1],["alabaster",1],["riveted",1],["pinpoint precision",1],["minimum tolerances",1],["semi automatic",1],["basket hilt",1],["nanotube reinforcement",1],["keen wit",1],["steam powered",1],["cold blooded",1],["pyromania",1],["ignited",1],["chilly powder",1],["chemistry",1],["plague ritual",1],["increased radius",1],["good circulation",1],["clown shoes",1]],rarity:"boss",minLevel:75,color:_},slagathor:{items:[["weapon","barbarian blade"],["armor","apollo helmet"],["armor","polished gauntlets"],["armor","elegant plate"],["armor","leather boots"]],skills:["fire slash","ice slash","poison slash","lightning slash","shadow dagger"],sourceCards:[["proto-boss",1],["cycled attack",1],["alabaster",1],["riveted",1],["knee pads",1],["armor plating",1],["breadhat",1],["meditation",1],["basket hilt",1],["nanotube reinforcement",1],["faster attacks",1],["clawed",1],["sharpened",1],["stinging",1],["practiced",1],["hateful blade",1],["soulsucker",1],["goblin toe",1],["long reach",1],["side arm",1],["telescoping handle",1],["roller skates",1]],color:m,rarity:"boss",moveAngle:45},"shadow knight":{items:[["weapon","long sword"],["armor","apollo helmet"
],["armor","polished gauntlets"],["armor","shadow armor"],["armor","buckaneer boots"]],skills:["masterful strike","basic melee","shadow dagger"],sourceCards:[["shadow walker",1],["full plating",1],["sharpened",1],["hateful blade",1],["quick reaction",1],["armor plating",1],["steel toed",1],["good circulation",1],["prismatic toe ring",1],["basket hilt",1],["sure footing",1],["steady hands",1]],rarity:"rare",color:y,moveAngle:0},"death knight":{items:[["weapon","long sword"],["armor","apollo helmet"],["armor","polished gauntlets"],["armor","shadow armor"],["armor","buckaneer boots"]],skills:["masterful strike","basic melee","shadow dagger"],sourceCards:[["proto-boss",1],["ninja stance",1],["balanced",1],["shadow walker",1],["full plating",1],["hateful blade",1],["quick reaction",1],["armor plating",1],["steel toed",1],["good circulation",1],["prismatic toe ring",1],["basket hilt",1],["sure footing",1],["steady hands",1]],rarity:"rare",color:y,moveAngle:35,minLevel:300},ghoul:{items:[["weapon","long sword"],["armor","apollo helmet"],["armor","polished gauntlets"],["armor","studded leather"],["armor","buckaneer boots"]],skills:["super smash","basic melee"],sourceCards:[["shambling",1],["simple minded",1],["bloodsucker",1],["careful aim",1]],color:b},vampire:{items:[["weapon","demon wand"],["armor","apollo helmet"],["armor","polished gauntlets"],["armor","shadow armor"],["armor","buckaneer boots"]],skills:["health suck","basic spell"],sourceCards:[["vampyric touch",1],["vampyric embrace",1],["bloodsucker",1],["soulsucker",1],["shadow walker",1],["flying",1],["mind expansion",1],["practiced",1],["bloodfingers",1],["mageheart",1]],color:S,moveAngle:-90},"living statue":{items:[["weapon","spiked battle axe"],["armor","apollo helmet"],["armor","polished gauntlets"],["armor","shadow armor"],["armor","buckaneer boots"]],skills:["super smash","basic melee"],sourceCards:[["diamond dust",1],["heart of granite",1],["simple minded",1],["alabaster",1],["accurate",1],["clown shoes",1],["happy feet",1],["bloodfingers",1],["face training",1]],color:m,moveAngle:0},gargoyle:{items:[["weapon","long sword"],["armor","apollo helmet"],["armor","polished gauntlets"],["armor","raider armor"],["armor","buckaneer boots"]],skills:["super smash","basic melee"],sourceCards:[["heart of granite",1],["simple minded",1],["alabaster",1],["clawed",1],["flying",1],["sharpened",1]],color:E,moveAngle:0},minotaur:{items:[["weapon","morning star"],["armor","apollo helmet"],["armor","polished gauntlets"],["armor","muscle plate"],["armor","buckaneer boots"]],skills:["splashing hit","super smash","basic melee"],sourceCards:[["simple minded",1],["big",1],["buff",1],["hobbit foot",1],["good circulation",1],["potion holster",1],["happy feet",1],["basket hilt",1],["possessed weapon",1]],color:E,moveAngle:0},acheron:{items:[["weapon","hand axe"],["armor","plague doctor"],["armor","polished gauntlets"],["armor","war robe"],["armor","arcane boots"]],skills:["quick hit"],sourceCards:[["proto-boss",0],["proto-acheron",1],["telescoping handle",1],["roller skates",1],["practiced",1],["vest pockets",1],["dexterous hands",1],["pinpoint precision",1],["ethereal",1],["small stature",1],["frosted",1],["ignited",1],["pyromania",1],["simple minded",1],["unwashed hands",1],["blue ice",1],["vampyric touch",1],["grabby arm",1],["long reach",1],["hateful blade",1]]},wraith:{items:[["weapon","long sword"],["armor","apollo helmet"],["armor","polished gauntlets"],["armor","elegant plate"],["armor","buckaneer boots"]],skills:["ice slash","basic melee"],sourceCards:[["berserking",1],["flying",1],["ethereal",1],["hobbit foot",1],["good circulation",1],["happy feet",1],["vampyric touch",1]],color:S,moveAngle:60},CFTS:{items:[["weapon","hand crossbow"],["armor","dodgers cap"],["armor","raider armor"],["armor","leather gloves"],["armor","buckaneer boots"]],skills:["blast arrow"],sourceCards:[["side arm",1],["buff",1],["bloodbath",1],["nimble",1],["gratifying blow",1],["clockwork",1],["shambling",1],["ethereal",1],["dexterous hands",1],["balanced",1],["quick reaction",1],["hobbit foot",1],["thwomping",1],["shadow walker",1],["happy feet",1],["increased radius",1],["more projectiles",1],["practiced",1],["faster attacks",1],["accurate",1]],rarity:"boss",minLevel:150},"elf sharpshooter":{items:[["weapon","hand crossbow"],["armor","dodgers cap"],["armor","leather gloves"],["armor","shadow armor"],["armor","elf boots"]],skills:["explonential shot","speed shot"],sourceCards:[["side arm",1],["small stature",1],["nimble",1],["steady hands",1],["dexterous hands",1],["balanced",1],["quick reaction",1],["eagle eye",1],["bloodsucker",1],["thwomping",1],["sure footing",1],["shadow walker",1],["ninja stance",1],["semi automatic",1],["minimum tolerances",1],["pinpoint precision",1],["more projectiles",1],["faster attacks",1]],minLevel:100,rarity:"boss",color:m},umuri:{items:[["weapon","hand crossbow"],["armor","dodgers cap"],["armor","leather gloves"],["armor","shadow armor"],["armor","elf boots"]],skills:["fire arrow","cold arrow","lightning arrow","poison arrow"],sourceCards:[["forest spirit",1],["cycled attack",1],["clockwork",1],["steady hands",1],["dexterous hands",1],["ethereal",1],["longer cooldown",1],["clawed",1],["soulsucker",1],["balanced",1],["eagle eye",1],["bloodsucker",1],["sure footing",1],["shadow walker",1],["ninja stance",1],["minimum tolerances",1],["pinpoint precision",1],["accurate",1],["precise",1],["pyropotency",1],["frigopotency",1],["electropotency",1],["toxopotency",1],["plague ritual",1],["flame ritual",1],["frost ritual",1],["shock ritual",1]],minLevel:100,rarity:"boss",color:m},"dahd djinn":{items:[["weapon","fairy wand"],["armor","scout leather"],["armor","elf boots"],["armor","leather gloves"],["armor","balsa helmet"]],skills:["pressure wave"],sourceCards:[["dexterous hands",1],["faster propogation",1],["practiced",1],["clown shoes",1],["telescoping handle",1],["accurate",1],["steady hands",1],["increased radius",1],["flying",1],["ethereal",1],["shadow walker",1],["balanced",1],["stinging",1],["precise",1],["faster attacks",1],["long reach",1],["grabby arm",1],["frugal",1]],minLevel:50,rarity:"boss",color:u,moveAngle:75},"ser djinn":{items:[["weapon","fairy wand"],["armor","embroidered silks"],["armor","mage boots"],["armor","mage gloves"],["armor","mage hat"]],skills:["lightning ball"],sourceCards:[["dexterous hands",1],["clown shoes",1],["telescoping handle",1],["accurate",1],["steady hands",1],["flying",1],["ethereal",1],["shadow walker",1],["charged",1],["conductive suit",1],["electrified",1],["shock ritual",1],["planet buster",1],["semi automatic",1],["faster attacks",1],["long reach",1],["grabby arm",1],["momentum",1]],minLevel:50,rarity:"boss",color:d},"kei djinn":{items:[["weapon","fairy wand"],["armor","embroidered silks"],["armor","mage boots"],["armor","mage gloves"],["armor","mage hat"]],skills:["fire ball"],sourceCards:[["dexterous hands",1],["blazing",1],["clown shoes",1],["telescoping handle",1],["accurate",1],["steady hands",1],["flying",1],["ethereal",1],["shadow walker",1],["ignited",1],["pyromania",1],["flame ritual",1],["planet buster",1],["semi automatic",1],["faster attacks",1],["long reach",1],["grabby arm",1],["frugal",1],["momentum",1]],minLevel:50,rarity:"boss",color:h},"al-err djinn":{items:[["weapon","fairy wand"],["armor","embroidered silks"],["armor","mage boots"],["armor","mage gloves"],["armor","plague doctor"]],skills:["poison ball"],sourceCards:[["dexterous hands",1],["clown shoes",1],["telescoping handle",1],["accurate",1],["steady hands",1],["flying",1],["ethereal",1],["shadow walker",1],["putrefied",1],["unwashed hands",1],["plague ritual",1],["indigenous toxins",1],["planet buster",1],["semi automatic",1],["faster attacks",1],["long reach",1],["grabby arm",1],["frugal",1],["momentum",1]],minLevel:50,rarity:"boss",color:v},"frow djinn":{items:[["weapon","fairy wand"],["armor","embroidered silks"],["armor","mage boots"],["armor","mage gloves"],["armor","mage hat"]],skills:["ice ball"],sourceCards:[["dexterous hands",1],["clown shoes",1],["telescoping handle",1],["accurate",1],["steady hands",1],["flying",1],["ethereal",1],["shadow walker",1],["frosted",1],["frost ritual",1],["blue ice",1],["planet buster",1],["semi automatic",1],["faster attacks",1],["long reach",1],["grabby arm",1],["frugal",1],["momentum",1]],minLevel:50,rarity:"boss",color:p},buddha:{items:[["armor","kabuto"],["armor","buckaneer boots"],["armor","elegant plate"],["armor","polished gauntlets"]],skills:["pacifism"],sourceCards:[["blessed",1],["proto-buddha",1],["big",1],["buff",1],["riveted",1],["jovial",1],["impenetrable",1],["meditation",1],["roller skates",1],["mind expansion",1],["frugal",1]],color:x},ninja:{items:[["weapon","tanto"],["armor","kabuto"],["armor","ninja tabi"],["armor","shadow armor"],["armor","leather gloves"]],skills:["lethal strike","quick hit"],sourceCards:[["shadow walker",1],["good circulation",1],["prismatic toe ring",1],["basket hilt",1],["sure footing",1],["steady hands",1],["balanced",1],["accurate",1],["ninja stance",1],["semi automatic",1],["pinpoint precision",1],["simple minded",1],["bloodsucker",1],["soulsucker",1],["long reach",1],["telescoping handle",1],["compression shorts",1]],color:y,moveAngle:-50},"ninja assassin":{items:[["weapon","yumi"],["armor","kabuto"],["armor","ninja tabi"],["armor","shadow armor"],["armor","leather gloves"]],skills:["headshot","piercing shot"],sourceCards:[["shadow walker",1],["good circulation",1],["prismatic toe ring",1],["basket hilt",1],["sure footing",1],["steady hands",1],["balanced",1],["accurate",1],["ninja stance",1],["precise",1],["stinging",1]],color:y,moveAngle:-65},samurai:{items:[["weapon","katana"],["armor","kabuto"],["armor","fancy gauntlets"],["armor","leatherscale armor"],["armor","buckaneer boots"]],skills:["super smash","quick hit"],sourceCards:[["semi automatic",1],["knee pads",1],["sharpened",1],["quick reaction",1],["good circulation",1],["prismatic toe ring",1],["basket hilt",1],["sure footing",1],["steady hands",1],["balanced",1],["accurate",1],["pinpoint precision",1],["stinging",1],["clawed",1],["precise",1],["honed",1],["bushido",1]],color:N,moveAngle:20},"fallen samurai":{items:[["weapon","wakizashi"],["armor","kabuto"],["armor","fancy gauntlets"],["armor","leatherscale armor"],["armor","buckaneer boots"]],skills:["lethal strike","super smash"],sourceCards:[["semi automatic",1],["hateful blade",1],["sharpened",1],["quick reaction",1],["good circulation",1],["prismatic toe ring",1],["basket hilt",1],["sure footing",1],["steady hands",1],["balanced",1],["accurate",1],["pinpoint precision",1],["clawed",1],["honed",1],["bushido",1]],color:N},tanuki:{items:[["weapon","shuriken"],["armor","balsa helmet"],["armor","leatherscale armor"],["armor","leather boots"],["armor","handmail"]],skills:["headshot","speed shot","basic range"],sourceCards:[["berserking",1],["small stature",1],["simple minded",1],["more projectiles",1],["more balls",1],["ninja stance",1],["precise",1],["practiced",1],["sharpened",1],["stinging",1]],rarity:"rare",color:T,moveAngle:45},"walking meat":{items:[["weapon","morning star"],["armor","balsa helmet"],["armor","t-shirt"],["armor","jeans"],["armor","latex gloves"]],skills:["super smash"],sourceCards:[["deathwish",1],["small stature",1],["berserking",1],["vengeful",1],["soul channeling",1],["arcane thirst",1],["basket hilt",1],["nanotube reinforcement",1],["knee pads",1],["eagle eye",1],["sure footing",1],["steady hands",1],["minimum tolerances",1]],color:O,moveAngle:40},lich:{items:[["weapon","demon wand"],["armor","lichgaze"],["armor","cultist robe"],["armor","arcane boots"],["armor","mage gloves"]],skills:["fire ball","ice ball","lightning ball","poison ball"],sourceCards:[["meditation",1],["textbook",1],["more projectiles",1],["manafingers",1],["cycled attack",1],["painful phylactery",1],["deadly focus",1],["undeath",1],["soul channeling",1],["arcane thirst",1],["blood pact",1],["alabaster",1],["riveted",1],["basket hilt",1],["nanotube reinforcement",1],["knee pads",1],["eagle eye",1],["sure footing",1],["steady hands",1],["minimum tolerances",1]],rarity:"rare",color:E,moveAngle:60},"ice lich":{items:[["weapon","demon wand"],["armor","lichgaze"],["armor","cultist robe"],["armor","arcane boots"],["armor","mage gloves"]],skills:["ice ball"],sourceCards:[["deathwish",1],["more projectiles",1],["manafingers",1],["painful phylactery",1],["deadly focus",1],["undeath",1],["soul channeling",1],["blood pact",1],["alabaster",1],["riveted",1],["basket hilt",1],["nanotube reinforcement",1],["knee pads",1],["eagle eye",1],["sure footing",1],["steady hands",1],["minimum tolerances",1],["clarity",1],["ice breath",1]],rarity:"boss",color:E,moveAngle:60,minLevel:500},"withering goliath":{items:[["weapon","morning star"],["armor","gladiator helm"],["armor","muscle plate"],["armor","raider armor"],["armor","fancy gauntlets"]],skills:["sweep"],sourceCards:[["side arm",1],["jovial",1],["bloodbath",1],["bloodfingers",1],["big",1],["big",1],["big",1],["thwomping",1],["alabaster",1],["riveted",1],["basket hilt",1],["nanotube reinforcement",1],["knee pads",1],["practiced",1],["vengeful",1],["vengeful",1],["painful phylactery",1],["blood pact",1],["eagle eye",1],["sure footing",1],["steady hands",1],["minimum tolerances",1]],color:N},"tormented colossus":{items:[["weapon","morning star"],["armor","gladiator helm"],["armor","muscle plate"],["armor","raider armor"],["armor","fancy gauntlets"]],skills:["pacifism"],sourceCards:[["proto-colossus",1],["jovial",1],["bloodbath",1],["bloodfingers",1],["thwomping",1],["clown shoes",1],["basket hilt",1],["blood pact",1],["colossus",1]],color:N,minLevel:500},abomination:{items:[["weapon","demon wand"],["armor","gladiator helm"],["armor","muscle plate"],["armor","raider armor"],["armor","fancy gauntlets"]],skills:["sacrifice","health suck"],sourceCards:[["soulsucker",1],["big",1],["buff",1],["manafingers",1],["alabaster",1],["basket hilt",1],["nanotube reinforcement",1]],color:C},"lichie lich":{items:[["weapon","demon wand"],["armor","lichgaze"],["armor","cultist robe"],["armor","arcane boots"],["armor","mage gloves"]],skills:["fire ball","ice ball","lightning ball","poison ball"],sourceCards:[["proto-boss",1],["textbook",1],["more projectiles",1],["more balls",1],["manafingers",1],["cycled attack",1],["mana drinker",1],["shorter cooldown",1],["painful phylactery",1],["deadly focus",1],["undeath",1],["soul channeling",1],["arcane thirst",1],["blood pact",1],["big",1],["alabaster",1],["riveted",1],["basket hilt",1],["nanotube reinforcement",1],["knee pads",1],["eagle eye",1],["sure footing",1],["steady hands",1],["minimum tolerances",1]],color:E,moveAngle:80},"treasure hunter":{items:[["weapon","magic wand"],["armor","cultist robe"],["armor","foot plate"]],skills:["shiverstorm","basic spell"],sourceCards:[["concentration",1],["textbook",1],["dancing walk",1],["divine assistance",1],["gratifying blow",1],["more physical damage",1],["longer cooldown",1],["shorter cooldown",1],["shorter range",1],["ab shocker belt",1],["side arm",1],["mana drinker",1],["fatal blow",1],["finishing move",1],["stingy",1],["manafingers",1],["micronaps",1],["pyropotency",1],["frigopotency",1],["electropotency",1],["toxopotency",1]]},"the z":{items:[["weapon","composite bow"],["armor","dragonscale"],["armor","elf boots"],["armor","dodgers cap"],["armor","leather gloves"]],skills:["deadly volley"],sourceCards:[["concentration",1],["cycled attack",1],["textbook",1],["gratifying blow",1],["more physical damage",1],["shorter cooldown",1],["longer cooldown",1],["side arm",1],["mana drinker",1],["stingy",1],["short sighted",1],["manafingers",1],["micronaps",1],["pyropotency",1],["pinpoint precision",1],["explosive bolts",1],["frigopotency",1],["electropotency",1],["toxopotency",1],["fatal blow",1],["finishing move",1]],rarity:"rare",minLevel:150},slime:{items:[["weapon","katana"],["armor","gooey gaberdine"],["armor","gooey gibus"],["armor","gooey gauntlets"],["armor","foot plate"]],skills:["consume"],sourceCards:[["proto-slime",1],["liquefied brain",1],["mobility",1],["faster attacks",1],["shorter cooldown",1],["potion guzzler",1],["earth commune",1],["forest spirit",1]],deathSpawns:["baby slime","baby slime"],color:v,rarity:"slime"},"baby slime":{items:[["weapon","katana"],["armor","gooey gaberdine"],["armor","gooey gibus"],["armor","gooey gauntlets"],["armor","foot plate"]],skills:["consume","basic melee"],sourceCards:[["proto-slime",1],["proto-bat",1],["small stature",1],["liquefied brain",1],["mobility",1],["faster attacks",1],["shorter cooldown",1],["potion guzzler",1],["earth commune",1],["forest spirit",1]],deathSpawns:[],color:v,rarity:"slime"},"big slime":{items:[["weapon","katana"],["armor","gooey gaberdine"],["armor","gooey gibus"],["armor","gooey gauntlets"],["armor","foot plate"]],skills:["consume"],sourceCards:[["proto-slime",1],["proto-bigger",1],["proto-bigger",1],["liquefied brain",1],["mobility",1],["faster attacks",1],["shorter cooldown",1],["potion guzzler",1],["earth commune",1],["forest spirit",1]],deathSpawns:["slime","slime"],color:v,minLevel:200,rarity:"slime"},"huge slime":{items:[["weapon","katana"],["armor","gooey gaberdine"],["armor","gooey gibus"],["armor","gooey gauntlets"],["armor","foot plate"]],skills:["consume"],sourceCards:[["proto-slime",1],["proto-bigger",1],["proto-bigger",1],["proto-bigger",1],["liquefied brain",1],["mobility",1],["faster attacks",1],["shorter cooldown",1],["potion guzzler",1],["earth commune",1],["forest spirit",1]],deathSpawns:["big slime","big slime"],color:v,minLevel:500,rarity:"slime"},"gigantic slime":{items:[["weapon","katana"],["armor","gooey gaberdine"],["armor","gooey gibus"],["armor","gooey gauntlets"],["armor","foot plate"]],skills:["consume"],sourceCards:[["proto-slime",1],["proto-bigger",1],["proto-bigger",1],["proto-bigger",1],["proto-bigger",1],["liquefied brain",1],["jovial",1],["mobility",1],["faster attacks",1],["shorter cooldown",1],["potion guzzler",1],["earth commune",1],["forest spirit",1]],deathSpawns:["huge slime","huge slime"],color:v,minLevel:1e3,rarity:"slime"},"adventurer's corpse":{items:[["weapon","katana"],["armor","cultist robe"],["armor","foot plate"]],skills:["pacifism"],sourceCards:[["proto-slime",1],["proto-corpse",1]],deathSpawns:["adventuring slime","adventuring slime"],color:D},"adventuring slime":{items:[["weapon","barbarian blade"],["armor","gooey gaberdine"],["armor","gooey gibus"],["armor","gooey gauntlets"],["armor","foot plate"]],skills:["consume"],sourceCards:[["proto-slime",1],["roller skates",1],["shorter cooldown",1],["micronaps",1],["clawed",1],["sharpened",1],["stinging",1],["clockwork",1],["small stature",1],["semi automatic",1],["titan's grip",1],["liquefied brain",1],["mobility",1],["faster attacks",1],["shorter cooldown",1]],color:v,moveAngle:-45,rarity:"rare"},"angry puddle":{items:[["weapon","katana"],["armor","gooey gaberdine"],["armor","gooey gibus"],["armor","gooey gauntlets"],["armor","foot plate"]],skills:["consume"],sourceCards:[["frugal",1],["proto-bigger",1],["big",1],["liquefied brain",1],["liquefied body",1],["spiked",1],["mobility",1],["faster attacks",1],["shorter cooldown",1]],color:v,minLevel:200,rarity:"rare"},"king slime":{items:[["weapon","katana"],["armor","gooey gaberdine"],["armor","gooey gibus"],["armor","gooey gauntlets"],["armor","foot plate"]],skills:["consume"],sourceCards:[["proto-slime",1],["proto-boss",1],["proto-bigger",1],["proto-bigger",1],["big",1],["liquefied brain",1],["mobility",1],["faster attacks",1],["shorter cooldown",1]],deathSpawns:["big slime","big slime","big slime","big slime","big slime","big slime","big slime","big slime","big slime","big slime"],color:v},baku:{items:[["weapon","dream eater"],["armor","gladiator helm"],["armor","muscle plate"],["armor","polished gauntlets"],["armor","foot plate"]],skills:["super smash"],sourceCards:[["long reach",1],["clawed",1],["ninja stance",1],["face training",1],["balanced",1],["armor plating",1],["ethereal",1],["derping out",1],["small stature",1],["compression shorts",1]],color:T},succubus:{items:[["weapon","succubus skull"],["armor","gladiator helm"],["armor","muscle plate"],["armor","polished gauntlets"],["armor","foot plate"]],skills:["telekinesis","health suck"],sourceCards:[["somnambulate",1],["mageheart",1],["ninja stance",1],["face training",1],["balanced",1],["armor plating",1],["flying",1],["dancing walk",1],["charged",1],["multi-fingered",1],["faster attacks",1],["electrified",1],["static socks",1]],color:T,moveAngle:30},incubus:{items:[["weapon","succubus skull"],["armor","gladiator helm"],["armor","muscle plate"],["armor","polished gauntlets"],["armor","foot plate"]],skills:["telekinesis","health suck"],sourceCards:[["mageheart",1],["frosted",1],["micronaps",1],["face training",1],["balanced",1],["armor plating",1],["flying",1],["dancing walk",1],["multi-fingered",1],["faster attacks",1],["iced",1],["ice spikes",1],["stimpack",1]],color:T,moveAngle:-30},"freddy kooler":{items:[["weapon","succubus skull"],["armor","gladiator helm"],["armor","muscle plate"],["armor","polished gauntlets"],["armor","foot plate"]],skills:["ice nova","telekinesis","health suck"],sourceCards:[["proto-boss",1],["mageheart",1],["clawed",1],["sharpened",1],["stinging",1],["frosted",1],["micronaps",1],["face training",1],["balanced",1],["armor plating",1],["flying",1],["dancing walk",1],["multi-fingered",1],["faster attacks",1],["iced",1],["ice spikes",1]],color:T,minLevel:500,rarity:"boss"},"lucid dreamer":{items:[["weapon","succubus skull"],["armor","dodgers cap"],["armor","shadow armor"],["armor","leather gloves"],["armor","ninja tabi"]],skills:["fire nova","ice nova","nova","poison nova"],sourceCards:[["balanced",1],["mageheart",1],["cycled attack",1],["faster attacks",1],["increased radius",1],["micronaps",1],["face training",1],["balanced",1],["armor plating",1],["ethereal",1],["quick reaction",1],["dancing walk",1],["multi-fingered",1],["derping out",1]],color:k},"your biggest fear":{items:[["weapon","succubus skull"],["armor","gladiator helm"],["armor","muscle plate"],["armor","polished gauntlets"],["armor","foot plate"]],skills:["fire ball","ice ball","lightning ball","poison ball"],sourceCards:[["mageheart",1],["cycled attack",1],["faster attacks",1],["increased radius",1],["micronaps",1],["face training",1],["balanced",1],["armor plating",1],["ethereal",1],["multi-fingered",1],["quick reaction",1],["invisibility",1],["imaginary",1]],color:k},"tall man":{items:[["weapon","composite bow"],["armor","shadow armor"],["armor","elf boots"],["armor","leather gloves"],["armor","dodgers cap"]],skills:["deadly volley","telekinesis"],sourceCards:[["proto-tallman",1],["dexterous hands",1],["balanced",1],["accurate",1],["nimble",1],["steady hands",1],["pinpoint precision",1],["faster attacks",1],["shadow walker",1],["shorter cooldown",1],["micronaps",1],["semi automatic",1]],rarity:"rare",color:y,moveAngle:70},it:{items:[["weapon","grounding rod"],["armor","gladiator helm"],["armor","muscle plate"],["armor","polished gauntlets"],["armor","foot plate"]],skills:["ice blast","lightning spray","poison spray","incinerate"],sourceCards:[["mageheart",1],["manafingers",1],["textbook",1],["clown shoes",1],["cycled attack",1],["faster attacks",1],["increased radius",1],["micronaps",1],["face training",1],["balanced",1],["armor plating",1],["ethereal",1],["quick reaction",1],["dancing walk",1],["multi-fingered",1],["derping out",1],["flash",1]],minLevel:350,color:k},cthulhu:{items:[["weapon","succubus skull"],["armor","gladiator helm"],["armor","muscle plate"],["armor","polished gauntlets"],["armor","foot plate"]],skills:["oblivion ray"],sourceCards:[["proto-boss",1],["proto-boss",1],["jovial",1],["faster detonation",1],["long reach",1],["telescoping handle",1],["faster attacks",1],["mobility",1],["big",1],["charged",1],["shock ritual",1],["frosted",1],["frost ritual",1],["iced",1],["electrified",1],["static socks",1],["ice spikes",1],["micronaps",1],["face training",1],["balanced",1],["armor plating",1],["flying",1],["quick reaction",1],["dancing walk",1],["multi-fingered",1],["riveted",1],["alabaster",1],["knee pads",1],["breadhat",1]],color:C,moveAngle:10},pikeman:{items:[["weapon","pike"],["armor","crusader helm"],["armor","chainmail"],["armor","handmail"],["armor","foot plate"]],skills:["super smash","basic melee"],sourceCards:[["sharpened",1],["basket hilt",1],["simple minded",1],["head of vigor",1],["steady hands",1],["potion holster",1],["buff",1],["riveted",1],["knee pads",1],["good circulation",1],["stinging",1],["more physical damage",1]],color:S},crossbowman:{items:[["weapon","crossbow"],["armor","visor"],["armor","chainmail"],["armor","leather gloves"],["armor","leather boots"]],skills:["headshot","piercing shot"],sourceCards:[["overdraw",1],["fletching",1],["pinpoint precision",1],["strafing",1],["balanced",1],["dexterous hands",1],["bloodfingers",1],["vest pockets",1],["sure footing",1],["careful aim",1],["shorter cooldown",1]],color:S},griffon:{items:[["weapon","winged axe"],["armor","apollo helmet"],["armor","winged leather"],["armor","front claws"],["armor","rear claws"]],skills:["pressure wave","chain lightning","lightning slash"],sourceCards:[["electrified",1],["multi-fingered",1],["flash",1],["sharpened",1],["clawed",1],["titan's grip",1],["dexterous hands",1],["flying",1],["strong back",1],["nimble",1],["ninja stance",1],["faster attacks",1],["charged",1]],color:T},crusader:{items:[["weapon","long sword"],["armor","crusader helm"],["armor","batsuit"],["armor","polished gauntlets"],["armor","shiny greaves"]],skills:["lethal strike","quick hit"],sourceCards:[["hateful blade",1],["possessed weapon",1],["derping out",1],["face training",1],["simple minded",1],["bushido",1],["potion holster",1],["swift hands",1],["buff",1],["alabaster",1],["ab shocker belt",1],["compression shorts",1],["mobility",1],["divine assistance",1]],color:S},cavalier:{items:[["weapon","pike"],["armor","conquistador helm"],["armor","raider armor"],["armor","fancy gauntlets"],["armor","cavalry boots"]],skills:["charge","ground smash"],sourceCards:[["sharpened",1],["enchant weapon",1],["face training",1],["armor plating",1],["potion holster",1],["buff",1],["strong back",1],["ab shocker belt",1],["war horse",1],["mobility",1],["precise",1],["finishing move",1]],color:S,rarity:"rare"},templar:{items:[["weapon","delicate wand"],["armor","crusader helm"],["armor","velvet tunic"],["armor","magesteel gauntlets"],["armor","magesteel greaves"]],skills:["ice nova"],sourceCards:[["iced",1],["blazing",1],["electrified",1],["enchant weapon",1],["ice breath",1],["well grounded",1],["clarity",1],["textbook",1],["manafingers",1],["mageheart",1],["smart footing",1],["compression shorts",1]],color:S,rarity:"rare"},champion:{items:[["weapon","barbarian blade"],["armor","champion helm"],["armor","champion gloves"],["armor","champion mail"],["armor","champion boots"]],skills:["quick hit"],sourceCards:[["swashbuckling",1],["multi-fingered",1],["soft weapons",1],["quick reaction",1],["face training",1],["simple minded",1],["head of vigor",1],["potion holster",1],["buff",1],["strong back",1],["ab shocker belt",1],["ninja stance",1],["precise",1],["honed",1],["practiced",1]],color:S,rarity:"rare"},zealot:{items:[["weapon","demon wand"],["armor","zealot hood"],["armor","mage gloves"],["armor","cultist robe"],["armor","arcane boots"]],skills:["fire ball"],sourceCards:[["demonic split",1],["telescoping handle",1],["soul channeling",1],["berserking",1],["pyromania",1],["textbook",1],["chemistry",1],["hot blooded",1],["hydra blood",1],["jet pack",1],["firewalker",1],["momentum",1],["more balls",1],["more projectiles",1],["long reach",1],["faster detonation",1]],color:N,rarity:"boss"},paladin:{items:[["weapon","stone hammer"],["armor","apollo helmet"],["armor","paladin armor"],["armor","polished gauntlets"],["armor","magesteel greaves"]],skills:["holy light"],sourceCards:[["enchant weapon",1],["blessed",1],["head of vigor",1],["jovial",1],["bushido",1],["meditation",1],["potion holster",1],["potion guzzler",1],["holy shield",1],["sacred shield",1],["alabaster",1],["divine assistance",1]],color:S,rarity:"rare"},seraph:{items:[["weapon","angelic blade"],["armor","halo"],["armor","winged leather"],["armor","silk feather gloves"],["armor","winged sandals"]],skills:["holy light","masterful strike"],sourceCards:[["enchant weapon",1],["blessed",1],["hazmat mask",1],["keen wit",1],["head of vigor",1],["hazmat gloves",1],["steady hands",1],["titan's grip",1],["big",1],["buff",1],["nimble",1],["flying",1],["hazmat suit",1],["hazmat boots",1],["smart footing",1],["prismatic toe ring",1],["practiced",1],["honed",1],["shorter cooldown",1]],color:M,rarity:"boss"},"lost seraph":{items:[["weapon","angelic blade"],["armor","halo"],["armor","winged leather"],["armor","silk feather gloves"],["armor","winged sandals"]],skills:["holy light","masterful strike"],sourceCards:[["proto-boss",1],["enchant weapon",1],["blessed",1],["hazmat mask",1],["keen wit",1],["head of vigor",1],["hazmat gloves",1],["steady hands",1],["titan's grip",1],["ascended",1],["big",1],["buff",1],["flying",1],["aura",1],["smart footing",1],["prismatic toe ring",1],["practiced",1],["honed",1],["shorter cooldown",1],["more physical damage",1],["faster attacks",1],["shorter cooldown",1]],color:M,rarity:"boss"}},zoneOrder:{order:["spooky dungeon","dark forest","aggro crag","icy tunnel","hostile marsh","clockwork ruins","beginners field","gothic castle","decaying temple","lich tower","wicked dream","imperial barracks"]},zone:{"spooky dungeon":{choices:["skeleton","skeleton archer","skeleton mage","fire skeleton","skeleton embermage","skeleton warmage","skeleton champion","skeleton highlord","skeleton pyromage"],weights:[50,20,10,10,5,10,10,10,10],boss:"skeleton king",roomCount:20,quantity:[1,1,3],materials:["metal","ember","blood","blade","spike","shield","potion","spine"]},"dark forest":{choices:["wood nymph","bat","elf","elf marksman","ent","dahd djinn","umuri","elf sharpshooter"],weights:[2e3,1500,1500,200,500,20,5,5],boss:"elf king",roomCount:20,quantity:[1,2,3],materials:["metal","feather","eye","blade","shield","spike","needle","wing","elf ear"]},"clockwork ruins":{choices:["gnome","gnome electrician","roflcopter","harpy","shock golem","mechcinerator","mechfridgerator","mecha watt","ser djinn","mecha tank","gnome chuck testa"],weights:[200,100,100,100,50,50,50,50,1,50,5],boss:"sir mechs-a-lot",roomCount:20,quantity:[1,2,3],materials:["spark","brain","blade","razor","spike","potion","converter","gnome"]},"aggro crag":{choices:["goblin","goblin priest","goblin artillery","goblin barbarian","fire skeleton","fire golem","kei djinn","goblin bombardier"],weights:[200,100,100,100,100,50,1,10],boss:"the inhuman torch",roomCount:20,quantity:[1,2,3],materials:["ember","muscle","blood","brain","shield","blade","razor","crag shard"]},"hostile marsh":{choices:["zombie","angry imp","dart imp","imp shaman","marshwalker","mad ape","al-err djinn","scalp collector","toxic golem","imp chieftain","hydra"],weights:[200,100,100,100,80,80,1,50,20,10,20],boss:"swamp thing",roomCount:20,quantity:[1,2,6],materials:["spore","feather","brain","shield","spike","needle","potion","imp head"]},"icy tunnel":{choices:["frost skeleton","ice golem","frost mage","frozen warrior","yeti","wight","frow djinn","shiver spirit","jesse blueman","frost goliath"],weights:[200,100,50,80,70,100,1,20,1,50],boss:"walter wight",roomCount:20,quantity:[1,2,4],materials:["ice","brain","blade","razor","spike","converter","wight snow"]},"gothic castle":{choices:["shadow knight","ghoul","vampire","living statue","gargoyle","minotaur","wraith","death knight"],weights:[20,10,10,10,20,20,10,10],boss:"acheron",roomCount:15,quantity:[1,3,6],materials:["metal","blood","feather","muscle","brain","eye","spike","blade","shield","needle","gargoyle"]},"anthropomorphic savanah":{choices:["buzzard","hyena","lion","hippo","honey badger","cheetah","bee"],weights:[1,1],boss:"bat",roomCount:20,quantity:[20,500,5e3]},"decaying temple":{choices:["buddha","ninja","ninja assassin","samurai","fallen samurai","tanuki","CFTS","the z"],weights:[150,200,100,200,200,100,1,50],boss:"treasure hunter",roomCount:15,quantity:[2,2,6],materials:["metal","blood","brain","eye","feather","spike","blade","business card"]},"lich tower":{choices:["walking meat","lich","withering goliath","abomination","slagathor","ice lich","tormented colossus"],weights:[400,200,50,100,1,10,10],boss:"lichie lich",quantity:[2,2,7],materials:["metal","brain","potion","razor","blood","spike","blade","lichen"]},"beginners field":{choices:["baby slime","slime","big slime","huge slime","gigantic slime","adventurer's corpse","adventuring slime"
,"angry puddle"],weights:[100,500,1e3,500,250,300,0,500],boss:"king slime",quantity:[1,0,0],materials:["slime","blood","brain","muscle","shield","blade","spike","needle"]},"wicked dream":{choices:["baku","incubus","succubus","lucid dreamer","tall man","freddy kooler","it","your biggest fear"],weights:[1e3,300,200,100,50,50,50,10],boss:"cthulhu",roomCount:20,quantity:[2,2,5],credit:"Nemek",materials:["brain","blood","razor","mirror","nightmare","spark","ice"]},"imperial barracks":{choices:["pikeman","crossbowman","griffon","crusader","cavalier","templar","champion","zealot","paladin","seraph"],weights:[1e3,500,500,300,50,50,50,5,10,5],boss:"lost seraph",roomCount:20,quantity:[2,2,5],credit:"WirelessKFC",materials:["brain","blood","razor","spike","sigil","spark","metal"]},"forgotten tomb":{choices:["mummy","scarab","pharaoh","anubis","snake"],weights:[1,1],boss:"bat",roomCount:20,quantity:[20,500,5e3]},"shipwreck cove":{choices:["swashbucker","cannoneer","drowned corpse","parrot","monkey","mermaid","first mate"],weights:[1,1],boss:"bat",roomCount:20,quantity:[20,500,5e3]},"demonic laboroatory":{choices:["stitchling","mad scientist","evil grad student","blood golem"],weights:[20,10,10],boss:"pigbearman",roomCount:20,quantity:[2,3,4]},"scarred plains":{choices:["troll","cyclops","harpy","bandit","giant","frost giant"],weights:[20,10,10],boss:"pigbearman",roomCount:20,quantity:[3,3,6]},hordecave:{choices:["vampire","shadow knight"],weights:[1,1],boss:"bat",roomCount:20,quantity:[20,500,5e3]},"halls of pain":{choices:["vampire","shadow knight","skeleton king","elf king","sir mechs-a-lot","flame dragon","scalp collector","walter wight"],weights:[1,1,1,1,1,1,1,1],boss:"vampire",roomCount:20,quantity:[20,500,5e3]},dojo:{choices:["skeleton king"],weights:[1],boss:"dummy",roomCount:10,quantity:[10,0,0]},"empty dojo":{choices:[],weights:[],boss:"dummy",roomCount:10,quantity:[0,0,0]}},test:{hngg:{a:10},fwah:{b:10},buh:{a:12},hi:{prototype:["hngg","fwah"],b:12},foo:{prototype:["hngg","buh"],a:15},harf:{prototype:["hi","foo"],c:10}},materials:{skull:{printed:"Skulls",category:4},heart:{printed:"Hearts",category:4},finger:{printed:"Fingers",category:4},toe:{printed:"Toes",category:4},handle:{printed:"Handles",category:4},energy:{printed:"Energy",category:4},metal:{printed:"Metal",category:3},ember:{printed:"Embers",category:3},ice:{printed:"Ice",category:3},spark:{printed:"Sparks",category:3},spore:{printed:"Spores",category:3},feather:{printed:"Feathers",category:3},muscle:{printed:"Muscles",category:3},eye:{printed:"Eyes",category:3},brain:{printed:"Brains",category:3},blood:{printed:"Blood",category:3},wing:{printed:"Wings",category:3},mirror:{printed:"Mirrors",category:3},shield:{printed:"Shields",category:2},blade:{printed:"Blades",category:2},spike:{printed:"Spikes",category:2},needle:{printed:"Needles",category:2},razor:{printed:"Razors",category:2},potion:{printed:"Potions",category:2},converter:{printed:"Converters",category:2},spine:{printed:"Spines",category:1},"elf ear":{printed:"Elf Ears",category:1},"crag shard":{printed:"Crag Shards",category:1},"wight snow":{printed:"Wight Snow",category:1},"imp head":{printed:"Imp Heads",category:1},gnome:{printed:"Gnomes",category:1},gargoyle:{printed:"Gargoyles",category:1},"business card":{printed:"Business Cards",category:1},lichen:{printed:"Lichen",category:1},slime:{printed:"Slime",category:1},nightmare:{printed:"Nightmares",category:1},sigil:{printed:"Sigils",category:1}},matCategoryBase:["1 indexed for simplicity",1,2.3,2.7,3.9],matDropRates:{normal:[.7,.2,.1,0],rare:[.2,.4,.35,.05],boss:[0,0,0,1],slime:[0,0,0,1]},statnames:{strength:"Strength",dexterity:"Dexterity",wisdom:"Wisdom",vitality:"Vitality",maxHp:"Maximum Health",maxMana:"Maximum Mana",armor:"Armor",dodge:"Dodge",accuracy:"Accuracy",eleResistAll:"Elemental Resistance",hpRegen:"Health Regenerated per Second",manaRegen:"Mana Regenerated per Second",moveSpeed:"Movement Speed",fireResist:"Fire Resistance",coldResist:"Cold Resistance",lightResist:"Lightning Resistance",poisResist:"Poison Resistance",physThorns:"Physical Thorns",fireThorns:"Fire Thorns",coldThorns:"Cold Thorns",lightThorns:"Lightning Thorns",poisThorns:"Poison Thorns",meleeDmg:"Melee Damage",rangeDmg:"Ranged Damage",spellDmg:"Spell Damage",physDmg:"Physical Damage",fireDmg:"Fire Damage",coldDmg:"Cold Damage",lightDmg:"Lightning Damage",poisDmg:"Poison Damage",hpOnHit:"Health Gained on Hit",manaOnHit:"Mana Gained on Hit",cooldownTime:"Cooldown Length",range:"Skill Range",speed:"Skill Duration",manaCost:"Mana Cost",hpLeech:"Leeched Health",manaLeech:"Leeched Mana",lineWidth:"Line Width",opacity:"Opacity",height:"Character Height",width:"Character Width",aoeRadius:"AOE Radius",aoeSpeed:"AOE Speed",angle:"Angle",projRange:"Projectile Range",projRadius:"Projectile Radius",projSpeed:"Projectile Speed",projCount:"Additional Projectiles"}};e.extend({ref:P,expand:B})}),namespace.module("bot.events",function(e,t){function r(){this.obj={},this.eventMap={}}var n=namespace.bot.log;r.prototype.mark=function(e){if(this.obj[e])return;this.obj[e]=!0;var t=e.split(":");if(t.length>1)for(var n=1;n<t.length;n++)this.obj[t.slice(0,t.length-n).join(":")]=!0},r.prototype.mapMark=function(e,t){typeof e=="string"&&(e=[e]);var n=this.eventMap;_.each(e,function(e){n[e]===undefined&&(n[e]=[]),n[e].push(t)})},r.prototype.triggerAll=function(e){n.debug("Triggering All Events"),_.each(this.eventMap,function(e,t){if(this.obj[t])for(var n=0;n<e.length;n++)this.obj[e[n]]=!0},this),_.each(this.obj,function(t,n,r){t&&(e.trigger(n),this.obj[n]=!1)},this)},gl.DirtyQueue=new r,gl.DirtyListener=_.extend({},Backbone.Events),gl.GameEvents=_.extend({},Backbone.Events),gl.ItemEvents=_.extend({},Backbone.Events),gl.EquipEvents=_.extend({},Backbone.Events),gl.UIEvents=_.extend({},Backbone.Events),gl.MessageEvents=_.extend({},Backbone.Events)}),namespace.module("bot.vectorutils",function(e,t){function i(e){return new s(e.pageX,e.pageY)}function s(e,t){this.x=e,this.y=t;if(isNaN(this.x))throw console.log([e,t]),"shoot: some point isnt number"}function o(e,t,n,r,i){var s=r+i,i=s*s,o=n.sub(e),u=n.sub(t),a=t.sub(e);if(o.len2()<i||u.len2()<i)return!0;var f=o.dot(a),l=u.dot(a);if(f<0||l>0)return!1;var c=Math.sin(Math.acos(f/(o.len()*a.len())))*o.len();return c<=s?!0:!1}function u(e,t,n,r,i){var s=t.len(),o=r.sub(e).len();if(s<o-i||s>o+i)return!1;var u=t.rotate(n/2),f=e.add(u);if(f.within(r,i))return!0;var l=t.rotate(-n/2),c=e.add(l);if(c.within(r,i))return!0;var h=r.sub(e),p=a(Math.abs(h.angle()-t.angle()));return p>180&&(p=360-p),p<n/2?!0:!1}function a(e){return e/Math.PI*180}function f(e,t){return _.map(t,function(t){return e.dist(t)})}var n=Math.PI,r=Math.PI*2;s.prototype.clone=function(){return new s(this.x,this.y)},s.prototype.add=function(e){return new s(this.x+e.x,this.y+e.y)},s.prototype.abs=function(){return new s(Math.abs(this.x),Math.abs(this.y))},s.prototype.dadd=function(e){return this.x+=e.x,this.y+=e.y,this},s.prototype.sub=function(e){return new s(this.x-e.x,this.y-e.y)},s.prototype.flip=function(){return new s(this.y,this.x)},s.prototype.mult=function(e){return new s(this.x*e,this.y*e)},s.prototype.dist=function(e){return Math.sqrt(this.dist2(e))},s.prototype.dist2=function(e){var t=this.x-e.x,n=this.y-e.y;return t*t+n*n},s.prototype.len=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},s.prototype.len2=function(){return this.x*this.x+this.y*this.y},s.prototype.within=function(e,t){return this.sub(e).len2()<t*t},s.prototype.rawDist=function(e){return Math.sqrt(Math.pow(this.x-e.x,2)+Math.pow(this.y-e.y,2))},s.prototype.equal=function(e){return this.x===e.x&&this.y===e.y},s.prototype.angle=function(){return Math.atan2(this.y,this.x)},s.prototype.closer=function(e,t,n){var r=e.sub(this),i=this.dist(e),s;return i>n?(i-t<n&&(t=i-n),s=1-(i-t)/i):(i+t>n&&(t=n-i),s=1-(i+t)/i),this.add(r.mult(s))},s.prototype.pctCloser=function(e,t){return this.add(e.sub(this).mult(t))},s.prototype.toIso=function(){return new s(this.x-this.y,(this.x+this.y)/2)},s.prototype.toString=function(){return"("+this.x+", "+this.y+")"},s.prototype.dot=function(e){return this.x*e.x+this.y*e.y},s.prototype.unitVector=function(){var e=this.len();return e?this.mult(1/e):this},s.prototype.rotate=function(e){var t=e/180*Math.PI,n=Math.sin(t),r=Math.cos(t);return new s(this.x*r-this.y*n,this.x*n+this.y*r)},s.prototype.inBounds=function(e){var t=this.clone();return t.x<0&&(t.x=0),t.x>e.x&&(t.x=e.x),t.y<0&&(t.y=0),t.y>e.y&&(t.y=e.y),t},e.extend({Point:s,PointFromEvent:i,hit:o,coneHit:u,getDistances:f})}),namespace.module("bot.utils",function(e,t){function i(){var e,t,n,r,i={};for(t=0;t<arguments.length;t++){e=arguments[t];for(n=0;n<e.length;n++)i[e[n]]={added:0,more:1,converted:{},gainedas:{}}}return i}function s(e,t,n){_.each(n,function(n){e[n]=d(t,n)})}function o(e){return{added:e.added,more:e.more,converted:$.extend({},e.converted),gainedas:$.extend({},e.gainedas)}}function u(e,t){var n={};return _.each(t,function(t){n[t]=o(e[t])}),n}function a(e,t){t===undefined&&n.error("addMod called with undefined mod");var r=t.split(" "),i=parseFloat(r[2]);if(r[1]==="added")e[r[0]].added+=i;else if(r[1]==="more")e[r[0]].more*=1+i/100;else{if(r[1]!=="gainedas"&&r[1]!=="converted")throw console.log("addMod about to barf with state ",e,t),"shoot";e[r[0]][r[1]][r[3]]?e[r[0]][r[1]][r[3]]+=i:e[r[0]][r[1]][r[3]]=i}}function f(e,t){var n=e.split(" ");return n.length===4&&n[3]==="perLevel"?(n[1]==="more"?n[2]>0?n[2]=n[2]*t:n[2]=Math.pow(1+parseFloat(n[2])/100,t)*100-100:n[2]=parseFloat(n[2])*t,n.pop(),n.join(" ")):e}function l(e,t){var n=[];for(var r=e.length;r--;)n.push(f(e[r],t));return n}function c(e,t){var r=[];_.each(e,function(e,n){r[n]=f(e,t)});var i=p(r);return r=[],_.each(i,function(e){var t="",i=e.split(" "),s=g(parseFloat(i[2]));i.length===3?i[1]==="added"?i[2]>=0?t="+"+s+" "+namespace.bot.itemref.ref.statnames[i[0]]:t=s+" "+namespace.bot.itemref.ref.statnames[i[0]]:i[1]==="more"&&(i[2]>=0?t=s+"% More "+namespace.bot.itemref.ref.statnames[i[0]]:t=Math.abs(s)+"% Less "+namespace.bot.itemref.ref.statnames[i[0]]):i[1]==="gainedas"?t=s+"% of "+namespace.bot.itemref.ref.statnames[i[0]]+" Gained As "+namespace.bot.itemref.ref.statnames[i[3]]:i[1]==="converted"?t=s+"% of "+namespace.bot.itemref.ref.statnames[i[0]]+" Converted To "+namespace.bot.itemref.ref.statnames[i[3]]:(n.error("infobox display not configured for : "+e),t=e+" unimplemented"),r.push(t)}),r}function h(e){return e=_.filter(e,function(e){var t=e.split(" ");return t[t.length-1]==="perLevel"}),c(e,1)}function p(e){var t=[],n={};return _.each(e,function(e){var r=e.split(" ");if(r.length===4)t.push(e);else{if(r.length!==3)throw"weird mods in utils.flattenSameMods";var i=r[0],s=r[1];n[s]===undefined&&(n[s]={}),n[s][i]===undefined&&(n[s][i]=[]),n[s][i].push(parseFloat(r[2]))}}),_.each(["added","more","converted","gainedas"],function(e){var r=n[e];_.each(r,function(n,r){var i;if(e==="more"){i=1;for(var s=n.length;s--;)i*=n[s]/100+1;i=(i-1)*100,t.push(r+" "+e+" "+i.toFixed(2))}else{i=0;for(var s=n.length;s--;)i+=n[s];t.push(r+" "+e+" "+i)}})}),t}function d(e,t){var t,n,r;n=e[t],convPct=100;var r=n.added*n.more;return _.each(n.converted,function(t,i){convAmt=n.converted[i],convAmt>convPct&&(convAmt=convPct),e[i].added+=convAmt/100*r,convPct-=convAmt}),r*=convPct/100,_.each(n.gainedas,function(t,i){gainedAmt=n.gainedas[i],e[i].added+=gainedAmt/100*r}),r}function v(e){if(e===undefined){n.error("utils.firstCap called with undefined string");return}var t=e.split(" ");return _.each(t,function(e,n){t[n]=e[0].toUpperCase()+e.slice(1)}),t.join(" ")}function g(e){typeof e=="string"&&(e=parseFloat(e));if(e===Infinity)return"Infinity";if(e<.001&&e>0)return e.toExponential(3);if(e<1e3){if(e>=100)return Math.floor(e).toString();if(e===Math.floor(e))return Math.floor(e).toString();var t=1;return e<1?t=3:e<10&&(t=2),e.toFixed(t)}var n,r,i;return n=Math.floor(Math.log10(e)),r=Math.floor(n/3),r>=m.length?e.toPrecision(2):(i=n%3,e/=Math.pow(1e3,r),i===2?Math.round(e).toString()+m[r]:e.toFixed(2-i)+m[r])}function b(e){var t=y[e];return t||(t=e),t}function w(e){var t=e.split(" ");return t.join("_")}function E(e,t){_.each(t,function(t){a(e,t)})}function S(e,t){return _.flatten(_.map(e,function(e){if(e[0]===undefined)throw"crap! did you forget a comma after card line in itemref?";return l(r.ref.card[e[0]].mods,e[1]+t)},this))}var n=namespace.bot.log,r=namespace.bot.itemref,m=["","k","M","B","T","Qa","Qi","Sx","Sp","Oc","No","De","UnD","DuD","TrD","QaD","QiD","SeD","SpD","OcD","NoD","Vi","UnV"],y={weapon:"Weapon",head:"Head",chest:"Chest",hands:"Hand",legs:"Leg",skill:"Skill"},x=gl.Model.extend({initialize:function(e,t){this.fns=typeof e=="function"?[e]:e,this.minTime=t,this.lastCall=0,this.timeout=null,this.throttled=this._throttled.bind(this),this.clear=this._clear.bind(this)},_callFns:function(){this._clear(),this.lastCall=(new Date).getTime(),_.each(this.fns,function(e){e()})},_clear:function(){clearTimeout(this.timeout),this.timeout=null},_throttled:function(){var e=(new Date).getTime(),t=e-this.lastCall;t>this.minTime?this._callFns():this.timeout===null&&(this.timeout=setTimeout(this._callFns.bind(this),this.minTime-t))}});e.extend({applyPerLevel:f,applyPerLevels:l,expandSourceCards:S,newBaseStatsDict:i,cloneStats:u,prettifyMods:c,prettifyPerLvlMods:h,addAllMods:E,addMod:a,computeStats:s,computeStat:d,firstCap:v,spaceToUnderscore:w,presentableSlot:b,prettifyNum:g,Throttler:x})}),namespace.module("bot.bodies",function(e,t){function m(e,t,n,r,i,s){return{text:e,type:t,pos:n,color:r,lifespan:i,verticalOffset:s,time:gl.time,expires:gl.time+i}}function g(e,t,n,r){var i=new l(e.start,t,e.vector,e.hitHeight,r);return{type:"dmg",text:n,dmg:i,color:i.color,expires:gl.time+2e3}}function y(e,t,n){_.each(["phys","light","cold","fire","pois"],function(r){t[r]>0&&gl.MessageEvents.trigger("message",g(e,n,a.prettifyNum(Math.ceil(t[r])),r))})}var n=0,r=1,i,s,o,u,a,f,l,c,h;$(function(){i=namespace.bot.vectorutils,s=i.Point,o=namespace.bot.entity.MonsterSpec,u=namespace.bot.prob,a=namespace.bot.utils,f=namespace.bot.log,l=namespace.bot.damage.Damage,c=namespace.bot.damage.DamageDealt,h=namespace.bot.attacks});var p=gl.Model.extend({initialize:function(e,t){this.spec=e,this.zone=t,this.createSkillchain(),this.revive(),this.pos=new s(0,0),this.nextAction=0,this.moveStart=-1},createSkillchain:function(){this.skills=_.map(_.compact(this.spec.skillchain.skills),function(e){return{spec:e,coolAt:gl.time+e.cooldownTime}})},revive:function(){this.takeAction(0),this.hp=this.spec.maxHp,this.mana=this.spec.maxMana,this.lastHpFullTime=gl.time,this.hpRegened=0,this.lastManaFullTime=gl.time,this.manaRegened=0,_.each(_.compact(this.skills),function(e){e.coolAt=gl.time+e.spec.cooldownTime})},initPos:function(e){this.isHero()?(this.pos=e.ent.clone(),gl.DirtyQueue.mark("hero:move")):this.isMonster()&&(this.pos=new s(u.rand(0,e.size.x),u.rand(0,e.size.y)))},isHero:function(){return this.spec.team===n},isMonster:function(){return this.spec.team===r},teamString:function(){return this.isHero()?"Hero":"Monster"},isAlive:function(){return this.hp>0},modifyHp:function(e){this.hp+=e,this.hp>=this.spec.maxHp&&(this.hp=this.spec.maxHp,this.lastHpFullTime=gl.time,this.hpRegened=0)},modifyMana:function(e){this.mana+=e,this.mana>=this.spec.maxMana&&(this.mana=this.spec.maxMana,this.lastManaFullTime=gl.time,this.manaRegened=0),this.mana<0&&(this.mana=0,this.lastManaFullTime=gl.time,this.manaRegened=0)},regen:function(){if(gl.time>this.lastHpFullTime){var e=this.spec.hpRegen*(gl.time-this.lastHpFullTime)/1e3,t=e-this.hpRegened;this.hpRegened=e,this.modifyHp(t)}if(gl.time>this.lastManaFullTime){var e=this.spec.manaRegen*(gl.time-this.lastManaFullTime)/1e3,t=e-this.manaRegened;this.manaRegened=e,this.modifyMana(t)}},tryDoStuff:function(e,t){this.regen(),this.isHero()&&t.length&&this.setSkillRangeMana(t);if(!this.isAlive()||this.busy())return;if(t.length===0){this.isHero()&&this.tryMove(t,n,e),_.each(_.compact(this.skills),function(e){e.oom=e.spec.manaCost>this.mana,e.oor=!0},this);return}var n=i.getDistances(this.pos,_.pluck(t,"pos"));this.tryAttack(t,n,e),this.tryMove(t,n,e)},tryAttack:function(e,t,n){var r=t.minIndex(),i=t[r],s=_.compact(this.skills),o;this.setSkillRangeMana(e);for(var u=0;u<s.length;u++){o=s[u];if(o.coolAt<=gl.time&&!o.oom&&!o.oor){this.attackTarget(e[r],o,n);return}}},setSkillRangeMana:function(e){var t=this.mana,n=this.pos,r=n.dist2(e[0].pos),i;for(var s=e.length;s--;)i=n.dist2(e[s].pos),i<r&&(r=i);_.each(_.compact(this.skills),function(e){var n=e.spec.range;e.oom=e.spec.manaCost>t,e.oor=n*n<r})},takeAction:function(e){this.moveStart=-1,this.nextAction=gl.time+e,this.lastDuration=e},tryMove:function(e,t,n){if(this.busy())return;this.moveStart===-1&&(this.moveStart=gl.time);var r=this.spec.moveSpeed*gl.lastTimeIncr,i;if(e.length===0)i=this.pos.closer(n.exit,r,0);else{var s=e[t.minIndex()],o=_.map(_.compact(this.skills),function(e){return e.spec.range*.9}).min();o||(o=1),isNaN(this.pos.x)&&console.log(this.pos),i=this.pos.closer(s.pos,r,o);var u=i.sub(this.pos),a=this.spec.moveAngle?this.spec.moveAngle:0;i=this.pos.add(u.rotate(a)).inBounds(n.size)}this.pos.x===i.x&&this.pos.y===i.y?this.moveStart=-1:(this.pos=i,this.isHero()&&gl.DirtyQueue.mark("hero:move"))},attackTarget:function(e,t,n){t.coolAt=gl.time+t.spec.speed+t.spec.cooldownTime,this.takeAction(t.spec.speed),this.mana-=t.spec.manaCost,gl.addAttack(t,this,e)},handleHit:function(e,t,n){this.handleLeech(t,n),e.isAlive()||(this.onKill(e),e.onDeath())},handleLeech:function(e,t){var n=e.hpOnHit+t.hpLeeched,r=e.manaOnHit+t.manaLeeched;n&&this.modifyHp(n),r&&this.modifyMana(r)},rollHit:function(e){var t=3*e.accuracy/(e.accuracy+this.spec.dodge)*(.5+e.attacker.spec.level/(e.attacker.spec.level+this.spec.level)/2);return t>.99?t=.99:t<.01&&(t=.01),f.info("%s has %d%% chance to be hit by %s",this.spec.name,t*100,e.attacker.spec.name),Math.random()<t?!0:((this.spec.team===0&&gl.settings.enableHeroDmgMsgs||this.spec.team===1&&gl.settings.enableMonDmgMsgs)&&gl.MessageEvents.trigger("message",m("dodged!","dodge",this.pos,"rgba(230, 230, 10, 0.2)",1e3)),!1)},takeDamage:function(e,t){var r=new c(e,this.spec);if(isNaN(r.total))throw console.log(r.total,e.name),"In body.takeDamage by "+this.spec.name+", "+e.attacker.spec.name+" totalDmg has NaN value.  Monster missing card level in itemref?";var i=r.total/e.totalDmg;this.hp<=0&&(i=0);var s={hpLeeched:i*e.hpLeech,manaLeeched:i*e.manaLeech,totalDmg:r.total};this.spec.team===n&&(f.debug("Team Hero taking %.2f damage",-r.total),r.total>this.hp&&this.hp>0&&(f.reportDeath("hero killed by "+e.attacker.spec.name+" at "+gl.sessionId+" "+gl.time),this.spec.lastDeath=e.attacker.spec.name,gl.GameEvents.trigger("hero:death"),gl.settings.pauseOnDeath&&this.hp>0&&gl.pause())),this.modifyHp(-r.total),f.debug("Team %s taking damage, hit for %s, now has %.2f hp",this.teamString(),r.total,this.hp),(this.spec.team===0&&gl.settings.enableHeroDmgMsgs||this.spec.team===1&&gl.settings.enableMonDmgMsgs)&&y(e,r,this.pos);if(!t){var o={physDmg:this.spec.physThorns,fireDmg:this.spec.fireThorns,coldDmg:this.spec.coldThorns,lightDmg:this.spec.lightThorns,poisDmg:this.spec.poisThorns,attacker:this,pos:e.attacker.pos,start:e.attacker.pos,hitHeight:e.hitHeight,vector:e.vector.rotate(180)};e.attacker.takeDamage(o,!0),e.attacker.hp<=0&&this.onKill(e.attacker)}return s},busy:function(){return this.nextAction>=gl.time},onKill:function(){},onDeath:function(){},fireHeight:function(){return this.spec.height/2}}),d=p.extend({initialize:function(e,t){this.potionCoolAt=gl.time,this.listenTo(e.skillchain,"skillComputeAttrs",this.updateSkillchain),this.listenTo(e,"computeAttrs",this.updateSkillchain),this.listenTo(e.equipped,"change",this.resetCooldowns),p.prototype.initialize.call(this,e,t)},resetCooldowns:function(){_.each(_.compact(this.skills),function(e){e.coolAt=gl.time+e.spec.cooldownTime})},updateSkillchain:function(){f.info("HeroBody: updateSkillchain");var e=this.spec.skillchain;this.lastHpFullTime=gl.time,this.hpRegened=0,this.lastManaFullTime=gl.time,this.manaRegened=0;var t={};for(var n=0;n<this.skills.length;n++)t[this.skills[n].spec.name]=this.skills[n];var r=_.filter(e.skills,function(e){return e&&!e.disabled});this.skills=_.map(r,function(e){return e.name in t?{spec:e,coolAt:t[e.name].coolAt}:{spec:e,coolAt:gl.time+e.cooldownTime}}),gl.DirtyQueue.mark("bodySkillchainUpdated")},onKill:function(e){var t=e.spec.xpOnKill(this.spec.level),n=this.spec.applyXp(t);n>0&&this.revive();if(e.spec.deathSpawns!==undefined&&e.spec.deathSpawns.length>0)for(var r=0;r<e.spec.deathSpawns.length;r++){if(this.zone.rooms[this.zone.heroPos].monsters.length>1e4)continue;var i=new namespace.bot.zone.MonsterBody(e.spec.deathSpawns[r],e.spec.level,this.zone);i.pos=this.zone.getNearbyPos(e.pos,1e3),this.zone.rooms[this.zone.heroPos].monsters.push(i)}var s=e.spec.getDrops();if(s.any){var o=this.spec.inv.addDrops(s.gearDrops),u=this.spec.cardInv.addDrops(s.cardDrops),a=this.spec.matInv.addDrops(s.matDrops),f=o.concat(u.concat(a));gl.settings.enableMatMsgs&&_.each(f,function(t,n){var r=t.slice(0,3)=="New"||t.slice(0,7)=="Leveled"?"rgba(255, 140, 0, 0.8)":"rgba(255, 100, 0, 0.6)";gl.MessageEvents.trigger("message",m(t,"drop",e.pos,r,1e3,e.spec.height/2+n*300))},this)}gl.DirtyQueue.mark("monsters:death")},onDeath:function(){this.spec.level>=100&&(this.spec.xp=Math.max(0,this.spec.xp-this.spec.getNextLevelXp()/200),gl.DirtyQueue.mark("hero:xp")),f.debug("your hero died")},modifyHp:function(e){p.prototype.modifyHp.call(this,e),gl.DirtyQueue.mark("hero:hp")},modifyMana:function(e){p.prototype.modifyMana.call(this,e),gl.DirtyQueue.mark("hero:mana")},revive:function(){this.potionCoolAt=gl.time,p.prototype.revive.call(this),gl.DirtyQueue.mark("revive")},tryUsePotion:function(){if(Math.abs(this.spec.maxHp-this.hp)<1e-5||this.hp<=1e-5)return;if(this.potionCoolAt<=gl.time){f.reportPotion(),this.potionCoolAt=gl.time+1e4;var e=10+this.spec.level*20*Math.pow(1.002,this.spec.level);this.modifyHp(e),gl.MessageEvents.trigger("message",m("potion worked!","potion",this.pos,"rgba(230, 230, 230, 0.7)",1e3))}else gl.MessageEvents.trigger("message",m("potion still cooling down!","potion",this.pos,"rgba(230, 230, 230, 0.4)",500))}});gl.monsterSpecs={};var v=p.extend({initialize:function(e,t,n){var r=e+"_"+t,i;r in gl.monsterSpecs?i=gl.monsterSpecs[r]:(i=new o(e,t),gl.monsterSpecs[r]=i),p.prototype.initialize.call(this,i,n)}});e.extend({MonsterBody:v,HeroBody:d})}),namespace.module("bot.damage",function(e,t){function u(e,t,n,r,i){this.end=t,t.equal(e)?this.vect=n.unitVector():this.vect=t.sub(e).unitVector(),this.vect=this.vect.rotate((Math.random()-.5)*60),this.startTime=gl.time,this.height=r,this.type=i,this.color=o[i],this.getY=u.prototype[this.type+"Y"].bind(this),this.k=-3*this.height*(.75+Math.random()/2),this.p=.75*this.height*(.75+Math.random()/2)}function a(e,t){var n=e.physDmg;this.phys=n*n/(n+t.armor),this.light=e.lightDmg*e.lightDmg/(e.lightDmg+t.lightResist),this.cold=e.coldDmg*e.coldDmg/(e.coldDmg+t.coldResist),this.fire=e.fireDmg*e.fireDmg/(e.fireDmg+t.fireResist),this.pois=e.poisDmg*e.poisDmg/(e.poisDmg+t.poisResist),this.total=this.phys+this.light+this.cold+this.fire+this.pois}var n,r,i,s;$(function(){n=namespace.bot.vectorutils,r=n.Point,i=namespace.bot.prob,s=namespace.bot.log});var o={phys:"rgba(230, 0, 0, 0.8)",cold:"rgba(0, 255, 255, 0.8)",fire:"rgba(255, 165, 0, 0.8)",light:"rgba(193, 17, 214, 0.8)",pois:"rgba(85, 255, 139, 0.8)"};u.prototype.physY=function(){var e=(gl.time-this.startTime)/1e3;return-3*this.height*Math.pow(e-.2,2)+.75*this.height},u.prototype.fireY=function(){var e=(gl.time-this.startTime)/1e3;return 1.5*this.height*Math.pow(e-.75,3)+this.height},u.prototype.lightY=function(){var e=(gl.time-this.startTime)/1e3;return this.height*e+this.height/4*Math.sin(e*Math.PI*4)+this.height/2},u.prototype.coldY=function(){var e=(gl.time-this.startTime)/1e3;return-1.5*this.height*Math.pow(e-.5,2)+this.height*1.2},u.prototype.poisY=function(){var e=(gl.time-this.startTime)/1e3;return-2*this.height*Math.pow(e,2)+this.height*.65},u.prototype.getBase=function(){var e=gl.time-this.startTime,t=this.end.add(this.vect.mult(4*e));return t},e.extend({Damage:u,DamageDealt:a})}),namespace.module("bot.drops",function(e,t){function o(e,t){if(e==="card")return new a(t);if(e==="item")return new f(t);if(e==="skill")return new l(t);if(e==="material")return new u(t);throw"shoot, drop factory called with invalid type argument: "+e}function u(e){this.name=e[0],this.nameStr=s.ref.materials[this.name].printed,this.quantity=e[1]}function a(e){this.name=e[0],this.level=e[1]}function f(e){this.itemType=e[0],this.name=e[1]}function l(e){this.name=e}var n,r,i,s;$(function(){n=namespace.bot.inv,s=namespace.bot.itemref,i=namespace.bot.utils,r=namespace.bot.log}),u.prototype.message=function(){return"+"+i.prettifyNum(this.quantity)+" "+this.nameStr},a.prototype.make=function(){var e=new n.CardModel(this.name);return e.isNew=!0,e},a.prototype.message=function(){return"New Card: "+i.firstCap(this.name)},f.prototype.make=function(){var e;return this.itemType==="weapon"&&(e=new n.WeaponModel(this.name)),this.itemType==="armor"&&(e=new n.ArmorModel(this.name)),e.isNew=!0,e},f.prototype.message=function(){return"New Item: "+i.firstCap(this.name)},l.prototype.make=function(){var e=new n.SkillModel(this.name);return e.isNew=!0,e},l.prototype.message=function(){return"New Skill: "+i.firstCap(this.name)},e.extend({dropFactory:o})}),namespace.module("bot.inv",function(e,t){function l(e){var t=0;if(e.itemType==="weapon")return"a"+{melee:"a",range:"b",spell:"c"}[e.weaponType]+e.name;if(e.itemType==="armor")return"b"+{head:"a",chest:"c",legs:"d",hands:"b"}[e.slot]+e.name;if(e.itemType==="skill")return"c"+e.name.toLowerCase()}var n=t("org.startpad.funcs").patch(),r=namespace.bot.log,i=namespace.bot.utils,s=namespace.bot.itemref,o=namespace.bot.prob,u=namespace.bot.attacks,a=namespace.bot.drops,f=gl.Model.extend({initialize:function(){this.xp=0,this.level=1,this.baseMods=[],this.cards=[undefined,undefined,undefined,undefined,undefined],this.equipped=!1,this.isNew=!1,this.hasNewCards=!1,this.inRecycle=!1,this.isRecycled=!1},toJSON:function(){return{xp:this.xp,level:this.level,cardNames:_.pluck(_.compact(this.cards),"name"),isNew:this.isNew,itemType:this.itemType,name:this.name,inRecycle:this.inRecycle,isRecycled:this.isRecycled}},fromJSON:function(e,t){_.extend(this,e),this.loadCards(this.cardNames,t)},loadCards:function(e,t){_.each(e,function(e,n){this.equipCard(_.findWhere(t.getModels(),{name:e}),n)},this)},applyXp:function(e){var t=0;this.xp+=e;while(this.canLevel())this.xp-=this.getNextLevelXp(),this.level++,t++;return t},canLevel:function(){return this.xp>=this.getNextLevelXp()},getNextLevelXp:function(){return Math.floor(100*Math.pow(1.3,this.level-1))},pctLeveled:function(){return this.xp/this.getNextLevelXp()},getMods:function(){var e=_.compact(this.cards),t=_.flatten(_.map(e,function(e){return e.getMods()}));return t.concat(i.applyPerLevels(this.baseMods,this.level))},equipCard:function(e,t){if(t>=this.cards.length||e&&e.itemType!=="card")return!1;if(e===undefined)return this.cards[t]&&this.actuallyUnequipCard(t),gl.EquipEvents.trigger("change"),!1;if(e.equipped){var n=this.getCardSlot(e);if(t===n)return!1;this.cards[t]?this.actuallyEquipCard(this.cards[t],n):this.actuallyUnequipCard(n),this.actuallyEquipCard(e,t)}else this.cards[t]&&this.actuallyUnequipCard(t),this.actuallyEquipCard(e,t);return gl.EquipEvents.trigger("change"),!0},actuallyEquipCard:function(e,t){e.equipped=!0,e.gearModel=this,this.cards[t]=e},actuallyUnequipCard:function(e){this.cards[e].equipped=!1,this.cards[e].gearModel=this,this.cards[e]=undefined},swapCards:function(e){if(e===undefined)return;var t;for(var n=0;n<this.cards.length;n++)e.cards[n]&&(t=e.cards[n],e.actuallyUnequipCard(n),this.actuallyEquipCard(t,n))},getCardSlot:function(e){if(!e)return undefined;for(var t=this.cards.length;t--;)if(this.cards[t]&&this.cards[t].name===e.name)return t;return undefined},unequipCards:function(){for(var e=0;e<this.cards.length;e++)this.cards[e]&&(this.cards[e].equipped=!1,this.cards[e]=undefined)},recycle:function(){return r.warning("Recycling gear %s",this.name),this.isRecycled=!0,this.slot}}),c=f.extend({initialize:function(e){f.prototype.initialize.call(this),_.extend(this,s.expand("armor",e)),this.name=e,this.itemType="armor",this.baseMods=this.mods,this.key=l(this)}}),h=f.extend({initialize:function(e){f.prototype.initialize.call(this),_.extend(this,s.expand("weapon",e)),this.name=e,this.itemType="weapon",this.slot="weapon",this.baseMods=this.mods,this.key=l(this)}}),p=f.extend({initialize:function(e){f.prototype.initialize.call(this),_.extend(this,s.expand("skill",e)),this.name=e,this.itemType="skill",this.slot="skill",this.key=l(this)},computeAttrs:function(e,t){if(this.skillType!=="spell"&&this.skillType!==t){this.disabled=!0;return}this.disabled=!1;var n=namespace.bot.entity.dmgKeys,r=namespace.bot.entity.attackSpecDmgKeys,s=i.cloneStats(e,n);i.addAllMods(s,this.getMods());var o=this.skillType+"Dmg";i.computeStats(this,s,["projCount"]),i.computeStats(this,s,[o]);var u=this[o];this.monster&&(u*=.5),i.computeStats(this,s,n),_.each(r,function(e){this[e]*=u},this),this.speed=Math.max(10,this.speed),this.aoeSpeed=Math.min(100,this.aoeSpeed),this.projSpeed=Math.min(200,this.projSpeed),this.calcAttacks()},calcAttack:function(e){var t=namespace.bot.entity.attackSpecKeys,n=namespace.bot.entity.attackSpecDmgKeys;_.each(t,function(t){e[t]=this[t]},this),e.angle===undefined&&(r.error("In calcAttack, Skill angle is undefined"),e.angle=30),e.projCount===undefined&&(r.error("In calcAttack, Skill projCount is undefined"),e.projCount=1),e.quals&&e.quals.length&&_.each(e.quals,function(t){var i=t.split(" ");if(i[0]==="dmg")if(i[1]==="more"){var s=1+parseFloat(i[2])/100;_.each(n,function(t){e[t]*=s})}else r.error("Trying to apply an invalid damage qualifier %s",t);else i[0].indexOf("Dmg")>-1?r.error("Trying to apply an invalid damage qualifier %s",t):i[0]==="projCount"?e.projCount+=parseFloat(i[2]):i[0]==="angle"&&(e.angle+=parseFloat(i[2]))},this),e.totalDmg=e.physDmg+e.lightDmg+e.coldDmg+e.fireDmg+e.poisDmg,e.projCount=Math.floor(e.projCount),e.angle=Math.floor(Math.abs(e.angle)),e.projCount<1&&(e.projCount=1),e.projCount>1&&e.angle===0&&(e.angle=5);var i=["onHit","onKill","onRemove"];_.each(i,function(t){e[t]&&e[t].length&&_.each(e[t],this.calcAttack,this)},this)},calcAttacks:function(){this.specs=$.extend({},this.specs),_.each(this.specs,this.calcAttack,this)},getTotalDmg:function(){return(this.physDmg+this.fireDmg+this.coldDmg+this.lightDmg+this.poisDmg).toFixed(2)},getDps:function(){var e=this.speed+this.cooldownTime,t=this.getTotalDmg()/e*1e3;return t.toFixed(2)}});MonsterSkillModel=p.extend({monster:!0});var d=gl.Model.extend({initialize:function(){this.skills=[undefined,undefined,undefined,undefined,undefined]},toJSON:function(){return _.pluck(_.compact(this.skills),"name")},fromJSON:function(e,t){_.each(e,function(e,n){this.equip(_.findWhere(t.getModels(),{name:e}),n,!1)},this)},equip:function(e,t,n){r.info("skillchain equip");var i=!1;if(e===undefined)i=this.unequip(t);else if(e.itemType==="skill")if(e.equipped){var s=this.getSkillSlot(e);s!==t&&(this.skills[t]?(this.skills[s]=this.skills[t],this.skills[t]=e):(this.skills[t]=this.skills[s],this.skills[s]=undefined),i=!0)}else e.swapCards(this.skills[t]),this.unequip(t),e.equipped=!0,this.skills[t]=e,i=!0,n||r.warning("Skillchain equipped %s into slot %d",e.name,t);return i&&this.trigger("change"),i},unequip:function(e){var t=this.skills[e];return t!==undefined?(t.equipped=!1,t.disabled=!1,t.unequipCards(),r.warning("Skillchain unequipping %s from slot %d",t.name,e),this.skills[e]=undefined,!0):!1},getSkillSlot:function(e){if(!e)return undefined;for(var t=this.skills.length;t--;)if(this.skills[t]&&this.skills[t].name===e.name)return t;return undefined},ranges:function(){if(this.skills.length===0){this.furthest=undefined,this.shortest=undefined;return}var e,t,n=_.pluck(_.compact(this.skills),"range");this.shortest=n.min(),this.furthest=n.max()},computeAttrs:function(e,t){this.lastDmgStats=e,_.each(_.compact(this.skills),function(n){n.computeAttrs(e,t)}),this.trigger("skillComputeAttrs"),gl.DirtyQueue.mark("skillComputeAttrs")},applyXp:function(e){var t=0;return _.each(_.compact(this.skills),function(n){t+=n.applyXp(e)}),t}}),v=gl.Model.extend({slots:["weapon","head","hands","chest","legs"],initialize:function(){this.listenTo(gl.EquipEvents,"change",this.propChange)},toJSON:function(){var e,t={};for(var n=0;n<this.slots.length;n++)e=this.slots[n],this[e]&&(t[e]=this[e].name);return t},fromJSON:function(e,t){_.each(e,function(e,n){this.equip
(_.findWhere(t.getModels(),{name:e}),n)},this)},propChange:function(){this.trigger("change")},equip:function(e,t){r.info("equipped gear model equip");var n=!1;return e===undefined?n=this.unequip(t):this[t]&&this[t].name===e.name?n=!1:e.slot===t&&(e.swapCards(this[t]),this.unequip(t),this[t]=e,e.equipped=!0,n=!0),n&&this.trigger("change"),n},unequip:function(e){var t=this[e];return t!==undefined?(t.equipped=!1,t.unequipCards(),this[e]=undefined,!0):!1},getMods:function(){var e=_.compact(_.map(this.slots,function(e){return this[e]},this));return _.flatten(_.map(e,function(e){return e.getMods()}))},toDict:function(){return _.object(this.slots,_.map(this.slots,function(e){return this[e]},this))},applyXp:function(e){var t=0;return _.each(this.slots,function(n){this[n]!==undefined&&(t+=this[n].applyXp(e))},this),t}}),m=gl.Model.extend({getModels:function(){return _.filter(this.models,function(e){return!e.inRecycle&&!e.isRecycled},this)},addDrops:function(e){var t=[];return _.each(e,function(e){var n=_.findWhere(this.models,{name:e.name});if(n){n.isRecycled&&(r.warning('%s "%s" dropped again.',this.newEventStr,e.name),n.isRecycled=!1,gl.DirtyQueue.mark(this.newEventStr));return}this.models.push(e.make()),this.hasNew=!0,this.sort(),gl.DirtyQueue.mark(this.newEventStr),t.push(e.message()),r.warning("%s: %s",this.newEventStr,e.name)},this),t}}),g=m.extend({newEventStr:"item:new",initialize:function(){this.models=[],this.sort(),this.hasNew=!1},noobGear:function(){this.models=[new h("cardboard sword"),new h("wooden bow"),new h("simple wand"),new p("basic melee"),new p("basic range"),new p("basic spell"),new c("balsa helmet"),new c("latex gloves"),new c("t-shirt"),new c("jeans")],this.sort(),_.each(this.models,function(e){e.isNew=!0})},toJSON:function(){return _.map(this.models,function(e){return e.toJSON()})},fromJSON:function(e,t){this.models=_.map(e,function(e){var n;return e.itemType==="skill"?n=new p(e.name):e.itemType==="weapon"?n=new h(e.name):e.itemType==="armor"&&(n=new c(e.name)),n.fromJSON(e,t),n},this),this.sort()},byId:function(e){return _.findWhere(this.models,{id:e})},sort:function(){this.models.sort(function(e,t){return e.key<t.key?-1:e.key>t.key?1:0})}}),y=gl.Model.extend({initialize:function(e){var t=s.ref.materials;_.each(t,function(e,t){this[t]=0},this),this.cardInv=e},toJSON:function(){var e={};return _.each(_.keys(s.ref.materials),function(t){e[t]=this[t]},this),e},fromJSON:function(e){_.extend(this,e)},addDrops:function(e){messages=[];var t=_.keys(s.ref.materials);return e.length>0&&(_.each(e,function(e){t.indexOf(e.name)===-1&&r.error("weird drop: %s %d",e.name,e.quantity),this[e.name]+=e.quantity,messages.push(e.message())},this),gl.settings.autoCraft&&this.tryLevelEquippedCards(),gl.DirtyQueue.mark("material:new")),messages},canLevelCard:function(e){e===undefined&&console.log("attempting to level undefined card");var t=e.getLevelCost(),n=!0;return _.each(t,function(e,t){this[t]<e&&(n=!1)},this),n},tryLevelCard:function(e,t){t===undefined&&(t=1);for(var n=0;n<t;n++){var r=e.getLevelCost(),i=this.canLevelCard(e);if(!i)return!1;_.each(r,function(e,t){this[t]-=e},this),e.levelUp()}return!0},tryLevelEquippedCards:function(){var e=!1;_.each(this.cardInv.models.reverse(),function(t){t.equipped&&(e=e||this.tryLevelCard(t,50))},this),this.cardInv.models.reverse(),e&&gl.DirtyQueue.mark("card:new")}}),b=gl.Model.extend({initialize:function(e){_.extend(this,s.expand("card",e)),this.itemType="card",this.name=e,this.equipped=!1,this.qp=0,this.level=1,this.isNew=!1,this.inRecycle=!1,this.isRecycled=!1},toJSON:function(){return{name:this.name,qp:this.qp,level:this.level,isNew:this.isNew,inRecycle:this.inRecycle,isRecycled:this.isRecycled}},fromJSON:function(e){_.extend(this,e)},getMods:function(){return i.applyPerLevels(this.mods,this.level)},getLevelCost:function(){var e={};return _.each(this.materials,function(t){var n=s.ref.materials[t];e[t]===undefined&&(e[t]=0),n===undefined&&r.error("cannot find reference to mat named %s",t);var i=s.ref.materials[t].category,o=s.ref.matCategoryBase[i];e[t]+=Math.max(1,Math.ceil(Math.pow(o,this.level))),i===1&&(e[t]=Math.ceil(e[t]*Math.sqrt(this.level)))},this),e},levelUp:function(){this.level++,gl.DirtyQueue.mark("card:level"),this.trigger("change")},canLevel:function(){return gl.canLevelCard(this)},pctLeveled:function(){return 0},recycle:function(){return r.warning("Recycling card %s",this.name),this.isRecycled=!0,this.slot}}),w=m.extend({newEventStr:"card:new",initialize:function(){this.models=[],this.hasNew=!1},noobGear:function(){this.models=[new b("sharpened"),new b("stinging")],this.sort(),_.each(this.models,function(e){e.isNew=!0})},toJSON:function(){return _.map(this.models,function(e){return e.toJSON()})},fromJSON:function(e){this.models=_.map(e,function(e){var t=new b(e.name);return t.fromJSON(e),t}),this.sort()},sort:function(e){this.models.sort(function(t,n){var r=t.level,i=n.level;return e==="craft"&&(r+=t.canLevel()?1e3:0,i+=n.canLevel()?1e3:0),r>i?-1:r<i?1:t.name>n.name?1:t.name<n.name?-1:0})}}),E=gl.Model.extend({initialize:function(e,t){this.inv=e,this.cardInv=t},ff:function(e){return e.inRecycle&&!e.isRecycled},getModels:function(){return _.filter(this.inv.models,this.ff).concat(_.filter(this.cardInv.models,this.ff))},getRecycleValue:function(e){var t={skill:"energy",weapon:"handle",head:"skull",chest:"heart",hands:"finger",legs:"toe"},n=this.zone.hero.spec.level/2.35,r=t[e],i=Math.ceil(Math.pow(2.5,n));return a.dropFactory("material",[r,i])},getAllValueStr:function(){var e=this.getModels();if(e.length==0)return"nothing.";var t={};_.each(e,function(e){var n=this.getRecycleValue(e.slot);t[n.nameStr]===undefined?t[n.nameStr]=n.quantity:t[n.nameStr]+=n.quantity},this);var n="",r=_.keys(t).length-1;return _.each(t,function(e,t){n+=i.prettifyNum(e)+" "+t,r>0?(n+=", ",r-=1):n+="."},this),n}}),S=gl.Model.extend({initialize:function(e,t){this.inv=e,this.cardInv=t,this.newCardSlots={weapon:!1,head:!1,hands:!1,chest:!1,legs:!1,skill:!1},this.listenTo(gl.DirtyListener,"item:new",this.update),this.listenTo(gl.DirtyListener,"card:new",this.update),this.listenTo(gl.DirtyListener,"removeNew",this.update),gl.DirtyQueue.mark("item:new")},update:function(){gl.DirtyQueue.mark("newChange"),this.inv.hasNew=!1;var e=this.inv.getModels();for(var t=e.length;t--;)if(e[t].isNew){this.inv.hasNew=!0;break}this.cardInv.hasNew=!1;var n=this.cardInv.getModels();for(var t=n.length;t--;)if(n[t].isNew){this.cardInv.hasNew=!0;break}_.each(this.newCardSlots,function(e,t){this.newCardSlots[t]=!1},this);var r;for(var t=n.length;t--;)r=n[t],this.newCardSlots[r.slot]=this.newCardSlots[r.slot]||r.isNew;_.each(this.inv.models,function(e){e.hasNewCards=this.newCardSlots[e.slot]},this)}});e.extend({ItemCollection:g,CardCollection:w,RecycleManager:E,MaterialManager:y,NewStateManager:S,CardModel:b,WeaponModel:h,ArmorModel:c,SkillModel:p,MonsterSkillModel:MonsterSkillModel,Skillchain:d,EquippedGearModel:v})}),namespace.module("bot.entity",function(e,t){function x(e,t,n){var r="some newbie",i=new o.EquippedGearModel,s=new o.Skillchain,u=new E(r,s,e,i,t,n);return u}var n=0,r=1,i=t("org.startpad.funcs").patch(),s=namespace.bot.log,o=namespace.bot.inv,u=namespace.bot.utils,a=namespace.bot.itemref,f=namespace.bot.prob,l=namespace.bot.drops,c=["strength","wisdom","dexterity","vitality","maxHp","maxMana","armor","dodge","hpRegen","manaRegen","moveSpeed"],h=["eleResistAll","fireResist","coldResist","lightResist","poisResist"],p=["physThorns","fireThorns","coldThorns","lightThorns","poisThorns"],d=["height","width","lineWidth","opacity"],v=["projCount","meleeDmg","rangeDmg","spellDmg","speed","cooldownTime","physDmg","lightDmg","coldDmg","fireDmg","poisDmg","hpOnHit","hpLeech","manaOnHit","manaLeech","speed","accuracy","range","projRange","projRadius","aoeRadius","manaCost","angle","projSpeed","aoeSpeed"],m=c.concat(h).concat(p).concat(d).concat(v),g=["physDmg","lightDmg","coldDmg","fireDmg","poisDmg"],y=["projCount","speed","physDmg","lightDmg","coldDmg","fireDmg","poisDmg","hpOnHit","hpLeech","manaOnHit","manaLeech","range","projRange","projRadius","aoeRadius","accuracy","angle","projSpeed","aoeSpeed"],b=["physDmg","lightDmg","coldDmg","fireDmg","poisDmg","hpLeech","manaLeech"],w=gl.Model.extend({initialize:function(){this.level=1,this.xp=0},computeAttrs:function(){this.team===n&&(this.weaponType=this.equipped.weapon===undefined?"melee":this.equipped.weapon.weaponType);var e=u.newBaseStatsDict(m);u.addAllMods(e,this.getMods()),this.team===r?(e.armor.more*=1+this.level*.02,e.eleResistAll.more*=1+.02*this.level,e.maxHp.more*=Math.pow(1.01,this.level),this.level>400&&(e.armor.more*=1+(this.level-400)*.02,e.eleResistAll.more*=1+.02*(this.level-400),e.maxHp.more*=Math.pow(1.005,this.level-400))):this.team===n&&_.each(this.prestige,function(t,n){e[n].more*=1+parseInt(t)*.01},this),u.computeStats(this,e,c),e.meleeDmg.more*=1+this.strength*.001,e.rangeDmg.more*=1+this.dexterity*.001,e.spellDmg.more*=1+this.wisdom*.001,u.computeStats(this,e,h),u.computeStats(this,e,p),u.computeStats(this,e,d),this.moveSpeed=Math.min(100,this.moveSpeed),this.baseDmg=e,this.computeSkillAttrs(),gl.DirtyQueue.mark("computeAttrs")},computeSkillAttrs:function(){s.info("entity computeSkillAttrs, weaponType: %s",this.weaponType),this.skillchain.computeAttrs(this.baseDmg,this.weaponType)},getMods:function(){var e=["strength added 9","strength added 1 perLevel","dexterity added 9","dexterity added 1 perLevel","wisdom added 9","wisdom added 1 perLevel","vitality added 9","vitality added 1 perLevel","vitality gainedas 100 maxHp","vitality gainedas 25 maxMana","vitality gainedas 100 eleResistAll","wisdom gainedas 100 maxMana","wisdom gainedas 200 eleResistAll","strength gainedas 200 armor","dexterity gainedas 300 dodge","dexterity gainedas 200 accuracy","moveSpeed added 3","height added 1000","width added 300","lineWidth added 30","meleeDmg added 1","rangeDmg added 1","spellDmg added 1","eleResistAll gainedas 100 lightResist","eleResistAll gainedas 100 coldResist","eleResistAll gainedas 100 fireResist","eleResistAll gainedas 100 poisResist","maxHp added 20 perLevel","maxMana added 5 perLevel","maxHp more 2 perLevel","maxMana gainedas 2 manaRegen","projCount added 1","angle added 15","range gainedas 125 projRange","projSpeed added 10","aoeSpeed added 3","projRadius added 50","aoeRadius added 3000","opacity added 1"];return _.map(e,function(e){return u.applyPerLevel(e,this.level)},this)},getNextLevelXp:function(){return Math.floor(100*Math.pow(1.3,this.level-1))},getLastLevelXp:function(){return Math.floor(100*Math.pow(1.3,this.level-2))}}),E=w.extend({initialize:function(e,t,r,i,o,u){this.name=e,this.skillchain=t,this.inv=r,this.cardInv=o,this.matInv=u,this.equipped=i,this.versionCreated=gl.VERSION_NUMBER,this.lastDeath="Hardcore",this.moveAngle=0,this.prestigeTotal=localStorage.getItem("prestigeTotal"),localStorage.setItem("prestigeTotal","valid"),w.prototype.initialize.call(this),this.team=n,s.info("HeroSpec initialize"),this.computeAttrs(),this.listenTo(this.skillchain,"change",this.computeSkillAttrs),this.listenTo(this.equipped,"change",this.computeAttrs)},toJSON:function(){return{name:this.name,level:this.level,xp:this.xp,versionCreated:this.versionCreated,lastDeath:this.lastDeath,moveAngle:this.moveAngle,prestigeTotal:this.prestigeTotal,prestige:this.prestige}},fromJSON:function(e){_.extend(this,e)},getMods:function(){var e=w.prototype.getMods.call(this);return e.concat(this.equipped.getMods())},applyXp:function(e){localStorage.getItem("prestigeTotal")!=="valid"&&s.error("invalid prestige "+localStorage.getItem("prestigeTotal")),gl.DirtyQueue.mark("hero:xp");var t=0;t+=this.equipped.applyXp(e),t+=this.skillchain.applyXp(e),this.xp+=e;while(this.xp>=this.getNextLevelXp())this.xp-=this.getNextLevelXp(),this.level+=1,gl.DirtyQueue.mark("hero:levelup"),s.levelUp(this.level),t++;return t>0&&this.computeAttrs(),t}}),S=w.extend({initialize:function(e,t){w.prototype.initialize.call(this),this.team=r,this.name=e,this.level=t,_.extend(this,a.expand("monster",this.name)),this.weaponType="melee",this.mods=_.map(this.items,function(e){var t=a.expand(e[0],e[1]);return e[0]==="weapon"&&(this.weaponType=t.weaponType),t.mods},this),this.mods=_.flatten(this.mods);try{this.mods=this.mods.concat(u.expandSourceCards(this.sourceCards,Math.floor(this.level/10)))}catch(n){s.error("cannot find reference for some card held by %s",this.name)}this.droppableCards=_.filter(this.sourceCards,function(e){return e[0].slice(0,5)!=="proto"},this),this.skillchain=new o.Skillchain,_.each(this.skills,function(e,t){var e=new o.MonsterSkillModel(e);e.level=this.level,this.skillchain.equip(e,t,!0)},this),this.computeAttrs()},getMods:function(){return this.mods.concat(w.prototype.getMods.call(this))},getDrops:function(){var e=[],t=[],n=[],r=!1;if(Math.random()<1&&this.droppableCards.length){var i=this.droppableCards[f.pyRand(0,this.droppableCards.length)],s=this.level>100?Math.floor(Math.sqrt(this.level)):Math.floor(this.level/10);i=[i[0],i[1]+s],e.push(l.dropFactory("card",i)),r=!0}if(Math.random()<1&&this.materials&&this.materials.length>=1){var o=this.getMatDrop();n.push(l.dropFactory("material",[o.name,o.amt])),r=!0}return Math.random()<.1&&this.items.length&&(t.push(l.dropFactory("item",this.items[f.pyRand(0,this.items.length)])),r=!0),Math.random()<.5&&this.skills.length&&(t.push(l.dropFactory("skill",this.skills[f.pyRand(0,this.skills.length)])),r=!0),{cardDrops:e,gearDrops:t,matDrops:n,any:r}},getMatDrop:function(){this.rarity=this.rarity===undefined?"normal":this.rarity;var e=a.ref.matDropRates[this.rarity],t=Math.random(),n=0,r,i,o;for(var u=0;u<e.length;u++){n+=e[u];if(t<=n){r=Math.abs(u-4);break}}r===4?i=["energy","skull","heart","finger","toe","handle"]:i=_.filter(this.materials,function(e){return a.ref.materials[e].category===r},this);var l=i[f.pyRand(0,i.length)];l===undefined&&s.error("getMatDrop error choosing drops, ended with undefined drop");var c=a.ref.matCategoryBase[r];return c=(c*2+1)/3,o=Math.ceil(Math.pow(c,Math.max(1,(this.level-2)/20))),{name:l,amt:o}},xpOnKill:function(e){var t=e>=this.level?this.level:e+(this.level-e)/20;return Math.ceil(20*Math.pow(1.18,t-1))},xpPenalty:function(e,t){if(e>t)return 1;var n=3+Math.floor(e/16),r=t-e;if(r<=n)return 1;var i=r-n;return Math.pow((e+5)/(e+5+Math.pow(i,2.5)),1.5)}});e.extend({newHeroSpec:x,MonsterSpec:S,defKeys:c,eleResistKeys:h,dmgKeys:v,thornKeys:p,actualDmgKeys:g,attackSpecKeys:y,attackSpecDmgKeys:b})}),namespace.module("bot.attacks",function(e,t){function a(e,t){return e["on"+t[0].toUpperCase()+t.slice(1)]}function f(e,t,n,r){var i=n.pos.sub(t.pos),s=gl.time+e.speed/2,o=c(e.projCount,e.angle);return _.map(o,function(o){return new h(e,t,n.spec.team,t.pos,i.rotate(o),s,r)})}function l(e,t,n,r){var i=c(e.projCount,e.angle);return _.map(i,function(i){return new h(e,t.attacker,t.targetTeam,t.pos,t.vector.rotate(i),gl.time,n,r)})}function c(e,t){var n=[];if(e===1)n.push(0);else{var r,i;e%2===0?(i=t*(.5+(e-2)/2),r=-i):(i=t*(e-1)/2,r=-i);for(var s=r;s<=i;s+=t)n.push(s)}return n}function p(e,t,n,r){var i=n.pos.sub(t.pos),s=gl.time+e.speed/2;return new v(e,t,n.spec.team,t.pos,i,s,r)}function d(e,t,n,r){return new v(e,t.attacker,t.targetTeam,n.pos,t.vector,gl.time,r)}function m(e,t,n,r){var i=n.pos.sub(t.pos),s=gl.time+e.speed/2;return new y(e,t,n.spec.team,t.pos,i,s,r)}function g(e,t,n,r){return new y(e,t.attacker,t.targetTeam,n.pos,t.vector,gl.time,r)}var n=t("org.startpad.funcs").patch(),r=namespace.bot.log,i=namespace.bot.vectorutils,s=i.Point,o=gl.Model.extend({initialize:function(){this.attacks=[]},tick:function(e){(e[0]===undefined||e[1]===undefined)&&r.error("Attackmanager tick no enemies");for(var t=this.attacks.length;t--;)this.attacks[t].tick(e[this.attacks[t].targetTeam]);var n,i;for(var t=this.attacks.length;t--;)n=this.attacks[t],i=n.getNewAttacks(),i.length>0&&this.attacks.push.apply(this.attacks,i),n.done&&this.attacks.splice(t,1)},nextRoom:function(e){this.room=e,this.attacks=[]},addAttack:function(e,t,n){_.each(e.spec.specs,function(e,r,i){e.type==="melee"?this.attacks.push(new b(e,t,n,this.room)):e.type==="proj"?this.attacks.push.apply(this.attacks,f(e,t,n,this.room)):e.type==="cone"?this.attacks.push(p(e,t,n,this.room)):e.type==="circle"?this.attacks.push(m(e,t,n,this.room)):e.type==="minion"},this)},getAttacks:function(){return this.attacks}}),u=gl.Model.extend({getNewAttacks:function(){var e=this.newAttacks;return this.newAttacks=[],e},handle:function(e,t){var n=a(this,e);if(n===undefined||n.length<1)return;_.each(n,function(e){e.type==="proj"?(this.newAttacks.push.apply(this.newAttacks,l(e,this,t,this.room)),r.info("Added new child projs to new attacks, len: %d",this.newAttacks.length)):e.type==="cone"?this.newAttacks.push(d(e,this,t,this.room)):e.type==="circle"?this.newAttacks.push(g(e,this,t,this.room)):e.type==="minion"},this)},hit:function(e){this.hitHeight=e.fireHeight();if(e.rollHit(this)){var t=e.takeDamage(this);this.attacker.handleHit(e,this,t),this.handle("hit",e),e.isAlive()||this.handle("kill",e)}},remove:function(){this.handle("remove"),this.done=!0}}),h=u.extend({initialize:function(e,t,n,i,s,o,u,a){this.newAttacks=[],_.extend(this,e),this.attacker=t,this.targetTeam=n,this.start=i.clone(),this.pos=i.clone(),this.fireTime=o,this.room=a,u&&(this.immuneTargetId=u.id),this.vector=s.unitVector().mult(this.projSpeed),this.z=t.spec.height/2,this.color||(this.color="#fff"),this.projRadius||(this.projRadius=Math.pow(2,16)),r.debug("projectile created, pos: %s, vector: %s",this.pos,this.vector)},tick:function(e){if(gl.time<=this.fireTime)return;var t=gl.time-this.fireTime,n=this.start.add(this.vector.mult(t)),r;for(var s=e.length;s--;){r=e[s];if(r.id!==this.immuneTargetId&&r.isAlive()&&i.hit(this.pos,n,r.pos,r.spec.width,this.projRadius)){this.hit(r),this.remove();break}}this.pos=n,this.pos.sub(this.start).len2()>this.projRange*this.projRange&&this.remove()}}),v=u.extend({initialize:function(e,t,n,r,i,s,o,u){this.newAttacks=[],_.extend(this,e),this.attacker=t,this.targetTeam=n,this.start=r.clone(),this.pos=r.clone(),this.startTime=gl.time,this.fireTime=s,this.room=u,this.immuneTargetIds={},o!==undefined&&(this.immuneTargetIds[o.id]=!0),this.vector=i.unitVector().mult(this.aoeSpeed),this.z=0,this.color||(this.color="#fff")},tick:function(e){if(gl.time<=this.fireTime)return;var t=gl.time-this.fireTime,n=this.vector.mult(t),s=this.start.add(n);r.debug("cone moving from %s to %s",this.pos,s),this.pos=s;for(var o=0;o<e.length;o++){if(this.immuneTargetIds[e[o].id]||!e[o].isAlive()){r.debug("Intentionally avoiding immune target");continue}if(i.coneHit(this.start,n,this.angle,e[o].pos,e[o].spec.width)){this.hit(e[o]),this.immuneTargetIds[e[o].id]=!0;break}}this.pos.sub(this.start).len2()>this.aoeRadius*this.aoeRadius&&this.remove()}}),y=u.extend({initialize:function(e,t,n,r,i,s,o,u){this.newAttacks=[],_.extend(this,e),this.attacker=t,this.targetTeam=n,this.start=r.clone(),this.pos=r.clone(),this.startTime=gl.time,this.fireTime=s,this.room=u,this.immuneTargetIds={},o!==undefined&&(this.immuneTargetIds[o.id]=!0),this.vector=i.unitVector().mult(this.aoeSpeed),this.z=0,this.color||(this.color="#fff")},tick:function(e){if(gl.time<=this.fireTime)return;var t=gl.time-this.fireTime,n=this.vector.mult(t),i=this.start.add(n);r.debug("circle moving from %s to %s",this.pos,i),this.pos=i;var s=this.pos.sub(this.start).len();for(var o=0;o<e.length;o++){if(this.immuneTargetIds[e[o].id]||!e[o].isAlive()){r.debug("Intentionally avoiding immune target");continue}if(e[o].pos.sub(this.start).len()<s+e[o].spec.width){this.hit(e[o]),this.immuneTargetIds[e[o].id]=!0;break}}this.pos.sub(this.start).len2()>this.aoeRadius*this.aoeRadius&&this.remove()}}),b=u.extend({initialize:function(e,t,n,r){this.newAttacks=[],_.extend(this,e),this.attacker=t,this.target=n,this.targetTeam=n.spec.team,this.vector=this.target.pos.sub(this.attacker.pos),this.start=t.pos.clone(),this.pos=t.pos.clone(),this.startTime=gl.time,this.endTime=gl.time+e.speed/2,this.totalTime=e.speed/2,this.room=r,this.z=t.spec.height/2,this.color=e.color?e.color:"#fff"},tick:function(){var e=(gl.time-this.startTime)/this.totalTime;e<1?this.pos=this.start.pctCloser(this.target.pos,e):(this.pos=this.target.pos,this.hit(this.target),this.remove())}});e.extend({AttackManager:o})}),namespace.module("bot.zone",function(e,t){var n=0,r=1,i=t("org.startpad.funcs").patch(),s=namespace.bot.log,o=namespace.bot.entity,u=namespace.bot.prob,a=namespace.bot.itemref,f=namespace.bot.vectorutils,l=f.Point,c=namespace.bot.damage.Damage,h=namespace.bot.bodies.HeroBody,p=namespace.bot.bodies.MonsterBody,d=gl.Model.extend({initialize:function(e,t){this.allZones=a.ref.zone,this.zoneOrder=a.ref.zoneOrder.order,this.settings=t,this.hero=new h(e,this),this.attackManager=new namespace.bot.attacks.AttackManager(this.ensureRoom.bind(this)),gl.addAttack=this.attackManager.addAttack.bind(this.attackManager),this.messages=new v,this.waitingUntil=0,this.nextZone=0,this.unlockedZones=0,this.newZone(this.nextZone)},toJSON:function(){return{nextZone:this.nextZone,unlockedZones:this.unlockedZones}},fromJSON:function(e){_.extend(this,e),this.newZone(this.nextZone)},getZoneFromNum:function(e){var t,n,r;e<6?(t=0,n=0):e<13?(t=6,n=1):e<21?(t=13,n=2):e<30?(t=21,n=3):e<40?(t=30,n=4):e<51?(t=40,n=5):(t=51,n=6+Math.floor((e-t)/12));var i=this.zoneOrder.length,r=(e-t)%i,s=this.zoneOrder[r];s==="beginners field"?n-=1:s==="gothic castle"?n-=2:s==="decaying temple"?n-=3:s==="lich tower"?n-=4:s==="wicked dream"?n-=5:s==="imperial barracks"&&(n-=6);var o=s+(n>0?" "+(n+1):"");return{nameStr:o,upgradeCount:n,zoneI:r,name:s}},getMonStats:function(e,t,n){n=n===!1?!1:!0;var r=new p(e,t,this),i=namespace.bot.entity.defKeys.concat(namespace.bot.entity.eleResistKeys),s=namespace.bot.entity.dmgKeys;_.each(i,function(t){n&&console.log(t+": "+r.spec[t]);if(r.spec[t]===undefined||isNaN(r.spec[t]))throw e+" has invalid "+t}),_.each(r.spec.skillchain.skills,function(t){if(t===undefined)return;n&&console.log(t.name),_.each(s,function(r){n&&console.log(r+": "+t[r]);if(t[r]===undefined||isNaN(t[r]))throw e+" -  "+t.name+" has invalid "+r})})},valMons:function(e){var t=namespace.bot.itemref.ref.monster;return _.each(t,function(t,n){this.getMonStats(n,e,!1),_.each(t.sourceCards,function(e){namespace.bot.itemref.ref.card[e[0]]===undefined&&console.log("monster"+n+" has weird card",e)})},this),console.log(this.statResult),"done"},getZoneStats:function(){var e={},t=!0,n=0,r=t?this.rooms.slice(0,this.rooms.length-1):this.rooms;_.each(this.weights,function(t,n){monName=this.choices[n],mon=new p(this.choices[n],this.level,this),e[mon.spec.name]===undefined&&(mon.weight=t,e[mon.spec.name]=mon)},this);var i=["moveSpeed","maxHp","armor","dodge","eleResistAll"],s=["physDmg","fireDmg","coldDmg","poisDmg","lightDmg","accuracy","speed"],o={},u={},a={},f={},l={},c=0;return _.each(e,function(e){if(e.spec.name=="buddha")return;c+=e.weight,_.each(i,function(t){if(o[t]===undefined||e.spec[t]>o[t])o[t]=e.spec[t],f[t]=e.spec.name+" "+e.spec[t];if(a[t]===undefined||e.spec[t]<a[t])a[t]=e.spec[t],l[t]=e.spec.name+" "+e.spec[t];u[t]===undefined?u[t]=e.spec[t]*e.weight:u[t]+=e.spec[t]*e.weight},this),_.each(e.spec.skillchain.skills,function(t){if(t===undefined)return;n+=e.weight,_.each(s,function(n){if(o[n]===undefined||t[n]>o[n])o[n]=t[n],f[n]=e.spec.name+" "+t.name+" "+t[n];if(a[n]===undefined||t[n]<a[n])a[n]=t[n],l[n]=e.spec.name+" "+t.name+" "+t[n];u[n]===undefined?u[n]=t[n]*e.weight:u[n]+=t[n]*e.weight},this)},this)},this),_.each(i,function(e){u[e]/=c}),_.each(s,function(e){u[e]/=n,isNaN(u[e])&&console.log("weirdstat",e)}),this.statResult={avgs:u,maxs:o,mins:a,mons:e},this.statResult},newZone:function(e){gl.DirtyQueue.mark("zone:start"),typeof e!="number"&&(e=0,this.nextZone=0),this.iuid=_.uniqueId("inst");var t,n,r,i,o,a,f=this.getZoneFromNum(e),l=this.zoneOrder.length,c=f.zoneI,h=f.upgradeCount;this.name=f.name,this.nameStr=f.nameStr,s.enterZone(this.nameStr),_.extend(this,this.allZones[this.name]),this.level=Math.max(1,e*5),this.roomCount=5+Math.floor(Math.sqrt(e)),this.rooms=this.generator();var d=[],v=[];_.each(this.choices,function(e,t){var n=namespace.bot.itemref.ref.monster[e];if(!n.minLevel||n.minLevel<=this.level)d.push(e),v.push(this.weights[t])},this);var m;for(t=0;t<this.rooms.length;t++){i=[];if(t%2===0){o=this.quantity[0]+u.pProb(this.quantity[1]+h/2,this.quantity[2]+h),o=Math.min((t/2+1)*(this.quantity[0]+h),o);for(var n=0;n<o;n++)m=new p(d[u.pick(v)],this.level,this),m.spec.materials=this.getZoneMats(m.spec.rarity),i.push(m);t===this.rooms.length-1&&(m=new p(this.boss,this.level,this),m.spec.materials=this.getZoneMats("boss"),m.spec.rarity="boss",i.push(m))}_.extend(this.rooms[t],{monsters:i,heros:{},attackManager:undefined}),_.each(this.rooms[t].monsters,function(e){e.initPos(this.rooms[t])},this)}this.heroPos=0,this.rooms[0].heros[this.hero.id]=this.hero,this.hero.revive(),this.hero.initPos(this.rooms[0]),this.attackManager.nextRoom(this.rooms[0]),gl.DirtyQueue.mark("zone:new"),this.getZoneStats()},getZoneMats:function(e){var t=a.ref.matDropRates;e===undefined&&(e="normal");var n=[];return _.each(this.materials,function(r){var i=a.ref.materials[r];i===undefined&&s.error("mat %s not in itemref",r);var o=Math.abs(i.category-4),u=t[e][o];u>0&&n.push(r)},this),n},generator:function(){var e=[10,20],t=[7,10],n=1e3,r,i=1,s,o,a=[],f,c,h,p,d,v;c=new l(u.rand(e[0],e[1]),u.rand(t[0],t[1])),h=new l(0,0),p=new l(0,u.middle50(c.y)),f={size:c,pos:h,ent:p},a.push(f);while(a.length<this.roomCount*2-1)i=u.rand(0,1),i===0?f.exit=new l(u.middle50(f.size.x),0):f.exit=new l(f.size.x,u.middle50(f.size.y)),v=f.pos.add(f.exit),i===0?(c=new l(2,5),p=new l(1,5),h=v.sub(p),d=new l(1,0)):(c=new l(5,2),p=new l(0,1),h=v.sub(p),d=new l(5,1)),f={size:c,pos:h,ent:p,exit:d},a.push(f),c=new l(u.rand(e[0],e[1]),u.rand(t[0],t[1])),v=f.pos.add(f.exit),i===0?(c=c.flip(),p=new l(u.middle50(c.x),c.y),h=v.sub(p)):(p=new l(0,u.middle50(c.y)),h=v.sub(p)),f={size:c,pos:h,ent:p},a.push(f);for(var m=0;m<a.length;m++)a[m].size=a[m].size.mult(n),a[m].pos=a[m].pos.mult(n),a[m].ent=a[m].ent.mult(n),a[m].exit&&(a[m].exit=a[m].exit.mult(n));return a},ensureRoom:function(){if(this.waitingUntil)return this.rooms[this.heroPos];if(this.roomCleared()&&this.atExit()){var e=this.rooms[this.heroPos];delete e.heros[this.hero.id],e.attackManager=undefined,this.heroPos+=1,e=this.rooms[this.heroPos],this.hero.initPos(e),e.heros[this.hero.id]=this.hero,this.attackManager.nextRoom(this.rooms[this.heroPos]),e.attackManager=this.attackManager,_.each(e.monsters,function(e){e.revive()});if(gl.settings.bossPause&&this.heroPos<this.rooms.length-1){var t=!1;_.each(this.rooms[this.heroPos+1].monsters,function(e){e.spec.rarity==="boss"&&(t=!0)}),t&&gl.pause()}gl.DirtyQueue.mark("zone:nextRoom")}return this.rooms[this.heroPos]},checkDone:function(){if(this.waitingUntil)return;if(!this.hero.isAlive()){this.startWaiting({text:"You Died!",type:"death"});if(gl.settings.backOnDeath===!0){var e=Math.max(gl.settings.zonesBack,0);this.nextZone-=e,this.nextZone=Math.max(this.nextZone,0)}}else this.done()&&(s.error("Zone %s index: %d cleared",this.nameStr,this.nextZone),this.tryUnlockNextZone(),gl.DirtyQueue.mark("zone:nextRoom"),this.settings.autoAdvance&&(this.nextZone+=1),gl.GameEvents.trigger("zoneClear"),gl.GameEvents.trigger("reportData"),this.startWaiting({text:"Zone Cleared!",type:"clear"}))},startWaiting:function(e){this.hero.moveStart=-1,this.messages.addMessage(_.extend(e,{pos:this.hero.pos,color:"#FFF",lifespan:2e3,verticalOffset:0,time:gl.time,expires:gl.time+2e3})),this.waitingUntil=gl.time+2e3},tryUnlockNextZone:function(){gl.GameEvents.trigger("beatgame"),this.nextZone===this.unlockedZones&&(this.unlockedZones+=1,gl.DirtyQueue.mark("zone:unlocked"),s.error("New map unlocked - #%d",this.unlockedZones))},atExit:function(){var e=this.rooms[this.heroPos];return e.exit&&this.hero.pos.equal(e.exit)},getNearbyPos:function(e,t){var n=this.getCurrentRoom();return res=new namespace.bot.vectorutils.Point(0,0),res.x=e.x+Math.random()*t*2-t,res.x=Math.floor(Math.max(0,Math.min(n.size.x,res.x))),res.y=e.y+Math.random()*t*2-t,res.y=Math.floor(Math.max(0,Math.min(n.size.y,res.y))),res},zoneTick:function(){var e,t,n;this.waitingUntil?gl.time>this.waitingUntil&&(s.info("Getting new zone"),this.hero.revive(),this.newZone(this.nextZone),this.waitingUntil=0):(e=this.ensureRoom(),_.each(this.liveHeroes(),function(t){t.tryDoStuff(e,this.liveMons())},this),e=this.ensureRoom(),_.each(this.liveMons(),function(t){t.tryDoStuff(e,this.liveHeroes())},this)),this.attackManager.tick([this.liveHeroes(),this.liveMons()]),this.checkDone(),gl.DirtyQueue.mark("zoneTick")},maxStep:function(){var e,t,n,r;e=this.ensureRoom(),t=e.monsters,n=this.hero.nextAction;for(r=t.length;r--;)ml=Math.min(t[r].nextAction,n);return n-gl.time},liveMons:function(){return _.filter(this.rooms[this.heroPos].monsters,function(e){return e.isAlive()})},liveHeroes:function(){return _.filter(this.rooms[this.heroPos].heros,function(e){return e.isAlive()})},getCurrentRoom:function(){return this.rooms[this.heroPos]},roomCleared:function(){return this.liveMons().length===0},done:function(){return this.roomCleared()&&this.heroPos===this.rooms.length-1},getAttacks:function(){return this.attackManager.getAttacks()}}),v=gl.Model.extend({initialize:function(){this.listenTo(gl.MessageEvents,"message",this.addMessage),this.listenTo(gl.DirtyListener,"zone:nextRoom",this.flush),this.listenTo(gl.DirtyListener,"zone:new",this.flush),this.msgs=[]},addMessage:function(e){this.msgs.push(e),this.prune()},prune:function(){this.msgs=_.filter(this.msgs,function(e){return e.expires>gl.time&&(e.type!=="dmg"||e.dmg.getY()>0)})},flush:function(){this.msgs=[]}});e.extend({ZoneManager:d,MonsterBody:p,HeroBody:h})}),namespace.module("bot.vis",function(e,t){function f(e){var t=e.mult(i.ratio);return t=t.toIso(),t.y-=s/2,t.add(i.diff)}function d(e,t){_.each(t,function(t){e.textAlign="center",e.textBaseline="bottom",e.font=Math.floor(i.ratio*300)+"px Source Code Pro";if(t.type==="dmg"){var n=t.dmg;e.fillStyle=n.color;var r=f(n.getBase());r.y-=n.getY()*i.ratio,e.fillText(t.text,r.x,r.y)}else{e.fillStyle=t.color;var s=f(t.pos);t.verticalOffset&&(s.y-=t.verticalOffset*i.ratio),e.fillText(t.text,s.x,s.y-(gl.time-t.time)/t.lifespan*20)}})}function v(e){for(var t=e.length;t--;)e[t].updateZ();e.sort(function(e,t){return e.z-t.z})}function m(e){this.atk=e,this.z=0}function g(e){this.body=e,this.z=0,this.body.spec.color?this.color=this.body.spec.color:this.color=this.body.isHero()?"rgba(0, 150, 240, 1)":"rgba(240, 20, 30, 1)"}function y(e,t){t&&e.moveTo(t.x,t.y);for(var n=2;n<arguments.length;n++)e.lineTo(arguments[n].x,arguments[n].y)}function b(e,t,n,r,s){s<0&&(s=0),n=n.toUpperCase();var o=Math.floor(i.ratio*300);e.fillStyle="#111",e.textAlign="center",e.textBaseline="top",e.font=o+"px Source Code Pro",e.fillText(n,r.x,r.y-o*1.75);var u=t.getContext("2d"),a=u.measureText(n).width;u.clearRect(0,0,a,o),u.fillStyle="#e12",u.textAlign="left",u.textBaseline="top",u.font=o+"px Source Code Pro",u.fillText(n,0,0),u.clearRect(a*s,0,a,o),e.drawImage(t,0,0,a,o,r.x-a/2,r.y-o*1.75,a,o)}function w(e,t,n,r){e.beginPath(),e.arc(t.x,t.y,r,0,2*Math.PI,!1),e.closePath(),e.fillStyle=n,e.fill()}function E(e,t,n,r,i,s){e.strokeStyle=n,S(e,t.x,t.y,r*2,i*2),e.closePath(),s&&(e.fillStyle=n,e.fill())}function S(e,t,n,r,i){x(e,t-r/2,n-i/2,r,i)}function x(e,t,n,r,i){var s=.5522848,o=r/2*s,u=i/2*s,a=t+r,f=n+i,l=t+r/2,c=n+i/2;e.beginPath(),e.moveTo(t,c),e.bezierCurveTo(t,c-u,l-o,n,l,n),e.bezierCurveTo(l+o,n,a,c-u,a,c),e.bezierCurveTo(a,c+u,l+o,f,l,f),e.bezierCurveTo(l-o,f,t,c+u,t,c),e.stroke()}function T(e,t){var n=t.pos.sub(t.start).len(),r=n-t.aoeRadius/2;r<0&&(r=0),n*=i.ratio,r*=i.ratio;var s=f(t.start),o=t.vector.rotate(-t.angle/2).angle(),u=t.vector.rotate(t.angle/2).angle(),a=function(e){return e<0&&(e+=Math.PI*2),e};o=a(o),u=a(u),e.save(),e.beginPath();var l=1,c=.5,h=-1,p=.5;e.setTransform(l,c,h,p,s.x,s.y),e.fillStyle=t.color,e.arc(0,0,n,o,u,!1),e.arc(0,0,r,u,o,!0),e.fill(),e.restore()}function N(e,t){var n=t.pos.sub(t.start).len(),r=n-200;r<0&&(r=0),n*=i.ratio,r*=i.ratio;var s=f(t.start);e.save(),e.beginPath();var o=1,u=.5,a=-1,l=.5;e.setTransform(o,u,a,l,s.x,s.y),e.fillStyle=t.color,e.arc(0,0,n,0,Math.PI*2,!1),e.arc(0,0,r,Math.PI*2,0,!0),e.fill(),e.restore()}var n=113,r=namespace.bot.log,i={},s=1e4,o=namespace.bot.vectorutils,u=o.Point,a=Backbone.View.extend({tagName:"div",className:"vis",events:{mouseenter:"onMouseenter"},onMouseenter:function(){gl.UIEvents.trigger("itemSlotMouseleave")},initialize:function(e,t,n){gl.vvsRatioMod=1,r.info("visview init"),this.zone=t.zone,this.gameView=n,this.updateConstants(),this.bg=new h({},t),this.entity=new p({},t)
,this.listenTo(gl.DirtyListener,"throttledResize",this.resize),this.resize(),this.$el.append(this.bg.render().el),this.$el.append(this.entity.render().el),this.listenTo(gl.DirtyListener,"tick",this.render),this.listenTo(gl.DirtyListener,"hero:move",this.updateConstants),this.listenTo(gl.DirtyListener,"centerChange",this.force),window.forceUpdateConstants=this.updateConstants.bind(this)},updateConstants:function(){var e=new u(window.innerWidth,window.innerHeight-n);e.y<40&&(e.y=40),i.ss=e.clone(),e.x/2>e.y?i.realSize=e.y:i.realSize=e.x/2,i.ratio=i.realSize/s*gl.vvsRatioMod,i.center=this.gameView.getCenter(),i.cart=this.zone.hero.pos.mult(i.ratio),i.iso=i.cart.toIso(),i.iso.y-=s/2,i.diff=i.center.sub(i.iso)},resize:function(){this.updateConstants(),this.$el.css({width:i.ss.x,height:i.ss.y}),this.bg.resize(),this.entity.resize()},force:function(){this.updateConstants(),this.bg.force()},render:function(){return this}}),l=gl.Model.extend({initialize:function(){var e=namespace.bot.itemref.ref.zoneOrder.order;this.tiles={};for(var t=0;t<e.length;t++)this.tiles[e[t]]=new c(e[t])},ready:function(e){return this.tiles[e].cache(),this.tiles[e].imgLoaded&&this.tiles[e].cached},get:function(e){var t=this.tiles[e];return t.cache(),t.canvas}}),c=gl.Model.extend({initialize:function(e){this.canvas=document.createElement("canvas"),this.cached=!1,this.name=e,this.filename="assets/"+e.replace(/ /g,"_")+".jpg",this.img=new Image,this.img.onload=function(){this.imgLoaded=!0}.bind(this),this.img.src=this.filename,this.listenTo(gl.DirtyListener,"throttledResize",this.resize)},getCanvasSize:function(){return new u(Math.ceil(2e4*i.ratio),Math.ceil(2e4*i.ratio))},cache:function(){if(!this.imgLoaded){setTimeout(this.cache.bind(this),50);return}if(this.cached)return;var e=this.getCanvasSize();$(this.canvas).attr({width:e.x,height:e.y});var t=Math.floor(256*i.ratio*10),n=this.canvas.getContext("2d"),r,s;n.drawImage(this.img,0,0,256,256,0,0,t,t);for(var r=t;r<=e.x;r*=2)n.drawImage(this.canvas,0,0,r,r,r,0,r,r),n.drawImage(this.canvas,0,0,r,r,r,r,r,r),n.drawImage(this.canvas,0,0,r,r,0,r,r,r);this.cached=!0,gl.DirtyQueue.mark("centerChange")},resize:function(){this.cached=!1}}),h=Backbone.View.extend({tagName:"canvas",className:"bg",initialize:function(e,t){this.zone=t.zone,this.redraw=!0,this.reposition=!0,this.tiler=new l(this.zone.name),this.resize(),this.listenTo(gl.DirtyListener,"tick",this.render),this.listenTo(gl.DirtyListener,"hero:move",function(){this.redraw=!0}),this.listenTo(gl.DirtyListener,"zone:nextRoom",function(){this.redraw=!0}),this.listenTo(gl.DirtyListener,"zone:start",function(){this.redraw=!0}),this.totalFrames=0,this.totalTime=0},resize:function(){this.size=new u(Math.max(window.innerWidth,40),Math.max(window.innerHeight-n,40)),this.$el.attr({width:this.size.x,height:this.size.y}),this.ctx=this.el.getContext("2d"),this.force()},clear:function(){this.$el.attr("width",this.size.x),this.redraw=!0},force:function(){this.redraw=!0,r.info("force background"),this.render()},render:function(){if(this.redraw){var e=(new Date).getTime();this.clear(),this.ctx.save(),this.transform(),this.drawBg(),this.redraw=!1,this.reposition=!1,this.totalFrames+=1,this.totalTime+=(new Date).getTime()-e,this.totalFrames>=60&&(this.totalFrames=0,this.totalTime=0)}return this.reposition&&(r.error("repositioning"),this.retransform(),this.reposition=!1),this},transform:function(){var e=1,t=.5,n=-1,r=.5,i=f(new u(0,0));this.lastPos=this.zone.hero.pos,this.ctx.setTransform(e,t,n,r,i.x,i.y)},retransform:function(){var e=1,t=.5,n=-1,r=.5,i=this.zone.hero.pos.sub(this.lastPos),s=f(i);this.ctx.setTransform(e,t,n,r,s.x,s.y)},drawBg:function(){if(!this.tiler.ready(this.zone.name))return;var e=this.zone.heroPos-4,t=this.zone.heroPos+4;e<0&&(e=0),t>=this.zone.rooms.length&&(t=this.zone.rooms.length-1);var n=this.tiler.get(this.zone.name);for(var r=e;r<=t;r++){var s=this.zone.rooms[r],o=s.pos.sub(this.zone.getCurrentRoom().pos),u;o=o.mult(i.ratio),u=s.size.mult(i.ratio),this.ctx.drawImage(n,0,0,u.x,u.y,o.x,o.y,u.x,u.y)}}}),p=Backbone.View.extend({tagName:"canvas",className:"entity",initialize:function(e,t){r.info("visview init"),this.zone=t.zone,this.resize(),this.listenTo(gl.DirtyListener,"tick",this.render),this.tempCanvas=document.createElement("canvas"),$(this.tempCanvas).attr({width:2e3,height:400}),this.tctx=this.tempCanvas.getContext("2d")},resize:function(){this.size=new u(Math.max(window.innerWidth,40),Math.max(window.innerHeight-n,40)),this.$el.attr({width:this.size.x,height:this.size.y})},clear:function(){this.el.getContext("2d").clearRect(0,0,this.size.x,this.size.y)},render:function(){this.clear();var e=this.el.getContext("2d"),t=this.zone.ensureRoom(),n=this.zone.liveMons(),r=[];return _.each(n,function(e){r.push(new g(e))},this),r.push(new g(this.zone.hero)),_.each(this.zone.getAttacks(),function(e){r.push(new m(e))}),v(r),_.each(r,function(t){t.draw(e,this.tempCanvas)},this),this.zone.messages.prune(),d(e,this.zone.messages.msgs),this}});m.prototype.updateZ=function(){this.atk.type==="cone"||this.atk.type==="circle"?this.z=0:this.z=(this.atk.pos.x+this.atk.pos.y)/2},m.prototype.draw=function(e,t){if(this.atk.type==="proj"&&gl.time<this.atk.fireTime)return;if(this.atk.type==="cone"&&gl.time<this.atk.fireTime)return;if(this.atk.type==="circle"&&gl.time<this.atk.fireTime)return;var n=f(this.atk.pos);n.y-=this.atk.z*i.ratio,this.atk.type==="circle"?N(e,this.atk):this.atk.type==="cone"?T(e,this.atk):w(e,n,this.atk.color,this.atk.projRadius*i.ratio)},g.prototype.updateZ=function(){this.z=(this.body.pos.x+this.body.pos.y)/2},g.prototype.draw=function(e,t){var n=f(this.body.pos),r,s=this.body.spec.height*i.ratio,o=this.body.spec.width*i.ratio;e.lineCap="round",e.lineWidth=this.body.spec.lineWidth*i.ratio;var a=new u(0,s*67/72),l=s*10/72,c=new u(0,s*23/72),h=s*23/72,p=new u(0,s*45/72),d=s*28/72,v=[a,new u(0,h)],m=Math.round(100*this.body.spec.opacity)/100,g=this.color.slice(0,this.color.length-2)+m+")";e.strokeStyle=g,w(e,n.sub(a),g,l);var E=0;if(this.body.moveStart>-1){var S=this.body.spec.width/this.body.spec.moveSpeed*8;E=(gl.time-this.body.moveStart)%S/S*2}e.beginPath(),y(e,n.sub(new u(v[0].x,v[0].y-l)),n.sub(v[1]),n.add(new u(o/2*(1-E),0))),y(e,n.sub(v[1]),n.sub(new u(o/2*(1-E),0)));var x,T;if(this.body.busy()){var N;this.body.lastDuration>0?N=(this.body.nextAction-gl.time)/this.body.lastDuration:N=1;var C=(N+.1)*1.3*Math.PI*2,k=Math.PI/4*Math.sin(C),L=N*Math.PI*2,A=Math.PI/4*Math.sin(L);x=new u(Math.cos(k)*o/2,Math.sin(k)*o/2),T=new u(Math.cos(A+Math.PI)*o/2,Math.sin(A+Math.PI)*o/2)}else x=new u(o/2,0),T=new u(-o/2,0);var O=n.sub(p);y(e,O,O.add(x)),y(e,O,O.add(T)),e.stroke(),b(e,t,this.body.spec.name,n.sub(new u(0,s)),this.body.hp/this.body.spec.maxHp)},e.extend({VisView:a})}),namespace.module("bot.footer",function(e,t){var n,r,i=114,s=161;$(function(){n=namespace.bot.log,r=namespace.bot.utils.prettifyNum});var o=Backbone.View.extend({tagName:"div",className:"barHolder",template:_.template($("#stat-bar-template").html()),height:20,width:s,fontSize:14,fontColor:"rgba(170, 170, 160, 1)",bgColor:"#f00",initialize:function(e){this.$el.html(this.template()),this.$bar=this.$(".bar"),this.$text=this.$(".text"),this.$el.css({width:this.width,height:this.height}),this.$bar.css({"background-color":this.bgColor,width:0}),this.$text.css({color:this.fontColor,"font-size":this.fontSize,"line-height":this.height+"px"}),this.lastWidth=0},_render:function(e,t){return e<0&&(e=0),this.$text.html(this.getText(e,t)),this.setWidth(e,t),this},setWidth:function(e,t){var n=Math.floor(this.width*e/t);n!==this.lastWidth&&(this.lastWidth=n,this.$bar.css("width",n))},getText:function(e,t){return r(e)+"/"+r(t)}}),u=o.extend({bgColor:"#B22222",render:function(){return this._render(this.model.hp,this.model.spec.maxHp)}}),a=o.extend({bgColor:"#0000AB",render:function(){return this._render(this.model.mana,this.model.spec.maxMana)}}),f=o.extend({bgColor:"#B8860B",width:453,render:function(){return this._render(this.model.spec.xp,this.model.spec.getNextLevelXp())}}),l=o.extend({fontSize:14,bgColor:"#B8660B",render:function(){return this._render(this.model.heroPos,this.model.rooms.length)},getText:function(){return this.model.nameStr+" ("+this.model.level+")"}}),c=Backbone.View.extend({tagName:"div",className:"name-level",render:function(){return this.$el.html('<div class="name"><div>'+this.model.name+'</div></div><div class="level">'+this.model.level+"</div>"),this.$(".name").css("width",s-5-this.$(".level").width()),this}}),h=Backbone.View.extend({tagName:"div",className:"vitals",initialize:function(e,t,n){this.hero=t,this.zone=n,this.nameLevel=new c({model:this.hero.spec}),this.hpBar=new u({model:this.hero}),this.manaBar=new a({model:this.hero}),this.zoneBar=new l({model:this.zone}),this.listenTo(gl.DirtyListener,"rename",this.nameLevel.render.bind(this.nameLevel)),this.listenTo(gl.DirtyListener,"hero:hp",this.hpBar.render.bind(this.hpBar)),this.listenTo(gl.DirtyListener,"hero:mana",this.manaBar.render.bind(this.manaBar)),this.listenTo(gl.DirtyListener,"zone:new",this.zoneBar.render.bind(this.zoneBar)),this.listenTo(gl.DirtyListener,"zone:nextRoom",this.zoneBar.render.bind(this.zoneBar)),gl.DirtyQueue.mapMark(["hero:levelup","revive","computeAttrs"],"heroFooterRender"),this.listenTo(gl.DirtyListener,"heroFooterRender",this.render),this.renderedOnce=!1},render:function(){return this.renderedOnce?(this.nameLevel.render(),this.hpBar.render(),this.manaBar.render(),this.zoneBar.render()):(this.renderedOnce=!0,this.$el.append(this.nameLevel.render().el),this.$el.append(this.hpBar.render().el),this.$el.append(this.manaBar.render().el),this.$el.append(this.zoneBar.render().el)),this}}),p=Backbone.View.extend({tagName:"div",className:"skill",template:_.template($("#skill-footer-template").html()),events:{mouseenter:"onMouseenter",mouseleave:"onMouseleave"},onMouseenter:function(){gl.UIEvents.trigger("itemSlotMouseenter",{model:this.model.spec})},onMouseleave:function(){gl.UIEvents.trigger("itemSlotMouseleave")},initialize:function(e,t){this.hero=t,this.listenTo(gl.DirtyListener,"tick",this.adjust)},adjust:function(){var e=73,t=0,n=0;if(this.model.coolAt>gl.time){var r=(this.hero.nextAction-gl.time)/this.hero.lastDuration;this.model.spec.cooldownTime===0?(n=r,t=0):(t=(this.model.coolAt-gl.time)/this.model.spec.cooldownTime,t>1?(n=r,t=1):n=0),n*=e,t*=e}this.model.oom?this.$el.addClass("oom"):this.$el.removeClass("oom"),this.model.oor?this.$el.addClass("oor"):this.$el.removeClass("oor"),this.$cd.css("height",t),this.$use.css("width",n)},render:function(){return this.$el.html(this.template(this)),this.$cd=this.$(".cooldown"),this.$use=this.$(".use-bar"),this.adjust(),this}}),d=Backbone.View.extend({tagName:"div",className:"skillchain",initialize:function(e,t){this.hero=t,this.views=[],this.listenTo(gl.DirtyListener,"bodySkillchainUpdated",this.render)},render:function(){this.$el.empty(),_.invoke(this.views,"remove"),this.views=_.map(this.hero.skills,function(e){return new p({model:e},this.hero)},this);var e=document.createDocumentFragment();return _.each(this.views,function(t){e.appendChild(t.render().el)}),this.$el.append(e),this}}),v=Backbone.View.extend({tagName:"div",className:"potion-holder",template:_.template($("#potion-template").html()),events:{mousedown:"use"},initialize:function(e,t){this.hero=t,this.listenTo(gl.DirtyListener,"tick",this.adjust)},use:function(){this.hero.tryUsePotion()},adjust:function(){var e=73,t=(this.hero.potionCoolAt-gl.time)/1e4;this.$cd.css("height",t*e)},render:function(){return this.$el.html(this.template()),this.$cd=this.$(".cooldown"),this}}),m=Backbone.View.extend({tagName:"div",className:"footer-center",initialize:function(e,t){this.renderedOnce=!1,this.skillchainView=new d({},t.zone.hero),this.potionView=new v({},t.zone.hero),this.xpBar=new f({model:t.zone.hero}),this.listenTo(gl.DirtyListener,"hero:xp",this.xpBar.render.bind(this.xpBar)),this.listenTo(gl.DirtyListener,"throttledResize",this.resize),this.resize()},render:function(){return this.renderedOnce?(this.xpBar.render(),this.skillchainView.render(),this.potionView.render()):(this.$el.append(this.xpBar.render().el),this.$el.append(this.skillchainView.render().el),this.$el.append(this.potionView.render().el),this.renderedOnce=!0),this},resize:function(){this.$el.css("left",Math.floor(window.innerWidth/2-228))}}),g=Backbone.View.extend({tagName:"div",className:"drop-area",template:_.template($("#item-drop-area-template").html()),initialize:function(e,t,n,r,i){this.equipped=t.hero.equipped,this.skillchain=t.hero.skillchain,this.craftTab=i,this.listenTo(n,"dragstart",this.onItemDragStart),this.listenTo(r,"dragstart",this.onCardDragStart),this.listenTo(n,"drop",this.onItemDrop),this.listenTo(r,"drop",this.onCardDrop)},onItemDragStart:function(){this.$el.css("display","block"),this.$(".craft-drop").css("display","none")},onCardDragStart:function(){this.$el.css("display","block"),this.$(".craft-drop").css("display","block")},onItemDrop:function(e,t){this.checkRecycleDrop(e,t),this.$el.css("display","none")},onCardDrop:function(e,t){var n=this.$(".craft-drop").offset();e.x>n.left&&e.y>n.top&&e.x<n.left+73&&e.y<n.top+73?(gl.UIEvents.trigger("footer:buttons:craft"),this.craftTab.forceFocus(t)):this.checkRecycleDrop(e,t),this.$el.css("display","none")},checkRecycleDrop:function(e,t){var n=this.$(".recycle-drop").offset();e.x>n.left&&e.y>n.top&&e.x<n.left+73&&e.y<n.top+73&&(t.inRecycle=!0,gl.DirtyQueue.mark("recycleChange"),this.craftTab.forceDeselect(t))},render:function(){return this.$el.html(this.template()),this}}),y=Backbone.View.extend({tagName:"div",className:"speed-control",template:_.template($("#speed-control-template").html()),events:{"mousedown .up":"onUp","mousedown .down":"onDown","mousedown .play-pause":"onPP"},initialize:function(e,t,n,r){this.game=t,this.listenTo(gl.DirtyListener,"tick",this.render),this.renderedOnce=!1,this.listenTo(n,"dragstart",this.onDragStart),this.listenTo(r,"dragstart",this.onDragStart),this.listenTo(n,"drop",this.onDragDrop),this.listenTo(r,"drop",this.onDragDrop)},onDragStart:function(){this.$el.css("display","none")},onDragDrop:function(){this.$el.css("display","block")},onUp:function(){this.game.adjustSpeed("up")},onDown:function(){this.game.adjustSpeed("down")},onPP:function(){this.game.adjustSpeed("play-pause")},render:function(){this.renderedOnce||(this.$el.html(this.template()),this.$timer=this.$(".timer"),this.$pp=this.$(".play-pause"),this.$speed=this.$(".speed"),this.renderedOnce=!0);var e=Math.floor((this.game.curTime-this.game.gameTime)/1e3),t=e%60;e-=t;var n=e%3600,r=e-n;return this.$timer.html(sprintf("%02d:%02d:%02d",r/3600,n/60,t)),this.$speed.html(this.game.gameSpeed+"x"),this.game.gameSpeed===0?this.$pp.addClass("paused"):this.$pp.removeClass("paused"),this.game.gameSpeed<=2||this.game.settings.disableShake?this.$el.removeClass("shake shake-little shake-constant"):this.game.gameSpeed===10?(this.$el.hasClass("shake")||this.$el.addClass("shake shake-constant"),this.$el.hasClass("shake-little")||this.$el.addClass("shake-little")):this.game.gameSpeed>=50&&(this.$el.hasClass("shake")||this.$el.addClass("shake shake-constant"),this.$el.hasClass("shake-little")&&this.$el.removeClass("shake-little")),this}}),b=Backbone.View.extend({tagName:"div",className:"footer",events:{mouseenter:"onMouseenter"},onMouseenter:function(){gl.UIEvents.trigger("itemSlotMouseleave")},initialize:function(e,t,n,r,i){this.resize(),this.listenTo(gl.DirtyListener,"throttledResize",this.resize),this.heroBodyView=new h({},t.zone.hero,t.zone),this.centerView=new m({},t),this.speedView=new y({},t,n,r),this.dropAreaView=new g({},t,n,r,i)},resize:function(){this.$el.css({width:window.innerWidth,top:window.innerHeight-i})},render:function(){var e=document.createDocumentFragment();return e.appendChild(this.heroBodyView.render().el),e.appendChild(this.centerView.render().el),e.appendChild(this.speedView.render().el),e.appendChild(this.dropAreaView.render().el),this.$el.html(e),this}});e.extend({FooterView:b})}),namespace.module("bot.views",function(e,t){var n=114,r,i,s,o,u,a,f,l;$(function(){r=namespace.bot.log,i=namespace.bot.entity,s=namespace.bot.vis.VisView,o=namespace.bot.vectorutils,u=o.Point,a=o.PointFromEvent,f=namespace.bot.utils,l=f.presentableSlot});var c=Backbone.View.extend({el:$("body"),initialize:function(e,t){r.info("GameView initialize"),this.configTab=new F({},t),this.statsTab=new d({},t),this.itemTab=new C({},t),this.helpTab=new I({},t),this.accountTab=new R({},t),this.mapTab=new j({},t),this.cardTab=new k({},t),this.craftTab=new P({},t),this.recycleTab=new H({},t),this.buildTab=new q({},t),this.leftButtonsView=new m({},this.getLeft.bind(this)),this.rightButtonsView=new g({},t.inv,t.cardInv,this.getRight.bind(this)),this.footerView=new namespace.bot.footer.FooterView({},t,this.itemTab.dragHandler,this.cardTab.dragHandler,this.craftTab),this.infoBox=new v({},this.getRight.bind(this)),this.visView=new s({},t,this),this.$el.append(this.visView.render().el),this.$el.append(this.statsTab.render().el),this.$el.append(this.mapTab.render().el),this.$el.append(this.itemTab.render().el),this.$el.append(this.cardTab.render().el),this.$el.append(this.craftTab.render().el),this.$el.append(this.recycleTab.render().el),this.$el.append(this.leftButtonsView.render().el),this.$el.append(this.rightButtonsView.render().el),this.$el.append(this.infoBox.el),this.$el.append(this.footerView.render().el),this.$el.append(this.configTab.render().el),this.$el.append(this.helpTab.render().el),this.$el.append(this.accountTab.render().el),this.$el.append(this.buildTab.render().el),this.resizeThrottler=new f.Throttler(function(){gl.DirtyQueue.mark("throttledResize")},500),$(window).on("resize",this.resizeThrottler.throttled)},getLeft:function(){var e=0;return this.statsTab.tvm.visible?e=this.statsTab.$el.width():this.mapTab.tvm.visible?e=this.mapTab.$el.width():this.helpTab.tvm.visible?e=this.helpTab.$el.width():this.configTab.tvm.visible?e=this.configTab.$el.width():this.accountTab.tvm.visible&&(e=this.accountTab.$el.width()),e},getRight:function(){var e=0;return this.itemTab.tvm.visible?e=this.itemTab.$el.width():this.cardTab.tvm.visible?e=this.cardTab.$el.width():this.craftTab.tvm.visible?e=this.craftTab.$el.width():this.recycleTab.tvm.visible?e=this.recycleTab.$el.width():this.buildTab.tvm.visible&&(e=this.buildTab.$el.width()),e},getCenter:function(){var e=this.getLeft(),t=this.getRight();return new u((window.innerWidth-e-t)/2+e,(window.innerHeight-n)/2)}}),h=gl.Model.extend({initialize:function(e,t,n,r){this.name=e,this.$el=t,this.render=n,this.visible=!1,this.$el.addClass("hidden"),this.listenTo(gl.UIEvents,r,this.toggleVisible);for(var i=4;i<arguments.length;i++)this.listenTo(gl.UIEvents,arguments[i],this.hide)},show:function(){r.UI("Showing %s tab",this.name),this.visible=!0,this.$el.removeClass("hidden"),(this.name==="cards"||this.name==="craft")&&gl.cardSort(this.name),this.render(),gl.UIEvents.trigger("tabShow",this.name)},hide:function(){r.info("Hiding %s tab",this.name),this.visible=!1,this.$el.addClass("hidden"),gl.UIEvents.trigger("tabHide",this.name)},toggleVisible:function(){this.visible?this.hide():this.show(),gl.DirtyQueue.mark("centerChange")}}),p=Backbone.View.extend({tagName:"div",template:_.template($("#kv-table-template").html()),initialize:function(e,t){this.listenTo(gl.DirtyListener,"computeAttrs",this.render),this.zone=t},render:function(){var e,t,n={},r={},s={},o=this.model,u=o.spec,a=namespace.bot.itemref;n.body=[["Name",u.name],["Level",u.level]];var l=this.zone.statResult;for(var c=0;c<this.model.skills.length;c++){var h=[];e=this.model.skills[c],_.each(i.dmgKeys,function(n){if(n==="projCount"&&e.spec.projCount<=1)return;if(n==="decayRange")return;if(n==="radius"||n==="rate"||n==="angle")return;t=namespace.bot.itemref.ref.statnames[n],h.push([t,e.spec[n].toFixed(2)]);if(n==="accuracy"){var r=l.avgs.dodge,i=this.model.spec.level,s=this.zone.level,o=e.spec.accuracy,u=3*(o/(o+r))*(.5+i/(i+s)/2),a=Math.max(Math.min(.99,u),.01);a=(a*100).toFixed(2),h.push(["Avg % Chance to Hit",a+"%"])}},this);var p=Math.max(0,e.coolAt-gl.time);h.push(["Cool In",Math.floor(p)]),r[e.spec.name]=h}n.spec=[];var d=i.defKeys.concat(i.eleResistKeys).concat(i.thornKeys),v,m={armor:"physDmg",fireResist:"fireDmg",coldResist:"coldDmg",lightResist:"lightDmg",poisResist:"poisDmg"};for(var c=0;c<d.length;c++){v=d[c],t=namespace.bot.itemref.ref.statnames[v],n.spec.push([t,this.model.spec[v].toFixed(2)]);if(v==="dodge"){t="Avg % Dodge Chance (this zone)";var g=this.model.spec.dodge,y=this.zone.level,b=this.model.spec.level,w=l.avgs.accuracy,E=3*(w/(w+g))*(.5+y/(y+b)/2),S=Math.max(Math.min(.99,1-E),.01);S=(S*100).toFixed(2),n.spec.push([t,S+"%"]),t="Min % Dodge Chance (this zone)";var g=this.model.spec.dodge,y=this.zone.level,b=this.model.spec.level,w=l.maxs.accuracy,E=3*(w/(w+g))*(.5+y/(y+b)/2),S=Math.max(Math.min(.99,1-E),.01);S=(S*100).toFixed(2),n.spec.push([t,S+"%"])}if(Object.keys(m).indexOf(v)!==-1){var x=m[v],T=namespace.bot.itemref.ref.statnames[x];T=T.split(" ")[0];var N=l.avgs[x],C=l.maxs[x],k=N/(N+this.model.spec[v]),L=C/(C+this.model.spec[v]);n.spec.push(["Avg % "+T+" Taken",(k*100).toFixed(4)+"%"]),n.spec.push(["Max % "+T+" Taken",(L*100).toFixed(4)+"%"])}}var A=this.model.spec.versionCreated.split("-").join(".");return n.spec.push(["Character Version",A]),n.spec.push(["Score",this.zone.unlockedZones]),n.spec.push(["Last Death",f.firstCap(this.model.spec.lastDeath)]),s.Materials=[],_.each(a.ref.materials,function(e,t){s.Materials.push([e.printed,namespace.bot.utils.prettifyNum(u.matInv[t])])},this),this.$el.html(this.template({data:n,skilldata:r,matdata:s})),this}}),d=Backbone.View.extend({tagName:"div",className:"stats",initialize:function(e,t){r.info("GameView initialize"),this.zone=t.zone,this.last={},this.heroView=new p({model:this.zone.hero},this.zone),this.listenTo(gl.DirtyListener,"zoneTick",this.render),this.tvm=new h("stats",this.$el,this.render.bind(this),"footer:buttons:stats","footer:buttons:map","footer:buttons:help","footer:buttons:config","footer:buttons:account"),this.$el.append('<div class="holder"></div>'),this.$holder=this.$(".holder"),this.resize(),this.listenTo(gl.DirtyListener,"throttledResize",this.resize)},resize:function(){var e=new u(window.innerWidth,window.innerHeight-n);this.$el.css({height:e.y}),this.$(".holder").css({height:e.y})},diffs:function(){return{inst_uid:this.zone.iuid,heroPos:this.zone.heroPos,liveMonsCount:this.zone.liveMons().length}},render:function(){if(!this.tvm.visible)return this;var e=this.diffs();return this.$holder.html(this.heroView.render().el),this}}),v=Backbone.View.extend({tagName:"div",className:"infoBox",template:_.template($("#info-box-template").html()),initialize:function(e,t){this.getRight=t,this.listenTo(gl.UIEvents,"itemSlotMouseenter",this.show),this.listenTo(gl.UIEvents,"itemSlotMouseleave",this.hide),this.listenTo(gl.DirtyListener,"hero:xp",this.render),this.listenTo(gl.DirtyListener,"card:level",this.render),this.listenTo(gl.UIEvents,"tabShow",this.updateRight),this.listenTo(gl.UIEvents,"tabHide",this.updateRight)},updateRight:function(){this.$el.css("right",this.getRight()+43)},show:function(e){e.model!==undefined&&(this.view=e,this.render())},hide:function(){this.view=undefined,this.render()},render:function(){return this.view?(this.$el.css("display","block"),this.$el.html(this.template(this.view))):this.$el.css("display","none"),this}}),m=Backbone.View.extend({tagName:"div",className:"buttons left",template:_.template($("#left-buttons-template").html()),events:{"mousedown .config-button":"clickConfig","mousedown .help-button":"clickHelp","mousedown .stats-button":"clickStats","mousedown .map-button":"clickMap","mousedown .account-button":"clickAccount"},initialize:function(e,t){this.getLeft=t,this.listenTo(gl.UIEvents,"tabShow",this.onTabShow),this.listenTo(gl.UIEvents,"tabHide",this.onTabHide),this.listenTo(gl.DirtyListener,"newChange",this.setNew)},onTabShow:function(e){this.updatePos(),this.$("."+e+"-button").addClass("open")},onTabHide:function(e){this.updatePos(),this.$("."+e+"-button").removeClass("open")},updatePos:function(){this.$el.css("left",this.getLeft())},clickConfig:function(){gl.UIEvents.trigger("footer:buttons:config")},clickHelp:function(){gl.UIEvents.trigger("footer:buttons:help")},clickStats:function(){gl.UIEvents.trigger("footer:buttons:stats")},clickMap:function(){gl.UIEvents.trigger("footer:buttons:map")},clickAccount:function(){gl.UIEvents.trigger("footer:buttons:account")},render:function(){return this.$el.html(this.template()),this.updatePos(),this}}),g=Backbone.View.extend({tagName:"div",className:"buttons right",template:_.template($("#right-buttons-template").html()),events:{"mousedown .inv-button":"clickInv","mousedown .cards-button":"clickCards","mousedown .craft-button":"clickCraft","mousedown .recycle-button":"clickRecycle","mousedown .build-button":"clickBuild"},initialize:function(e,t,n,r){this.inv=t,this.cardInv=n,this.getRight=r,this.listenTo(gl.UIEvents,"tabShow",this.onTabShow),this.listenTo(gl.UIEvents,"tabHide",this.onTabHide),this.listenTo(gl.DirtyListener,"newChange",this.setNew)},setNew:function(){this.inv.hasNew?this.$("#invnewflag").show():this.$("#invnewflag").hide(),this.cardInv.hasNew?this.$("#cardnewflag").show():this.$("#cardnewflag").hide()},onTabShow:function(e){this.updatePos(),this.$("."+e+"-button").addClass("open")},onTabHide:function(e){this.updatePos(),this.$("."+e+"-button").removeClass("open")},updatePos:function(){this.$el.css("right",this.getRight())},clickInv:function(){gl.UIEvents.trigger("footer:buttons:inv")},clickCards:function(){gl.UIEvents.trigger("footer:buttons:cards")},clickCraft:function(){gl.UIEvents.trigger("footer:buttons:craft")},clickRecycle:function(){gl.UIEvents.trigger("footer:buttons:recycle")},clickBuild:function(){gl.UIEvents.trigger("footer:buttons:build")},render:function(){return this.$el.html(this.template()),this.updatePos(),this}}),y=Backbone.View.extend({tagName:"span",events:{mousedown:"onClick"},onClick:function(){this.trigger("click",this)},initialize:function(e,t,n){this.el.innerHTML=t,this.value=n},select:function(){this.selected=!0,this.$el.addClass("selected")},unselect:function(){this.selected=!1,this.$el.removeClass("selected")}}),b=Backbone.View.extend({tagName:"div",initialize:function(e,t,n){this.texts=t,this.values=n,this.views=[]},render:function(){var e=document.createDocumentFragment(),t;for(var n=0;n<this.texts.length;n++)t=new y({},this.texts[n],this.values[n]),this.listenTo(t,"click",this.onClick),e.appendChild(t.render().el),this.views.push(t);return this.$el.append(e),this.views[0].select(),this.selectedValue=this.views[0].value,this},onClick:function(e){_.invoke(this.views,"unselect"),e.select(),this.selectedValue=e.value,gl.DirtyQueue.mark("filterChange")},filter:function(){throw"This is an abstract class"}}),w=b.extend({filter:function(e){return this.selectedValue===undefined?e:_.filter(e,function(e){if(e.itemType==="armor")return!1;if(e.itemType==="weapon")return e.weaponType===this.selectedValue;if(e.itemType==="skill")return e.skillType===this.selectedValue},this)}}),E=b.extend({filter:function(e){return this.selectedValue===undefined?e:_.filter(e,function(e){return e.slot===this.selectedValue},this)}}),S=b.extend({filter:function(e){return this.selectedValue===undefined?e:_.filter(e,function(e){return e.equipped===this.selectedValue},this)}}),x=Backbone.View.extend({tagName:"div",template:_.template($("#draggable-template").html()),className:"dragSlot",DISABLED:0,DISABLED_WAIT:1,UP_DRAG:2,DOWN_DRAG:3,initialize:function(e){this.uid=_.uniqueId("mml"),this.state=this.DISABLED,this.extraMDF=e,$("body").append(this.el),$("body").on("mousedown "+this.uid,this.onMousedown.bind(this)),$("body").on("mousemove "+this.uid,this.onMousemove.bind(this)),$("body").on("mouseup "+this.uid,this.onMouseup.bind(this)),this.updateBodySize(),this.listenTo(gl.DirtyListener,"throttledResize",this.updateBodySize)},onViewMousedown:function(e,t){this.state===this.DISABLED&&(r.info("disabled to disabled wait"),this.state=this.DISABLED_WAIT,this.model=t,this.dragStart=a(e),this.$el.html(this.template(this.model)))},onMousedown:function(e){this.extraMDF!==undefined&&this.extraMDF(e),this.state===this.UP_DRAG&&(r.info("up drag to down drag"),this.state=this.DOWN_DRAG)},onMousemove:function(e){this.state===this.DISABLED_WAIT?this.dragStart.dist2(a(e))>25&&(r.info("disabled wait to down drag"),this.state=this.DOWN_DRAG,this.startDragging(e)):(this.state===this.DOWN_DRAG||this.state===this.UP_DRAG)&&this.updatePos(e)},onMouseup:function(e){this.state===this.DISABLED_WAIT?(r.info("Disabled wait to up drag"),this.state=this.UP_DRAG,this.startDragging(e)):this.state===this.DOWN_DRAG&&(r.info("down drag to disabled"),this.state=this.DISABLED,this.stopDragging(e))},isDraggingThis:function(e){return(this.state===this.DOWN_DRAG||this.state===this.UP_DRAG)&&this.model.id===e.id},startDragging:function(e){this.$el.css("display","block"),this.updatePos(e),this.trigger("dragstart")},stopDragging:function(e){r.info("DROP"),this.state=this.DISABLED,this.$el.css("display","none");var t=this.model;this.model=undefined,this.trigger("drop",a(e),t)},updateBodySize:function(){this.bodySize=new u(window.innerWidth,window.innerHeight)},updatePos:function(e){var t=e.pageX-37,n=e.pageY-37;t<0&&(t=0),t+77>this.bodySize.x&&(t=this.bodySize.x-77),n<0&&(n=0),n+77>this.bodySize.y&&(n=this.bodySize.y-77),this.$el.css({top:n,left:t})},remove:function(){Backbone.View.prototype.remove.call(this),$("body").off("mousedown "+this.uid,this.onMousedown.bind(this)),$("body").off("mousemove "+this.uid,this.onMousemove.bind(this)),$("body").off("mouseup "+this.uid,this.onMouseup.bind(this))}}),T=Backbone.View.extend({tagName:"div",className:"itemSlot",template:_.template($("#item-slot-template").html()),events:{mousedown:"onMousedown",mouseenter:"onMouseenter",mouseleave:"onMouseleave"},onMousedown:function(e){this.model&&(this.model.isNew=!1,this.dragHandler.onViewMousedown(e,this.model),this.render())},onMouseenter:function(){gl.UIEvents.trigger("itemSlotMouseenter",this),this.trigger("hovering",this)},onMouseleave:function(){this.model&&this.model.isNew&&(this.model.isNew=!1,this.render(),gl.DirtyQueue.mark("removeNew")),this.trigger("hovering"),gl.UIEvents.trigger("itemSlotMouseleave")},initialize:function(e,t,n,r){this.dragHandler=t,n!==undefined?(this.slot=n,this.equipper=r,this.listenTo(this.dragHandler,"drop",this.onDrop)):this.slot=undefined,this.listenTo(this.dragHandler,"dragstart",this.render),this.listenTo(gl.UIEvents,"itemSlotMouseenter",this.onOtherMouseenter),this.listenTo(gl.UIEvents,"itemSlotMouseleave",this.onOtherMouseleave),this.listenTo(gl.DirtyListener,"newChange",this.showIsNew),this.render()},onOtherMouseenter:function(e){e.slot===undefined&&this.slot!==undefined&&(this.slot===e.model.slot||typeof this.slot=="number"&&e.model.itemType==="skill")&&(this.yellow=!0,this.$el.addClass("yellow"))},onOtherMouseleave:function(){this.yellow=!1,this.$el.removeClass("yellow")},dropSuccess:function(e){var t=this.$el.offset(),n=new u(t.left,t.top),r=e.sub(n);return r.x>=0&&r.x<=73&&r.y>=0&&r.y<=73},onDrop:function(e,t){this.dropSuccess(e)&&this.equipper.equip(t,this.slot),gl.DirtyQueue.mark("itemTab")},showIsNew:function(){this.model&&this.model.isNew?this.$el.addClass("new"):this.$el.removeClass("new")},render:function(){return this.$el.html(this.template(this)),this.model&&this.model.disabled&&this.$el.addClass("red"),this.model&&this.dragHandler.isDraggingThis(this.model)&&this.$el.addClass("dragging"),this.showIsNew(),this}}),N=T.extend({onMousedown:function(e){this.model&&(this.model.itemType==="card"?(this.dragHandler.onViewMousedown(e,this.model),this.render()):this.trigger("gearMousedown",this))},select:function(){this.selected=!0,this.$el.addClass("selected")},unselect:function(){this.selected=!1,this.$el.removeClass("selected")},onDrop:function(e,t){this.dropSuccess(e)&&this.equipper&&this.equipper.equipCard(t,this.slot),gl.DirtyQueue.mark("cardTab")},showIsNew:function(){var e=!1;this.model&&(this.model.itemType==="card"?e=this.model.isNew:e=this.model.hasNewCards),e?this.$el.addClass("new"):this.$el.removeClass("new")},render:function(){T.prototype.render.call(this),this.selected&&this.$el.addClass("selected")}}),C=Backbone.View.extend({tagName:"div",className:"itemTab",template:_.template($("#item-tab-template").html()),events:{mouseleave:"onMouseleave"},onMouseleave:function(){gl.UIEvents.trigger("itemSlotMouseleave")},initialize:function(e,t){this.equipped=t.hero.equipped,this.skillchain=t.hero.skillchain,this.inventory=t.inv,this.hovering=undefined,this.renderedOnce=!1,this.
allViews=[],this.dragHandler=new x,this.listenTo(this.dragHandler,"drop",this.onDrop),this.fb1=(new w({},["All","Ml","Ra","Sp"],[undefined,"melee","range","spell"])).render(),this.fb2=(new E({},["All","We","He","Ha","Ch","Lg","Sk"],[undefined,"weapon","head","hands","chest","legs","skill"])).render(),gl.DirtyQueue.mapMark(["item:new","recycleChange","computeAttrs","skillComputeAttrs","filterChange"],"itemTab"),this.listenTo(gl.DirtyListener,"itemTab",this.render),this.throttler=new f.Throttler(function(){gl.DirtyQueue.mark("itemTab")},1e3),this.listenTo(gl.DirtyListener,"hero:xp",this.throttler.throttled),this.tvm=new h("inv",this.$el,this.render.bind(this),"footer:buttons:inv","footer:buttons:craft","footer:buttons:cards","footer:buttons:recycle","footer:buttons:build"),this.resize(),this.listenTo(gl.DirtyListener,"throttledResize",this.resize)},resize:function(){var e=new u(window.innerWidth,window.innerHeight-n);this.$el.css("height",e.y),this.holderHeight=e.y,this.$(".holder").css("height",e.y)},onDrop:function(e,t){var n=this.$(".unequipped").offset();if(t.equipped&&e.x>=n.left&&e.y>=n.top)if(t.itemType==="skill"){var r=this.skillchain.getSkillSlot(t);this.skillchain.equip(undefined,r)}else this.equipped.equip(undefined,t.slot)},onHover:function(e){this.hovering=e},newItemSlot:function(e,t,n){var r=new T({model:e},this.dragHandler,t,n);return this.listenTo(r,"hovering",this.onHover),this.allViews.push(r),r},render:function(){if(!this.tvm.visible)return this;this.renderedOnce||(this.$el.html(this.template()),this.$(".filters").append(this.fb1.el),this.$(".filters").append(this.fb2.el),this.$equipped=this.$(".equipped"),this.$skillchain=this.$(".skillchain"),this.$unequipped=this.$(".unequipped"),this.renderedOnce=!0,this.resize()),_.each(this.allViews,function(e){this.stopListening(e),e.remove()},this),this.allViews=[],_.each(this.equipped.slots,function(e){var t=this.newItemSlot(this.equipped[e],e,this.equipped);this.$equipped.append(t.el)},this),_.each(this.skillchain.skills,function(e,t){var n=this.newItemSlot(e,t,this.skillchain);this.$skillchain.append(n.el)},this);var e=_.where(this.inventory.getModels(),{equipped:!1});return e=this.fb1.filter(e),e=this.fb2.filter(e),_.each(e,function(e){var t=this.newItemSlot(e);this.$unequipped.append(t.el)},this),this.hovering&&this.hovering.model&&(this.hovering=_.find(this.allViews,function(e){return e.model&&this.hovering.model.id===e.model.id},this),this.hovering&&this.hovering.onMouseenter()),this}}),k=Backbone.View.extend({tagName:"div",className:"itemTab",template:_.template($("#card-tab-template").html()),events:{mouseleave:"onMouseleave"},onMouseleave:function(){gl.UIEvents.trigger("itemSlotMouseleave")},initialize:function(e,t){this.equipped=t.hero.equipped,this.skillchain=t.hero.skillchain,this.cardInv=t.cardInv,this.renderedOnce=!1,this.hovering=undefined,this.selected=undefined,this.allViews=[],this.dragHandler=new x(this.onBodyMousedown.bind(this)),this.listenTo(this.dragHandler,"drop",this.onDrop),gl.DirtyQueue.mapMark(["card:new","card:levelup","recycleChange","computeAttrs","skillComputeAttrs"],"cardTab"),gl.DirtyQueue.mapMark(["equipChange"],"hardRenderCardTab"),this.listenTo(gl.DirtyListener,"cardTab",this.render),this.listenTo(gl.DirtyListener,"hardRenderCardTab",this.hardRender),this.throttler=new f.Throttler(function(){gl.DirtyQueue.mark("cardTab")},1e3),this.listenTo(gl.DirtyListener,"material:new",this.throttler.throttled),this.listenTo(gl.DirtyListener,"hero:xp",this.throttler.throttled),this.tvm=new h("cards",this.$el,this.render.bind(this),"footer:buttons:cards","footer:buttons:craft","footer:buttons:inv","footer:buttons:recycle","footer:buttons:build");var n=function(){this.selected=undefined}.bind(this);this.listenTo(gl.UIEvents,"footer:buttons:cards",n),this.listenTo(gl.UIEvents,"footer:buttons:inv",n),this.resize(),this.listenTo(gl.DirtyListener,"throttledResize",this.resize)},onDrop:function(e,t){if(t.equipped){var r=this.$(".unequipped").offset();if(e.x<r.left||e.x>=r.left&&e.y>=r.top&&e.y<window.innerHeight-n){var i=t.gearModel,s=i.getCardSlot(t);i.equipCard(undefined,s)}}},onBodyMousedown:function(e){e.pageX<=this.$el.offset().left&&this.hardRender()},resize:function(){var e=new u(window.innerWidth,window.innerHeight-n);this.$el.css({left:e.x-405,height:e.y}),this.holderHeight=e.y,this.$(".holder").css("height",e.y)},onGearMousedown:function(e){if(this.selected){this.selected.unselect();if(this.selected.model.id===e.model.id){this.selected=undefined,gl.DirtyQueue.mark("cardTab");return}}this.selected=e,this.selected.select(),gl.DirtyQueue.mark("cardTab")},onHover:function(e){this.hovering=e},newItemSlot:function(e,t,n){var r=new N({model:e},this.dragHandler,t,n);return this.listenTo(r,"gearMousedown",this.onGearMousedown),this.listenTo(r,"hovering",this.onHover),this.allViews.push(r),r},hardRender:function(){return this.selected=undefined,this.render()},render:function(){if(!this.tvm.visible)return this;this.renderedOnce||(this.$el.html(this.template({selected:this.selected})),this.$(".holder").css("height",this.holderHeight),this.renderedOnce=!0),this.selected?(this.$(".equipped-cards").find(".header").html("Equipped "+l(this.selected.model.slot)+" Cards"),this.$(".unequipped").find(".header").html("Unequipped "+l(this.selected.model.slot)+" Cards")):(this.$(".equipped-cards").find(".header").html("Click an item above to equip cards"),this.$(".unequipped").find(".header").html("All Unequipped Cards")),_.each(this.allViews,function(e){this.stopListening(e),e.remove()},this),this.allViews=[];var e=document.createDocumentFragment();_.each(this.equipped.slots,function(t){var n=this.newItemSlot(this.equipped[t],t);e.appendChild(n.el)},this),this.$(".equipped").append(e),e=document.createDocumentFragment(),_.each(this.skillchain.skills,function(t,n){var r=this.newItemSlot(t,n);e.appendChild(r.el)},this),this.$(".skillchain").append(e);var t;if(this.selected){e=document.createDocumentFragment(),_.each(this.selected.model.cards,function(t,n){var r=this.newItemSlot(t,n,this.selected.model);e.appendChild(r.el)},this),this.$(".equipped-cards").append(e);var n=typeof this.selected.slot=="number"?"skill":this.selected.slot;t=_.where(this.cardInv.getModels(),{slot:n})}else t=this.cardInv.getModels();t=_.filter(t,function(e){return!e.equipped}),e=document.createDocumentFragment(),_.each(t,function(t){var n=this.newItemSlot(t,t.slot);e.appendChild(n.el)},this),this.$(".unequipped").append(e);if(this.selected){var r=_.find(this.allViews,function(e){return e.model&&this.selected.model.id===e.model.id},this);r&&r.model.equipped?(r.select(),this.selected=r):this.selected=undefined}return this.hovering&&this.hovering.model&&(this.hovering=_.find(this.allViews,function(e){return e.model&&this.hovering.model.id===e.model.id},this),this.hovering&&this.hovering.onMouseenter()),this}}),L=Backbone.View.extend({tagName:"div",className:"itemSlot",template:_.template($("#focused-tab-item-slot-template").html()),events:{mousedown:"onMousedown",mouseenter:"onMouseenter",mouseleave:"onMouseleave"},onMousedown:function(e){this.parent.onChildMousedown(this)},select:function(){this.selected=!0,this.render()},unselect:function(){this.selected=!1,this.render()},onMouseenter:function(){gl.UIEvents.trigger("itemSlotMouseenter",this)},onMouseleave:function(){gl.UIEvents.trigger("itemSlotMouseleave")},initialize:function(e,t){this.parent=t},render:function(){return this.$el.html(this.template(this)),this.selected?this.$el.addClass("selected"):this.$el.removeClass("selected"),this}}),A=Backbone.View.extend({tagName:"div",className:"focused-area",select:function(e){this.model=e,this.render()},unselect:function(){this.model=undefined,this.render()},render:function(){return this.$el.html(this.template(this)),this}}),O=A.extend({template:_.template($("#craft-tab-focus-area-template").html()),events:{"mousedown .upgrade":"onUpgrade"},onUpgrade:function(){this.matInv.tryLevelCard(this.model,1)&&this.render(),r.error("Upgraded %s to level %d",this.model.name,this.model.level),this.cardInv.sort("craft"),gl.DirtyQueue.mark("card:levelup"),gl.EquipEvents.trigger("change")},initialize:function(e,t,n){this.matInv=t,this.cardInv=n,this.listenTo(gl.DirtyListener,"material:new",this.render)}}),M=A.extend({template:_.template($("#recycle-tab-focus-area-template").html()),initialize:function(e,t,n){this.matInv=t,this.recycleManager=n}}),D=Backbone.View.extend({tagName:"div",className:"itemTab",template:_.template($("#focused-tab-template").html()),FocusedAreaClass:A,events:{mouseleave:"onMouseleave"},onMouseleave:function(){gl.UIEvents.trigger("itemSlotMouseleave")},onChildMousedown:function(e,t){this.selected&&(this.selected.unselect(),this.focusedAreaView.unselect()),this.selected&&this.selected.model.id===e.model.id&&!t?this.selected=undefined:(this.selected=e,this.selected.select(),this.focusedAreaView.select(e.model))},tryUnselect:function(){this.selected&&(this.selected.unselect(),this.focusedAreaView.unselect(),this.selected=undefined)},initialize:function(e,t){this.renderedOnce=!1,this.selected=undefined,this.allViews=[],this.listenTo(gl.DirtyListener,"throttledResize",this.resize)},resize:function(){var e=new u(window.innerWidth,window.innerHeight-n);this.$el.css("height",e.y),this.holderHeight=e.y,this.$(".holder").css("height",e.y)},getItems:function(){throw"This is an abstract class"},render:function(){if(!this.tvm.visible)return this;if(!this.renderedOnce){this.$el.html(this.template()),this.$(".focused-area").html(this.focusedAreaView.render().el),this.$inv=this.$(".inventory");var e=this.$(".filters");_.each(this.fbs,function(t){e.append(t.el)}),this.resize(),this.renderedOnce=!0}_.invoke(this.allViews,"remove"),this.allViews=[];var t=this.getItems(),n=document.createDocumentFragment();return _.each(t,function(e){var t=new L({model:e},this);this.allViews.push(t),this.selected&&this.selected.model.id===e.id&&(this.selected=t,t.selected=!0),n.appendChild(t.render().el)},this),this.$inv.append(n),this.focusedAreaView.render(),this}}),P=D.extend({initialize:function(e,t){D.prototype.initialize.call(this,e,t),this.cardInv=t.cardInv,this.matInv=t.matInv,this.fbs=[(new S({},["All","Eq","Ueq"],[undefined,!0,!1])).render(),(new E({},["All","We","He","Ha","Ch","Lg","Sk"],[undefined,"weapon","head","hands","chest","legs","skill"])).render()],gl.DirtyQueue.mapMark(["filterChange","card"],"craftTab"),this.listenTo(gl.DirtyListener,"craftTab",this.render),this.throttler=new f.Throttler(function(){gl.DirtyQueue.mark("sortCraftTab")},1e3),this.listenTo(gl.DirtyListener,"material:new",this.throttler.throttled),this.listenTo(gl.DirtyListener,"sortCraftTab",this.sortRender),this.tvm=new h("craft",this.$el,this.render.bind(this),"footer:buttons:craft","footer:buttons:inv","footer:buttons:cards","footer:buttons:recycle","footer:buttons:build"),this.focusedAreaView=new O({},this.matInv,this.cardInv)},sortRender:function(){var e=this.tvm.visible?"craft":"card";this.cardInv.sort(e),this.render()},getItems:function(){var e=this.fbs[0].filter(this.cardInv.getModels());return e=this.fbs[1].filter(e),e},forceFocus:function(e){var t=_.find(this.allViews,function(t){return t.model.id===e.id},this);this.onChildMousedown(t,!0)},forceDeselect:function(e){this.selected&&this.selected.model.id===e.id&&(this.selected.unselect(),this.focusedAreaView.unselect(),this.selected=undefined)}}),H=D.extend({events:{"click .recycle-restore-button":"onRestore","click .recycle-this-button":"onRecycle","click .recycle-all-button":"onRecycleAll"},onRestore:function(){r.warning("restore"),this.selected&&(this.selected.model.inRecycle=!1,this.selected.unselect(),this.focusedAreaView.unselect(),this.selected=undefined,gl.DirtyQueue.mark("recycleChange"))},onAnyRecycle:function(e){this.selected&&(this.selected.unselect(),this.focusedAreaView.unselect(),this.selected=undefined);var t=[];_.each(e,function(e){t.push(this.recycleManager.getRecycleValue(e))},this),this.matInv.addDrops(t),gl.DirtyQueue.mark("recycleChange")},onRecycle:function(){r.warning("recycle");if(this.selected){var e=this.selected.model.recycle();this.onAnyRecycle([e])}},onRecycleAll:function(){r.warning("recycle all"),slots=[],_.each(this.allViews,function(e){slots.push(e.model.recycle())}),this.onAnyRecycle(slots)},initialize:function(e,t){D.prototype.initialize.call(this,e,t),this.inv=t.inv,this.cardInv=t.cardInv,this.matInv=t.matInv,this.recycleManager=t.recycleManager,this.fbs=[(new E({},["All","We","He","Ha","Ch","Lg","Sk"],[undefined,"weapon","head","hands","chest","legs","skill"])).render()],gl.DirtyQueue.mapMark(["item:new","card:new","filterChange","recycleChange","zone:unlocked"],"recycleTab"),this.listenTo(gl.DirtyListener,"recycleTab",this.render),this.tvm=new h("recycle",this.$el,this.render.bind(this),"footer:buttons:recycle","footer:buttons:inv","footer:buttons:cards","footer:buttons:craft","footer:buttons:build"),this.focusedAreaView=new M({},this.matInv,this.recycleManager)},getItems:function(){var e=this.recycleManager.getModels();return e=this.fbs[0].filter(e),e}}),B=Backbone.View.extend({tagName:"div",className:"zone noselect",template:_.template($("#zone-map-tab-template").html()),events:{mousedown:"onClick"},onClick:function(){this.trigger("click",this.model.zoneNum)},render:function(){return this.model.running&&this.$el.addClass("running"),this.$el.html(this.template(this.model)),this}}),j=Backbone.View.extend({tagName:"div",className:"map",events:{"click #autoAdvance":"toggleAutoAdvance"},initialize:function(e,t){this.zone=t.zone,this.settings=t.settings,this.tvm=new h("map",this.$el,this.render.bind(this),"footer:buttons:map","footer:buttons:stats","footer:buttons:help","footer:buttons:config","footer:buttons:account"),this.$el.html($("#map-tab-template").html()),this.$holder=this.$(".holder"),this.resize(),this.listenTo(gl.DirtyListener,"throttledResize",this.resize),this.listenTo(gl.DirtyListener,"zone:unlocked",this.render),this.listenTo(gl.DirtyListener,"zone:start",this.render)},resize:function(){this.$el.css({height:window.innerHeight-n}),this.$holder.css({height:window.innerHeight-n})},toggleAutoAdvance:function(){this.settings.autoAdvance=this.$("#autoAdvance").prop("checked")},zoneClick:function(e){r.UI("MapTab: Clicked on zone: %s",e),this.zone.nextZone=e,this.zone.newZone(e),this.render()},render:function(){if(!this.tvm.visible)return this;_.each(this.subs,function(e){e.remove(),this.stopListening(e)},this),this.subs=[];var e=document.createDocumentFragment(),t=document.createElement("div");t.innerHTML='<p><input type="checkbox" id="autoAdvance" /> Auto-advance on zone clear</p>',e.appendChild(t);var n,r,i,s,o=this.zone.unlockedZones+1;for(var u=o-1;u>=0;u--){var a=this.zone.getZoneFromNum(u),f=this.zone.zoneOrder.length,l=a.upgradeCount,c=a.zoneI,h=Math.max(1,u*5),i=a.name,s=this.zone.allZones[i],p=a.nameStr;n=_.extend({name:p,level:h,running:u===this.zone.nextZone,zoneNum:u},s),r=new B({model:n}),this.listenTo(r,"click",this.zoneClick),this.subs.push(r),e.appendChild(r.render().el)}return this.$holder.html(e),$("#autoAdvance").prop("checked",this.settings.autoAdvance),this}}),F=Backbone.View.extend({tagName:"div",className:"config",template:_.template($("#config-template").html()),events:{"click #wipebutton":"wipe","click #namebutton":"nameButton","click #devbutton":"devButton","click #donateButton":"donate","click #enableBuildHotkeys":"toggleEnableBuildHotkeys","click #autoCraft":"toggleEnableAutoCraft","click #pauseOnDeath":"pauseOnDeath","click #enableHeroDmgMsgs":"enableHeroDmgMsgs","click #enableMonDmgMsgs":"enableMonDmgMsgs","click #enableMatMsgs":"enableMatMsgs","click #backOnDeath":"backOnDeath","click #bossPause":"bossPause","change #moveAngle":"moveAngle","change #zonesBack":"zonesBack","click #disable-shake":"disableShake"},initialize:function(e,t){this.zone=t.zone,this.settings=t.settings,this.hero=t.hero,this.tvm=new h("config",this.$el,this.render.bind(this),"footer:buttons:config","footer:buttons:map","footer:buttons:help","footer:buttons:stats","footer:buttons:account"),this.$el.html('<div class="holder"></div>'),this.$holder=this.$(".holder"),this.resize(),this.listenTo(gl.DirtyListener,"throttledResize",this.resize),$(window).on("popstate",function(){this.handler&&this.handler.close()})},resize:function(){this.$el.css({height:window.innerHeight-n}),this.$holder.css({height:window.innerHeight-n})},render:function(){return this.tvm.visible?(this.$holder.html(this.template(this)),$("#enableBuildHotkeys").prop("checked",!!gl.settings.enableBuildHotkeys),$("#disable-shake").prop("checked",!!gl.settings.disableShake),$("#autoCraft").prop("checked",!!gl.settings.autoCraft),$("#pauseOnDeath").prop("checked",!!gl.settings.pauseOnDeath),$("#enableHeroDmgMsgs").prop("checked",!!gl.settings.enableHeroDmgMsgs),$("#enableMonDmgMsgs").prop("checked",!!gl.settings.enableMonDmgMsgs),$("#enableMatMsgs").prop("checked",!!gl.settings.enableMatMsgs),$("#backOnDeath").prop("checked",!!gl.settings.backOnDeath),$("#bossPause").prop("checked",!!gl.settings.bossPause),$("#moveAngle").val(this.hero.moveAngle?this.hero.moveAngle:0),$("#zonesBack").val(gl.settings.zonesBack),this):this},donate:function(e){var t=Math.round(parseFloat($("#donationamount").val())*100);t=Math.max(100,t),r.donateAttempt(t),this.handler=StripeCheckout.configure({key:"pk_live_Udj2pXdBbHxWllQWuAzempnY",bitcoin:!0,token:function(e){return r.handleDonationToken(e,t)}}),this.handler.open({name:"DungeonsOfDerp",description:"Donate towards development",amount:t}),e.preventDefault()},toggleEnableBuildHotkeys:function(){gl.settings.enableBuildHotkeys=this.$("#enableBuildHotkeys").prop("checked")},toggleEnableAutoCraft:function(){gl.settings.autoCraft=this.$("#autoCraft").prop("checked")},pauseOnDeath:function(){gl.settings.pauseOnDeath=this.$("#pauseOnDeath").prop("checked")},enableHeroDmgMsgs:function(){gl.settings.enableHeroDmgMsgs=this.$("#enableHeroDmgMsgs").prop("checked")},enableMonDmgMsgs:function(){gl.settings.enableMonDmgMsgs=this.$("#enableMonDmgMsgs").prop("checked")},enableMatMsgs:function(){gl.settings.enableMatMsgs=this.$("#enableMatMsgs").prop("checked")},backOnDeath:function(){gl.settings.backOnDeath=this.$("#backOnDeath").prop("checked")},bossPause:function(){gl.settings.bossPause=this.$("#bossPause").prop("checked")},moveAngle:function(){gl.setMoveAngle(this.$("#moveAngle").val())},zonesBack:function(){if(isNaN(parseInt(this.$("#zonesBack").val()))||parseInt(this.$("#zonesBack").val())<0)return;gl.settings.zonesBack=parseInt(this.$("#zonesBack").val())},wipe:function(){r.error("Wiping save and creating new char with version: %s",gl.VERSION_NUMBER),r.reportNewBuild(),localStorage.removeItem("data"),location.reload()},nameButton:function(){var e=$("#charname").val();this.hero.name=e.length<64?e:"SMARTASS",gl.DirtyQueue.mark("rename")},devButton:function(){var e=$("#devmsg").val();r.feedback(this.hero.name+" says: "+e),$("#devmsg").val("")},disableShake:function(){gl.settings.disableShake=$("#disable-shake").prop("checked")}}),I=Backbone.View.extend({tagName:"div",className:"help",initialize:function(e,t){this.template=_.template($("#help-template").html()),this.zone=t.zone,this.tvm=new h("help",this.$el,this.render.bind(this),"footer:buttons:help","footer:buttons:map","footer:buttons:config","footer:buttons:stats","footer:buttons:account"),this.$el.html('<div class="holder"></div>'),this.$holder=this.$(".holder"),this.resize(),this.listenTo(gl.DirtyListener,"throttledResize",this.resize)},resize:function(){this.$el.css({height:window.innerHeight-n}),this.$holder.css({height:window.innerHeight-n})},render:function(){return this.tvm.visible?(this.$holder.html(this.template),this):this}}),q=Backbone.View.extend({tagName:"div",className:"build",initialize:function(e,t){this.template=_.template($("#build-template").html()),this.zone=t.zone,this.tvm=new h("build",this.$el,this.render.bind(this),"footer:buttons:build","footer:buttons:recycle","footer:buttons:inv","footer:buttons:cards","footer:buttons:craft"),this.$el.html('<div class="holder"></div>'),this.$holder=this.$(".holder"),this.resize(),this.listenTo(gl.DirtyListener,"throttledResize",this.resize),this.listenTo(gl.UIEvents,"buildsave",this.render),this.listenTo(gl.UIEvents,"buildload",this.render)},resize:function(){this.$el.css({height:window.innerHeight-n}),this.$holder.css({height:window.innerHeight-n})},render:function(){if(!this.tvm.visible)return this;this.$holder.html(this.template),gl.lastBuildLoaded!==undefined&&$("#buildbuttons").append('<div class="buildrow" style="margin-bottom:10px; margin-left:5px;">Last Build Loaded: '+gl.lastBuildLoaded+"</div>");for(var e=0;e<21;e++){var t='<div class="buildrow" style="margin-bottom:10px; margin-left:5px;"><span style="margin-right:10px">'+e+'</span><input type="button" value="load" onclick="gl.loadBuild('+e+')">',n=gl.builds[e],r=n===undefined||n===null?"Empty":n.name!==undefined?n.name:"Build "+e;t+='<span style="margin:10px;">'+r+"</span>",t+='<input type="button" value="save" onclick="gl.saveBuild('+e+')">',t+="</div>",$("#buildbuttons").append(t)}var i='<div>Rename Build<br><input type="text" id="renamebuild"><input type="number" min="0" max="20" value="0" id="renamebuildnum"><input type="button" value="Rename" onclick="gl.renameBuild();"></div>';return $("#buildbuttons").append(i),this}}),R=Backbone.View.extend({tagName:"div",className:"account",events:{"click #signInSubmit":"signInSubmit","click #newAccSubmit":"newAccSubmit","click #fbFullSave":"fbFullSave","click #fbFullLoad":"fbFullLoad","click #signOut":"signOut","click #prestige":"prestige","click .spendPrestige":"spendPrestige"},initialize:function(e,t){this.template=_.template($("#account-template").html()),this.zone=t.zone,this.game=t,this.tvm=new h("account",this.$el,this.render.bind(this),"footer:buttons:account","footer:buttons:map","footer:buttons:config","footer:buttons:stats","footer:buttons:help"),this.$el.html('<div class="holder"></div>'),this.$holder=this.$(".holder"),this.prestigeStats=["moveSpeed","strength","dexterity","wisdom","vitality","maxHp","maxMana","armor","dodge","eleResistAll","fireResist","coldResist","lightResist","poisResist","meleeDmg","rangeDmg","spellDmg","physDmg","fireDmg","coldDmg","lightDmg","poisDmg","accuracy"],this.remainingPrestige,this.game.hero.prestige===undefined?(this.game.hero.prestige={},_.each(this.prestigeStats,function(e){this.game.hero.prestige[e]=0},this)):_.each(this.prestigeStats,function(e){this.game.hero.prestige[e]===undefined&&(this.game.hero.prestige[e]=0)},this),this.resize(),this.listenTo(gl.DirtyListener,"throttledResize",this.resize),this.listenTo(gl.DirtyListener,"hero:xp",this.render)},signInSubmit:function(){gl.FB.authWithPassword({email:$("#signInUsername").val(),password:$("#signInPassword").val()},function(e,t){console.log("err",e),e!==undefined&&e!==null&&alert(e.message),console.log("a",t),t!==undefined?(gl.accountId=t.uid,localStorage.setItem("accountId",t.uid),this.render()):console.log(e)}.bind(this),{})},newAccSubmit:function(){gl.FB.createUser({email:$("#newAccUsername").val(),password:$("#newAccPassword").val()},function(e,t){if(e)switch(e.code){case"EMAIL_TAKEN":alert("The new user account cannot be created because the email is already in use.");break;case"INVALID_EMAIL":alert("The specified email is not a valid email.");break;default:alert("Error creating user:",e)}else alert("Successfully created user account with uid:"+t.uid+" - Please sign in")})},fbFullSave:function(){this.game.fbFullSave()},fbFullLoad:function(){this.game.fbFullLoad()},signOut:function(){gl.FB.unauth(),gl.accountId=undefined,localStorage.removeItem("accountId"),this.render()},resize:function(){this.$el.css({height:window.innerHeight-n}),this.$holder.css({height:window.innerHeight-n})},prestige:function(){var e=Math.max(Math.round(this.game.hero.prestigeTotal*.9),this.lvlPrestigeVal(this.game.hero.level));r.error("Prestiging for "+e+" points"),r.prestige(e),localStorage.removeItem("data"),localStorage.setItem("prestigeTotal",e),location.reload()},spendPrestige:function(){arguments[0].shiftKey&&(recurse=!0);var e=arguments[0].currentTarget.id;while(this.game.hero.prestige[e]!==undefined&&this.remainingPrestige>this.game.hero.prestige[e]){this.game.hero.prestige[e]+=1,this.game.hero.computeAttrs(),this.render();if(recurse!==!0)return}},render:function(){if(!this.tvm.visible)return this;this.$holder.html(this.template);var e=this.lvlPrestigeVal(this.game.hero.level);$("#prestigeNow").html(Math.max(Math.round(this.game.hero.prestigeTotal*.9),this.lvlPrestigeVal(this.game.hero.level))),$("#prestigeNext").html(e),$("#prestigeTotal").html(this.game.hero.prestigeTotal);var t="",n=0;return _.each(this.prestigeStats,function(e){var r=namespace.bot.itemref.ref.statnames[e],i=this.game.hero.prestige[e];t+="<p>"+r+": +"+i+"% (costs "+(i+1)+")",t+='<input class="spendPrestige" type="button" value="+" id="'+e+'" style="float:right;"></p>',n+=_.range(i+1).sum()},this),this.remainingPrestige=this.game.hero.prestigeTotal-n,$("#remainingPrestige").html(this.remainingPrestige),gl.FB.getAuth()!==null&&this.$holder.find("div").append(t),this},lvlPrestigeVal:function(e){return this.game.hero.versionCreated.split("-")[1]>=3?Math.pow(Math.max(0,e-100),2):0}});e.extend({GameView:c,StatsTab:d})}),namespace.module("bot.main",function(e,t){function d(){gl.time=0,gl.settings={},gl.sessionId=Math.floor(Math.random()*1e4);if(localStorage.getItem("clientId")==null){var e=Math.floor(Math.random()*1e7);localStorage.setItem("clientId",e),gl.clientId=e}else gl.clientId=localStorage.getItem("clientId");gl.FB=new Firebase("https://web.archive.org/web/20170518220231/https://fiery-heat-4226.firebaseio.com/");var t=gl.FB.getAuth();console.log("auth",t);if(t!==null){if(t.uid===undefined)throw"how do i have valid auth but no uid?";gl.FB.child("accounts").child(t.uid).child("lastClientId").set(gl.clientId),gl.FB.child("accounts").child(t.uid).child("clientIds").child(gl.clientId).set(Firebase.ServerValue.TIMESTAMP),gl.FB.child("accounts").child(t.uid).child("email").set(t.password.email),t!==null?(console.log("signing in as "+gl.FB.getAuth().uid),t!==gl.accountId,gl.accountId=t.uid):console.log("have account, but not signed in")}gl.VERSION_NUMBER="0-3-4",n.init(gl.VERSION_NUMBER,gl.sessionId),gl.ZONE_LEVEL_SPACING=5,$("title").html("Dungeons of Derp v"+gl.VERSION_NUMBER.replace(/\-/g,".")+" ALPHA"),n.info("onReady");var r=new v,i=new u.GameView({},r);gl.gameView=i;var s=new m(r);$(window).on("keydown",s.onKeydown.bind(s))}function m(e){this.gameModel=e}var n=namespace.bot.log,r=namespace.bot.inv,i=namespace.bot.menu,s=namespace.bot.entity,o=namespace.bot.zone,u=namespace.bot.views,a=namespace.bot.drops,f=namespace.bot.storage,l=10,c={0:.1,.1:.2,.2:.5,.5:1,1:2,2:5,5:10,10:50,50:250,250:250},h={250:50,50:10,10:5,5:2,2:1,1:.5,.5:.2,.2:.1,.1:0,0:0},p=(new Date).getTime(),v=gl.Model.extend({initialize:function(){this.lastSave=0,gl.builds=[],this.inv=new r.ItemCollection,this.cardInv=new r.CardCollection,this.recycleManager=new r.RecycleManager(this.inv,this.cardInv),this.matInv=new r.MaterialManager(this.cardInv),gl.canLevelCard=this.matInv.canLevelCard.bind(this.matInv),this.newStateManager=new r.NewStateManager(this.inv,this.cardInv),this.hero=new s.newHeroSpec(this.inv,this.cardInv,this.matInv),this.cardInv.equipped=this.hero.equipped,this.cardInv.skillchain=this.hero.skillchain,gl.cardSort=this.cardInv.sort.bind(this.cardInv),gl.pause=this.triggerPause.bind(this),gl.setMoveAngle=this.setHeroMoveAngle.bind(this),this.settings=this.defaultSettings(),this.zone=new o.ZoneManager(this.hero,this.settings),gl.getMonStats=this.zone.getMonStats,gl.valMons=this.zone.valMons,gl.saveBuild=this.saveBuild.bind(this),gl.loadBuild=this.loadBuild.bind(this),gl.renameBuild=this.renameBuild,this.recycleManager.zone=this.zone,this.gameTime=(new Date).getTime(),this.curTime=this.gameTime,this.gameSpeed=1;var e=this.load();e||(this.noobGear(),n.error("No save data found, starting new character with sessionId: %s",gl.sessionId)),this.zone.settings=this.settings,gl.settings=this.settings,this.zone.newZone(this.zone.nextZone),this.zonesCleared=0,this.deaths=0,this.mspf=10,this.listenTo(gl.GameEvents,"reportData",this.reportData),this.listenTo(gl.GameEvents,"beatgame",this.beatGame),this.listenTo(gl.GameEvents,"zoneClear",this.zoneClear),setInterval(this.intervalTick.bind(this),1e3),requestAnimFrame(this.onFrame.bind(this))},defaultSettings:function(){return{enableBuildHotkeys:!0,autoAdvance:!0,disableShake:!1,autoCraft:!0,pauseOnDeath:!1,backOnDeath:!1,bossPause:!1,zonesBack:1,enableHeroDmgMsgs:!0,enableMonDmgMsgs:!0,enableMatMsgs:!0}},fbFullSave:function(){console.log("main fullsave");var e=this.toJSON();gl.FB.child("accounts").child(gl.accountId).child("fullData").set(e)},fbFullLoad:function(){gl.FB.child("accounts").child(gl.accountId).child("fullData").once("value",function(e){console.log(e.val()),localStorage.setItem("data",f.enc(JSON.stringify(e.val()))),location.reload()},function(e){console.log(e)})},trySave:function(){var e=(new Date).getTime();if(e-this.lastSave<1e3)return;this.lastSave=e,localStorage.setItem("data",f.enc(JSON.stringify(this.toJSON())))},toJSON:function(){var e={builds:gl.builds,settings:this.settings,version:gl.VERSION_NUMBER,cardInv:this.cardInv.toJSON(),inv:this.inv.toJSON(),matInv:this.matInv.toJSON(),zone:this.zone.toJSON(),hero:this.hero.toJSON(),skillchain:this.hero.skillchain.toJSON(),equipped:this.hero.equipped.toJSON(),cheats:0,userXpMult:1,timeCoef:1,gameTime:this.gameTime};return e},reportData:function(){n.reportData(this)},saveBuild:function(e){if(gl.builds[e]!==undefined&&gl.builds[e]!==null&&gl.builds[e].name!==undefined)var t=gl.builds[e].name;var r={},i=this.toJSON();return r.equipped=i.equipped,r.skillchain=i.skillchain,r.inv=_.filter(i.inv,function(e){return e.cardNames.length}),e>=0&&(gl.builds[e]=r,n.warning("Build saved to slot %d",e),t!==undefined&&(gl.builds[e].name=t)),gl.UIEvents.trigger("buildsave"),r},loadBuild:function(e){var t,r,i=gl.builds[e];if(i!==undefined&&i!==null){i.name?gl.lastBuildLoaded=i.name:gl.lastBuildLoaded="Build "+e,_.each(this.hero.equipped.slots,function(e){this.hero.equipped.unequip(e)},this),_.each(_.range(5),function(e){this.hero.skillchain.equip(undefined,e)},this),this.hero.skillchain.fromJSON(i.skillchain,this.inv),this.hero.equipped.fromJSON(i.equipped,this.inv),_.each(i.inv,function(e){var t=_.findWhere(this.inv.getModels(),{name:e.name});t&&t.loadCards(e.cardNames,this.cardInv)},this),n.warning("Build loaded from slot %d",e),gl.UIEvents.trigger("buildload");return}n.warning("No build loaded, slot %d empty or invalid",e)},renameBuild:function(){var e=$("#renamebuild").val(),t=$("#renamebuildnum").val();gl.builds[t]&&(gl.builds[t].name=e),gl.UIEvents.trigger("buildsave")},beatGame:function(){n.reportWinner(this.hero,this.zone)},deathPause:function(){gl.settings.pauseOnDeath&&(this.gameSpeed=0)},triggerPause:function(){this.gameSpeed=0},setHeroMoveAngle:function(e){this.hero.moveAngle=e},zoneClear:function(){n.reportClear(this)},load:function(){var e=f.getData();return e?(n.warning("found some data"),e.cheats!==undefined&&e.cheats!=0&&n.error("cheat mode activated"),e.timeCoef!==undefined&&e.timeCoef!=1&&n.error("time stretching activated"),e.userXpMult!==undefined&&e.userXpMult!=1&&n.error("xp bonus activated"),gl.builds=e.builds!==undefined?e.builds:[],this.settings=e.settings!==undefined?e.settings:this.defaultSettings(),e=this.upgradeData(e),this.cardInv.fromJSON(e.cardInv),this.inv.fromJSON(e.inv,this.cardInv),this.matInv.fromJSON(e.matInv),this.zone.fromJSON(e.zone),this.hero.fromJSON(e.hero),this.hero.skillchain.fromJSON(e.skillchain,this.inv),this.hero.equipped.fromJSON(e.equipped,this.inv),this.gameTime=e.gameTime,this.hero.computeAttrs(),this.cardInv.sort(),!0):!1},upgradeData:function(e){switch(e.version){case undefined:n.error("Upgrading data from v0-1-1b to 0-1-2"),e=JSON.parse(JSON.stringify(e).replace(/putrified/g,"putrefied")),_.each(e.cardInv,function(e){e.qp=0});case"0-1-2":case"0-1-3":case"0-1-4":n.error("Upgrading data from v0-1-3 to 0-1-4");var t=namespace.bot.itemref.ref.zoneOrder.order,r=t.indexOf(e.zone.nextZone),i=Math.max(r,e.zone.unlockedZones);i>=t.length&&(i=t.length-1),e.zone.unlockedZones=i;case"0-1-5":n.error("Upgrading data from v0-1-4 to 0-1-5"),e.settings=this.defaultSettings();case"0-1-6":n.error("Upgrading data from v0-1-5 to 0-1-6"),e.settings.autoAdvance=!1;case"0-1-7":case"0-1-8":case"0-1-9":this.hero.versionCreated="legacy";case"0-1-10":case"0-1-11":case"0-1-12":case"0-1-13":case"0-1-14":case"0-1-15":case"0-1-16":e.gameTime=(new Date).getTime();case"0-1-17":case"0-1-18":case"0-1-19":case"0-1-20":case"0-1-21":case"0-1-22":case"0-1-23":case"0-1-24":case"0-2-0"
:case"0-2-1":case"0-2-2":case"0-2-3":case"0-2-4":case"0-2-5":e.settings.autoCraft=!1;case"0-2-6":case"0-2-7":case"0-2-8":e.settings.pauseOnDeath=!1;case"0-2-9":case"0-2-10":case"0-2-11":case"0-2-12":e.settings.bossPause=!1,e.settings.backOnDeath=!1;case"0-2-13":e.settings.zonesBack=1;case"0-2-14":case"0-2-15":case"0-2-16":case"0-2-17":case"0-2-18":case"0-2-19":case"0-2-20":case"0-2-21":case"0-2-22":case"0-2-23":case"0-2-24":e.settings.enableHeroDmgMsgs=!0,e.settings.enableMonDmgMsgs=!0;case"0-2-25":case"0-2-26":case"0-2-27":case"0-2-28":case"0-2-29":e.settings.enableMatMsgs=!0;case"0-2-30":case"0-2-31":case"0-3-0":case"0-3-1":case"0-3-2":if(localStorage.getItem("uid")==3308607898)return localStorage.removeItem("data"),localStorage.setItem("prestigeTotal",1e4),location.href=location.href,undefined;case"0-3-3":if(localStorage.getItem("uid")==3308607898)return localStorage.removeItem("data"),localStorage.setItem("prestigeTotal",41204),xs,location.href=location.href,undefined;break;default:n.error("No upgrade required")}return e.version=gl.VERSION_NUMBER,n.error("Data is up to version %s spec",e.version),e},noobGear:function(){n.warning("noob gear"),this.inv.noobGear(),this.cardInv.noobGear();var e=this.inv.getModels();this.hero.equipped.equip(_.findWhere(e,{name:"cardboard sword"}),"weapon"),this.hero.equipped.equip(_.findWhere(e,{name:"balsa helmet"}),"head"),this.hero.equipped.equip(_.findWhere(e,{name:"latex gloves"}),"hands"),this.hero.equipped.equip(_.findWhere(e,{name:"t-shirt"}),"chest"),this.hero.equipped.equip(_.findWhere(e,{name:"jeans"}),"legs"),this.hero.skillchain.equip(_.findWhere(e,{name:"basic melee"}),0)},intervalTick:function(){var e=(new Date).getTime();e-this.curTime>2e3&&this.modelTick()},onFrame:function(){(new Date).getTime()-this.curTime>this.mspf&&(this.modelTick(),this.visTick()),this.trySave(),requestAnimFrame(this.onFrame.bind(this))},modelTick:function(){var e=(new Date).getTime(),t=e-this.curTime,n=e-this.gameTime;this.curTime=e;if(n<=0||t<=0)return;var r=t*this.gameSpeed,i=r;this.gameSpeed===50?i*=2:this.gameSpeed===10?i*=1.5:this.gameSpeed===5&&(i*=1.2);if(i>n){var s=n/i;r*=s,i=n,this.gameSpeed=1,gl.MessageEvents.trigger("message",{text:"No time left!",type:"timeleft",pos:this.zone.hero.pos,color:"rgba(230, 10, 10, 0.8)",lifespan:2e3,verticalOffset:0,time:gl.time,expires:gl.time+2e3})}this.gameTime+=i;var o;while(r>0)o=r>10?10:r,gl.time+=o,gl.lastTimeIncr=o,r-=o,this.zone.zoneTick();this.curTime-this.gameTime>1728e5&&(this.gameTime=this.curTime-1728e5)},visTick:function(){gl.DirtyQueue.mark("tick"),gl.DirtyQueue.triggerAll(gl.DirtyListener),gl.DirtyQueue.triggerAll(gl.DirtyListener),gl.DirtyQueue.triggerAll(gl.DirtyListener)},bestGear:function(e,t){var n=_.where(this.inv.getModels(),{itemType:e});return n=_.where(n,{type:t}),n=_.sortBy(n,function(e){return e.level}),n.length>0?n.pop():undefined},autoEquip:function(){this.hero.equipped.equip(this.bestGear("weapon","melee"),"weapon"),this.hero.equipped.equip(this.bestGear("armor","head"),"head"),this.hero.equipped.equip(this.bestGear("armor","chest"),"chest"),this.hero.equipped.equip(this.bestGear("armor","hands"),"hands"),this.hero.equipped.equip(this.bestGear("armor","legs"),"legs");var e=_.where(this.inv.getModels(),{itemType:"skill"});e=_.sortBy(e,function(e){return-e.cooldownTime}),n.error("skill names: %s",_.pluck(e,"name").join(", ")),n.error("skill cooldownTimes: %s",_.pluck(e,"cooldownTime").join(", ")),_.each(e.slice(0,5),function(e,t){this.hero.skillchain.equip(e,t)},this)},adjustSpeed:function(e,t){e==="up"?(this.gameSpeed=c[this.gameSpeed],t||(this.gameSpeed=Math.min(50,this.gameSpeed))):e==="down"?this.gameSpeed=h[this.gameSpeed]:e==="play-pause"&&(this.gameSpeed=this.gameSpeed===0?1:0)},validateZones:function(){console.log(this.zone);var e=this.zone.statResult;console.log(e),_.each(e.avgs,function(t,n){if(t===0)return;console.log(n+" ratio : "+e.maxs[n]/e.avgs[n])})}});m.prototype.liveKeys=function(e,t){key=e.keyCode;var n=32,r=38,i=40,s=72,o=80,u=67,a=73,f=70,l=82,c=77,h=83,p=21;if(key===n)this.gameModel.adjustSpeed("play-pause",t);else if(key===r)this.gameModel.adjustSpeed("up",t);else if(key===i)this.gameModel.adjustSpeed("down",t);else if(key>=48&&key<=57&&this.gameModel.settings.enableBuildHotkeys){var d=key-48;e.shiftKey?gl.saveBuild(d):gl.loadBuild(d)}else key==o?this.gameModel.zone.hero.tryUsePotion():key==u?gl.UIEvents.trigger("footer:buttons:cards"):key==a?gl.UIEvents.trigger("footer:buttons:inv"):key==f?gl.UIEvents.trigger("footer:buttons:craft"):key==l?gl.UIEvents.trigger("footer:buttons:recycle"):key==c?gl.UIEvents.trigger("footer:buttons:map"):key==s?gl.UIEvents.trigger("footer:buttons:help"):key==h?gl.UIEvents.trigger("footer:buttons:stats"):key==p?gl.UIEvents.trigger("footer:buttons:config"):key==192&&e.shiftKey},m.prototype.onKeydown=function(e){if(document.activeElement.nodeName!=="BODY")return;var t=isNaN(parseInt(localStorage.getItem("uid")));this.liveKeys(e,t);if(!t)return;var r=this.gameModel,i=32,s=69,o=84,u=38,f=40,l=66,c=88,h=86,p=90,d=e.keyCode;n.info("keydown, key: %d",e.keyCode);if(d===s)n.error("XP Cheat!"),this.gameModel.hero.applyXp(this.gameModel.hero.getNextLevelXp());else if(d===o)n.error("Time Cheat"),this.gameModel.gameTime-=36e5;else if(d==p){var v=undefined,m=this.gameModel.zone.statResult;v!=undefined?(n.warning("%s: avg: %f, max: %f, min: %f",v,m.avgs[v],m.maxs[v],m.mins[v]),console.log(m.mons)):(console.log("avgs",m.avgs),console.log("maxs",m.maxs),console.log("mins",m.mins))}else if(d===l||d===c||d===h){n.error("Melee Equipment cheat");var g=this.gameModel.inv.getModels(),y=this.gameModel.hero.equipped,b=this.gameModel.hero.skillchain;d===l?(this.gameModel.inv.addDrops([a.dropFactory("item",["weapon","spikey mace"]),a.dropFactory("skill","lethal strike"),a.dropFactory("skill","flaming debris"),a.dropFactory("skill","ground smash")]),y.equip(_.findWhere(g,{name:"spikey mace"}),"weapon"),b.equip(_.findWhere(g,{name:"ground smash"}),0),b.equip(_.findWhere(g,{name:"lethal strike"}),1),b.equip(_.findWhere(g,{name:"flaming debris"}),2),b.equip(_.findWhere(g,{name:"basic melee"}),4)):d===c?(this.gameModel.inv.addDrops([a.dropFactory("item",["weapon","composite bow"]),a.dropFactory("skill","headshot"),a.dropFactory("skill","speed shot"),a.dropFactory("skill","piercing shot"),a.dropFactory("skill","explonential shot")]),this.gameModel.cardInv.addDrops([a.dropFactory("card",["more projectiles",2])]),y.equip(_.findWhere(g,{name:"composite bow"}),"weapon"),b.equip(_.findWhere(g,{name:"headshot"}),0),b.equip(_.findWhere(g,{name:"speed shot"}),1),b.equip(_.findWhere(g,{name:"basic range"}),4)):d===h&&(this.gameModel.inv.addDrops([a.dropFactory("item",["weapon","star wand"]),a.dropFactory("skill","fire ball"),a.dropFactory("skill","poison ball"),a.dropFactory("skill","lightning ball"),a.dropFactory("skill","ice ball"),a.dropFactory("skill","ice blast"),a.dropFactory("skill","nova")]),y.equip(_.findWhere(g,{name:"star wand"}),"weapon"),b.equip(_.findWhere(g,{name:"nova"}),0),b.equip(_.findWhere(g,{name:"poison ball"}),1),b.equip(_.findWhere(g,{name:"ice ball"}),2),b.equip(_.findWhere(g,{name:"lightning ball"}),3),b.equip(_.findWhere(g,{name:"basic spell"}),4)),this.gameModel.inv.addDrops([a.dropFactory("item",["armor","crusader helm"]),a.dropFactory("item",["armor","leatherplate armor"]),a.dropFactory("item",["armor","buckaneer boots"]),a.dropFactory("item",["armor","goldenscale gauntlets"])]),y.equip(_.findWhere(g,{name:"crusader helm"}),"head"),y.equip(_.findWhere(g,{name:"leatherplate armor"}),"chest"),y.equip(_.findWhere(g,{name:"buckaneer boots"}),"legs"),y.equip(_.findWhere(g,{name:"goldenscale gauntlets"}),"hands"),this.gameModel.cardInv.addDrops([a.dropFactory("card",["heart juice",4]),a.dropFactory("card",["brain juice",4]),a.dropFactory("card",["hot sword",4])])}},e.extend({onReady:d,GameModel:v})});
/*
     FILE ARCHIVED ON 22:02:31 May 18, 2017 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 06:23:07 Sep 26, 2018.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
*/
/*
playback timings (ms):
  LoadShardBlock: 259.971 (3)
  esindex: 0.007
  captures_list: 276.562
  CDXLines.iter: 11.69 (3)
  PetaboxLoader3.datanode: 65.503 (5)
  exclusion.robots: 0.287
  exclusion.robots.policy: 0.275
  RedisCDXSource: 1.581
  PetaboxLoader3.resolve: 193.027 (3)
  load_resource: 141.073
*/